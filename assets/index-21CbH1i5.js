var Jy=Object.defineProperty;var r0=t=>{throw TypeError(t)};var Xy=(t,e,r)=>e in t?Jy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Ka=(t,e,r)=>Xy(t,typeof e!="symbol"?e+"":e,r),up=(t,e,r)=>e.has(t)||r0("Cannot "+r);var un=(t,e,r)=>(up(t,e,"read from private field"),r?r.call(t):e.get(t)),bi=(t,e,r)=>e.has(t)?r0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),xi=(t,e,r,xe)=>(up(t,e,"write to private field"),xe?xe.call(t,r):e.set(t,r),r),li=(t,e,r)=>(up(t,e,"access private method"),r);var Fh=(t,e,r,xe)=>({set _(Se){xi(t,e,Se,r)},get _(){return un(t,e,xe)}});function _mergeNamespaces(t,e){for(var r=0;r<e.length;r++){const xe=e[r];if(typeof xe!="string"&&!Array.isArray(xe)){for(const Se in xe)if(Se!=="default"&&!(Se in t)){const Ee=Object.getOwnPropertyDescriptor(xe,Se);Ee&&Object.defineProperty(t,Se,Ee.get?Ee:{enumerable:!0,get:()=>xe[Se]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const Se of document.querySelectorAll('link[rel="modulepreload"]'))xe(Se);new MutationObserver(Se=>{for(const Ee of Se)if(Ee.type==="childList")for(const Pe of Ee.addedNodes)Pe.tagName==="LINK"&&Pe.rel==="modulepreload"&&xe(Pe)}).observe(document,{childList:!0,subtree:!0});function r(Se){const Ee={};return Se.integrity&&(Ee.integrity=Se.integrity),Se.referrerPolicy&&(Ee.referrerPolicy=Se.referrerPolicy),Se.crossOrigin==="use-credentials"?Ee.credentials="include":Se.crossOrigin==="anonymous"?Ee.credentials="omit":Ee.credentials="same-origin",Ee}function xe(Se){if(Se.ep)return;Se.ep=!0;const Ee=r(Se);fetch(Se.href,Ee)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function xe(){return this instanceof xe?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(xe){var Se=Object.getOwnPropertyDescriptor(t,xe);Object.defineProperty(r,xe,Se.get?Se:{enumerable:!0,get:function(){return t[xe]}})}),r}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(xe,Se,Ee){var Pe=null;if(Ee!==void 0&&(Pe=""+Ee),Se.key!==void 0&&(Pe=""+Se.key),"key"in Se){Ee={};for(var Ce in Se)Ce!=="key"&&(Ee[Ce]=Se[Ce])}else Ee=Se;return Se=Ee.ref,{$$typeof:t,type:xe,key:Pe,ref:Se!==void 0?Se:null,props:Ee}}return reactJsxRuntime_production.Fragment=e,reactJsxRuntime_production.jsx=r,reactJsxRuntime_production.jsxs=r,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),xe=Symbol.for("react.strict_mode"),Se=Symbol.for("react.profiler"),Ee=Symbol.for("react.consumer"),Pe=Symbol.for("react.context"),Ce=Symbol.for("react.forward_ref"),Re=Symbol.for("react.suspense"),Be=Symbol.for("react.memo"),Me=Symbol.for("react.lazy"),Ve=Symbol.for("react.activity"),Fe=Symbol.iterator;function Ie(xn){return xn===null||typeof xn!="object"?null:(xn=Fe&&xn[Fe]||xn["@@iterator"],typeof xn=="function"?xn:null)}var qe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ye=Object.assign,Xe={};function je(xn,Ge,Oe){this.props=xn,this.context=Ge,this.refs=Xe,this.updater=Oe||qe}je.prototype.isReactComponent={},je.prototype.setState=function(xn,Ge){if(typeof xn!="object"&&typeof xn!="function"&&xn!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,xn,Ge,"setState")},je.prototype.forceUpdate=function(xn){this.updater.enqueueForceUpdate(this,xn,"forceUpdate")};function Qe(){}Qe.prototype=je.prototype;function sn(xn,Ge,Oe){this.props=xn,this.context=Ge,this.refs=Xe,this.updater=Oe||qe}var cn=sn.prototype=new Qe;cn.constructor=sn,Ye(cn,je.prototype),cn.isPureReactComponent=!0;var nn=Array.isArray;function an(){}var Ze={H:null,A:null,T:null,S:null},tn=Object.prototype.hasOwnProperty;function We(xn,Ge,Oe){var $e=Oe.ref;return{$$typeof:t,type:xn,key:Ge,ref:$e!==void 0?$e:null,props:Oe}}function An(xn,Ge){return We(xn.type,Ge,xn.props)}function Je(xn){return typeof xn=="object"&&xn!==null&&xn.$$typeof===t}function St(xn){var Ge={"=":"=0",":":"=2"};return"$"+xn.replace(/[=:]/g,function(Oe){return Ge[Oe]})}var hn=/\/+/g;function _n(xn,Ge){return typeof xn=="object"&&xn!==null&&xn.key!=null?St(""+xn.key):Ge.toString(36)}function yn(xn){switch(xn.status){case"fulfilled":return xn.value;case"rejected":throw xn.reason;default:switch(typeof xn.status=="string"?xn.then(an,an):(xn.status="pending",xn.then(function(Ge){xn.status==="pending"&&(xn.status="fulfilled",xn.value=Ge)},function(Ge){xn.status==="pending"&&(xn.status="rejected",xn.reason=Ge)})),xn.status){case"fulfilled":return xn.value;case"rejected":throw xn.reason}}throw xn}function mn(xn,Ge,Oe,$e,rn){var fn=typeof xn;(fn==="undefined"||fn==="boolean")&&(xn=null);var gn=!1;if(xn===null)gn=!0;else switch(fn){case"bigint":case"string":case"number":gn=!0;break;case"object":switch(xn.$$typeof){case t:case e:gn=!0;break;case Me:return gn=xn._init,mn(gn(xn._payload),Ge,Oe,$e,rn)}}if(gn)return rn=rn(xn),gn=$e===""?"."+_n(xn,0):$e,nn(rn)?(Oe="",gn!=null&&(Oe=gn.replace(hn,"$&/")+"/"),mn(rn,Ge,Oe,"",function(On){return On})):rn!=null&&(Je(rn)&&(rn=An(rn,Oe+(rn.key==null||xn&&xn.key===rn.key?"":(""+rn.key).replace(hn,"$&/")+"/")+gn)),Ge.push(rn)),1;gn=0;var vn=$e===""?".":$e+":";if(nn(xn))for(var wn=0;wn<xn.length;wn++)$e=xn[wn],fn=vn+_n($e,wn),gn+=mn($e,Ge,Oe,fn,rn);else if(wn=Ie(xn),typeof wn=="function")for(xn=wn.call(xn),wn=0;!($e=xn.next()).done;)$e=$e.value,fn=vn+_n($e,wn++),gn+=mn($e,Ge,Oe,fn,rn);else if(fn==="object"){if(typeof xn.then=="function")return mn(yn(xn),Ge,Oe,$e,rn);throw Ge=String(xn),Error("Objects are not valid as a React child (found: "+(Ge==="[object Object]"?"object with keys {"+Object.keys(xn).join(", ")+"}":Ge)+"). If you meant to render a collection of children, use an array instead.")}return gn}function Sn(xn,Ge,Oe){if(xn==null)return xn;var $e=[],rn=0;return mn(xn,$e,"","",function(fn){return Ge.call(Oe,fn,rn++)}),$e}function Pn(xn){if(xn._status===-1){var Ge=xn._result;Ge=Ge(),Ge.then(function(Oe){(xn._status===0||xn._status===-1)&&(xn._status=1,xn._result=Oe)},function(Oe){(xn._status===0||xn._status===-1)&&(xn._status=2,xn._result=Oe)}),xn._status===-1&&(xn._status=0,xn._result=Ge)}if(xn._status===1)return xn._result.default;throw xn._result}var pn=typeof reportError=="function"?reportError:function(xn){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ge=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof xn=="object"&&xn!==null&&typeof xn.message=="string"?String(xn.message):String(xn),error:xn});if(!window.dispatchEvent(Ge))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",xn);return}console.error(xn)},on={map:Sn,forEach:function(xn,Ge,Oe){Sn(xn,function(){Ge.apply(this,arguments)},Oe)},count:function(xn){var Ge=0;return Sn(xn,function(){Ge++}),Ge},toArray:function(xn){return Sn(xn,function(Ge){return Ge})||[]},only:function(xn){if(!Je(xn))throw Error("React.Children.only expected to receive a single React element child.");return xn}};return react_production.Activity=Ve,react_production.Children=on,react_production.Component=je,react_production.Fragment=r,react_production.Profiler=Se,react_production.PureComponent=sn,react_production.StrictMode=xe,react_production.Suspense=Re,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ze,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(xn){return Ze.H.useMemoCache(xn)}},react_production.cache=function(xn){return function(){return xn.apply(null,arguments)}},react_production.cacheSignal=function(){return null},react_production.cloneElement=function(xn,Ge,Oe){if(xn==null)throw Error("The argument must be a React element, but you passed "+xn+".");var $e=Ye({},xn.props),rn=xn.key;if(Ge!=null)for(fn in Ge.key!==void 0&&(rn=""+Ge.key),Ge)!tn.call(Ge,fn)||fn==="key"||fn==="__self"||fn==="__source"||fn==="ref"&&Ge.ref===void 0||($e[fn]=Ge[fn]);var fn=arguments.length-2;if(fn===1)$e.children=Oe;else if(1<fn){for(var gn=Array(fn),vn=0;vn<fn;vn++)gn[vn]=arguments[vn+2];$e.children=gn}return We(xn.type,rn,$e)},react_production.createContext=function(xn){return xn={$$typeof:Pe,_currentValue:xn,_currentValue2:xn,_threadCount:0,Provider:null,Consumer:null},xn.Provider=xn,xn.Consumer={$$typeof:Ee,_context:xn},xn},react_production.createElement=function(xn,Ge,Oe){var $e,rn={},fn=null;if(Ge!=null)for($e in Ge.key!==void 0&&(fn=""+Ge.key),Ge)tn.call(Ge,$e)&&$e!=="key"&&$e!=="__self"&&$e!=="__source"&&(rn[$e]=Ge[$e]);var gn=arguments.length-2;if(gn===1)rn.children=Oe;else if(1<gn){for(var vn=Array(gn),wn=0;wn<gn;wn++)vn[wn]=arguments[wn+2];rn.children=vn}if(xn&&xn.defaultProps)for($e in gn=xn.defaultProps,gn)rn[$e]===void 0&&(rn[$e]=gn[$e]);return We(xn,fn,rn)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(xn){return{$$typeof:Ce,render:xn}},react_production.isValidElement=Je,react_production.lazy=function(xn){return{$$typeof:Me,_payload:{_status:-1,_result:xn},_init:Pn}},react_production.memo=function(xn,Ge){return{$$typeof:Be,type:xn,compare:Ge===void 0?null:Ge}},react_production.startTransition=function(xn){var Ge=Ze.T,Oe={};Ze.T=Oe;try{var $e=xn(),rn=Ze.S;rn!==null&&rn(Oe,$e),typeof $e=="object"&&$e!==null&&typeof $e.then=="function"&&$e.then(an,pn)}catch(fn){pn(fn)}finally{Ge!==null&&Oe.types!==null&&(Ge.types=Oe.types),Ze.T=Ge}},react_production.unstable_useCacheRefresh=function(){return Ze.H.useCacheRefresh()},react_production.use=function(xn){return Ze.H.use(xn)},react_production.useActionState=function(xn,Ge,Oe){return Ze.H.useActionState(xn,Ge,Oe)},react_production.useCallback=function(xn,Ge){return Ze.H.useCallback(xn,Ge)},react_production.useContext=function(xn){return Ze.H.useContext(xn)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(xn,Ge){return Ze.H.useDeferredValue(xn,Ge)},react_production.useEffect=function(xn,Ge){return Ze.H.useEffect(xn,Ge)},react_production.useEffectEvent=function(xn){return Ze.H.useEffectEvent(xn)},react_production.useId=function(){return Ze.H.useId()},react_production.useImperativeHandle=function(xn,Ge,Oe){return Ze.H.useImperativeHandle(xn,Ge,Oe)},react_production.useInsertionEffect=function(xn,Ge){return Ze.H.useInsertionEffect(xn,Ge)},react_production.useLayoutEffect=function(xn,Ge){return Ze.H.useLayoutEffect(xn,Ge)},react_production.useMemo=function(xn,Ge){return Ze.H.useMemo(xn,Ge)},react_production.useOptimistic=function(xn,Ge){return Ze.H.useOptimistic(xn,Ge)},react_production.useReducer=function(xn,Ge,Oe){return Ze.H.useReducer(xn,Ge,Oe)},react_production.useRef=function(xn){return Ze.H.useRef(xn)},react_production.useState=function(xn){return Ze.H.useState(xn)},react_production.useSyncExternalStore=function(xn,Ge,Oe){return Ze.H.useSyncExternalStore(xn,Ge,Oe)},react_production.useTransition=function(){return Ze.H.useTransition()},react_production.version="19.2.3",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(t){function e(mn,Sn){var Pn=mn.length;mn.push(Sn);e:for(;0<Pn;){var pn=Pn-1>>>1,on=mn[pn];if(0<Se(on,Sn))mn[pn]=Sn,mn[Pn]=on,Pn=pn;else break e}}function r(mn){return mn.length===0?null:mn[0]}function xe(mn){if(mn.length===0)return null;var Sn=mn[0],Pn=mn.pop();if(Pn!==Sn){mn[0]=Pn;e:for(var pn=0,on=mn.length,xn=on>>>1;pn<xn;){var Ge=2*(pn+1)-1,Oe=mn[Ge],$e=Ge+1,rn=mn[$e];if(0>Se(Oe,Pn))$e<on&&0>Se(rn,Oe)?(mn[pn]=rn,mn[$e]=Pn,pn=$e):(mn[pn]=Oe,mn[Ge]=Pn,pn=Ge);else if($e<on&&0>Se(rn,Pn))mn[pn]=rn,mn[$e]=Pn,pn=$e;else break e}}return Sn}function Se(mn,Sn){var Pn=mn.sortIndex-Sn.sortIndex;return Pn!==0?Pn:mn.id-Sn.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var Ee=performance;t.unstable_now=function(){return Ee.now()}}else{var Pe=Date,Ce=Pe.now();t.unstable_now=function(){return Pe.now()-Ce}}var Re=[],Be=[],Me=1,Ve=null,Fe=3,Ie=!1,qe=!1,Ye=!1,Xe=!1,je=typeof setTimeout=="function"?setTimeout:null,Qe=typeof clearTimeout=="function"?clearTimeout:null,sn=typeof setImmediate<"u"?setImmediate:null;function cn(mn){for(var Sn=r(Be);Sn!==null;){if(Sn.callback===null)xe(Be);else if(Sn.startTime<=mn)xe(Be),Sn.sortIndex=Sn.expirationTime,e(Re,Sn);else break;Sn=r(Be)}}function nn(mn){if(Ye=!1,cn(mn),!qe)if(r(Re)!==null)qe=!0,an||(an=!0,St());else{var Sn=r(Be);Sn!==null&&yn(nn,Sn.startTime-mn)}}var an=!1,Ze=-1,tn=5,We=-1;function An(){return Xe?!0:!(t.unstable_now()-We<tn)}function Je(){if(Xe=!1,an){var mn=t.unstable_now();We=mn;var Sn=!0;try{e:{qe=!1,Ye&&(Ye=!1,Qe(Ze),Ze=-1),Ie=!0;var Pn=Fe;try{t:{for(cn(mn),Ve=r(Re);Ve!==null&&!(Ve.expirationTime>mn&&An());){var pn=Ve.callback;if(typeof pn=="function"){Ve.callback=null,Fe=Ve.priorityLevel;var on=pn(Ve.expirationTime<=mn);if(mn=t.unstable_now(),typeof on=="function"){Ve.callback=on,cn(mn),Sn=!0;break t}Ve===r(Re)&&xe(Re),cn(mn)}else xe(Re);Ve=r(Re)}if(Ve!==null)Sn=!0;else{var xn=r(Be);xn!==null&&yn(nn,xn.startTime-mn),Sn=!1}}break e}finally{Ve=null,Fe=Pn,Ie=!1}Sn=void 0}}finally{Sn?St():an=!1}}}var St;if(typeof sn=="function")St=function(){sn(Je)};else if(typeof MessageChannel<"u"){var hn=new MessageChannel,_n=hn.port2;hn.port1.onmessage=Je,St=function(){_n.postMessage(null)}}else St=function(){je(Je,0)};function yn(mn,Sn){Ze=je(function(){mn(t.unstable_now())},Sn)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(mn){mn.callback=null},t.unstable_forceFrameRate=function(mn){0>mn||125<mn?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):tn=0<mn?Math.floor(1e3/mn):5},t.unstable_getCurrentPriorityLevel=function(){return Fe},t.unstable_next=function(mn){switch(Fe){case 1:case 2:case 3:var Sn=3;break;default:Sn=Fe}var Pn=Fe;Fe=Sn;try{return mn()}finally{Fe=Pn}},t.unstable_requestPaint=function(){Xe=!0},t.unstable_runWithPriority=function(mn,Sn){switch(mn){case 1:case 2:case 3:case 4:case 5:break;default:mn=3}var Pn=Fe;Fe=mn;try{return Sn()}finally{Fe=Pn}},t.unstable_scheduleCallback=function(mn,Sn,Pn){var pn=t.unstable_now();switch(typeof Pn=="object"&&Pn!==null?(Pn=Pn.delay,Pn=typeof Pn=="number"&&0<Pn?pn+Pn:pn):Pn=pn,mn){case 1:var on=-1;break;case 2:on=250;break;case 5:on=1073741823;break;case 4:on=1e4;break;default:on=5e3}return on=Pn+on,mn={id:Me++,callback:Sn,priorityLevel:mn,startTime:Pn,expirationTime:on,sortIndex:-1},Pn>pn?(mn.sortIndex=Pn,e(Be,mn),r(Re)===null&&mn===r(Be)&&(Ye?(Qe(Ze),Ze=-1):Ye=!0,yn(nn,Pn-pn))):(mn.sortIndex=on,e(Re,mn),qe||Ie||(qe=!0,an||(an=!0,St()))),mn},t.unstable_shouldYield=An,t.unstable_wrapCallback=function(mn){var Sn=Fe;return function(){var Pn=Fe;Fe=Sn;try{return mn.apply(this,arguments)}finally{Fe=Pn}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var t=requireReact();function e(Re){var Be="https://react.dev/errors/"+Re;if(1<arguments.length){Be+="?args[]="+encodeURIComponent(arguments[1]);for(var Me=2;Me<arguments.length;Me++)Be+="&args[]="+encodeURIComponent(arguments[Me])}return"Minified React error #"+Re+"; visit "+Be+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var xe={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},Se=Symbol.for("react.portal");function Ee(Re,Be,Me){var Ve=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Se,key:Ve==null?null:""+Ve,children:Re,containerInfo:Be,implementation:Me}}var Pe=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Ce(Re,Be){if(Re==="font")return"";if(typeof Be=="string")return Be==="use-credentials"?Be:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=xe,reactDom_production.createPortal=function(Re,Be){var Me=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Be||Be.nodeType!==1&&Be.nodeType!==9&&Be.nodeType!==11)throw Error(e(299));return Ee(Re,Be,null,Me)},reactDom_production.flushSync=function(Re){var Be=Pe.T,Me=xe.p;try{if(Pe.T=null,xe.p=2,Re)return Re()}finally{Pe.T=Be,xe.p=Me,xe.d.f()}},reactDom_production.preconnect=function(Re,Be){typeof Re=="string"&&(Be?(Be=Be.crossOrigin,Be=typeof Be=="string"?Be==="use-credentials"?Be:"":void 0):Be=null,xe.d.C(Re,Be))},reactDom_production.prefetchDNS=function(Re){typeof Re=="string"&&xe.d.D(Re)},reactDom_production.preinit=function(Re,Be){if(typeof Re=="string"&&Be&&typeof Be.as=="string"){var Me=Be.as,Ve=Ce(Me,Be.crossOrigin),Fe=typeof Be.integrity=="string"?Be.integrity:void 0,Ie=typeof Be.fetchPriority=="string"?Be.fetchPriority:void 0;Me==="style"?xe.d.S(Re,typeof Be.precedence=="string"?Be.precedence:void 0,{crossOrigin:Ve,integrity:Fe,fetchPriority:Ie}):Me==="script"&&xe.d.X(Re,{crossOrigin:Ve,integrity:Fe,fetchPriority:Ie,nonce:typeof Be.nonce=="string"?Be.nonce:void 0})}},reactDom_production.preinitModule=function(Re,Be){if(typeof Re=="string")if(typeof Be=="object"&&Be!==null){if(Be.as==null||Be.as==="script"){var Me=Ce(Be.as,Be.crossOrigin);xe.d.M(Re,{crossOrigin:Me,integrity:typeof Be.integrity=="string"?Be.integrity:void 0,nonce:typeof Be.nonce=="string"?Be.nonce:void 0})}}else Be==null&&xe.d.M(Re)},reactDom_production.preload=function(Re,Be){if(typeof Re=="string"&&typeof Be=="object"&&Be!==null&&typeof Be.as=="string"){var Me=Be.as,Ve=Ce(Me,Be.crossOrigin);xe.d.L(Re,Me,{crossOrigin:Ve,integrity:typeof Be.integrity=="string"?Be.integrity:void 0,nonce:typeof Be.nonce=="string"?Be.nonce:void 0,type:typeof Be.type=="string"?Be.type:void 0,fetchPriority:typeof Be.fetchPriority=="string"?Be.fetchPriority:void 0,referrerPolicy:typeof Be.referrerPolicy=="string"?Be.referrerPolicy:void 0,imageSrcSet:typeof Be.imageSrcSet=="string"?Be.imageSrcSet:void 0,imageSizes:typeof Be.imageSizes=="string"?Be.imageSizes:void 0,media:typeof Be.media=="string"?Be.media:void 0})}},reactDom_production.preloadModule=function(Re,Be){if(typeof Re=="string")if(Be){var Me=Ce(Be.as,Be.crossOrigin);xe.d.m(Re,{as:typeof Be.as=="string"&&Be.as!=="script"?Be.as:void 0,crossOrigin:Me,integrity:typeof Be.integrity=="string"?Be.integrity:void 0})}else xe.d.m(Re)},reactDom_production.requestFormReset=function(Re){xe.d.r(Re)},reactDom_production.unstable_batchedUpdates=function(Re,Be){return Re(Be)},reactDom_production.useFormState=function(Re,Be,Me){return Pe.H.useFormState(Re,Be,Me)},reactDom_production.useFormStatus=function(){return Pe.H.useHostTransitionStatus()},reactDom_production.version="19.2.3",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var t=requireScheduler(),e=requireReact(),r=requireReactDom();function xe(_e){var Ae="https://react.dev/errors/"+_e;if(1<arguments.length){Ae+="?args[]="+encodeURIComponent(arguments[1]);for(var Te=2;Te<arguments.length;Te++)Ae+="&args[]="+encodeURIComponent(arguments[Te])}return"Minified React error #"+_e+"; visit "+Ae+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Se(_e){return!(!_e||_e.nodeType!==1&&_e.nodeType!==9&&_e.nodeType!==11)}function Ee(_e){var Ae=_e,Te=_e;if(_e.alternate)for(;Ae.return;)Ae=Ae.return;else{_e=Ae;do Ae=_e,(Ae.flags&4098)!==0&&(Te=Ae.return),_e=Ae.return;while(_e)}return Ae.tag===3?Te:null}function Pe(_e){if(_e.tag===13){var Ae=_e.memoizedState;if(Ae===null&&(_e=_e.alternate,_e!==null&&(Ae=_e.memoizedState)),Ae!==null)return Ae.dehydrated}return null}function Ce(_e){if(_e.tag===31){var Ae=_e.memoizedState;if(Ae===null&&(_e=_e.alternate,_e!==null&&(Ae=_e.memoizedState)),Ae!==null)return Ae.dehydrated}return null}function Re(_e){if(Ee(_e)!==_e)throw Error(xe(188))}function Be(_e){var Ae=_e.alternate;if(!Ae){if(Ae=Ee(_e),Ae===null)throw Error(xe(188));return Ae!==_e?null:_e}for(var Te=_e,ke=Ae;;){var Ue=Te.return;if(Ue===null)break;var He=Ue.alternate;if(He===null){if(ke=Ue.return,ke!==null){Te=ke;continue}break}if(Ue.child===He.child){for(He=Ue.child;He;){if(He===Te)return Re(Ue),_e;if(He===ke)return Re(Ue),Ae;He=He.sibling}throw Error(xe(188))}if(Te.return!==ke.return)Te=Ue,ke=He;else{for(var bn=!1,In=Ue.child;In;){if(In===Te){bn=!0,Te=Ue,ke=He;break}if(In===ke){bn=!0,ke=Ue,Te=He;break}In=In.sibling}if(!bn){for(In=He.child;In;){if(In===Te){bn=!0,Te=He,ke=Ue;break}if(In===ke){bn=!0,ke=He,Te=Ue;break}In=In.sibling}if(!bn)throw Error(xe(189))}}if(Te.alternate!==ke)throw Error(xe(190))}if(Te.tag!==3)throw Error(xe(188));return Te.stateNode.current===Te?_e:Ae}function Me(_e){var Ae=_e.tag;if(Ae===5||Ae===26||Ae===27||Ae===6)return _e;for(_e=_e.child;_e!==null;){if(Ae=Me(_e),Ae!==null)return Ae;_e=_e.sibling}return null}var Ve=Object.assign,Fe=Symbol.for("react.element"),Ie=Symbol.for("react.transitional.element"),qe=Symbol.for("react.portal"),Ye=Symbol.for("react.fragment"),Xe=Symbol.for("react.strict_mode"),je=Symbol.for("react.profiler"),Qe=Symbol.for("react.consumer"),sn=Symbol.for("react.context"),cn=Symbol.for("react.forward_ref"),nn=Symbol.for("react.suspense"),an=Symbol.for("react.suspense_list"),Ze=Symbol.for("react.memo"),tn=Symbol.for("react.lazy"),We=Symbol.for("react.activity"),An=Symbol.for("react.memo_cache_sentinel"),Je=Symbol.iterator;function St(_e){return _e===null||typeof _e!="object"?null:(_e=Je&&_e[Je]||_e["@@iterator"],typeof _e=="function"?_e:null)}var hn=Symbol.for("react.client.reference");function _n(_e){if(_e==null)return null;if(typeof _e=="function")return _e.$$typeof===hn?null:_e.displayName||_e.name||null;if(typeof _e=="string")return _e;switch(_e){case Ye:return"Fragment";case je:return"Profiler";case Xe:return"StrictMode";case nn:return"Suspense";case an:return"SuspenseList";case We:return"Activity"}if(typeof _e=="object")switch(_e.$$typeof){case qe:return"Portal";case sn:return _e.displayName||"Context";case Qe:return(_e._context.displayName||"Context")+".Consumer";case cn:var Ae=_e.render;return _e=_e.displayName,_e||(_e=Ae.displayName||Ae.name||"",_e=_e!==""?"ForwardRef("+_e+")":"ForwardRef"),_e;case Ze:return Ae=_e.displayName||null,Ae!==null?Ae:_n(_e.type)||"Memo";case tn:Ae=_e._payload,_e=_e._init;try{return _n(_e(Ae))}catch{}}return null}var yn=Array.isArray,mn=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Sn=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Pn={pending:!1,data:null,method:null,action:null},pn=[],on=-1;function xn(_e){return{current:_e}}function Ge(_e){0>on||(_e.current=pn[on],pn[on]=null,on--)}function Oe(_e,Ae){on++,pn[on]=_e.current,_e.current=Ae}var $e=xn(null),rn=xn(null),fn=xn(null),gn=xn(null);function vn(_e,Ae){switch(Oe(fn,Ae),Oe(rn,_e),Oe($e,null),Ae.nodeType){case 9:case 11:_e=(_e=Ae.documentElement)&&(_e=_e.namespaceURI)?Cg(_e):0;break;default:if(_e=Ae.tagName,Ae=Ae.namespaceURI)Ae=Cg(Ae),_e=Bg(Ae,_e);else switch(_e){case"svg":_e=1;break;case"math":_e=2;break;default:_e=0}}Ge($e),Oe($e,_e)}function wn(){Ge($e),Ge(rn),Ge(fn)}function On(_e){_e.memoizedState!==null&&Oe(gn,_e);var Ae=$e.current,Te=Bg(Ae,_e.type);Ae!==Te&&(Oe(rn,_e),Oe($e,Te))}function jn(_e){rn.current===_e&&(Ge($e),Ge(rn)),gn.current===_e&&(Ge(gn),Vh._currentValue=Pn)}var Wn,ti;function si(_e){if(Wn===void 0)try{throw Error()}catch(Te){var Ae=Te.stack.trim().match(/\n( *(at )?)/);Wn=Ae&&Ae[1]||"",ti=-1<Te.stack.indexOf(`
    at`)?" (<anonymous>)":-1<Te.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wn+_e+ti}var qn=!1;function En(_e,Ae){if(!_e||qn)return"";qn=!0;var Te=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var ke={DetermineComponentFrameRoot:function(){try{if(Ae){var $i=function(){throw Error()};if(Object.defineProperty($i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($i,[])}catch(Li){var Vi=Li}Reflect.construct(_e,[],$i)}else{try{$i.call()}catch(Li){Vi=Li}_e.call($i.prototype)}}else{try{throw Error()}catch(Li){Vi=Li}($i=_e())&&typeof $i.catch=="function"&&$i.catch(function(){})}}catch(Li){if(Li&&Vi&&typeof Li.stack=="string")return[Li.stack,Vi.stack]}return[null,null]}};ke.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var Ue=Object.getOwnPropertyDescriptor(ke.DetermineComponentFrameRoot,"name");Ue&&Ue.configurable&&Object.defineProperty(ke.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var He=ke.DetermineComponentFrameRoot(),bn=He[0],In=He[1];if(bn&&In){var ri=bn.split(`
`),Mi=In.split(`
`);for(Ue=ke=0;ke<ri.length&&!ri[ke].includes("DetermineComponentFrameRoot");)ke++;for(;Ue<Mi.length&&!Mi[Ue].includes("DetermineComponentFrameRoot");)Ue++;if(ke===ri.length||Ue===Mi.length)for(ke=ri.length-1,Ue=Mi.length-1;1<=ke&&0<=Ue&&ri[ke]!==Mi[Ue];)Ue--;for(;1<=ke&&0<=Ue;ke--,Ue--)if(ri[ke]!==Mi[Ue]){if(ke!==1||Ue!==1)do if(ke--,Ue--,0>Ue||ri[ke]!==Mi[Ue]){var zi=`
`+ri[ke].replace(" at new "," at ");return _e.displayName&&zi.includes("<anonymous>")&&(zi=zi.replace("<anonymous>",_e.displayName)),zi}while(1<=ke&&0<=Ue);break}}}finally{qn=!1,Error.prepareStackTrace=Te}return(Te=_e?_e.displayName||_e.name:"")?si(Te):""}function Qn(_e,Ae){switch(_e.tag){case 26:case 27:case 5:return si(_e.type);case 16:return si("Lazy");case 13:return _e.child!==Ae&&Ae!==null?si("Suspense Fallback"):si("Suspense");case 19:return si("SuspenseList");case 0:case 15:return En(_e.type,!1);case 11:return En(_e.type.render,!1);case 1:return En(_e.type,!0);case 31:return si("Activity");default:return""}}function Cn(_e){try{var Ae="",Te=null;do Ae+=Qn(_e,Te),Te=_e,_e=_e.return;while(_e);return Ae}catch(ke){return`
Error generating stack: `+ke.message+`
`+ke.stack}}var Mn=Object.prototype.hasOwnProperty,Un=t.unstable_scheduleCallback,zn=t.unstable_cancelCallback,ni=t.unstable_shouldYield,yi=t.unstable_requestPaint,pi=t.unstable_now,$n=t.unstable_getCurrentPriorityLevel,Yn=t.unstable_ImmediatePriority,ai=t.unstable_UserBlockingPriority,Di=t.unstable_NormalPriority,ki=t.unstable_LowPriority,Ji=t.unstable_IdlePriority,Pi=t.log,na=t.unstable_setDisableYieldValue,ea=null,Ki=null;function oi(_e){if(typeof Pi=="function"&&na(_e),Ki&&typeof Ki.setStrictMode=="function")try{Ki.setStrictMode(ea,_e)}catch{}}var Kn=Math.clz32?Math.clz32:wi,di=Math.log,Ui=Math.LN2;function wi(_e){return _e>>>=0,_e===0?32:31-(di(_e)/Ui|0)|0}var Ai=256,Rn=262144,Zn=4194304;function Xn(_e){var Ae=_e&42;if(Ae!==0)return Ae;switch(_e&-_e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return _e&261888;case 262144:case 524288:case 1048576:case 2097152:return _e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return _e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return _e}}function Si(_e,Ae,Te){var ke=_e.pendingLanes;if(ke===0)return 0;var Ue=0,He=_e.suspendedLanes,bn=_e.pingedLanes;_e=_e.warmLanes;var In=ke&134217727;return In!==0?(ke=In&~He,ke!==0?Ue=Xn(ke):(bn&=In,bn!==0?Ue=Xn(bn):Te||(Te=In&~_e,Te!==0&&(Ue=Xn(Te))))):(In=ke&~He,In!==0?Ue=Xn(In):bn!==0?Ue=Xn(bn):Te||(Te=ke&~_e,Te!==0&&(Ue=Xn(Te)))),Ue===0?0:Ae!==0&&Ae!==Ue&&(Ae&He)===0&&(He=Ue&-Ue,Te=Ae&-Ae,He>=Te||He===32&&(Te&4194048)!==0)?Ae:Ue}function Ci(_e,Ae){return(_e.pendingLanes&~(_e.suspendedLanes&~_e.pingedLanes)&Ae)===0}function Oi(_e,Ae){switch(_e){case 1:case 2:case 4:case 8:case 64:return Ae+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return Ae+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fn(){var _e=Zn;return Zn<<=1,(Zn&62914560)===0&&(Zn=4194304),_e}function Nn(_e){for(var Ae=[],Te=0;31>Te;Te++)Ae.push(_e);return Ae}function Gn(_e,Ae){_e.pendingLanes|=Ae,Ae!==268435456&&(_e.suspendedLanes=0,_e.pingedLanes=0,_e.warmLanes=0)}function ei(_e,Ae,Te,ke,Ue,He){var bn=_e.pendingLanes;_e.pendingLanes=Te,_e.suspendedLanes=0,_e.pingedLanes=0,_e.warmLanes=0,_e.expiredLanes&=Te,_e.entangledLanes&=Te,_e.errorRecoveryDisabledLanes&=Te,_e.shellSuspendCounter=0;var In=_e.entanglements,ri=_e.expirationTimes,Mi=_e.hiddenUpdates;for(Te=bn&~Te;0<Te;){var zi=31-Kn(Te),$i=1<<zi;In[zi]=0,ri[zi]=-1;var Vi=Mi[zi];if(Vi!==null)for(Mi[zi]=null,zi=0;zi<Vi.length;zi++){var Li=Vi[zi];Li!==null&&(Li.lane&=-536870913)}Te&=~$i}ke!==0&&ii(_e,ke,0),He!==0&&Ue===0&&_e.tag!==0&&(_e.suspendedLanes|=He&~(bn&~Ae))}function ii(_e,Ae,Te){_e.pendingLanes|=Ae,_e.suspendedLanes&=~Ae;var ke=31-Kn(Ae);_e.entangledLanes|=Ae,_e.entanglements[ke]=_e.entanglements[ke]|1073741824|Te&261930}function gi(_e,Ae){var Te=_e.entangledLanes|=Ae;for(_e=_e.entanglements;Te;){var ke=31-Kn(Te),Ue=1<<ke;Ue&Ae|_e[ke]&Ae&&(_e[ke]|=Ae),Te&=~Ue}}function Ti(_e,Ae){var Te=Ae&-Ae;return Te=(Te&42)!==0?1:Wi(Te),(Te&(_e.suspendedLanes|Ae))!==0?0:Te}function Wi(_e){switch(_e){case 2:_e=1;break;case 8:_e=4;break;case 32:_e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:_e=128;break;case 268435456:_e=134217728;break;default:_e=0}return _e}function qi(_e){return _e&=-_e,2<_e?8<_e?(_e&134217727)!==0?32:268435456:8:2}function ji(){var _e=Sn.p;return _e!==0?_e:(_e=window.event,_e===void 0?32:Qg(_e.type))}function la(_e,Ae){var Te=Sn.p;try{return Sn.p=_e,Ae()}finally{Sn.p=Te}}var ia=Math.random().toString(36).slice(2),Zi="__reactFiber$"+ia,aa="__reactProps$"+ia,ca="__reactContainer$"+ia,ma="__reactEvents$"+ia,xa="__reactListeners$"+ia,Oa="__reactHandles$"+ia,Ba="__reactResources$"+ia,tr="__reactMarker$"+ia;function wr(_e){delete _e[Zi],delete _e[aa],delete _e[ma],delete _e[xa],delete _e[Oa]}function Sr(_e){var Ae=_e[Zi];if(Ae)return Ae;for(var Te=_e.parentNode;Te;){if(Ae=Te[ca]||Te[Zi]){if(Te=Ae.alternate,Ae.child!==null||Te!==null&&Te.child!==null)for(_e=Ig(_e);_e!==null;){if(Te=_e[Zi])return Te;_e=Ig(_e)}return Ae}_e=Te,Te=_e.parentNode}return null}function ss(_e){if(_e=_e[Zi]||_e[ca]){var Ae=_e.tag;if(Ae===5||Ae===6||Ae===13||Ae===31||Ae===26||Ae===27||Ae===3)return _e}return null}function No(_e){var Ae=_e.tag;if(Ae===5||Ae===26||Ae===27||Ae===6)return _e.stateNode;throw Error(xe(33))}function Mo(_e){var Ae=_e[Ba];return Ae||(Ae=_e[Ba]={hoistableStyles:new Map,hoistableScripts:new Map}),Ae}function Ar(_e){_e[tr]=!0}var ll=new Set,Cu={};function fo(_e,Ae){Qs(_e,Ae),Qs(_e+"Capture",Ae)}function Qs(_e,Ae){for(Cu[_e]=Ae,_e=0;_e<Ae.length;_e++)ll.add(Ae[_e])}var nh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bu={},sc={};function Fl(_e){return Mn.call(sc,_e)?!0:Mn.call(Bu,_e)?!1:nh.test(_e)?sc[_e]=!0:(Bu[_e]=!0,!1)}function Ol(_e,Ae,Te){if(Fl(Ae))if(Te===null)_e.removeAttribute(Ae);else{switch(typeof Te){case"undefined":case"function":case"symbol":_e.removeAttribute(Ae);return;case"boolean":var ke=Ae.toLowerCase().slice(0,5);if(ke!=="data-"&&ke!=="aria-"){_e.removeAttribute(Ae);return}}_e.setAttribute(Ae,""+Te)}}function sr(_e,Ae,Te){if(Te===null)_e.removeAttribute(Ae);else{switch(typeof Te){case"undefined":case"function":case"symbol":case"boolean":_e.removeAttribute(Ae);return}_e.setAttribute(Ae,""+Te)}}function xs(_e,Ae,Te,ke){if(ke===null)_e.removeAttribute(Te);else{switch(typeof ke){case"undefined":case"function":case"symbol":case"boolean":_e.removeAttribute(Te);return}_e.setAttributeNS(Ae,Te,""+ke)}}function es(_e){switch(typeof _e){case"bigint":case"boolean":case"number":case"string":case"undefined":return _e;case"object":return _e;default:return""}}function Ru(_e){var Ae=_e.type;return(_e=_e.nodeName)&&_e.toLowerCase()==="input"&&(Ae==="checkbox"||Ae==="radio")}function Nu(_e,Ae,Te){var ke=Object.getOwnPropertyDescriptor(_e.constructor.prototype,Ae);if(!_e.hasOwnProperty(Ae)&&typeof ke<"u"&&typeof ke.get=="function"&&typeof ke.set=="function"){var Ue=ke.get,He=ke.set;return Object.defineProperty(_e,Ae,{configurable:!0,get:function(){return Ue.call(this)},set:function(bn){Te=""+bn,He.call(this,bn)}}),Object.defineProperty(_e,Ae,{enumerable:ke.enumerable}),{getValue:function(){return Te},setValue:function(bn){Te=""+bn},stopTracking:function(){_e._valueTracker=null,delete _e[Ae]}}}}function Mu(_e){if(!_e._valueTracker){var Ae=Ru(_e)?"checked":"value";_e._valueTracker=Nu(_e,Ae,""+_e[Ae])}}function _s(_e){if(!_e)return!1;var Ae=_e._valueTracker;if(!Ae)return!0;var Te=Ae.getValue(),ke="";return _e&&(ke=Ru(_e)?_e.checked?"true":"false":_e.value),_e=ke,_e!==Te?(Ae.setValue(_e),!0):!1}function po(_e){if(_e=_e||(typeof document<"u"?document:void 0),typeof _e>"u")return null;try{return _e.activeElement||_e.body}catch{return _e.body}}var os=/[\n"\\]/g;function Gr(_e){return _e.replace(os,function(Ae){return"\\"+Ae.charCodeAt(0).toString(16)+" "})}function Ul(_e,Ae,Te,ke,Ue,He,bn,In){_e.name="",bn!=null&&typeof bn!="function"&&typeof bn!="symbol"&&typeof bn!="boolean"?_e.type=bn:_e.removeAttribute("type"),Ae!=null?bn==="number"?(Ae===0&&_e.value===""||_e.value!=Ae)&&(_e.value=""+es(Ae)):_e.value!==""+es(Ae)&&(_e.value=""+es(Ae)):bn!=="submit"&&bn!=="reset"||_e.removeAttribute("value"),Ae!=null?zl(_e,bn,es(Ae)):Te!=null?zl(_e,bn,es(Te)):ke!=null&&_e.removeAttribute("value"),Ue==null&&He!=null&&(_e.defaultChecked=!!He),Ue!=null&&(_e.checked=Ue&&typeof Ue!="function"&&typeof Ue!="symbol"),In!=null&&typeof In!="function"&&typeof In!="symbol"&&typeof In!="boolean"?_e.name=""+es(In):_e.removeAttribute("name")}function oc(_e,Ae,Te,ke,Ue,He,bn,In){if(He!=null&&typeof He!="function"&&typeof He!="symbol"&&typeof He!="boolean"&&(_e.type=He),Ae!=null||Te!=null){if(!(He!=="submit"&&He!=="reset"||Ae!=null)){Mu(_e);return}Te=Te!=null?""+es(Te):"",Ae=Ae!=null?""+es(Ae):Te,In||Ae===_e.value||(_e.value=Ae),_e.defaultValue=Ae}ke=ke??Ue,ke=typeof ke!="function"&&typeof ke!="symbol"&&!!ke,_e.checked=In?_e.checked:!!ke,_e.defaultChecked=!!ke,bn!=null&&typeof bn!="function"&&typeof bn!="symbol"&&typeof bn!="boolean"&&(_e.name=bn),Mu(_e)}function zl(_e,Ae,Te){Ae==="number"&&po(_e.ownerDocument)===_e||_e.defaultValue===""+Te||(_e.defaultValue=""+Te)}function ko(_e,Ae,Te,ke){if(_e=_e.options,Ae){Ae={};for(var Ue=0;Ue<Te.length;Ue++)Ae["$"+Te[Ue]]=!0;for(Te=0;Te<_e.length;Te++)Ue=Ae.hasOwnProperty("$"+_e[Te].value),_e[Te].selected!==Ue&&(_e[Te].selected=Ue),Ue&&ke&&(_e[Te].defaultSelected=!0)}else{for(Te=""+es(Te),Ae=null,Ue=0;Ue<_e.length;Ue++){if(_e[Ue].value===Te){_e[Ue].selected=!0,ke&&(_e[Ue].defaultSelected=!0);return}Ae!==null||_e[Ue].disabled||(Ae=_e[Ue])}Ae!==null&&(Ae.selected=!0)}}function ku(_e,Ae,Te){if(Ae!=null&&(Ae=""+es(Ae),Ae!==_e.value&&(_e.value=Ae),Te==null)){_e.defaultValue!==Ae&&(_e.defaultValue=Ae);return}_e.defaultValue=Te!=null?""+es(Te):""}function uc(_e,Ae,Te,ke){if(Ae==null){if(ke!=null){if(Te!=null)throw Error(xe(92));if(yn(ke)){if(1<ke.length)throw Error(xe(93));ke=ke[0]}Te=ke}Te==null&&(Te=""),Ae=Te}Te=es(Ae),_e.defaultValue=Te,ke=_e.textContent,ke===Te&&ke!==""&&ke!==null&&(_e.value=ke),Mu(_e)}function Zs(_e,Ae){if(Ae){var Te=_e.firstChild;if(Te&&Te===_e.lastChild&&Te.nodeType===3){Te.nodeValue=Ae;return}}_e.textContent=Ae}var ih=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cc(_e,Ae,Te){var ke=Ae.indexOf("--")===0;Te==null||typeof Te=="boolean"||Te===""?ke?_e.setProperty(Ae,""):Ae==="float"?_e.cssFloat="":_e[Ae]="":ke?_e.setProperty(Ae,Te):typeof Te!="number"||Te===0||ih.has(Ae)?Ae==="float"?_e.cssFloat=Te:_e[Ae]=(""+Te).trim():_e[Ae]=Te+"px"}function hc(_e,Ae,Te){if(Ae!=null&&typeof Ae!="object")throw Error(xe(62));if(_e=_e.style,Te!=null){for(var ke in Te)!Te.hasOwnProperty(ke)||Ae!=null&&Ae.hasOwnProperty(ke)||(ke.indexOf("--")===0?_e.setProperty(ke,""):ke==="float"?_e.cssFloat="":_e[ke]="");for(var Ue in Ae)ke=Ae[Ue],Ae.hasOwnProperty(Ue)&&Te[Ue]!==ke&&cc(_e,Ue,ke)}else for(var He in Ae)Ae.hasOwnProperty(He)&&cc(_e,He,Ae[He])}function Us(_e){if(_e.indexOf("-")===-1)return!1;switch(_e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ql=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ul(_e){return ql.test(""+_e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":_e}function or(){}var Vu=null;function Hl(_e){return _e=_e.target||_e.srcElement||window,_e.correspondingUseElement&&(_e=_e.correspondingUseElement),_e.nodeType===3?_e.parentNode:_e}var ya=null,Vo=null;function dc(_e){var Ae=ss(_e);if(Ae&&(_e=Ae.stateNode)){var Te=_e[aa]||null;e:switch(_e=Ae.stateNode,Ae.type){case"input":if(Ul(_e,Te.value,Te.defaultValue,Te.defaultValue,Te.checked,Te.defaultChecked,Te.type,Te.name),Ae=Te.name,Te.type==="radio"&&Ae!=null){for(Te=_e;Te.parentNode;)Te=Te.parentNode;for(Te=Te.querySelectorAll('input[name="'+Gr(""+Ae)+'"][type="radio"]'),Ae=0;Ae<Te.length;Ae++){var ke=Te[Ae];if(ke!==_e&&ke.form===_e.form){var Ue=ke[aa]||null;if(!Ue)throw Error(xe(90));Ul(ke,Ue.value,Ue.defaultValue,Ue.defaultValue,Ue.checked,Ue.defaultChecked,Ue.type,Ue.name)}}for(Ae=0;Ae<Te.length;Ae++)ke=Te[Ae],ke.form===_e.form&&_s(ke)}break e;case"textarea":ku(_e,Te.value,Te.defaultValue);break e;case"select":Ae=Te.value,Ae!=null&&ko(_e,!!Te.multiple,Ae,!1)}}}var Ss=!1;function Lu(_e,Ae,Te){if(Ss)return _e(Ae,Te);Ss=!0;try{var ke=_e(Ae);return ke}finally{if(Ss=!1,(ya!==null||Vo!==null)&&(md(),ya&&(Ae=ya,_e=Vo,Vo=ya=null,dc(Ae),_e)))for(Ae=0;Ae<_e.length;Ae++)dc(_e[Ae])}}function Lo(_e,Ae){var Te=_e.stateNode;if(Te===null)return null;var ke=Te[aa]||null;if(ke===null)return null;Te=ke[Ae];e:switch(Ae){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(ke=!ke.disabled)||(_e=_e.type,ke=!(_e==="button"||_e==="input"||_e==="select"||_e==="textarea")),_e=!ke;break e;default:_e=!1}if(_e)return null;if(Te&&typeof Te!="function")throw Error(xe(231,Ae,typeof Te));return Te}var ls=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cl=!1;if(ls)try{var hl={};Object.defineProperty(hl,"passive",{get:function(){cl=!0}}),window.addEventListener("test",hl,hl),window.removeEventListener("test",hl,hl)}catch{cl=!1}var eo=null,Iu=null,Io=null;function Do(){if(Io)return Io;var _e,Ae=Iu,Te=Ae.length,ke,Ue="value"in eo?eo.value:eo.textContent,He=Ue.length;for(_e=0;_e<Te&&Ae[_e]===Ue[_e];_e++);var bn=Te-_e;for(ke=1;ke<=bn&&Ae[Te-ke]===Ue[He-ke];ke++);return Io=Ue.slice(_e,1<ke?1-ke:void 0)}function zs(_e){var Ae=_e.keyCode;return"charCode"in _e?(_e=_e.charCode,_e===0&&Ae===13&&(_e=13)):_e=Ae,_e===10&&(_e=13),32<=_e||_e===13?_e:0}function Gl(){return!0}function Fo(){return!1}function Br(_e){function Ae(Te,ke,Ue,He,bn){this._reactName=Te,this._targetInst=Ue,this.type=ke,this.nativeEvent=He,this.target=bn,this.currentTarget=null;for(var In in _e)_e.hasOwnProperty(In)&&(Te=_e[In],this[In]=Te?Te(He):He[In]);return this.isDefaultPrevented=(He.defaultPrevented!=null?He.defaultPrevented:He.returnValue===!1)?Gl:Fo,this.isPropagationStopped=Fo,this}return Ve(Ae.prototype,{preventDefault:function(){this.defaultPrevented=!0;var Te=this.nativeEvent;Te&&(Te.preventDefault?Te.preventDefault():typeof Te.returnValue!="unknown"&&(Te.returnValue=!1),this.isDefaultPrevented=Gl)},stopPropagation:function(){var Te=this.nativeEvent;Te&&(Te.stopPropagation?Te.stopPropagation():typeof Te.cancelBubble!="unknown"&&(Te.cancelBubble=!0),this.isPropagationStopped=Gl)},persist:function(){},isPersistent:Gl}),Ae}var As={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(_e){return _e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dl=Br(As),Oo=Ve({},As,{view:0,detail:0}),fc=Br(Oo),Yl,Es,ds,Jl=Ve({},Oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uo,button:0,buttons:0,relatedTarget:function(_e){return _e.relatedTarget===void 0?_e.fromElement===_e.srcElement?_e.toElement:_e.fromElement:_e.relatedTarget},movementX:function(_e){return"movementX"in _e?_e.movementX:(_e!==ds&&(ds&&_e.type==="mousemove"?(Yl=_e.screenX-ds.screenX,Es=_e.screenY-ds.screenY):Es=Yl=0,ds=_e),Yl)},movementY:function(_e){return"movementY"in _e?_e.movementY:Es}}),mo=Br(Jl),js=Ve({},Jl,{dataTransfer:0}),Du=Br(js),pl=Ve({},Oo,{relatedTarget:0}),Fu=Br(pl),Xl=Ve({},As,{animationName:0,elapsedTime:0,pseudoElement:0}),ah=Br(Xl),Ou=Ve({},As,{clipboardData:function(_e){return"clipboardData"in _e?_e.clipboardData:window.clipboardData}}),Uu=Br(Ou),pc=Ve({},As,{data:0}),ml=Br(pc),zu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ju={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rh(_e){var Ae=this.nativeEvent;return Ae.getModifierState?Ae.getModifierState(_e):(_e=mc[_e])?!!Ae[_e]:!1}function Uo(){return rh}var gl=Ve({},Oo,{key:function(_e){if(_e.key){var Ae=zu[_e.key]||_e.key;if(Ae!=="Unidentified")return Ae}return _e.type==="keypress"?(_e=zs(_e),_e===13?"Enter":String.fromCharCode(_e)):_e.type==="keydown"||_e.type==="keyup"?ju[_e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uo,charCode:function(_e){return _e.type==="keypress"?zs(_e):0},keyCode:function(_e){return _e.type==="keydown"||_e.type==="keyup"?_e.keyCode:0},which:function(_e){return _e.type==="keypress"?zs(_e):_e.type==="keydown"||_e.type==="keyup"?_e.keyCode:0}}),qu=Br(gl),zo=Ve({},Jl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wl=Br(zo),Ke=Ve({},Oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uo}),Bn=Br(Ke),Jn=Ve({},As,{propertyName:0,elapsedTime:0,pseudoElement:0}),ui=Br(Jn),Ei=Ve({},Jl,{deltaX:function(_e){return"deltaX"in _e?_e.deltaX:"wheelDeltaX"in _e?-_e.wheelDeltaX:0},deltaY:function(_e){return"deltaY"in _e?_e.deltaY:"wheelDeltaY"in _e?-_e.wheelDeltaY:"wheelDelta"in _e?-_e.wheelDelta:0},deltaZ:0,deltaMode:0}),Fi=Br(Ei),ta=Ve({},As,{newState:0,oldState:0}),ua=Br(ta),pa=[9,13,27,32],Aa=ls&&"CompositionEvent"in window,Sa=null;ls&&"documentMode"in document&&(Sa=document.documentMode);var Va=ls&&"TextEvent"in window&&!Sa,lr=ls&&(!Aa||Sa&&8<Sa&&11>=Sa),cr=" ",br=!1;function Fr(_e,Ae){switch(_e){case"keyup":return pa.indexOf(Ae.keyCode)!==-1;case"keydown":return Ae.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tr(_e){return _e=_e.detail,typeof _e=="object"&&"data"in _e?_e.data:null}var Yr=!1;function fs(_e,Ae){switch(_e){case"compositionend":return Tr(Ae);case"keypress":return Ae.which!==32?null:(br=!0,cr);case"textInput":return _e=Ae.data,_e===cr&&br?null:_e;default:return null}}function to(_e,Ae){if(Yr)return _e==="compositionend"||!Aa&&Fr(_e,Ae)?(_e=Do(),Io=Iu=eo=null,Yr=!1,_e):null;switch(_e){case"paste":return null;case"keypress":if(!(Ae.ctrlKey||Ae.altKey||Ae.metaKey)||Ae.ctrlKey&&Ae.altKey){if(Ae.char&&1<Ae.char.length)return Ae.char;if(Ae.which)return String.fromCharCode(Ae.which)}return null;case"compositionend":return lr&&Ae.locale!=="ko"?null:Ae.data;default:return null}}var gc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $l(_e){var Ae=_e&&_e.nodeName&&_e.nodeName.toLowerCase();return Ae==="input"?!!gc[_e.type]:Ae==="textarea"}function Kl(_e,Ae,Te,ke){ya?Vo?Vo.push(ke):Vo=[ke]:ya=ke,Ae=Sd(Ae,"onChange"),0<Ae.length&&(Te=new dl("onChange","change",null,Te,ke),_e.push({event:Te,listeners:Ae}))}var no=null,go=null;function Hu(_e){Sg(_e,0)}function yo(_e){var Ae=No(_e);if(_s(Ae))return _e}function Rr(_e,Ae){if(_e==="change")return Ae}var yl=!1;if(ls){var jo;if(ls){var qo="oninput"in document;if(!qo){var Ql=document.createElement("div");Ql.setAttribute("oninput","return;"),qo=typeof Ql.oninput=="function"}jo=qo}else jo=!1;yl=jo&&(!document.documentMode||9<document.documentMode)}function ts(){no&&(no.detachEvent("onpropertychange",yc),go=no=null)}function yc(_e){if(_e.propertyName==="value"&&yo(go)){var Ae=[];Kl(Ae,go,_e,Hl(_e)),Lu(Hu,Ae)}}function Gu(_e,Ae,Te){_e==="focusin"?(ts(),no=Ae,go=Te,no.attachEvent("onpropertychange",yc)):_e==="focusout"&&ts()}function vc(_e){if(_e==="selectionchange"||_e==="keyup"||_e==="keydown")return yo(go)}function Ps(_e,Ae){if(_e==="click")return yo(Ae)}function Zl(_e,Ae){if(_e==="input"||_e==="change")return yo(Ae)}function bc(_e,Ae){return _e===Ae&&(_e!==0||1/_e===1/Ae)||_e!==_e&&Ae!==Ae}var Jr=typeof Object.is=="function"?Object.is:bc;function ws(_e,Ae){if(Jr(_e,Ae))return!0;if(typeof _e!="object"||_e===null||typeof Ae!="object"||Ae===null)return!1;var Te=Object.keys(_e),ke=Object.keys(Ae);if(Te.length!==ke.length)return!1;for(ke=0;ke<Te.length;ke++){var Ue=Te[ke];if(!Mn.call(Ae,Ue)||!Jr(_e[Ue],Ae[Ue]))return!1}return!0}function Ho(_e){for(;_e&&_e.firstChild;)_e=_e.firstChild;return _e}function ns(_e,Ae){var Te=Ho(_e);_e=0;for(var ke;Te;){if(Te.nodeType===3){if(ke=_e+Te.textContent.length,_e<=Ae&&ke>=Ae)return{node:Te,offset:Ae-_e};_e=ke}e:{for(;Te;){if(Te.nextSibling){Te=Te.nextSibling;break e}Te=Te.parentNode}Te=void 0}Te=Ho(Te)}}function Xr(_e,Ae){return _e&&Ae?_e===Ae?!0:_e&&_e.nodeType===3?!1:Ae&&Ae.nodeType===3?Xr(_e,Ae.parentNode):"contains"in _e?_e.contains(Ae):_e.compareDocumentPosition?!!(_e.compareDocumentPosition(Ae)&16):!1:!1}function vo(_e){_e=_e!=null&&_e.ownerDocument!=null&&_e.ownerDocument.defaultView!=null?_e.ownerDocument.defaultView:window;for(var Ae=po(_e.document);Ae instanceof _e.HTMLIFrameElement;){try{var Te=typeof Ae.contentWindow.location.href=="string"}catch{Te=!1}if(Te)_e=Ae.contentWindow;else break;Ae=po(_e.document)}return Ae}function qs(_e){var Ae=_e&&_e.nodeName&&_e.nodeName.toLowerCase();return Ae&&(Ae==="input"&&(_e.type==="text"||_e.type==="search"||_e.type==="tel"||_e.type==="url"||_e.type==="password")||Ae==="textarea"||_e.contentEditable==="true")}var bo=ls&&"documentMode"in document&&11>=document.documentMode,Hs=null,Gs=null,nr=null,vl=!1;function Wr(_e,Ae,Te){var ke=Te.window===Te?Te.document:Te.nodeType===9?Te:Te.ownerDocument;vl||Hs==null||Hs!==po(ke)||(ke=Hs,"selectionStart"in ke&&qs(ke)?ke={start:ke.selectionStart,end:ke.selectionEnd}:(ke=(ke.ownerDocument&&ke.ownerDocument.defaultView||window).getSelection(),ke={anchorNode:ke.anchorNode,anchorOffset:ke.anchorOffset,focusNode:ke.focusNode,focusOffset:ke.focusOffset}),nr&&ws(nr,ke)||(nr=ke,ke=Sd(Gs,"onSelect"),0<ke.length&&(Ae=new dl("onSelect","select",null,Ae,Te),_e.push({event:Ae,listeners:ke}),Ae.target=Hs)))}function Nr(_e,Ae){var Te={};return Te[_e.toLowerCase()]=Ae.toLowerCase(),Te["Webkit"+_e]="webkit"+Ae,Te["Moz"+_e]="moz"+Ae,Te}var Ys={animationend:Nr("Animation","AnimationEnd"),animationiteration:Nr("Animation","AnimationIteration"),animationstart:Nr("Animation","AnimationStart"),transitionrun:Nr("Transition","TransitionRun"),transitionstart:Nr("Transition","TransitionStart"),transitioncancel:Nr("Transition","TransitionCancel"),transitionend:Nr("Transition","TransitionEnd")},eu={},tu={};ls&&(tu=document.createElement("div").style,"AnimationEvent"in window||(delete Ys.animationend.animation,delete Ys.animationiteration.animation,delete Ys.animationstart.animation),"TransitionEvent"in window||delete Ys.transitionend.transition);function ps(_e){if(eu[_e])return eu[_e];if(!Ys[_e])return _e;var Ae=Ys[_e],Te;for(Te in Ae)if(Ae.hasOwnProperty(Te)&&Te in tu)return eu[_e]=Ae[Te];return _e}var Go=ps("animationend"),xo=ps("animationiteration"),Yo=ps("animationstart"),nu=ps("transitionrun"),bl=ps("transitionstart"),Jo=ps("transitioncancel"),iu=ps("transitionend"),ms=new Map,us="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");us.push("scrollEnd");function Ca(_e,Ae){ms.set(_e,Ae),fo(Ae,[_e])}var Ga=typeof reportError=="function"?reportError:function(_e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof _e=="object"&&_e!==null&&typeof _e.message=="string"?String(_e.message):String(_e),error:_e});if(!window.dispatchEvent(Ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",_e);return}console.error(_e)},Ua=[],ur=0,Js=0;function Xo(){for(var _e=ur,Ae=Js=ur=0;Ae<_e;){var Te=Ua[Ae];Ua[Ae++]=null;var ke=Ua[Ae];Ua[Ae++]=null;var Ue=Ua[Ae];Ua[Ae++]=null;var He=Ua[Ae];if(Ua[Ae++]=null,ke!==null&&Ue!==null){var bn=ke.pending;bn===null?Ue.next=Ue:(Ue.next=bn.next,bn.next=Ue),ke.pending=Ue}He!==0&&Yu(Te,Ue,He)}}function _o(_e,Ae,Te,ke){Ua[ur++]=_e,Ua[ur++]=Ae,Ua[ur++]=Te,Ua[ur++]=ke,Js|=ke,_e.lanes|=ke,_e=_e.alternate,_e!==null&&(_e.lanes|=ke)}function au(_e,Ae,Te,ke){return _o(_e,Ae,Te,ke),$r(_e)}function So(_e,Ae){return _o(_e,null,null,Ae),$r(_e)}function Yu(_e,Ae,Te){_e.lanes|=Te;var ke=_e.alternate;ke!==null&&(ke.lanes|=Te);for(var Ue=!1,He=_e.return;He!==null;)He.childLanes|=Te,ke=He.alternate,ke!==null&&(ke.childLanes|=Te),He.tag===22&&(_e=He.stateNode,_e===null||_e._visibility&1||(Ue=!0)),_e=He,He=He.return;return _e.tag===3?(He=_e.stateNode,Ue&&Ae!==null&&(Ue=31-Kn(Te),_e=He.hiddenUpdates,ke=_e[Ue],ke===null?_e[Ue]=[Ae]:ke.push(Ae),Ae.lane=Te|536870912),He):null}function $r(_e){if(50<Th)throw Th=0,kf=null,Error(xe(185));for(var Ae=_e.return;Ae!==null;)_e=Ae,Ae=_e.return;return _e.tag===3?_e.stateNode:null}var Or={};function xc(_e,Ae,Te,ke){this.tag=_e,this.key=Te,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=Ae,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=ke,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kr(_e,Ae,Te,ke){return new xc(_e,Ae,Te,ke)}function _c(_e){return _e=_e.prototype,!(!_e||!_e.isReactComponent)}function Ts(_e,Ae){var Te=_e.alternate;return Te===null?(Te=Kr(_e.tag,Ae,_e.key,_e.mode),Te.elementType=_e.elementType,Te.type=_e.type,Te.stateNode=_e.stateNode,Te.alternate=_e,_e.alternate=Te):(Te.pendingProps=Ae,Te.type=_e.type,Te.flags=0,Te.subtreeFlags=0,Te.deletions=null),Te.flags=_e.flags&65011712,Te.childLanes=_e.childLanes,Te.lanes=_e.lanes,Te.child=_e.child,Te.memoizedProps=_e.memoizedProps,Te.memoizedState=_e.memoizedState,Te.updateQueue=_e.updateQueue,Ae=_e.dependencies,Te.dependencies=Ae===null?null:{lanes:Ae.lanes,firstContext:Ae.firstContext},Te.sibling=_e.sibling,Te.index=_e.index,Te.ref=_e.ref,Te.refCleanup=_e.refCleanup,Te}function Ju(_e,Ae){_e.flags&=65011714;var Te=_e.alternate;return Te===null?(_e.childLanes=0,_e.lanes=Ae,_e.child=null,_e.subtreeFlags=0,_e.memoizedProps=null,_e.memoizedState=null,_e.updateQueue=null,_e.dependencies=null,_e.stateNode=null):(_e.childLanes=Te.childLanes,_e.lanes=Te.lanes,_e.child=Te.child,_e.subtreeFlags=0,_e.deletions=null,_e.memoizedProps=Te.memoizedProps,_e.memoizedState=Te.memoizedState,_e.updateQueue=Te.updateQueue,_e.type=Te.type,Ae=Te.dependencies,_e.dependencies=Ae===null?null:{lanes:Ae.lanes,firstContext:Ae.firstContext}),_e}function ru(_e,Ae,Te,ke,Ue,He){var bn=0;if(ke=_e,typeof _e=="function")_c(_e)&&(bn=1);else if(typeof _e=="string")bn=Ly(_e,Te,$e.current)?26:_e==="html"||_e==="head"||_e==="body"?27:5;else e:switch(_e){case We:return _e=Kr(31,Te,Ae,Ue),_e.elementType=We,_e.lanes=He,_e;case Ye:return Wo(Te.children,Ue,He,Ae);case Xe:bn=8,Ue|=24;break;case je:return _e=Kr(12,Te,Ae,Ue|2),_e.elementType=je,_e.lanes=He,_e;case nn:return _e=Kr(13,Te,Ae,Ue),_e.elementType=nn,_e.lanes=He,_e;case an:return _e=Kr(19,Te,Ae,Ue),_e.elementType=an,_e.lanes=He,_e;default:if(typeof _e=="object"&&_e!==null)switch(_e.$$typeof){case sn:bn=10;break e;case Qe:bn=9;break e;case cn:bn=11;break e;case Ze:bn=14;break e;case tn:bn=16,ke=null;break e}bn=29,Te=Error(xe(130,_e===null?"null":typeof _e,"")),ke=null}return Ae=Kr(bn,Te,Ae,Ue),Ae.elementType=_e,Ae.type=ke,Ae.lanes=He,Ae}function Wo(_e,Ae,Te,ke){return _e=Kr(7,_e,ke,Ae),_e.lanes=Te,_e}function Xu(_e,Ae,Te){return _e=Kr(6,_e,null,Ae),_e.lanes=Te,_e}function Sc(_e){var Ae=Kr(18,null,null,0);return Ae.stateNode=_e,Ae}function su(_e,Ae,Te){return Ae=Kr(4,_e.children!==null?_e.children:[],_e.key,Ae),Ae.lanes=Te,Ae.stateNode={containerInfo:_e.containerInfo,pendingChildren:null,implementation:_e.implementation},Ae}var Ac=new WeakMap;function Cs(_e,Ae){if(typeof _e=="object"&&_e!==null){var Te=Ac.get(_e);return Te!==void 0?Te:(Ae={value:_e,source:Ae,stack:Cn(Ae)},Ac.set(_e,Ae),Ae)}return{value:_e,source:Ae,stack:Cn(Ae)}}var ou=[],xl=0,Ec=null,Wu=0,Bs=[],Rs=0,$o=null,Ns=1,Ms="";function gs(_e,Ae){ou[xl++]=Wu,ou[xl++]=Ec,Ec=_e,Wu=Ae}function Yh(_e,Ae,Te){Bs[Rs++]=Ns,Bs[Rs++]=Ms,Bs[Rs++]=$o,$o=_e;var ke=Ns;_e=Ms;var Ue=32-Kn(ke)-1;ke&=~(1<<Ue),Te+=1;var He=32-Kn(Ae)+Ue;if(30<He){var bn=Ue-Ue%5;He=(ke&(1<<bn)-1).toString(32),ke>>=bn,Ue-=bn,Ns=1<<32-Kn(Ae)+Ue|Te<<Ue|ke,Ms=He+_e}else Ns=1<<He|Te<<Ue|ke,Ms=_e}function sh(_e){_e.return!==null&&(gs(_e,1),Yh(_e,1,0))}function Pc(_e){for(;_e===Ec;)Ec=ou[--xl],ou[xl]=null,Wu=ou[--xl],ou[xl]=null;for(;_e===$o;)$o=Bs[--Rs],Bs[Rs]=null,Ms=Bs[--Rs],Bs[Rs]=null,Ns=Bs[--Rs],Bs[Rs]=null}function Jh(_e,Ae){Bs[Rs++]=Ns,Bs[Rs++]=Ms,Bs[Rs++]=$o,Ns=Ae.id,Ms=Ae.overflow,$o=_e}var Ur=null,ir=null,Ra=!1,is=null,fr=!1,Xs=Error(xe(519));function Ko(_e){var Ae=Error(xe(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw lu(Cs(Ae,_e)),Xs}function oh(_e){var Ae=_e.stateNode,Te=_e.type,ke=_e.memoizedProps;switch(Ae[Zi]=_e,Ae[aa]=ke,Te){case"dialog":ka("cancel",Ae),ka("close",Ae);break;case"iframe":case"object":case"embed":ka("load",Ae);break;case"video":case"audio":for(Te=0;Te<Bh.length;Te++)ka(Bh[Te],Ae);break;case"source":ka("error",Ae);break;case"img":case"image":case"link":ka("error",Ae),ka("load",Ae);break;case"details":ka("toggle",Ae);break;case"input":ka("invalid",Ae),oc(Ae,ke.value,ke.defaultValue,ke.checked,ke.defaultChecked,ke.type,ke.name,!0);break;case"select":ka("invalid",Ae);break;case"textarea":ka("invalid",Ae),uc(Ae,ke.value,ke.defaultValue,ke.children)}Te=ke.children,typeof Te!="string"&&typeof Te!="number"&&typeof Te!="bigint"||Ae.textContent===""+Te||ke.suppressHydrationWarning===!0||wg(Ae.textContent,Te)?(ke.popover!=null&&(ka("beforetoggle",Ae),ka("toggle",Ae)),ke.onScroll!=null&&ka("scroll",Ae),ke.onScrollEnd!=null&&ka("scrollend",Ae),ke.onClick!=null&&(Ae.onclick=or),Ae=!0):Ae=!1,Ae||Ko(_e,!0)}function Ao(_e){for(Ur=_e.return;Ur;)switch(Ur.tag){case 5:case 31:case 13:fr=!1;return;case 27:case 3:fr=!0;return;default:Ur=Ur.return}}function zr(_e){if(_e!==Ur)return!1;if(!Ra)return Ao(_e),Ra=!0,!1;var Ae=_e.tag,Te;if((Te=Ae!==3&&Ae!==27)&&((Te=Ae===5)&&(Te=_e.type,Te=!(Te!=="form"&&Te!=="button")||Xf(_e.type,_e.memoizedProps)),Te=!Te),Te&&ir&&Ko(_e),Ao(_e),Ae===13){if(_e=_e.memoizedState,_e=_e!==null?_e.dehydrated:null,!_e)throw Error(xe(317));ir=Lg(_e)}else if(Ae===31){if(_e=_e.memoizedState,_e=_e!==null?_e.dehydrated:null,!_e)throw Error(xe(317));ir=Lg(_e)}else Ae===27?(Ae=ir,Su(_e.type)?(_e=Zf,Zf=null,ir=_e):ir=Ae):ir=Ur?uo(_e.stateNode.nextSibling):null;return!0}function _l(){ir=Ur=null,Ra=!1}function lh(){var _e=is;return _e!==null&&(Fs===null?Fs=_e:Fs.push.apply(Fs,_e),is=null),_e}function lu(_e){is===null?is=[_e]:is.push(_e)}var wc=xn(null),Qo=null,io=null;function Zo(_e,Ae,Te){Oe(wc,Ae._currentValue),Ae._currentValue=Te}function ks(_e){_e._currentValue=wc.current,Ge(wc)}function uu(_e,Ae,Te){for(;_e!==null;){var ke=_e.alternate;if((_e.childLanes&Ae)!==Ae?(_e.childLanes|=Ae,ke!==null&&(ke.childLanes|=Ae)):ke!==null&&(ke.childLanes&Ae)!==Ae&&(ke.childLanes|=Ae),_e===Te)break;_e=_e.return}}function Sl(_e,Ae,Te,ke){var Ue=_e.child;for(Ue!==null&&(Ue.return=_e);Ue!==null;){var He=Ue.dependencies;if(He!==null){var bn=Ue.child;He=He.firstContext;e:for(;He!==null;){var In=He;He=Ue;for(var ri=0;ri<Ae.length;ri++)if(In.context===Ae[ri]){He.lanes|=Te,In=He.alternate,In!==null&&(In.lanes|=Te),uu(He.return,Te,_e),ke||(bn=null);break e}He=In.next}}else if(Ue.tag===18){if(bn=Ue.return,bn===null)throw Error(xe(341));bn.lanes|=Te,He=bn.alternate,He!==null&&(He.lanes|=Te),uu(bn,Te,_e),bn=null}else bn=Ue.child;if(bn!==null)bn.return=Ue;else for(bn=Ue;bn!==null;){if(bn===_e){bn=null;break}if(Ue=bn.sibling,Ue!==null){Ue.return=bn.return,bn=Ue;break}bn=bn.return}Ue=bn}}function el(_e,Ae,Te,ke){_e=null;for(var Ue=Ae,He=!1;Ue!==null;){if(!He){if((Ue.flags&524288)!==0)He=!0;else if((Ue.flags&262144)!==0)break}if(Ue.tag===10){var bn=Ue.alternate;if(bn===null)throw Error(xe(387));if(bn=bn.memoizedProps,bn!==null){var In=Ue.type;Jr(Ue.pendingProps.value,bn.value)||(_e!==null?_e.push(In):_e=[In])}}else if(Ue===gn.current){if(bn=Ue.alternate,bn===null)throw Error(xe(387));bn.memoizedState.memoizedState!==Ue.memoizedState.memoizedState&&(_e!==null?_e.push(Vh):_e=[Vh])}Ue=Ue.return}_e!==null&&Sl(Ae,_e,Te,ke),Ae.flags|=262144}function Tc(_e){for(_e=_e.firstContext;_e!==null;){if(!Jr(_e.context._currentValue,_e.memoizedValue))return!0;_e=_e.next}return!1}function tl(_e){Qo=_e,io=null,_e=_e.dependencies,_e!==null&&(_e.firstContext=null)}function jr(_e){return Xh(Qo,_e)}function Cc(_e,Ae){return Qo===null&&tl(_e),Xh(_e,Ae)}function Xh(_e,Ae){var Te=Ae._currentValue;if(Ae={context:Ae,memoizedValue:Te,next:null},io===null){if(_e===null)throw Error(xe(308));io=Ae,_e.dependencies={lanes:0,firstContext:Ae},_e.flags|=524288}else io=io.next=Ae;return Te}var Kd=typeof AbortController<"u"?AbortController:function(){var _e=[],Ae=this.signal={aborted:!1,addEventListener:function(Te,ke){_e.push(ke)}};this.abort=function(){Ae.aborted=!0,_e.forEach(function(Te){return Te()})}},Qd=t.unstable_scheduleCallback,Zd=t.unstable_NormalPriority,xr={$$typeof:sn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cu(){return{controller:new Kd,data:new Map,refCount:0}}function $u(_e){_e.refCount--,_e.refCount===0&&Qd(Zd,function(){_e.controller.abort()})}var Ku=null,Bc=0,De=0,ze=null;function en(_e,Ae){if(Ku===null){var Te=Ku=[];Bc=0,De=Of(),ze={status:"pending",value:void 0,then:function(ke){Te.push(ke)}}}return Bc++,Ae.then(dn,dn),Ae}function dn(){if(--Bc===0&&Ku!==null){ze!==null&&(ze.status="fulfilled");var _e=Ku;Ku=null,De=0,ze=null;for(var Ae=0;Ae<_e.length;Ae++)(0,_e[Ae])()}}function Tn(_e,Ae){var Te=[],ke={status:"pending",value:null,reason:null,then:function(Ue){Te.push(Ue)}};return _e.then(function(){ke.status="fulfilled",ke.value=Ae;for(var Ue=0;Ue<Te.length;Ue++)(0,Te[Ue])(Ae)},function(Ue){for(ke.status="rejected",ke.reason=Ue,Ue=0;Ue<Te.length;Ue++)(0,Te[Ue])(void 0)}),ke}var kn=mn.S;mn.S=function(_e,Ae){$m=pi(),typeof Ae=="object"&&Ae!==null&&typeof Ae.then=="function"&&en(_e,Ae),kn!==null&&kn(_e,Ae)};var Vn=xn(null);function Ln(){var _e=Vn.current;return _e!==null?_e:rr.pooledCache}function Dn(_e,Ae){Ae===null?Oe(Vn,Vn.current):Oe(Vn,Ae.pool)}function Hn(){var _e=Ln();return _e===null?null:{parent:xr._currentValue,pool:_e}}var ci=Error(xe(460)),Ri=Error(xe(474)),Bi=Error(xe(542)),vi={then:function(){}};function Xi(_e){return _e=_e.status,_e==="fulfilled"||_e==="rejected"}function Ii(_e,Ae,Te){switch(Te=_e[Te],Te===void 0?_e.push(Ae):Te!==Ae&&(Ae.then(or,or),Ae=Te),Ae.status){case"fulfilled":return Ae.value;case"rejected":throw _e=Ae.reason,Qi(_e),_e;default:if(typeof Ae.status=="string")Ae.then(or,or);else{if(_e=rr,_e!==null&&100<_e.shellSuspendCounter)throw Error(xe(482));_e=Ae,_e.status="pending",_e.then(function(ke){if(Ae.status==="pending"){var Ue=Ae;Ue.status="fulfilled",Ue.value=ke}},function(ke){if(Ae.status==="pending"){var Ue=Ae;Ue.status="rejected",Ue.reason=ke}})}switch(Ae.status){case"fulfilled":return Ae.value;case"rejected":throw _e=Ae.reason,Qi(_e),_e}throw mi=Ae,ci}}function hi(_e){try{var Ae=_e._init;return Ae(_e._payload)}catch(Te){throw Te!==null&&typeof Te=="object"&&typeof Te.then=="function"?(mi=Te,ci):Te}}var mi=null;function Gi(){if(mi===null)throw Error(xe(459));var _e=mi;return mi=null,_e}function Qi(_e){if(_e===ci||_e===Bi)throw Error(xe(483))}var Hi=null,oa=0;function ra(_e){var Ae=oa;return oa+=1,Hi===null&&(Hi=[]),Ii(Hi,_e,Ae)}function fa(_e,Ae){Ae=Ae.props.ref,_e.ref=Ae!==void 0?Ae:null}function sa(_e,Ae){throw Ae.$$typeof===Fe?Error(xe(525)):(_e=Object.prototype.toString.call(Ae),Error(xe(31,_e==="[object Object]"?"object with keys {"+Object.keys(Ae).join(", ")+"}":_e)))}function za(_e){function Ae(_i,fi){if(_e){var Ni=_i.deletions;Ni===null?(_i.deletions=[fi],_i.flags|=16):Ni.push(fi)}}function Te(_i,fi){if(!_e)return null;for(;fi!==null;)Ae(_i,fi),fi=fi.sibling;return null}function ke(_i){for(var fi=new Map;_i!==null;)_i.key!==null?fi.set(_i.key,_i):fi.set(_i.index,_i),_i=_i.sibling;return fi}function Ue(_i,fi){return _i=Ts(_i,fi),_i.index=0,_i.sibling=null,_i}function He(_i,fi,Ni){return _i.index=Ni,_e?(Ni=_i.alternate,Ni!==null?(Ni=Ni.index,Ni<fi?(_i.flags|=67108866,fi):Ni):(_i.flags|=67108866,fi)):(_i.flags|=1048576,fi)}function bn(_i){return _e&&_i.alternate===null&&(_i.flags|=67108866),_i}function In(_i,fi,Ni,Yi){return fi===null||fi.tag!==6?(fi=Xu(Ni,_i.mode,Yi),fi.return=_i,fi):(fi=Ue(fi,Ni),fi.return=_i,fi)}function ri(_i,fi,Ni,Yi){var ga=Ni.type;return ga===Ye?zi(_i,fi,Ni.props.children,Yi,Ni.key):fi!==null&&(fi.elementType===ga||typeof ga=="object"&&ga!==null&&ga.$$typeof===tn&&hi(ga)===fi.type)?(fi=Ue(fi,Ni.props),fa(fi,Ni),fi.return=_i,fi):(fi=ru(Ni.type,Ni.key,Ni.props,null,_i.mode,Yi),fa(fi,Ni),fi.return=_i,fi)}function Mi(_i,fi,Ni,Yi){return fi===null||fi.tag!==4||fi.stateNode.containerInfo!==Ni.containerInfo||fi.stateNode.implementation!==Ni.implementation?(fi=su(Ni,_i.mode,Yi),fi.return=_i,fi):(fi=Ue(fi,Ni.children||[]),fi.return=_i,fi)}function zi(_i,fi,Ni,Yi,ga){return fi===null||fi.tag!==7?(fi=Wo(Ni,_i.mode,Yi,ga),fi.return=_i,fi):(fi=Ue(fi,Ni),fi.return=_i,fi)}function $i(_i,fi,Ni){if(typeof fi=="string"&&fi!==""||typeof fi=="number"||typeof fi=="bigint")return fi=Xu(""+fi,_i.mode,Ni),fi.return=_i,fi;if(typeof fi=="object"&&fi!==null){switch(fi.$$typeof){case Ie:return Ni=ru(fi.type,fi.key,fi.props,null,_i.mode,Ni),fa(Ni,fi),Ni.return=_i,Ni;case qe:return fi=su(fi,_i.mode,Ni),fi.return=_i,fi;case tn:return fi=hi(fi),$i(_i,fi,Ni)}if(yn(fi)||St(fi))return fi=Wo(fi,_i.mode,Ni,null),fi.return=_i,fi;if(typeof fi.then=="function")return $i(_i,ra(fi),Ni);if(fi.$$typeof===sn)return $i(_i,Cc(_i,fi),Ni);sa(_i,fi)}return null}function Vi(_i,fi,Ni,Yi){var ga=fi!==null?fi.key:null;if(typeof Ni=="string"&&Ni!==""||typeof Ni=="number"||typeof Ni=="bigint")return ga!==null?null:In(_i,fi,""+Ni,Yi);if(typeof Ni=="object"&&Ni!==null){switch(Ni.$$typeof){case Ie:return Ni.key===ga?ri(_i,fi,Ni,Yi):null;case qe:return Ni.key===ga?Mi(_i,fi,Ni,Yi):null;case tn:return Ni=hi(Ni),Vi(_i,fi,Ni,Yi)}if(yn(Ni)||St(Ni))return ga!==null?null:zi(_i,fi,Ni,Yi,null);if(typeof Ni.then=="function")return Vi(_i,fi,ra(Ni),Yi);if(Ni.$$typeof===sn)return Vi(_i,fi,Cc(_i,Ni),Yi);sa(_i,Ni)}return null}function Li(_i,fi,Ni,Yi,ga){if(typeof Yi=="string"&&Yi!==""||typeof Yi=="number"||typeof Yi=="bigint")return _i=_i.get(Ni)||null,In(fi,_i,""+Yi,ga);if(typeof Yi=="object"&&Yi!==null){switch(Yi.$$typeof){case Ie:return _i=_i.get(Yi.key===null?Ni:Yi.key)||null,ri(fi,_i,Yi,ga);case qe:return _i=_i.get(Yi.key===null?Ni:Yi.key)||null,Mi(fi,_i,Yi,ga);case tn:return Yi=hi(Yi),Li(_i,fi,Ni,Yi,ga)}if(yn(Yi)||St(Yi))return _i=_i.get(Ni)||null,zi(fi,_i,Yi,ga,null);if(typeof Yi.then=="function")return Li(_i,fi,Ni,ra(Yi),ga);if(Yi.$$typeof===sn)return Li(_i,fi,Ni,Cc(fi,Yi),ga);sa(fi,Yi)}return null}function ha(_i,fi,Ni,Yi){for(var ga=null,qa=null,da=fi,wa=fi=0,Da=null;da!==null&&wa<Ni.length;wa++){da.index>wa?(Da=da,da=null):Da=da.sibling;var Ha=Vi(_i,da,Ni[wa],Yi);if(Ha===null){da===null&&(da=Da);break}_e&&da&&Ha.alternate===null&&Ae(_i,da),fi=He(Ha,fi,wa),qa===null?ga=Ha:qa.sibling=Ha,qa=Ha,da=Da}if(wa===Ni.length)return Te(_i,da),Ra&&gs(_i,wa),ga;if(da===null){for(;wa<Ni.length;wa++)da=$i(_i,Ni[wa],Yi),da!==null&&(fi=He(da,fi,wa),qa===null?ga=da:qa.sibling=da,qa=da);return Ra&&gs(_i,wa),ga}for(da=ke(da);wa<Ni.length;wa++)Da=Li(da,_i,wa,Ni[wa],Yi),Da!==null&&(_e&&Da.alternate!==null&&da.delete(Da.key===null?wa:Da.key),fi=He(Da,fi,wa),qa===null?ga=Da:qa.sibling=Da,qa=Da);return _e&&da.forEach(function(Tu){return Ae(_i,Tu)}),Ra&&gs(_i,wa),ga}function ba(_i,fi,Ni,Yi){if(Ni==null)throw Error(xe(151));for(var ga=null,qa=null,da=fi,wa=fi=0,Da=null,Ha=Ni.next();da!==null&&!Ha.done;wa++,Ha=Ni.next()){da.index>wa?(Da=da,da=null):Da=da.sibling;var Tu=Vi(_i,da,Ha.value,Yi);if(Tu===null){da===null&&(da=Da);break}_e&&da&&Tu.alternate===null&&Ae(_i,da),fi=He(Tu,fi,wa),qa===null?ga=Tu:qa.sibling=Tu,qa=Tu,da=Da}if(Ha.done)return Te(_i,da),Ra&&gs(_i,wa),ga;if(da===null){for(;!Ha.done;wa++,Ha=Ni.next())Ha=$i(_i,Ha.value,Yi),Ha!==null&&(fi=He(Ha,fi,wa),qa===null?ga=Ha:qa.sibling=Ha,qa=Ha);return Ra&&gs(_i,wa),ga}for(da=ke(da);!Ha.done;wa++,Ha=Ni.next())Ha=Li(da,_i,wa,Ha.value,Yi),Ha!==null&&(_e&&Ha.alternate!==null&&da.delete(Ha.key===null?wa:Ha.key),fi=He(Ha,fi,wa),qa===null?ga=Ha:qa.sibling=Ha,qa=Ha);return _e&&da.forEach(function(Yy){return Ae(_i,Yy)}),Ra&&gs(_i,wa),ga}function er(_i,fi,Ni,Yi){if(typeof Ni=="object"&&Ni!==null&&Ni.type===Ye&&Ni.key===null&&(Ni=Ni.props.children),typeof Ni=="object"&&Ni!==null){switch(Ni.$$typeof){case Ie:e:{for(var ga=Ni.key;fi!==null;){if(fi.key===ga){if(ga=Ni.type,ga===Ye){if(fi.tag===7){Te(_i,fi.sibling),Yi=Ue(fi,Ni.props.children),Yi.return=_i,_i=Yi;break e}}else if(fi.elementType===ga||typeof ga=="object"&&ga!==null&&ga.$$typeof===tn&&hi(ga)===fi.type){Te(_i,fi.sibling),Yi=Ue(fi,Ni.props),fa(Yi,Ni),Yi.return=_i,_i=Yi;break e}Te(_i,fi);break}else Ae(_i,fi);fi=fi.sibling}Ni.type===Ye?(Yi=Wo(Ni.props.children,_i.mode,Yi,Ni.key),Yi.return=_i,_i=Yi):(Yi=ru(Ni.type,Ni.key,Ni.props,null,_i.mode,Yi),fa(Yi,Ni),Yi.return=_i,_i=Yi)}return bn(_i);case qe:e:{for(ga=Ni.key;fi!==null;){if(fi.key===ga)if(fi.tag===4&&fi.stateNode.containerInfo===Ni.containerInfo&&fi.stateNode.implementation===Ni.implementation){Te(_i,fi.sibling),Yi=Ue(fi,Ni.children||[]),Yi.return=_i,_i=Yi;break e}else{Te(_i,fi);break}else Ae(_i,fi);fi=fi.sibling}Yi=su(Ni,_i.mode,Yi),Yi.return=_i,_i=Yi}return bn(_i);case tn:return Ni=hi(Ni),er(_i,fi,Ni,Yi)}if(yn(Ni))return ha(_i,fi,Ni,Yi);if(St(Ni)){if(ga=St(Ni),typeof ga!="function")throw Error(xe(150));return Ni=ga.call(Ni),ba(_i,fi,Ni,Yi)}if(typeof Ni.then=="function")return er(_i,fi,ra(Ni),Yi);if(Ni.$$typeof===sn)return er(_i,fi,Cc(_i,Ni),Yi);sa(_i,Ni)}return typeof Ni=="string"&&Ni!==""||typeof Ni=="number"||typeof Ni=="bigint"?(Ni=""+Ni,fi!==null&&fi.tag===6?(Te(_i,fi.sibling),Yi=Ue(fi,Ni),Yi.return=_i,_i=Yi):(Te(_i,fi),Yi=Xu(Ni,_i.mode,Yi),Yi.return=_i,_i=Yi),bn(_i)):Te(_i,fi)}return function(_i,fi,Ni,Yi){try{oa=0;var ga=er(_i,fi,Ni,Yi);return Hi=null,ga}catch(da){if(da===ci||da===Bi)throw da;var qa=Kr(29,da,null,_i.mode);return qa.lanes=Yi,qa.return=_i,qa}finally{}}}var Na=za(!0),La=za(!1),Pa=!1;function Ya(_e){_e.updateQueue={baseState:_e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ja(_e,Ae){_e=_e.updateQueue,Ae.updateQueue===_e&&(Ae.updateQueue={baseState:_e.baseState,firstBaseUpdate:_e.firstBaseUpdate,lastBaseUpdate:_e.lastBaseUpdate,shared:_e.shared,callbacks:null})}function va(_e){return{lane:_e,tag:0,payload:null,callback:null,next:null}}function Xa(_e,Ae,Te){var ke=_e.updateQueue;if(ke===null)return null;if(ke=ke.shared,(Ja&2)!==0){var Ue=ke.pending;return Ue===null?Ae.next=Ae:(Ae.next=Ue.next,Ue.next=Ae),ke.pending=Ae,Ae=$r(_e),Yu(_e,null,Te),Ae}return _o(_e,ke,Ae,Te),$r(_e)}function Mr(_e,Ae,Te){if(Ae=Ae.updateQueue,Ae!==null&&(Ae=Ae.shared,(Te&4194048)!==0)){var ke=Ae.lanes;ke&=_e.pendingLanes,Te|=ke,Ae.lanes=Te,gi(_e,Te)}}function pr(_e,Ae){var Te=_e.updateQueue,ke=_e.alternate;if(ke!==null&&(ke=ke.updateQueue,Te===ke)){var Ue=null,He=null;if(Te=Te.firstBaseUpdate,Te!==null){do{var bn={lane:Te.lane,tag:Te.tag,payload:Te.payload,callback:null,next:null};He===null?Ue=He=bn:He=He.next=bn,Te=Te.next}while(Te!==null);He===null?Ue=He=Ae:He=He.next=Ae}else Ue=He=Ae;Te={baseState:ke.baseState,firstBaseUpdate:Ue,lastBaseUpdate:He,shared:ke.shared,callbacks:ke.callbacks},_e.updateQueue=Te;return}_e=Te.lastBaseUpdate,_e===null?Te.firstBaseUpdate=Ae:_e.next=Ae,Te.lastBaseUpdate=Ae}var Qr=!1;function Fa(){if(Qr){var _e=ze;if(_e!==null)throw _e}}function qr(_e,Ae,Te,ke){Qr=!1;var Ue=_e.updateQueue;Pa=!1;var He=Ue.firstBaseUpdate,bn=Ue.lastBaseUpdate,In=Ue.shared.pending;if(In!==null){Ue.shared.pending=null;var ri=In,Mi=ri.next;ri.next=null,bn===null?He=Mi:bn.next=Mi,bn=ri;var zi=_e.alternate;zi!==null&&(zi=zi.updateQueue,In=zi.lastBaseUpdate,In!==bn&&(In===null?zi.firstBaseUpdate=Mi:In.next=Mi,zi.lastBaseUpdate=ri))}if(He!==null){var $i=Ue.baseState;bn=0,zi=Mi=ri=null,In=He;do{var Vi=In.lane&-536870913,Li=Vi!==In.lane;if(Li?(Ia&Vi)===Vi:(ke&Vi)===Vi){Vi!==0&&Vi===De&&(Qr=!0),zi!==null&&(zi=zi.next={lane:0,tag:In.tag,payload:In.payload,callback:null,next:null});e:{var ha=_e,ba=In;Vi=Ae;var er=Te;switch(ba.tag){case 1:if(ha=ba.payload,typeof ha=="function"){$i=ha.call(er,$i,Vi);break e}$i=ha;break e;case 3:ha.flags=ha.flags&-65537|128;case 0:if(ha=ba.payload,Vi=typeof ha=="function"?ha.call(er,$i,Vi):ha,Vi==null)break e;$i=Ve({},$i,Vi);break e;case 2:Pa=!0}}Vi=In.callback,Vi!==null&&(_e.flags|=64,Li&&(_e.flags|=8192),Li=Ue.callbacks,Li===null?Ue.callbacks=[Vi]:Li.push(Vi))}else Li={lane:Vi,tag:In.tag,payload:In.payload,callback:In.callback,next:null},zi===null?(Mi=zi=Li,ri=$i):zi=zi.next=Li,bn|=Vi;if(In=In.next,In===null){if(In=Ue.shared.pending,In===null)break;Li=In,In=Li.next,Li.next=null,Ue.lastBaseUpdate=Li,Ue.shared.pending=null}}while(!0);zi===null&&(ri=$i),Ue.baseState=ri,Ue.firstBaseUpdate=Mi,Ue.lastBaseUpdate=zi,He===null&&(Ue.shared.lanes=0),yu|=bn,_e.lanes=bn,_e.memoizedState=$i}}function cs(_e,Ae){if(typeof _e!="function")throw Error(xe(191,_e));_e.call(Ae)}function Cr(_e,Ae){var Te=_e.callbacks;if(Te!==null)for(_e.callbacks=null,_e=0;_e<Te.length;_e++)cs(Te[_e],Ae)}var mr=xn(null),kr=xn(0);function ys(_e,Ae){_e=Vl,Oe(kr,_e),Oe(mr,Ae),Vl=_e|Ae.baseLanes}function Vs(){Oe(kr,Vl),Oe(mr,mr.current)}function Er(){Vl=kr.current,Ge(mr),Ge(kr)}var _r=xn(null),Vr=null;function vs(_e){var Ae=_e.alternate;Oe(gr,gr.current&1),Oe(_r,_e),Vr===null&&(Ae===null||mr.current!==null||Ae.memoizedState!==null)&&(Vr=_e)}function ao(_e){Oe(gr,gr.current),Oe(_r,_e),Vr===null&&(Vr=_e)}function hr(_e){_e.tag===22?(Oe(gr,gr.current),Oe(_r,_e),Vr===null&&(Vr=_e)):ro()}function ro(){Oe(gr,gr.current),Oe(_r,_r.current)}function hs(_e){Ge(_r),Vr===_e&&(Vr=null),Ge(gr)}var gr=xn(0);function Al(_e){for(var Ae=_e;Ae!==null;){if(Ae.tag===13){var Te=Ae.memoizedState;if(Te!==null&&(Te=Te.dehydrated,Te===null||Kf(Te)||Qf(Te)))return Ae}else if(Ae.tag===19&&(Ae.memoizedProps.revealOrder==="forwards"||Ae.memoizedProps.revealOrder==="backwards"||Ae.memoizedProps.revealOrder==="unstable_legacy-backwards"||Ae.memoizedProps.revealOrder==="together")){if((Ae.flags&128)!==0)return Ae}else if(Ae.child!==null){Ae.child.return=Ae,Ae=Ae.child;continue}if(Ae===_e)break;for(;Ae.sibling===null;){if(Ae.return===null||Ae.return===_e)return null;Ae=Ae.return}Ae.sibling.return=Ae.return,Ae=Ae.sibling}return null}var bs=0,Ea=null,Ta=null,ar=null,Eo=!1,El=!1,so=!1,Qu=0,nl=0,il=null,Rc=0;function Qa(){throw Error(xe(321))}function uh(_e,Ae){if(Ae===null)return!1;for(var Te=0;Te<Ae.length&&Te<_e.length;Te++)if(!Jr(_e[Te],Ae[Te]))return!1;return!0}function ch(_e,Ae,Te,ke,Ue,He){return bs=He,Ea=Ae,Ae.memoizedState=null,Ae.updateQueue=null,Ae.lanes=0,mn.H=_e===null||_e.memoizedState===null?om:lf,so=!1,He=Te(ke,Ue),so=!1,El&&(He=Po(Ae,Te,ke,Ue)),Nc(_e),He}function Nc(_e){mn.H=vh;var Ae=Ta!==null&&Ta.next!==null;if(bs=0,ar=Ta=Ea=null,Eo=!1,nl=0,il=null,Ae)throw Error(xe(300));_e===null||Ir||(_e=_e.dependencies,_e!==null&&Tc(_e)&&(Ir=!0))}function Po(_e,Ae,Te,ke){Ea=_e;var Ue=0;do{if(El&&(il=null),nl=0,El=!1,25<=Ue)throw Error(xe(301));if(Ue+=1,ar=Ta=null,_e.updateQueue!=null){var He=_e.updateQueue;He.lastEffect=null,He.events=null,He.stores=null,He.memoCache!=null&&(He.memoCache.index=0)}mn.H=lm,He=Ae(Te,ke)}while(El);return He}function ef(){var _e=mn.H,Ae=_e.useState()[0];return Ae=typeof Ae.then=="function"?al(Ae):Ae,_e=_e.useState()[0],(Ta!==null?Ta.memoizedState:null)!==_e&&(Ea.flags|=1024),Ae}function hh(){var _e=Qu!==0;return Qu=0,_e}function dh(_e,Ae,Te){Ae.updateQueue=_e.updateQueue,Ae.flags&=-2053,_e.lanes&=~Te}function Mc(_e){if(Eo){for(_e=_e.memoizedState;_e!==null;){var Ae=_e.queue;Ae!==null&&(Ae.pending=null),_e=_e.next}Eo=!1}bs=0,ar=Ta=Ea=null,El=!1,nl=Qu=0,il=null}function Lr(){var _e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ar===null?Ea.memoizedState=ar=_e:ar=ar.next=_e,ar}function yr(){if(Ta===null){var _e=Ea.alternate;_e=_e!==null?_e.memoizedState:null}else _e=Ta.next;var Ae=ar===null?Ea.memoizedState:ar.next;if(Ae!==null)ar=Ae,Ta=_e;else{if(_e===null)throw Ea.alternate===null?Error(xe(467)):Error(xe(310));Ta=_e,_e={memoizedState:Ta.memoizedState,baseState:Ta.baseState,baseQueue:Ta.baseQueue,queue:Ta.queue,next:null},ar===null?Ea.memoizedState=ar=_e:ar=ar.next=_e}return ar}function Zu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function al(_e){var Ae=nl;return nl+=1,il===null&&(il=[]),_e=Ii(il,_e,Ae),Ae=Ea,(ar===null?Ae.memoizedState:ar.next)===null&&(Ae=Ae.alternate,mn.H=Ae===null||Ae.memoizedState===null?om:lf),_e}function hu(_e){if(_e!==null&&typeof _e=="object"){if(typeof _e.then=="function")return al(_e);if(_e.$$typeof===sn)return jr(_e)}throw Error(xe(438,String(_e)))}function Pl(_e){var Ae=null,Te=Ea.updateQueue;if(Te!==null&&(Ae=Te.memoCache),Ae==null){var ke=Ea.alternate;ke!==null&&(ke=ke.updateQueue,ke!==null&&(ke=ke.memoCache,ke!=null&&(Ae={data:ke.data.map(function(Ue){return Ue.slice()}),index:0})))}if(Ae==null&&(Ae={data:[],index:0}),Te===null&&(Te=Zu(),Ea.updateQueue=Te),Te.memoCache=Ae,Te=Ae.data[Ae.index],Te===void 0)for(Te=Ae.data[Ae.index]=Array(_e),ke=0;ke<_e;ke++)Te[ke]=An;return Ae.index++,Te}function oo(_e,Ae){return typeof Ae=="function"?Ae(_e):Ae}function kc(_e){var Ae=yr();return du(Ae,Ta,_e)}function du(_e,Ae,Te){var ke=_e.queue;if(ke===null)throw Error(xe(311));ke.lastRenderedReducer=Te;var Ue=_e.baseQueue,He=ke.pending;if(He!==null){if(Ue!==null){var bn=Ue.next;Ue.next=He.next,He.next=bn}Ae.baseQueue=Ue=He,ke.pending=null}if(He=_e.baseState,Ue===null)_e.memoizedState=He;else{Ae=Ue.next;var In=bn=null,ri=null,Mi=Ae,zi=!1;do{var $i=Mi.lane&-536870913;if($i!==Mi.lane?(Ia&$i)===$i:(bs&$i)===$i){var Vi=Mi.revertLane;if(Vi===0)ri!==null&&(ri=ri.next={lane:0,revertLane:0,gesture:null,action:Mi.action,hasEagerState:Mi.hasEagerState,eagerState:Mi.eagerState,next:null}),$i===De&&(zi=!0);else if((bs&Vi)===Vi){Mi=Mi.next,Vi===De&&(zi=!0);continue}else $i={lane:0,revertLane:Mi.revertLane,gesture:null,action:Mi.action,hasEagerState:Mi.hasEagerState,eagerState:Mi.eagerState,next:null},ri===null?(In=ri=$i,bn=He):ri=ri.next=$i,Ea.lanes|=Vi,yu|=Vi;$i=Mi.action,so&&Te(He,$i),He=Mi.hasEagerState?Mi.eagerState:Te(He,$i)}else Vi={lane:$i,revertLane:Mi.revertLane,gesture:Mi.gesture,action:Mi.action,hasEagerState:Mi.hasEagerState,eagerState:Mi.eagerState,next:null},ri===null?(In=ri=Vi,bn=He):ri=ri.next=Vi,Ea.lanes|=$i,yu|=$i;Mi=Mi.next}while(Mi!==null&&Mi!==Ae);if(ri===null?bn=He:ri.next=In,!Jr(He,_e.memoizedState)&&(Ir=!0,zi&&(Te=ze,Te!==null)))throw Te;_e.memoizedState=He,_e.baseState=bn,_e.baseQueue=ri,ke.lastRenderedState=He}return Ue===null&&(ke.lanes=0),[_e.memoizedState,ke.dispatch]}function Vc(_e){var Ae=yr(),Te=Ae.queue;if(Te===null)throw Error(xe(311));Te.lastRenderedReducer=_e;var ke=Te.dispatch,Ue=Te.pending,He=Ae.memoizedState;if(Ue!==null){Te.pending=null;var bn=Ue=Ue.next;do He=_e(He,bn.action),bn=bn.next;while(bn!==Ue);Jr(He,Ae.memoizedState)||(Ir=!0),Ae.memoizedState=He,Ae.baseQueue===null&&(Ae.baseState=He),Te.lastRenderedState=He}return[He,ke]}function Lc(_e,Ae,Te){var ke=Ea,Ue=yr(),He=Ra;if(He){if(Te===void 0)throw Error(xe(407));Te=Te()}else Te=Ae();var bn=!Jr((Ta||Ue).memoizedState,Te);if(bn&&(Ue.memoizedState=Te,Ir=!0),Ue=Ue.queue,tf(ph.bind(null,ke,Ue,_e),[_e]),Ue.getSnapshot!==Ae||bn||ar!==null&&ar.memoizedState.tag&1){if(ke.flags|=2048,Tl(9,{destroy:void 0},fh.bind(null,ke,Ue,Te,Ae),null),rr===null)throw Error(xe(349));He||(bs&127)!==0||wo(ke,Ae,Te)}return Te}function wo(_e,Ae,Te){_e.flags|=16384,_e={getSnapshot:Ae,value:Te},Ae=Ea.updateQueue,Ae===null?(Ae=Zu(),Ea.updateQueue=Ae,Ae.stores=[_e]):(Te=Ae.stores,Te===null?Ae.stores=[_e]:Te.push(_e))}function fh(_e,Ae,Te,ke){Ae.value=Te,Ae.getSnapshot=ke,Wh(Ae)&&mh(_e)}function ph(_e,Ae,Te){return Te(function(){Wh(Ae)&&mh(_e)})}function Wh(_e){var Ae=_e.getSnapshot;_e=_e.value;try{var Te=Ae();return!Jr(_e,Te)}catch{return!0}}function mh(_e){var Ae=So(_e,2);Ae!==null&&Os(Ae,_e,2)}function rl(_e){var Ae=Lr();if(typeof _e=="function"){var Te=_e;if(_e=Te(),so){oi(!0);try{Te()}finally{oi(!1)}}}return Ae.memoizedState=Ae.baseState=_e,Ae.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oo,lastRenderedState:_e},Ae}function $h(_e,Ae,Te,ke){return _e.baseState=Te,du(_e,Ta,typeof ke=="function"?ke:oo)}function Kh(_e,Ae,Te,ke,Ue){if(nd(_e))throw Error(xe(485));if(_e=Ae.action,_e!==null){var He={payload:Ue,action:_e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(bn){He.listeners.push(bn)}};mn.T!==null?Te(!0):He.isTransition=!1,ke(He),Te=Ae.pending,Te===null?(He.next=Ae.pending=He,Qh(Ae,He)):(He.next=Te.next,Ae.pending=Te.next=He)}}function Qh(_e,Ae){var Te=Ae.action,ke=Ae.payload,Ue=_e.state;if(Ae.isTransition){var He=mn.T,bn={};mn.T=bn;try{var In=Te(Ue,ke),ri=mn.S;ri!==null&&ri(bn,In),gh(_e,Ae,In)}catch(Mi){wl(_e,Ae,Mi)}finally{He!==null&&bn.types!==null&&(He.types=bn.types),mn.T=He}}else try{He=Te(Ue,ke),gh(_e,Ae,He)}catch(Mi){wl(_e,Ae,Mi)}}function gh(_e,Ae,Te){Te!==null&&typeof Te=="object"&&typeof Te.then=="function"?Te.then(function(ke){Zh(_e,Ae,ke)},function(ke){return wl(_e,Ae,ke)}):Zh(_e,Ae,Te)}function Zh(_e,Ae,Te){Ae.status="fulfilled",Ae.value=Te,Ic(Ae),_e.state=Te,Ae=_e.pending,Ae!==null&&(Te=Ae.next,Te===Ae?_e.pending=null:(Te=Te.next,Ae.next=Te,Qh(_e,Te)))}function wl(_e,Ae,Te){var ke=_e.pending;if(_e.pending=null,ke!==null){ke=ke.next;do Ae.status="rejected",Ae.reason=Te,Ic(Ae),Ae=Ae.next;while(Ae!==ke)}_e.action=null}function Ic(_e){_e=_e.listeners;for(var Ae=0;Ae<_e.length;Ae++)(0,_e[Ae])()}function tc(_e,Ae){return Ae}function lo(_e,Ae){if(Ra){var Te=rr.formState;if(Te!==null){e:{var ke=Ea;if(Ra){if(ir){t:{for(var Ue=ir,He=fr;Ue.nodeType!==8;){if(!He){Ue=null;break t}if(Ue=uo(Ue.nextSibling),Ue===null){Ue=null;break t}}He=Ue.data,Ue=He==="F!"||He==="F"?Ue:null}if(Ue){ir=uo(Ue.nextSibling),ke=Ue.data==="F!";break e}}Ko(ke)}ke=!1}ke&&(Ae=Te[0])}}return Te=Lr(),Te.memoizedState=Te.baseState=Ae,ke={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tc,lastRenderedState:Ae},Te.queue=ke,Te=am.bind(null,Ea,ke),ke.dispatch=Te,ke=rl(!1),He=of.bind(null,Ea,!1,ke.queue),ke=Lr(),Ue={state:Ae,dispatch:null,action:_e,pending:null},ke.queue=Ue,Te=Kh.bind(null,Ea,Ue,He,Te),Ue.dispatch=Te,ke.memoizedState=_e,[Ae,Te,!1]}function To(_e){var Ae=yr();return Co(Ae,Ta,_e)}function Co(_e,Ae,Te){if(Ae=du(_e,Ae,tc)[0],_e=kc(oo)[0],typeof Ae=="object"&&Ae!==null&&typeof Ae.then=="function")try{var ke=al(Ae)}catch(bn){throw bn===ci?Bi:bn}else ke=Ae;Ae=yr();var Ue=Ae.queue,He=Ue.dispatch;return Te!==Ae.memoizedState&&(Ea.flags|=2048,Tl(9,{destroy:void 0},Dc.bind(null,Ue,Te),null)),[ke,He,_e]}function Dc(_e,Ae){_e.action=Ae}function Fc(_e){var Ae=yr(),Te=Ta;if(Te!==null)return Co(Ae,Te,_e);yr(),Ae=Ae.memoizedState,Te=yr();var ke=Te.queue.dispatch;return Te.memoizedState=_e,[Ae,ke,!1]}function Tl(_e,Ae,Te,ke){return _e={tag:_e,create:Te,deps:ke,inst:Ae,next:null},Ae=Ea.updateQueue,Ae===null&&(Ae=Zu(),Ea.updateQueue=Ae),Te=Ae.lastEffect,Te===null?Ae.lastEffect=_e.next=_e:(ke=Te.next,Te.next=_e,_e.next=ke,Ae.lastEffect=_e),_e}function ed(){return yr().memoizedState}function fu(_e,Ae,Te,ke){var Ue=Lr();Ea.flags|=_e,Ue.memoizedState=Tl(1|Ae,{destroy:void 0},Te,ke===void 0?null:ke)}function pu(_e,Ae,Te,ke){var Ue=yr();ke=ke===void 0?null:ke;var He=Ue.memoizedState.inst;Ta!==null&&ke!==null&&uh(ke,Ta.memoizedState.deps)?Ue.memoizedState=Tl(Ae,He,Te,ke):(Ea.flags|=_e,Ue.memoizedState=Tl(1|Ae,He,Te,ke))}function Hp(_e,Ae){fu(8390656,8,_e,Ae)}function tf(_e,Ae){pu(2048,8,_e,Ae)}function U0(_e){Ea.flags|=4;var Ae=Ea.updateQueue;if(Ae===null)Ae=Zu(),Ea.updateQueue=Ae,Ae.events=[_e];else{var Te=Ae.events;Te===null?Ae.events=[_e]:Te.push(_e)}}function Gp(_e){var Ae=yr().memoizedState;return U0({ref:Ae,nextImpl:_e}),function(){if((Ja&2)!==0)throw Error(xe(440));return Ae.impl.apply(void 0,arguments)}}function Yp(_e,Ae){return pu(4,2,_e,Ae)}function Jp(_e,Ae){return pu(4,4,_e,Ae)}function Xp(_e,Ae){if(typeof Ae=="function"){_e=_e();var Te=Ae(_e);return function(){typeof Te=="function"?Te():Ae(null)}}if(Ae!=null)return _e=_e(),Ae.current=_e,function(){Ae.current=null}}function Wp(_e,Ae,Te){Te=Te!=null?Te.concat([_e]):null,pu(4,4,Xp.bind(null,Ae,_e),Te)}function nf(){}function $p(_e,Ae){var Te=yr();Ae=Ae===void 0?null:Ae;var ke=Te.memoizedState;return Ae!==null&&uh(Ae,ke[1])?ke[0]:(Te.memoizedState=[_e,Ae],_e)}function Kp(_e,Ae){var Te=yr();Ae=Ae===void 0?null:Ae;var ke=Te.memoizedState;if(Ae!==null&&uh(Ae,ke[1]))return ke[0];if(ke=_e(),so){oi(!0);try{_e()}finally{oi(!1)}}return Te.memoizedState=[ke,Ae],ke}function af(_e,Ae,Te){return Te===void 0||(bs&1073741824)!==0&&(Ia&261930)===0?_e.memoizedState=Ae:(_e.memoizedState=Te,_e=Qm(),Ea.lanes|=_e,yu|=_e,Te)}function Qp(_e,Ae,Te,ke){return Jr(Te,Ae)?Te:mr.current!==null?(_e=af(_e,Te,ke),Jr(_e,Ae)||(Ir=!0),_e):(bs&42)===0||(bs&1073741824)!==0&&(Ia&261930)===0?(Ir=!0,_e.memoizedState=Te):(_e=Qm(),Ea.lanes|=_e,yu|=_e,Ae)}function Zp(_e,Ae,Te,ke,Ue){var He=Sn.p;Sn.p=He!==0&&8>He?He:8;var bn=mn.T,In={};mn.T=In,of(_e,!1,Ae,Te);try{var ri=Ue(),Mi=mn.S;if(Mi!==null&&Mi(In,ri),ri!==null&&typeof ri=="object"&&typeof ri.then=="function"){var zi=Tn(ri,ke);yh(_e,Ae,zi,Ks(_e))}else yh(_e,Ae,ke,Ks(_e))}catch($i){yh(_e,Ae,{then:function(){},status:"rejected",reason:$i},Ks())}finally{Sn.p=He,bn!==null&&In.types!==null&&(bn.types=In.types),mn.T=bn}}function z0(){}function rf(_e,Ae,Te,ke){if(_e.tag!==5)throw Error(xe(476));var Ue=em(_e).queue;Zp(_e,Ue,Ae,Pn,Te===null?z0:function(){return tm(_e),Te(ke)})}function em(_e){var Ae=_e.memoizedState;if(Ae!==null)return Ae;Ae={memoizedState:Pn,baseState:Pn,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oo,lastRenderedState:Pn},next:null};var Te={};return Ae.next={memoizedState:Te,baseState:Te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oo,lastRenderedState:Te},next:null},_e.memoizedState=Ae,_e=_e.alternate,_e!==null&&(_e.memoizedState=Ae),Ae}function tm(_e){var Ae=em(_e);Ae.next===null&&(Ae=_e.alternate.memoizedState),yh(_e,Ae.next.queue,{},Ks())}function sf(){return jr(Vh)}function nm(){return yr().memoizedState}function im(){return yr().memoizedState}function j0(_e){for(var Ae=_e.return;Ae!==null;){switch(Ae.tag){case 24:case 3:var Te=Ks();_e=va(Te);var ke=Xa(Ae,_e,Te);ke!==null&&(Os(ke,Ae,Te),Mr(ke,Ae,Te)),Ae={cache:cu()},_e.payload=Ae;return}Ae=Ae.return}}function q0(_e,Ae,Te){var ke=Ks();Te={lane:ke,revertLane:0,gesture:null,action:Te,hasEagerState:!1,eagerState:null,next:null},nd(_e)?rm(Ae,Te):(Te=au(_e,Ae,Te,ke),Te!==null&&(Os(Te,_e,ke),sm(Te,Ae,ke)))}function am(_e,Ae,Te){var ke=Ks();yh(_e,Ae,Te,ke)}function yh(_e,Ae,Te,ke){var Ue={lane:ke,revertLane:0,gesture:null,action:Te,hasEagerState:!1,eagerState:null,next:null};if(nd(_e))rm(Ae,Ue);else{var He=_e.alternate;if(_e.lanes===0&&(He===null||He.lanes===0)&&(He=Ae.lastRenderedReducer,He!==null))try{var bn=Ae.lastRenderedState,In=He(bn,Te);if(Ue.hasEagerState=!0,Ue.eagerState=In,Jr(In,bn))return _o(_e,Ae,Ue,0),rr===null&&Xo(),!1}catch{}finally{}if(Te=au(_e,Ae,Ue,ke),Te!==null)return Os(Te,_e,ke),sm(Te,Ae,ke),!0}return!1}function of(_e,Ae,Te,ke){if(ke={lane:2,revertLane:Of(),gesture:null,action:ke,hasEagerState:!1,eagerState:null,next:null},nd(_e)){if(Ae)throw Error(xe(479))}else Ae=au(_e,Te,ke,2),Ae!==null&&Os(Ae,_e,2)}function nd(_e){var Ae=_e.alternate;return _e===Ea||Ae!==null&&Ae===Ea}function rm(_e,Ae){El=Eo=!0;var Te=_e.pending;Te===null?Ae.next=Ae:(Ae.next=Te.next,Te.next=Ae),_e.pending=Ae}function sm(_e,Ae,Te){if((Te&4194048)!==0){var ke=Ae.lanes;ke&=_e.pendingLanes,Te|=ke,Ae.lanes=Te,gi(_e,Te)}}var vh={readContext:jr,use:hu,useCallback:Qa,useContext:Qa,useEffect:Qa,useImperativeHandle:Qa,useLayoutEffect:Qa,useInsertionEffect:Qa,useMemo:Qa,useReducer:Qa,useRef:Qa,useState:Qa,useDebugValue:Qa,useDeferredValue:Qa,useTransition:Qa,useSyncExternalStore:Qa,useId:Qa,useHostTransitionStatus:Qa,useFormState:Qa,useActionState:Qa,useOptimistic:Qa,useMemoCache:Qa,useCacheRefresh:Qa};vh.useEffectEvent=Qa;var om={readContext:jr,use:hu,useCallback:function(_e,Ae){return Lr().memoizedState=[_e,Ae===void 0?null:Ae],_e},useContext:jr,useEffect:Hp,useImperativeHandle:function(_e,Ae,Te){Te=Te!=null?Te.concat([_e]):null,fu(4194308,4,Xp.bind(null,Ae,_e),Te)},useLayoutEffect:function(_e,Ae){return fu(4194308,4,_e,Ae)},useInsertionEffect:function(_e,Ae){fu(4,2,_e,Ae)},useMemo:function(_e,Ae){var Te=Lr();Ae=Ae===void 0?null:Ae;var ke=_e();if(so){oi(!0);try{_e()}finally{oi(!1)}}return Te.memoizedState=[ke,Ae],ke},useReducer:function(_e,Ae,Te){var ke=Lr();if(Te!==void 0){var Ue=Te(Ae);if(so){oi(!0);try{Te(Ae)}finally{oi(!1)}}}else Ue=Ae;return ke.memoizedState=ke.baseState=Ue,_e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_e,lastRenderedState:Ue},ke.queue=_e,_e=_e.dispatch=q0.bind(null,Ea,_e),[ke.memoizedState,_e]},useRef:function(_e){var Ae=Lr();return _e={current:_e},Ae.memoizedState=_e},useState:function(_e){_e=rl(_e);var Ae=_e.queue,Te=am.bind(null,Ea,Ae);return Ae.dispatch=Te,[_e.memoizedState,Te]},useDebugValue:nf,useDeferredValue:function(_e,Ae){var Te=Lr();return af(Te,_e,Ae)},useTransition:function(){var _e=rl(!1);return _e=Zp.bind(null,Ea,_e.queue,!0,!1),Lr().memoizedState=_e,[!1,_e]},useSyncExternalStore:function(_e,Ae,Te){var ke=Ea,Ue=Lr();if(Ra){if(Te===void 0)throw Error(xe(407));Te=Te()}else{if(Te=Ae(),rr===null)throw Error(xe(349));(Ia&127)!==0||wo(ke,Ae,Te)}Ue.memoizedState=Te;var He={value:Te,getSnapshot:Ae};return Ue.queue=He,Hp(ph.bind(null,ke,He,_e),[_e]),ke.flags|=2048,Tl(9,{destroy:void 0},fh.bind(null,ke,He,Te,Ae),null),Te},useId:function(){var _e=Lr(),Ae=rr.identifierPrefix;if(Ra){var Te=Ms,ke=Ns;Te=(ke&~(1<<32-Kn(ke)-1)).toString(32)+Te,Ae="_"+Ae+"R_"+Te,Te=Qu++,0<Te&&(Ae+="H"+Te.toString(32)),Ae+="_"}else Te=Rc++,Ae="_"+Ae+"r_"+Te.toString(32)+"_";return _e.memoizedState=Ae},useHostTransitionStatus:sf,useFormState:lo,useActionState:lo,useOptimistic:function(_e){var Ae=Lr();Ae.memoizedState=Ae.baseState=_e;var Te={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return Ae.queue=Te,Ae=of.bind(null,Ea,!0,Te),Te.dispatch=Ae,[_e,Ae]},useMemoCache:Pl,useCacheRefresh:function(){return Lr().memoizedState=j0.bind(null,Ea)},useEffectEvent:function(_e){var Ae=Lr(),Te={impl:_e};return Ae.memoizedState=Te,function(){if((Ja&2)!==0)throw Error(xe(440));return Te.impl.apply(void 0,arguments)}}},lf={readContext:jr,use:hu,useCallback:$p,useContext:jr,useEffect:tf,useImperativeHandle:Wp,useInsertionEffect:Yp,useLayoutEffect:Jp,useMemo:Kp,useReducer:kc,useRef:ed,useState:function(){return kc(oo)},useDebugValue:nf,useDeferredValue:function(_e,Ae){var Te=yr();return Qp(Te,Ta.memoizedState,_e,Ae)},useTransition:function(){var _e=kc(oo)[0],Ae=yr().memoizedState;return[typeof _e=="boolean"?_e:al(_e),Ae]},useSyncExternalStore:Lc,useId:nm,useHostTransitionStatus:sf,useFormState:To,useActionState:To,useOptimistic:function(_e,Ae){var Te=yr();return $h(Te,Ta,_e,Ae)},useMemoCache:Pl,useCacheRefresh:im};lf.useEffectEvent=Gp;var lm={readContext:jr,use:hu,useCallback:$p,useContext:jr,useEffect:tf,useImperativeHandle:Wp,useInsertionEffect:Yp,useLayoutEffect:Jp,useMemo:Kp,useReducer:Vc,useRef:ed,useState:function(){return Vc(oo)},useDebugValue:nf,useDeferredValue:function(_e,Ae){var Te=yr();return Ta===null?af(Te,_e,Ae):Qp(Te,Ta.memoizedState,_e,Ae)},useTransition:function(){var _e=Vc(oo)[0],Ae=yr().memoizedState;return[typeof _e=="boolean"?_e:al(_e),Ae]},useSyncExternalStore:Lc,useId:nm,useHostTransitionStatus:sf,useFormState:Fc,useActionState:Fc,useOptimistic:function(_e,Ae){var Te=yr();return Ta!==null?$h(Te,Ta,_e,Ae):(Te.baseState=_e,[_e,Te.queue.dispatch])},useMemoCache:Pl,useCacheRefresh:im};lm.useEffectEvent=Gp;function uf(_e,Ae,Te,ke){Ae=_e.memoizedState,Te=Te(ke,Ae),Te=Te==null?Ae:Ve({},Ae,Te),_e.memoizedState=Te,_e.lanes===0&&(_e.updateQueue.baseState=Te)}var cf={enqueueSetState:function(_e,Ae,Te){_e=_e._reactInternals;var ke=Ks(),Ue=va(ke);Ue.payload=Ae,Te!=null&&(Ue.callback=Te),Ae=Xa(_e,Ue,ke),Ae!==null&&(Os(Ae,_e,ke),Mr(Ae,_e,ke))},enqueueReplaceState:function(_e,Ae,Te){_e=_e._reactInternals;var ke=Ks(),Ue=va(ke);Ue.tag=1,Ue.payload=Ae,Te!=null&&(Ue.callback=Te),Ae=Xa(_e,Ue,ke),Ae!==null&&(Os(Ae,_e,ke),Mr(Ae,_e,ke))},enqueueForceUpdate:function(_e,Ae){_e=_e._reactInternals;var Te=Ks(),ke=va(Te);ke.tag=2,Ae!=null&&(ke.callback=Ae),Ae=Xa(_e,ke,Te),Ae!==null&&(Os(Ae,_e,Te),Mr(Ae,_e,Te))}};function um(_e,Ae,Te,ke,Ue,He,bn){return _e=_e.stateNode,typeof _e.shouldComponentUpdate=="function"?_e.shouldComponentUpdate(ke,He,bn):Ae.prototype&&Ae.prototype.isPureReactComponent?!ws(Te,ke)||!ws(Ue,He):!0}function cm(_e,Ae,Te,ke){_e=Ae.state,typeof Ae.componentWillReceiveProps=="function"&&Ae.componentWillReceiveProps(Te,ke),typeof Ae.UNSAFE_componentWillReceiveProps=="function"&&Ae.UNSAFE_componentWillReceiveProps(Te,ke),Ae.state!==_e&&cf.enqueueReplaceState(Ae,Ae.state,null)}function nc(_e,Ae){var Te=Ae;if("ref"in Ae){Te={};for(var ke in Ae)ke!=="ref"&&(Te[ke]=Ae[ke])}if(_e=_e.defaultProps){Te===Ae&&(Te=Ve({},Te));for(var Ue in _e)Te[Ue]===void 0&&(Te[Ue]=_e[Ue])}return Te}function hm(_e){Ga(_e)}function dm(_e){console.error(_e)}function fm(_e){Ga(_e)}function id(_e,Ae){try{var Te=_e.onUncaughtError;Te(Ae.value,{componentStack:Ae.stack})}catch(ke){setTimeout(function(){throw ke})}}function pm(_e,Ae,Te){try{var ke=_e.onCaughtError;ke(Te.value,{componentStack:Te.stack,errorBoundary:Ae.tag===1?Ae.stateNode:null})}catch(Ue){setTimeout(function(){throw Ue})}}function hf(_e,Ae,Te){return Te=va(Te),Te.tag=3,Te.payload={element:null},Te.callback=function(){id(_e,Ae)},Te}function mm(_e){return _e=va(_e),_e.tag=3,_e}function gm(_e,Ae,Te,ke){var Ue=Te.type.getDerivedStateFromError;if(typeof Ue=="function"){var He=ke.value;_e.payload=function(){return Ue(He)},_e.callback=function(){pm(Ae,Te,ke)}}var bn=Te.stateNode;bn!==null&&typeof bn.componentDidCatch=="function"&&(_e.callback=function(){pm(Ae,Te,ke),typeof Ue!="function"&&(vu===null?vu=new Set([this]):vu.add(this));var In=ke.stack;this.componentDidCatch(ke.value,{componentStack:In!==null?In:""})})}function H0(_e,Ae,Te,ke,Ue){if(Te.flags|=32768,ke!==null&&typeof ke=="object"&&typeof ke.then=="function"){if(Ae=Te.alternate,Ae!==null&&el(Ae,Te,Ue,!0),Te=_r.current,Te!==null){switch(Te.tag){case 31:case 13:return Vr===null?gd():Te.alternate===null&&Pr===0&&(Pr=3),Te.flags&=-257,Te.flags|=65536,Te.lanes=Ue,ke===vi?Te.flags|=16384:(Ae=Te.updateQueue,Ae===null?Te.updateQueue=new Set([ke]):Ae.add(ke),If(_e,ke,Ue)),!1;case 22:return Te.flags|=65536,ke===vi?Te.flags|=16384:(Ae=Te.updateQueue,Ae===null?(Ae={transitions:null,markerInstances:null,retryQueue:new Set([ke])},Te.updateQueue=Ae):(Te=Ae.retryQueue,Te===null?Ae.retryQueue=new Set([ke]):Te.add(ke)),If(_e,ke,Ue)),!1}throw Error(xe(435,Te.tag))}return If(_e,ke,Ue),gd(),!1}if(Ra)return Ae=_r.current,Ae!==null?((Ae.flags&65536)===0&&(Ae.flags|=256),Ae.flags|=65536,Ae.lanes=Ue,ke!==Xs&&(_e=Error(xe(422),{cause:ke}),lu(Cs(_e,Te)))):(ke!==Xs&&(Ae=Error(xe(423),{cause:ke}),lu(Cs(Ae,Te))),_e=_e.current.alternate,_e.flags|=65536,Ue&=-Ue,_e.lanes|=Ue,ke=Cs(ke,Te),Ue=hf(_e.stateNode,ke,Ue),pr(_e,Ue),Pr!==4&&(Pr=2)),!1;var He=Error(xe(520),{cause:ke});if(He=Cs(He,Te),wh===null?wh=[He]:wh.push(He),Pr!==4&&(Pr=2),Ae===null)return!0;ke=Cs(ke,Te),Te=Ae;do{switch(Te.tag){case 3:return Te.flags|=65536,_e=Ue&-Ue,Te.lanes|=_e,_e=hf(Te.stateNode,ke,_e),pr(Te,_e),!1;case 1:if(Ae=Te.type,He=Te.stateNode,(Te.flags&128)===0&&(typeof Ae.getDerivedStateFromError=="function"||He!==null&&typeof He.componentDidCatch=="function"&&(vu===null||!vu.has(He))))return Te.flags|=65536,Ue&=-Ue,Te.lanes|=Ue,Ue=mm(Ue),gm(Ue,_e,Te,ke),pr(Te,Ue),!1}Te=Te.return}while(Te!==null);return!1}var df=Error(xe(461)),Ir=!1;function as(_e,Ae,Te,ke){Ae.child=_e===null?La(Ae,null,Te,ke):Na(Ae,_e.child,Te,ke)}function ym(_e,Ae,Te,ke,Ue){Te=Te.render;var He=Ae.ref;if("ref"in ke){var bn={};for(var In in ke)In!=="ref"&&(bn[In]=ke[In])}else bn=ke;return tl(Ae),ke=ch(_e,Ae,Te,bn,He,Ue),In=hh(),_e!==null&&!Ir?(dh(_e,Ae,Ue),Cl(_e,Ae,Ue)):(Ra&&In&&sh(Ae),Ae.flags|=1,as(_e,Ae,ke,Ue),Ae.child)}function vm(_e,Ae,Te,ke,Ue){if(_e===null){var He=Te.type;return typeof He=="function"&&!_c(He)&&He.defaultProps===void 0&&Te.compare===null?(Ae.tag=15,Ae.type=He,bm(_e,Ae,He,ke,Ue)):(_e=ru(Te.type,null,ke,Ae,Ae.mode,Ue),_e.ref=Ae.ref,_e.return=Ae,Ae.child=_e)}if(He=_e.child,!xf(_e,Ue)){var bn=He.memoizedProps;if(Te=Te.compare,Te=Te!==null?Te:ws,Te(bn,ke)&&_e.ref===Ae.ref)return Cl(_e,Ae,Ue)}return Ae.flags|=1,_e=Ts(He,ke),_e.ref=Ae.ref,_e.return=Ae,Ae.child=_e}function bm(_e,Ae,Te,ke,Ue){if(_e!==null){var He=_e.memoizedProps;if(ws(He,ke)&&_e.ref===Ae.ref)if(Ir=!1,Ae.pendingProps=ke=He,xf(_e,Ue))(_e.flags&131072)!==0&&(Ir=!0);else return Ae.lanes=_e.lanes,Cl(_e,Ae,Ue)}return ff(_e,Ae,Te,ke,Ue)}function xm(_e,Ae,Te,ke){var Ue=ke.children,He=_e!==null?_e.memoizedState:null;if(_e===null&&Ae.stateNode===null&&(Ae.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),ke.mode==="hidden"){if((Ae.flags&128)!==0){if(He=He!==null?He.baseLanes|Te:Te,_e!==null){for(ke=Ae.child=_e.child,Ue=0;ke!==null;)Ue=Ue|ke.lanes|ke.childLanes,ke=ke.sibling;ke=Ue&~He}else ke=0,Ae.child=null;return _m(_e,Ae,He,Te,ke)}if((Te&536870912)!==0)Ae.memoizedState={baseLanes:0,cachePool:null},_e!==null&&Dn(Ae,He!==null?He.cachePool:null),He!==null?ys(Ae,He):Vs(),hr(Ae);else return ke=Ae.lanes=536870912,_m(_e,Ae,He!==null?He.baseLanes|Te:Te,Te,ke)}else He!==null?(Dn(Ae,He.cachePool),ys(Ae,He),ro(),Ae.memoizedState=null):(_e!==null&&Dn(Ae,null),Vs(),ro());return as(_e,Ae,Ue,Te),Ae.child}function bh(_e,Ae){return _e!==null&&_e.tag===22||Ae.stateNode!==null||(Ae.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),Ae.sibling}function _m(_e,Ae,Te,ke,Ue){var He=Ln();return He=He===null?null:{parent:xr._currentValue,pool:He},Ae.memoizedState={baseLanes:Te,cachePool:He},_e!==null&&Dn(Ae,null),Vs(),hr(Ae),_e!==null&&el(_e,Ae,ke,!0),Ae.childLanes=Ue,null}function ad(_e,Ae){return Ae=sd({mode:Ae.mode,children:Ae.children},_e.mode),Ae.ref=_e.ref,_e.child=Ae,Ae.return=_e,Ae}function Sm(_e,Ae,Te){return Na(Ae,_e.child,null,Te),_e=ad(Ae,Ae.pendingProps),_e.flags|=2,hs(Ae),Ae.memoizedState=null,_e}function G0(_e,Ae,Te){var ke=Ae.pendingProps,Ue=(Ae.flags&128)!==0;if(Ae.flags&=-129,_e===null){if(Ra){if(ke.mode==="hidden")return _e=ad(Ae,ke),Ae.lanes=536870912,bh(null,_e);if(ao(Ae),(_e=ir)?(_e=Vg(_e,fr),_e=_e!==null&&_e.data==="&"?_e:null,_e!==null&&(Ae.memoizedState={dehydrated:_e,treeContext:$o!==null?{id:Ns,overflow:Ms}:null,retryLane:536870912,hydrationErrors:null},Te=Sc(_e),Te.return=Ae,Ae.child=Te,Ur=Ae,ir=null)):_e=null,_e===null)throw Ko(Ae);return Ae.lanes=536870912,null}return ad(Ae,ke)}var He=_e.memoizedState;if(He!==null){var bn=He.dehydrated;if(ao(Ae),Ue)if(Ae.flags&256)Ae.flags&=-257,Ae=Sm(_e,Ae,Te);else if(Ae.memoizedState!==null)Ae.child=_e.child,Ae.flags|=128,Ae=null;else throw Error(xe(558));else if(Ir||el(_e,Ae,Te,!1),Ue=(Te&_e.childLanes)!==0,Ir||Ue){if(ke=rr,ke!==null&&(bn=Ti(ke,Te),bn!==0&&bn!==He.retryLane))throw He.retryLane=bn,So(_e,bn),Os(ke,_e,bn),df;gd(),Ae=Sm(_e,Ae,Te)}else _e=He.treeContext,ir=uo(bn.nextSibling),Ur=Ae,Ra=!0,is=null,fr=!1,_e!==null&&Jh(Ae,_e),Ae=ad(Ae,ke),Ae.flags|=4096;return Ae}return _e=Ts(_e.child,{mode:ke.mode,children:ke.children}),_e.ref=Ae.ref,Ae.child=_e,_e.return=Ae,_e}function rd(_e,Ae){var Te=Ae.ref;if(Te===null)_e!==null&&_e.ref!==null&&(Ae.flags|=4194816);else{if(typeof Te!="function"&&typeof Te!="object")throw Error(xe(284));(_e===null||_e.ref!==Te)&&(Ae.flags|=4194816)}}function ff(_e,Ae,Te,ke,Ue){return tl(Ae),Te=ch(_e,Ae,Te,ke,void 0,Ue),ke=hh(),_e!==null&&!Ir?(dh(_e,Ae,Ue),Cl(_e,Ae,Ue)):(Ra&&ke&&sh(Ae),Ae.flags|=1,as(_e,Ae,Te,Ue),Ae.child)}function Am(_e,Ae,Te,ke,Ue,He){return tl(Ae),Ae.updateQueue=null,Te=Po(Ae,ke,Te,Ue),Nc(_e),ke=hh(),_e!==null&&!Ir?(dh(_e,Ae,He),Cl(_e,Ae,He)):(Ra&&ke&&sh(Ae),Ae.flags|=1,as(_e,Ae,Te,He),Ae.child)}function Em(_e,Ae,Te,ke,Ue){if(tl(Ae),Ae.stateNode===null){var He=Or,bn=Te.contextType;typeof bn=="object"&&bn!==null&&(He=jr(bn)),He=new Te(ke,He),Ae.memoizedState=He.state!==null&&He.state!==void 0?He.state:null,He.updater=cf,Ae.stateNode=He,He._reactInternals=Ae,He=Ae.stateNode,He.props=ke,He.state=Ae.memoizedState,He.refs={},Ya(Ae),bn=Te.contextType,He.context=typeof bn=="object"&&bn!==null?jr(bn):Or,He.state=Ae.memoizedState,bn=Te.getDerivedStateFromProps,typeof bn=="function"&&(uf(Ae,Te,bn,ke),He.state=Ae.memoizedState),typeof Te.getDerivedStateFromProps=="function"||typeof He.getSnapshotBeforeUpdate=="function"||typeof He.UNSAFE_componentWillMount!="function"&&typeof He.componentWillMount!="function"||(bn=He.state,typeof He.componentWillMount=="function"&&He.componentWillMount(),typeof He.UNSAFE_componentWillMount=="function"&&He.UNSAFE_componentWillMount(),bn!==He.state&&cf.enqueueReplaceState(He,He.state,null),qr(Ae,ke,He,Ue),Fa(),He.state=Ae.memoizedState),typeof He.componentDidMount=="function"&&(Ae.flags|=4194308),ke=!0}else if(_e===null){He=Ae.stateNode;var In=Ae.memoizedProps,ri=nc(Te,In);He.props=ri;var Mi=He.context,zi=Te.contextType;bn=Or,typeof zi=="object"&&zi!==null&&(bn=jr(zi));var $i=Te.getDerivedStateFromProps;zi=typeof $i=="function"||typeof He.getSnapshotBeforeUpdate=="function",In=Ae.pendingProps!==In,zi||typeof He.UNSAFE_componentWillReceiveProps!="function"&&typeof He.componentWillReceiveProps!="function"||(In||Mi!==bn)&&cm(Ae,He,ke,bn),Pa=!1;var Vi=Ae.memoizedState;He.state=Vi,qr(Ae,ke,He,Ue),Fa(),Mi=Ae.memoizedState,In||Vi!==Mi||Pa?(typeof $i=="function"&&(uf(Ae,Te,$i,ke),Mi=Ae.memoizedState),(ri=Pa||um(Ae,Te,ri,ke,Vi,Mi,bn))?(zi||typeof He.UNSAFE_componentWillMount!="function"&&typeof He.componentWillMount!="function"||(typeof He.componentWillMount=="function"&&He.componentWillMount(),typeof He.UNSAFE_componentWillMount=="function"&&He.UNSAFE_componentWillMount()),typeof He.componentDidMount=="function"&&(Ae.flags|=4194308)):(typeof He.componentDidMount=="function"&&(Ae.flags|=4194308),Ae.memoizedProps=ke,Ae.memoizedState=Mi),He.props=ke,He.state=Mi,He.context=bn,ke=ri):(typeof He.componentDidMount=="function"&&(Ae.flags|=4194308),ke=!1)}else{He=Ae.stateNode,ja(_e,Ae),bn=Ae.memoizedProps,zi=nc(Te,bn),He.props=zi,$i=Ae.pendingProps,Vi=He.context,Mi=Te.contextType,ri=Or,typeof Mi=="object"&&Mi!==null&&(ri=jr(Mi)),In=Te.getDerivedStateFromProps,(Mi=typeof In=="function"||typeof He.getSnapshotBeforeUpdate=="function")||typeof He.UNSAFE_componentWillReceiveProps!="function"&&typeof He.componentWillReceiveProps!="function"||(bn!==$i||Vi!==ri)&&cm(Ae,He,ke,ri),Pa=!1,Vi=Ae.memoizedState,He.state=Vi,qr(Ae,ke,He,Ue),Fa();var Li=Ae.memoizedState;bn!==$i||Vi!==Li||Pa||_e!==null&&_e.dependencies!==null&&Tc(_e.dependencies)?(typeof In=="function"&&(uf(Ae,Te,In,ke),Li=Ae.memoizedState),(zi=Pa||um(Ae,Te,zi,ke,Vi,Li,ri)||_e!==null&&_e.dependencies!==null&&Tc(_e.dependencies))?(Mi||typeof He.UNSAFE_componentWillUpdate!="function"&&typeof He.componentWillUpdate!="function"||(typeof He.componentWillUpdate=="function"&&He.componentWillUpdate(ke,Li,ri),typeof He.UNSAFE_componentWillUpdate=="function"&&He.UNSAFE_componentWillUpdate(ke,Li,ri)),typeof He.componentDidUpdate=="function"&&(Ae.flags|=4),typeof He.getSnapshotBeforeUpdate=="function"&&(Ae.flags|=1024)):(typeof He.componentDidUpdate!="function"||bn===_e.memoizedProps&&Vi===_e.memoizedState||(Ae.flags|=4),typeof He.getSnapshotBeforeUpdate!="function"||bn===_e.memoizedProps&&Vi===_e.memoizedState||(Ae.flags|=1024),Ae.memoizedProps=ke,Ae.memoizedState=Li),He.props=ke,He.state=Li,He.context=ri,ke=zi):(typeof He.componentDidUpdate!="function"||bn===_e.memoizedProps&&Vi===_e.memoizedState||(Ae.flags|=4),typeof He.getSnapshotBeforeUpdate!="function"||bn===_e.memoizedProps&&Vi===_e.memoizedState||(Ae.flags|=1024),ke=!1)}return He=ke,rd(_e,Ae),ke=(Ae.flags&128)!==0,He||ke?(He=Ae.stateNode,Te=ke&&typeof Te.getDerivedStateFromError!="function"?null:He.render(),Ae.flags|=1,_e!==null&&ke?(Ae.child=Na(Ae,_e.child,null,Ue),Ae.child=Na(Ae,null,Te,Ue)):as(_e,Ae,Te,Ue),Ae.memoizedState=He.state,_e=Ae.child):_e=Cl(_e,Ae,Ue),_e}function Pm(_e,Ae,Te,ke){return _l(),Ae.flags|=256,as(_e,Ae,Te,ke),Ae.child}var pf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mf(_e){return{baseLanes:_e,cachePool:Hn()}}function gf(_e,Ae,Te){return _e=_e!==null?_e.childLanes&~Te:0,Ae&&(_e|=$s),_e}function wm(_e,Ae,Te){var ke=Ae.pendingProps,Ue=!1,He=(Ae.flags&128)!==0,bn;if((bn=He)||(bn=_e!==null&&_e.memoizedState===null?!1:(gr.current&2)!==0),bn&&(Ue=!0,Ae.flags&=-129),bn=(Ae.flags&32)!==0,Ae.flags&=-33,_e===null){if(Ra){if(Ue?vs(Ae):ro(),(_e=ir)?(_e=Vg(_e,fr),_e=_e!==null&&_e.data!=="&"?_e:null,_e!==null&&(Ae.memoizedState={dehydrated:_e,treeContext:$o!==null?{id:Ns,overflow:Ms}:null,retryLane:536870912,hydrationErrors:null},Te=Sc(_e),Te.return=Ae,Ae.child=Te,Ur=Ae,ir=null)):_e=null,_e===null)throw Ko(Ae);return Qf(_e)?Ae.lanes=32:Ae.lanes=536870912,null}var In=ke.children;return ke=ke.fallback,Ue?(ro(),Ue=Ae.mode,In=sd({mode:"hidden",children:In},Ue),ke=Wo(ke,Ue,Te,null),In.return=Ae,ke.return=Ae,In.sibling=ke,Ae.child=In,ke=Ae.child,ke.memoizedState=mf(Te),ke.childLanes=gf(_e,bn,Te),Ae.memoizedState=pf,bh(null,ke)):(vs(Ae),yf(Ae,In))}var ri=_e.memoizedState;if(ri!==null&&(In=ri.dehydrated,In!==null)){if(He)Ae.flags&256?(vs(Ae),Ae.flags&=-257,Ae=vf(_e,Ae,Te)):Ae.memoizedState!==null?(ro(),Ae.child=_e.child,Ae.flags|=128,Ae=null):(ro(),In=ke.fallback,Ue=Ae.mode,ke=sd({mode:"visible",children:ke.children},Ue),In=Wo(In,Ue,Te,null),In.flags|=2,ke.return=Ae,In.return=Ae,ke.sibling=In,Ae.child=ke,Na(Ae,_e.child,null,Te),ke=Ae.child,ke.memoizedState=mf(Te),ke.childLanes=gf(_e,bn,Te),Ae.memoizedState=pf,Ae=bh(null,ke));else if(vs(Ae),Qf(In)){if(bn=In.nextSibling&&In.nextSibling.dataset,bn)var Mi=bn.dgst;bn=Mi,ke=Error(xe(419)),ke.stack="",ke.digest=bn,lu({value:ke,source:null,stack:null}),Ae=vf(_e,Ae,Te)}else if(Ir||el(_e,Ae,Te,!1),bn=(Te&_e.childLanes)!==0,Ir||bn){if(bn=rr,bn!==null&&(ke=Ti(bn,Te),ke!==0&&ke!==ri.retryLane))throw ri.retryLane=ke,So(_e,ke),Os(bn,_e,ke),df;Kf(In)||gd(),Ae=vf(_e,Ae,Te)}else Kf(In)?(Ae.flags|=192,Ae.child=_e.child,Ae=null):(_e=ri.treeContext,ir=uo(In.nextSibling),Ur=Ae,Ra=!0,is=null,fr=!1,_e!==null&&Jh(Ae,_e),Ae=yf(Ae,ke.children),Ae.flags|=4096);return Ae}return Ue?(ro(),In=ke.fallback,Ue=Ae.mode,ri=_e.child,Mi=ri.sibling,ke=Ts(ri,{mode:"hidden",children:ke.children}),ke.subtreeFlags=ri.subtreeFlags&65011712,Mi!==null?In=Ts(Mi,In):(In=Wo(In,Ue,Te,null),In.flags|=2),In.return=Ae,ke.return=Ae,ke.sibling=In,Ae.child=ke,bh(null,ke),ke=Ae.child,In=_e.child.memoizedState,In===null?In=mf(Te):(Ue=In.cachePool,Ue!==null?(ri=xr._currentValue,Ue=Ue.parent!==ri?{parent:ri,pool:ri}:Ue):Ue=Hn(),In={baseLanes:In.baseLanes|Te,cachePool:Ue}),ke.memoizedState=In,ke.childLanes=gf(_e,bn,Te),Ae.memoizedState=pf,bh(_e.child,ke)):(vs(Ae),Te=_e.child,_e=Te.sibling,Te=Ts(Te,{mode:"visible",children:ke.children}),Te.return=Ae,Te.sibling=null,_e!==null&&(bn=Ae.deletions,bn===null?(Ae.deletions=[_e],Ae.flags|=16):bn.push(_e)),Ae.child=Te,Ae.memoizedState=null,Te)}function yf(_e,Ae){return Ae=sd({mode:"visible",children:Ae},_e.mode),Ae.return=_e,_e.child=Ae}function sd(_e,Ae){return _e=Kr(22,_e,null,Ae),_e.lanes=0,_e}function vf(_e,Ae,Te){return Na(Ae,_e.child,null,Te),_e=yf(Ae,Ae.pendingProps.children),_e.flags|=2,Ae.memoizedState=null,_e}function Tm(_e,Ae,Te){_e.lanes|=Ae;var ke=_e.alternate;ke!==null&&(ke.lanes|=Ae),uu(_e.return,Ae,Te)}function bf(_e,Ae,Te,ke,Ue,He){var bn=_e.memoizedState;bn===null?_e.memoizedState={isBackwards:Ae,rendering:null,renderingStartTime:0,last:ke,tail:Te,tailMode:Ue,treeForkCount:He}:(bn.isBackwards=Ae,bn.rendering=null,bn.renderingStartTime=0,bn.last=ke,bn.tail=Te,bn.tailMode=Ue,bn.treeForkCount=He)}function Cm(_e,Ae,Te){var ke=Ae.pendingProps,Ue=ke.revealOrder,He=ke.tail;ke=ke.children;var bn=gr.current,In=(bn&2)!==0;if(In?(bn=bn&1|2,Ae.flags|=128):bn&=1,Oe(gr,bn),as(_e,Ae,ke,Te),ke=Ra?Wu:0,!In&&_e!==null&&(_e.flags&128)!==0)e:for(_e=Ae.child;_e!==null;){if(_e.tag===13)_e.memoizedState!==null&&Tm(_e,Te,Ae);else if(_e.tag===19)Tm(_e,Te,Ae);else if(_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===Ae)break e;for(;_e.sibling===null;){if(_e.return===null||_e.return===Ae)break e;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}switch(Ue){case"forwards":for(Te=Ae.child,Ue=null;Te!==null;)_e=Te.alternate,_e!==null&&Al(_e)===null&&(Ue=Te),Te=Te.sibling;Te=Ue,Te===null?(Ue=Ae.child,Ae.child=null):(Ue=Te.sibling,Te.sibling=null),bf(Ae,!1,Ue,Te,He,ke);break;case"backwards":case"unstable_legacy-backwards":for(Te=null,Ue=Ae.child,Ae.child=null;Ue!==null;){if(_e=Ue.alternate,_e!==null&&Al(_e)===null){Ae.child=Ue;break}_e=Ue.sibling,Ue.sibling=Te,Te=Ue,Ue=_e}bf(Ae,!0,Te,null,He,ke);break;case"together":bf(Ae,!1,null,null,void 0,ke);break;default:Ae.memoizedState=null}return Ae.child}function Cl(_e,Ae,Te){if(_e!==null&&(Ae.dependencies=_e.dependencies),yu|=Ae.lanes,(Te&Ae.childLanes)===0)if(_e!==null){if(el(_e,Ae,Te,!1),(Te&Ae.childLanes)===0)return null}else return null;if(_e!==null&&Ae.child!==_e.child)throw Error(xe(153));if(Ae.child!==null){for(_e=Ae.child,Te=Ts(_e,_e.pendingProps),Ae.child=Te,Te.return=Ae;_e.sibling!==null;)_e=_e.sibling,Te=Te.sibling=Ts(_e,_e.pendingProps),Te.return=Ae;Te.sibling=null}return Ae.child}function xf(_e,Ae){return(_e.lanes&Ae)!==0?!0:(_e=_e.dependencies,!!(_e!==null&&Tc(_e)))}function Y0(_e,Ae,Te){switch(Ae.tag){case 3:vn(Ae,Ae.stateNode.containerInfo),Zo(Ae,xr,_e.memoizedState.cache),_l();break;case 27:case 5:On(Ae);break;case 4:vn(Ae,Ae.stateNode.containerInfo);break;case 10:Zo(Ae,Ae.type,Ae.memoizedProps.value);break;case 31:if(Ae.memoizedState!==null)return Ae.flags|=128,ao(Ae),null;break;case 13:var ke=Ae.memoizedState;if(ke!==null)return ke.dehydrated!==null?(vs(Ae),Ae.flags|=128,null):(Te&Ae.child.childLanes)!==0?wm(_e,Ae,Te):(vs(Ae),_e=Cl(_e,Ae,Te),_e!==null?_e.sibling:null);vs(Ae);break;case 19:var Ue=(_e.flags&128)!==0;if(ke=(Te&Ae.childLanes)!==0,ke||(el(_e,Ae,Te,!1),ke=(Te&Ae.childLanes)!==0),Ue){if(ke)return Cm(_e,Ae,Te);Ae.flags|=128}if(Ue=Ae.memoizedState,Ue!==null&&(Ue.rendering=null,Ue.tail=null,Ue.lastEffect=null),Oe(gr,gr.current),ke)break;return null;case 22:return Ae.lanes=0,xm(_e,Ae,Te,Ae.pendingProps);case 24:Zo(Ae,xr,_e.memoizedState.cache)}return Cl(_e,Ae,Te)}function Bm(_e,Ae,Te){if(_e!==null)if(_e.memoizedProps!==Ae.pendingProps)Ir=!0;else{if(!xf(_e,Te)&&(Ae.flags&128)===0)return Ir=!1,Y0(_e,Ae,Te);Ir=(_e.flags&131072)!==0}else Ir=!1,Ra&&(Ae.flags&1048576)!==0&&Yh(Ae,Wu,Ae.index);switch(Ae.lanes=0,Ae.tag){case 16:e:{var ke=Ae.pendingProps;if(_e=hi(Ae.elementType),Ae.type=_e,typeof _e=="function")_c(_e)?(ke=nc(_e,ke),Ae.tag=1,Ae=Em(null,Ae,_e,ke,Te)):(Ae.tag=0,Ae=ff(null,Ae,_e,ke,Te));else{if(_e!=null){var Ue=_e.$$typeof;if(Ue===cn){Ae.tag=11,Ae=ym(null,Ae,_e,ke,Te);break e}else if(Ue===Ze){Ae.tag=14,Ae=vm(null,Ae,_e,ke,Te);break e}}throw Ae=_n(_e)||_e,Error(xe(306,Ae,""))}}return Ae;case 0:return ff(_e,Ae,Ae.type,Ae.pendingProps,Te);case 1:return ke=Ae.type,Ue=nc(ke,Ae.pendingProps),Em(_e,Ae,ke,Ue,Te);case 3:e:{if(vn(Ae,Ae.stateNode.containerInfo),_e===null)throw Error(xe(387));ke=Ae.pendingProps;var He=Ae.memoizedState;Ue=He.element,ja(_e,Ae),qr(Ae,ke,null,Te);var bn=Ae.memoizedState;if(ke=bn.cache,Zo(Ae,xr,ke),ke!==He.cache&&Sl(Ae,[xr],Te,!0),Fa(),ke=bn.element,He.isDehydrated)if(He={element:ke,isDehydrated:!1,cache:bn.cache},Ae.updateQueue.baseState=He,Ae.memoizedState=He,Ae.flags&256){Ae=Pm(_e,Ae,ke,Te);break e}else if(ke!==Ue){Ue=Cs(Error(xe(424)),Ae),lu(Ue),Ae=Pm(_e,Ae,ke,Te);break e}else{switch(_e=Ae.stateNode.containerInfo,_e.nodeType){case 9:_e=_e.body;break;default:_e=_e.nodeName==="HTML"?_e.ownerDocument.body:_e}for(ir=uo(_e.firstChild),Ur=Ae,Ra=!0,is=null,fr=!0,Te=La(Ae,null,ke,Te),Ae.child=Te;Te;)Te.flags=Te.flags&-3|4096,Te=Te.sibling}else{if(_l(),ke===Ue){Ae=Cl(_e,Ae,Te);break e}as(_e,Ae,ke,Te)}Ae=Ae.child}return Ae;case 26:return rd(_e,Ae),_e===null?(Te=Ug(Ae.type,null,Ae.pendingProps,null))?Ae.memoizedState=Te:Ra||(Te=Ae.type,_e=Ae.pendingProps,ke=Ad(fn.current).createElement(Te),ke[Zi]=Ae,ke[aa]=_e,rs(ke,Te,_e),Ar(ke),Ae.stateNode=ke):Ae.memoizedState=Ug(Ae.type,_e.memoizedProps,Ae.pendingProps,_e.memoizedState),null;case 27:return On(Ae),_e===null&&Ra&&(ke=Ae.stateNode=Dg(Ae.type,Ae.pendingProps,fn.current),Ur=Ae,fr=!0,Ue=ir,Su(Ae.type)?(Zf=Ue,ir=uo(ke.firstChild)):ir=Ue),as(_e,Ae,Ae.pendingProps.children,Te),rd(_e,Ae),_e===null&&(Ae.flags|=4194304),Ae.child;case 5:return _e===null&&Ra&&((Ue=ke=ir)&&(ke=Sy(ke,Ae.type,Ae.pendingProps,fr),ke!==null?(Ae.stateNode=ke,Ur=Ae,ir=uo(ke.firstChild),fr=!1,Ue=!0):Ue=!1),Ue||Ko(Ae)),On(Ae),Ue=Ae.type,He=Ae.pendingProps,bn=_e!==null?_e.memoizedProps:null,ke=He.children,Xf(Ue,He)?ke=null:bn!==null&&Xf(Ue,bn)&&(Ae.flags|=32),Ae.memoizedState!==null&&(Ue=ch(_e,Ae,ef,null,null,Te),Vh._currentValue=Ue),rd(_e,Ae),as(_e,Ae,ke,Te),Ae.child;case 6:return _e===null&&Ra&&((_e=Te=ir)&&(Te=Ay(Te,Ae.pendingProps,fr),Te!==null?(Ae.stateNode=Te,Ur=Ae,ir=null,_e=!0):_e=!1),_e||Ko(Ae)),null;case 13:return wm(_e,Ae,Te);case 4:return vn(Ae,Ae.stateNode.containerInfo),ke=Ae.pendingProps,_e===null?Ae.child=Na(Ae,null,ke,Te):as(_e,Ae,ke,Te),Ae.child;case 11:return ym(_e,Ae,Ae.type,Ae.pendingProps,Te);case 7:return as(_e,Ae,Ae.pendingProps,Te),Ae.child;case 8:return as(_e,Ae,Ae.pendingProps.children,Te),Ae.child;case 12:return as(_e,Ae,Ae.pendingProps.children,Te),Ae.child;case 10:return ke=Ae.pendingProps,Zo(Ae,Ae.type,ke.value),as(_e,Ae,ke.children,Te),Ae.child;case 9:return Ue=Ae.type._context,ke=Ae.pendingProps.children,tl(Ae),Ue=jr(Ue),ke=ke(Ue),Ae.flags|=1,as(_e,Ae,ke,Te),Ae.child;case 14:return vm(_e,Ae,Ae.type,Ae.pendingProps,Te);case 15:return bm(_e,Ae,Ae.type,Ae.pendingProps,Te);case 19:return Cm(_e,Ae,Te);case 31:return G0(_e,Ae,Te);case 22:return xm(_e,Ae,Te,Ae.pendingProps);case 24:return tl(Ae),ke=jr(xr),_e===null?(Ue=Ln(),Ue===null&&(Ue=rr,He=cu(),Ue.pooledCache=He,He.refCount++,He!==null&&(Ue.pooledCacheLanes|=Te),Ue=He),Ae.memoizedState={parent:ke,cache:Ue},Ya(Ae),Zo(Ae,xr,Ue)):((_e.lanes&Te)!==0&&(ja(_e,Ae),qr(Ae,null,null,Te),Fa()),Ue=_e.memoizedState,He=Ae.memoizedState,Ue.parent!==ke?(Ue={parent:ke,cache:ke},Ae.memoizedState=Ue,Ae.lanes===0&&(Ae.memoizedState=Ae.updateQueue.baseState=Ue),Zo(Ae,xr,ke)):(ke=He.cache,Zo(Ae,xr,ke),ke!==Ue.cache&&Sl(Ae,[xr],Te,!0))),as(_e,Ae,Ae.pendingProps.children,Te),Ae.child;case 29:throw Ae.pendingProps}throw Error(xe(156,Ae.tag))}function Bl(_e){_e.flags|=4}function _f(_e,Ae,Te,ke,Ue){if((Ae=(_e.mode&32)!==0)&&(Ae=!1),Ae){if(_e.flags|=16777216,(Ue&335544128)===Ue)if(_e.stateNode.complete)_e.flags|=8192;else if(ng())_e.flags|=8192;else throw mi=vi,Ri}else _e.flags&=-16777217}function Rm(_e,Ae){if(Ae.type!=="stylesheet"||(Ae.state.loading&4)!==0)_e.flags&=-16777217;else if(_e.flags|=16777216,!Gg(Ae))if(ng())_e.flags|=8192;else throw mi=vi,Ri}function od(_e,Ae){Ae!==null&&(_e.flags|=4),_e.flags&16384&&(Ae=_e.tag!==22?Fn():536870912,_e.lanes|=Ae,jc|=Ae)}function xh(_e,Ae){if(!Ra)switch(_e.tailMode){case"hidden":Ae=_e.tail;for(var Te=null;Ae!==null;)Ae.alternate!==null&&(Te=Ae),Ae=Ae.sibling;Te===null?_e.tail=null:Te.sibling=null;break;case"collapsed":Te=_e.tail;for(var ke=null;Te!==null;)Te.alternate!==null&&(ke=Te),Te=Te.sibling;ke===null?Ae||_e.tail===null?_e.tail=null:_e.tail.sibling=null:ke.sibling=null}}function dr(_e){var Ae=_e.alternate!==null&&_e.alternate.child===_e.child,Te=0,ke=0;if(Ae)for(var Ue=_e.child;Ue!==null;)Te|=Ue.lanes|Ue.childLanes,ke|=Ue.subtreeFlags&65011712,ke|=Ue.flags&65011712,Ue.return=_e,Ue=Ue.sibling;else for(Ue=_e.child;Ue!==null;)Te|=Ue.lanes|Ue.childLanes,ke|=Ue.subtreeFlags,ke|=Ue.flags,Ue.return=_e,Ue=Ue.sibling;return _e.subtreeFlags|=ke,_e.childLanes=Te,Ae}function J0(_e,Ae,Te){var ke=Ae.pendingProps;switch(Pc(Ae),Ae.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dr(Ae),null;case 1:return dr(Ae),null;case 3:return Te=Ae.stateNode,ke=null,_e!==null&&(ke=_e.memoizedState.cache),Ae.memoizedState.cache!==ke&&(Ae.flags|=2048),ks(xr),wn(),Te.pendingContext&&(Te.context=Te.pendingContext,Te.pendingContext=null),(_e===null||_e.child===null)&&(zr(Ae)?Bl(Ae):_e===null||_e.memoizedState.isDehydrated&&(Ae.flags&256)===0||(Ae.flags|=1024,lh())),dr(Ae),null;case 26:var Ue=Ae.type,He=Ae.memoizedState;return _e===null?(Bl(Ae),He!==null?(dr(Ae),Rm(Ae,He)):(dr(Ae),_f(Ae,Ue,null,ke,Te))):He?He!==_e.memoizedState?(Bl(Ae),dr(Ae),Rm(Ae,He)):(dr(Ae),Ae.flags&=-16777217):(_e=_e.memoizedProps,_e!==ke&&Bl(Ae),dr(Ae),_f(Ae,Ue,_e,ke,Te)),null;case 27:if(jn(Ae),Te=fn.current,Ue=Ae.type,_e!==null&&Ae.stateNode!=null)_e.memoizedProps!==ke&&Bl(Ae);else{if(!ke){if(Ae.stateNode===null)throw Error(xe(166));return dr(Ae),null}_e=$e.current,zr(Ae)?oh(Ae):(_e=Dg(Ue,ke,Te),Ae.stateNode=_e,Bl(Ae))}return dr(Ae),null;case 5:if(jn(Ae),Ue=Ae.type,_e!==null&&Ae.stateNode!=null)_e.memoizedProps!==ke&&Bl(Ae);else{if(!ke){if(Ae.stateNode===null)throw Error(xe(166));return dr(Ae),null}if(He=$e.current,zr(Ae))oh(Ae);else{var bn=Ad(fn.current);switch(He){case 1:He=bn.createElementNS("http://www.w3.org/2000/svg",Ue);break;case 2:He=bn.createElementNS("http://www.w3.org/1998/Math/MathML",Ue);break;default:switch(Ue){case"svg":He=bn.createElementNS("http://www.w3.org/2000/svg",Ue);break;case"math":He=bn.createElementNS("http://www.w3.org/1998/Math/MathML",Ue);break;case"script":He=bn.createElement("div"),He.innerHTML="<script><\/script>",He=He.removeChild(He.firstChild);break;case"select":He=typeof ke.is=="string"?bn.createElement("select",{is:ke.is}):bn.createElement("select"),ke.multiple?He.multiple=!0:ke.size&&(He.size=ke.size);break;default:He=typeof ke.is=="string"?bn.createElement(Ue,{is:ke.is}):bn.createElement(Ue)}}He[Zi]=Ae,He[aa]=ke;e:for(bn=Ae.child;bn!==null;){if(bn.tag===5||bn.tag===6)He.appendChild(bn.stateNode);else if(bn.tag!==4&&bn.tag!==27&&bn.child!==null){bn.child.return=bn,bn=bn.child;continue}if(bn===Ae)break e;for(;bn.sibling===null;){if(bn.return===null||bn.return===Ae)break e;bn=bn.return}bn.sibling.return=bn.return,bn=bn.sibling}Ae.stateNode=He;e:switch(rs(He,Ue,ke),Ue){case"button":case"input":case"select":case"textarea":ke=!!ke.autoFocus;break e;case"img":ke=!0;break e;default:ke=!1}ke&&Bl(Ae)}}return dr(Ae),_f(Ae,Ae.type,_e===null?null:_e.memoizedProps,Ae.pendingProps,Te),null;case 6:if(_e&&Ae.stateNode!=null)_e.memoizedProps!==ke&&Bl(Ae);else{if(typeof ke!="string"&&Ae.stateNode===null)throw Error(xe(166));if(_e=fn.current,zr(Ae)){if(_e=Ae.stateNode,Te=Ae.memoizedProps,ke=null,Ue=Ur,Ue!==null)switch(Ue.tag){case 27:case 5:ke=Ue.memoizedProps}_e[Zi]=Ae,_e=!!(_e.nodeValue===Te||ke!==null&&ke.suppressHydrationWarning===!0||wg(_e.nodeValue,Te)),_e||Ko(Ae,!0)}else _e=Ad(_e).createTextNode(ke),_e[Zi]=Ae,Ae.stateNode=_e}return dr(Ae),null;case 31:if(Te=Ae.memoizedState,_e===null||_e.memoizedState!==null){if(ke=zr(Ae),Te!==null){if(_e===null){if(!ke)throw Error(xe(318));if(_e=Ae.memoizedState,_e=_e!==null?_e.dehydrated:null,!_e)throw Error(xe(557));_e[Zi]=Ae}else _l(),(Ae.flags&128)===0&&(Ae.memoizedState=null),Ae.flags|=4;dr(Ae),_e=!1}else Te=lh(),_e!==null&&_e.memoizedState!==null&&(_e.memoizedState.hydrationErrors=Te),_e=!0;if(!_e)return Ae.flags&256?(hs(Ae),Ae):(hs(Ae),null);if((Ae.flags&128)!==0)throw Error(xe(558))}return dr(Ae),null;case 13:if(ke=Ae.memoizedState,_e===null||_e.memoizedState!==null&&_e.memoizedState.dehydrated!==null){if(Ue=zr(Ae),ke!==null&&ke.dehydrated!==null){if(_e===null){if(!Ue)throw Error(xe(318));if(Ue=Ae.memoizedState,Ue=Ue!==null?Ue.dehydrated:null,!Ue)throw Error(xe(317));Ue[Zi]=Ae}else _l(),(Ae.flags&128)===0&&(Ae.memoizedState=null),Ae.flags|=4;dr(Ae),Ue=!1}else Ue=lh(),_e!==null&&_e.memoizedState!==null&&(_e.memoizedState.hydrationErrors=Ue),Ue=!0;if(!Ue)return Ae.flags&256?(hs(Ae),Ae):(hs(Ae),null)}return hs(Ae),(Ae.flags&128)!==0?(Ae.lanes=Te,Ae):(Te=ke!==null,_e=_e!==null&&_e.memoizedState!==null,Te&&(ke=Ae.child,Ue=null,ke.alternate!==null&&ke.alternate.memoizedState!==null&&ke.alternate.memoizedState.cachePool!==null&&(Ue=ke.alternate.memoizedState.cachePool.pool),He=null,ke.memoizedState!==null&&ke.memoizedState.cachePool!==null&&(He=ke.memoizedState.cachePool.pool),He!==Ue&&(ke.flags|=2048)),Te!==_e&&Te&&(Ae.child.flags|=8192),od(Ae,Ae.updateQueue),dr(Ae),null);case 4:return wn(),_e===null&&qf(Ae.stateNode.containerInfo),dr(Ae),null;case 10:return ks(Ae.type),dr(Ae),null;case 19:if(Ge(gr),ke=Ae.memoizedState,ke===null)return dr(Ae),null;if(Ue=(Ae.flags&128)!==0,He=ke.rendering,He===null)if(Ue)xh(ke,!1);else{if(Pr!==0||_e!==null&&(_e.flags&128)!==0)for(_e=Ae.child;_e!==null;){if(He=Al(_e),He!==null){for(Ae.flags|=128,xh(ke,!1),_e=He.updateQueue,Ae.updateQueue=_e,od(Ae,_e),Ae.subtreeFlags=0,_e=Te,Te=Ae.child;Te!==null;)Ju(Te,_e),Te=Te.sibling;return Oe(gr,gr.current&1|2),Ra&&gs(Ae,ke.treeForkCount),Ae.child}_e=_e.sibling}ke.tail!==null&&pi()>dd&&(Ae.flags|=128,Ue=!0,xh(ke,!1),Ae.lanes=4194304)}else{if(!Ue)if(_e=Al(He),_e!==null){if(Ae.flags|=128,Ue=!0,_e=_e.updateQueue,Ae.updateQueue=_e,od(Ae,_e),xh(ke,!0),ke.tail===null&&ke.tailMode==="hidden"&&!He.alternate&&!Ra)return dr(Ae),null}else 2*pi()-ke.renderingStartTime>dd&&Te!==536870912&&(Ae.flags|=128,Ue=!0,xh(ke,!1),Ae.lanes=4194304);ke.isBackwards?(He.sibling=Ae.child,Ae.child=He):(_e=ke.last,_e!==null?_e.sibling=He:Ae.child=He,ke.last=He)}return ke.tail!==null?(_e=ke.tail,ke.rendering=_e,ke.tail=_e.sibling,ke.renderingStartTime=pi(),_e.sibling=null,Te=gr.current,Oe(gr,Ue?Te&1|2:Te&1),Ra&&gs(Ae,ke.treeForkCount),_e):(dr(Ae),null);case 22:case 23:return hs(Ae),Er(),ke=Ae.memoizedState!==null,_e!==null?_e.memoizedState!==null!==ke&&(Ae.flags|=8192):ke&&(Ae.flags|=8192),ke?(Te&536870912)!==0&&(Ae.flags&128)===0&&(dr(Ae),Ae.subtreeFlags&6&&(Ae.flags|=8192)):dr(Ae),Te=Ae.updateQueue,Te!==null&&od(Ae,Te.retryQueue),Te=null,_e!==null&&_e.memoizedState!==null&&_e.memoizedState.cachePool!==null&&(Te=_e.memoizedState.cachePool.pool),ke=null,Ae.memoizedState!==null&&Ae.memoizedState.cachePool!==null&&(ke=Ae.memoizedState.cachePool.pool),ke!==Te&&(Ae.flags|=2048),_e!==null&&Ge(Vn),null;case 24:return Te=null,_e!==null&&(Te=_e.memoizedState.cache),Ae.memoizedState.cache!==Te&&(Ae.flags|=2048),ks(xr),dr(Ae),null;case 25:return null;case 30:return null}throw Error(xe(156,Ae.tag))}function X0(_e,Ae){switch(Pc(Ae),Ae.tag){case 1:return _e=Ae.flags,_e&65536?(Ae.flags=_e&-65537|128,Ae):null;case 3:return ks(xr),wn(),_e=Ae.flags,(_e&65536)!==0&&(_e&128)===0?(Ae.flags=_e&-65537|128,Ae):null;case 26:case 27:case 5:return jn(Ae),null;case 31:if(Ae.memoizedState!==null){if(hs(Ae),Ae.alternate===null)throw Error(xe(340));_l()}return _e=Ae.flags,_e&65536?(Ae.flags=_e&-65537|128,Ae):null;case 13:if(hs(Ae),_e=Ae.memoizedState,_e!==null&&_e.dehydrated!==null){if(Ae.alternate===null)throw Error(xe(340));_l()}return _e=Ae.flags,_e&65536?(Ae.flags=_e&-65537|128,Ae):null;case 19:return Ge(gr),null;case 4:return wn(),null;case 10:return ks(Ae.type),null;case 22:case 23:return hs(Ae),Er(),_e!==null&&Ge(Vn),_e=Ae.flags,_e&65536?(Ae.flags=_e&-65537|128,Ae):null;case 24:return ks(xr),null;case 25:return null;default:return null}}function Nm(_e,Ae){switch(Pc(Ae),Ae.tag){case 3:ks(xr),wn();break;case 26:case 27:case 5:jn(Ae);break;case 4:wn();break;case 31:Ae.memoizedState!==null&&hs(Ae);break;case 13:hs(Ae);break;case 19:Ge(gr);break;case 10:ks(Ae.type);break;case 22:case 23:hs(Ae),Er(),_e!==null&&Ge(Vn);break;case 24:ks(xr)}}function _h(_e,Ae){try{var Te=Ae.updateQueue,ke=Te!==null?Te.lastEffect:null;if(ke!==null){var Ue=ke.next;Te=Ue;do{if((Te.tag&_e)===_e){ke=void 0;var He=Te.create,bn=Te.inst;ke=He(),bn.destroy=ke}Te=Te.next}while(Te!==Ue)}}catch(In){$a(Ae,Ae.return,In)}}function mu(_e,Ae,Te){try{var ke=Ae.updateQueue,Ue=ke!==null?ke.lastEffect:null;if(Ue!==null){var He=Ue.next;ke=He;do{if((ke.tag&_e)===_e){var bn=ke.inst,In=bn.destroy;if(In!==void 0){bn.destroy=void 0,Ue=Ae;var ri=Te,Mi=In;try{Mi()}catch(zi){$a(Ue,ri,zi)}}}ke=ke.next}while(ke!==He)}}catch(zi){$a(Ae,Ae.return,zi)}}function Mm(_e){var Ae=_e.updateQueue;if(Ae!==null){var Te=_e.stateNode;try{Cr(Ae,Te)}catch(ke){$a(_e,_e.return,ke)}}}function km(_e,Ae,Te){Te.props=nc(_e.type,_e.memoizedProps),Te.state=_e.memoizedState;try{Te.componentWillUnmount()}catch(ke){$a(_e,Ae,ke)}}function Sh(_e,Ae){try{var Te=_e.ref;if(Te!==null){switch(_e.tag){case 26:case 27:case 5:var ke=_e.stateNode;break;case 30:ke=_e.stateNode;break;default:ke=_e.stateNode}typeof Te=="function"?_e.refCleanup=Te(ke):Te.current=ke}}catch(Ue){$a(_e,Ae,Ue)}}function sl(_e,Ae){var Te=_e.ref,ke=_e.refCleanup;if(Te!==null)if(typeof ke=="function")try{ke()}catch(Ue){$a(_e,Ae,Ue)}finally{_e.refCleanup=null,_e=_e.alternate,_e!=null&&(_e.refCleanup=null)}else if(typeof Te=="function")try{Te(null)}catch(Ue){$a(_e,Ae,Ue)}else Te.current=null}function Vm(_e){var Ae=_e.type,Te=_e.memoizedProps,ke=_e.stateNode;try{e:switch(Ae){case"button":case"input":case"select":case"textarea":Te.autoFocus&&ke.focus();break e;case"img":Te.src?ke.src=Te.src:Te.srcSet&&(ke.srcset=Te.srcSet)}}catch(Ue){$a(_e,_e.return,Ue)}}function Sf(_e,Ae,Te){try{var ke=_e.stateNode;gy(ke,_e.type,Te,Ae),ke[aa]=Ae}catch(Ue){$a(_e,_e.return,Ue)}}function Lm(_e){return _e.tag===5||_e.tag===3||_e.tag===26||_e.tag===27&&Su(_e.type)||_e.tag===4}function Af(_e){e:for(;;){for(;_e.sibling===null;){if(_e.return===null||Lm(_e.return))return null;_e=_e.return}for(_e.sibling.return=_e.return,_e=_e.sibling;_e.tag!==5&&_e.tag!==6&&_e.tag!==18;){if(_e.tag===27&&Su(_e.type)||_e.flags&2||_e.child===null||_e.tag===4)continue e;_e.child.return=_e,_e=_e.child}if(!(_e.flags&2))return _e.stateNode}}function Ef(_e,Ae,Te){var ke=_e.tag;if(ke===5||ke===6)_e=_e.stateNode,Ae?(Te.nodeType===9?Te.body:Te.nodeName==="HTML"?Te.ownerDocument.body:Te).insertBefore(_e,Ae):(Ae=Te.nodeType===9?Te.body:Te.nodeName==="HTML"?Te.ownerDocument.body:Te,Ae.appendChild(_e),Te=Te._reactRootContainer,Te!=null||Ae.onclick!==null||(Ae.onclick=or));else if(ke!==4&&(ke===27&&Su(_e.type)&&(Te=_e.stateNode,Ae=null),_e=_e.child,_e!==null))for(Ef(_e,Ae,Te),_e=_e.sibling;_e!==null;)Ef(_e,Ae,Te),_e=_e.sibling}function ld(_e,Ae,Te){var ke=_e.tag;if(ke===5||ke===6)_e=_e.stateNode,Ae?Te.insertBefore(_e,Ae):Te.appendChild(_e);else if(ke!==4&&(ke===27&&Su(_e.type)&&(Te=_e.stateNode),_e=_e.child,_e!==null))for(ld(_e,Ae,Te),_e=_e.sibling;_e!==null;)ld(_e,Ae,Te),_e=_e.sibling}function Im(_e){var Ae=_e.stateNode,Te=_e.memoizedProps;try{for(var ke=_e.type,Ue=Ae.attributes;Ue.length;)Ae.removeAttributeNode(Ue[0]);rs(Ae,ke,Te),Ae[Zi]=_e,Ae[aa]=Te}catch(He){$a(_e,_e.return,He)}}var Rl=!1,Dr=!1,Pf=!1,Dm=typeof WeakSet=="function"?WeakSet:Set,Zr=null;function W0(_e,Ae){if(_e=_e.containerInfo,Yf=Rd,_e=vo(_e),qs(_e)){if("selectionStart"in _e)var Te={start:_e.selectionStart,end:_e.selectionEnd};else e:{Te=(Te=_e.ownerDocument)&&Te.defaultView||window;var ke=Te.getSelection&&Te.getSelection();if(ke&&ke.rangeCount!==0){Te=ke.anchorNode;var Ue=ke.anchorOffset,He=ke.focusNode;ke=ke.focusOffset;try{Te.nodeType,He.nodeType}catch{Te=null;break e}var bn=0,In=-1,ri=-1,Mi=0,zi=0,$i=_e,Vi=null;t:for(;;){for(var Li;$i!==Te||Ue!==0&&$i.nodeType!==3||(In=bn+Ue),$i!==He||ke!==0&&$i.nodeType!==3||(ri=bn+ke),$i.nodeType===3&&(bn+=$i.nodeValue.length),(Li=$i.firstChild)!==null;)Vi=$i,$i=Li;for(;;){if($i===_e)break t;if(Vi===Te&&++Mi===Ue&&(In=bn),Vi===He&&++zi===ke&&(ri=bn),(Li=$i.nextSibling)!==null)break;$i=Vi,Vi=$i.parentNode}$i=Li}Te=In===-1||ri===-1?null:{start:In,end:ri}}else Te=null}Te=Te||{start:0,end:0}}else Te=null;for(Jf={focusedElem:_e,selectionRange:Te},Rd=!1,Zr=Ae;Zr!==null;)if(Ae=Zr,_e=Ae.child,(Ae.subtreeFlags&1028)!==0&&_e!==null)_e.return=Ae,Zr=_e;else for(;Zr!==null;){switch(Ae=Zr,He=Ae.alternate,_e=Ae.flags,Ae.tag){case 0:if((_e&4)!==0&&(_e=Ae.updateQueue,_e=_e!==null?_e.events:null,_e!==null))for(Te=0;Te<_e.length;Te++)Ue=_e[Te],Ue.ref.impl=Ue.nextImpl;break;case 11:case 15:break;case 1:if((_e&1024)!==0&&He!==null){_e=void 0,Te=Ae,Ue=He.memoizedProps,He=He.memoizedState,ke=Te.stateNode;try{var ha=nc(Te.type,Ue);_e=ke.getSnapshotBeforeUpdate(ha,He),ke.__reactInternalSnapshotBeforeUpdate=_e}catch(ba){$a(Te,Te.return,ba)}}break;case 3:if((_e&1024)!==0){if(_e=Ae.stateNode.containerInfo,Te=_e.nodeType,Te===9)$f(_e);else if(Te===1)switch(_e.nodeName){case"HEAD":case"HTML":case"BODY":$f(_e);break;default:_e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((_e&1024)!==0)throw Error(xe(163))}if(_e=Ae.sibling,_e!==null){_e.return=Ae.return,Zr=_e;break}Zr=Ae.return}}function Fm(_e,Ae,Te){var ke=Te.flags;switch(Te.tag){case 0:case 11:case 15:Ml(_e,Te),ke&4&&_h(5,Te);break;case 1:if(Ml(_e,Te),ke&4)if(_e=Te.stateNode,Ae===null)try{_e.componentDidMount()}catch(bn){$a(Te,Te.return,bn)}else{var Ue=nc(Te.type,Ae.memoizedProps);Ae=Ae.memoizedState;try{_e.componentDidUpdate(Ue,Ae,_e.__reactInternalSnapshotBeforeUpdate)}catch(bn){$a(Te,Te.return,bn)}}ke&64&&Mm(Te),ke&512&&Sh(Te,Te.return);break;case 3:if(Ml(_e,Te),ke&64&&(_e=Te.updateQueue,_e!==null)){if(Ae=null,Te.child!==null)switch(Te.child.tag){case 27:case 5:Ae=Te.child.stateNode;break;case 1:Ae=Te.child.stateNode}try{Cr(_e,Ae)}catch(bn){$a(Te,Te.return,bn)}}break;case 27:Ae===null&&ke&4&&Im(Te);case 26:case 5:Ml(_e,Te),Ae===null&&ke&4&&Vm(Te),ke&512&&Sh(Te,Te.return);break;case 12:Ml(_e,Te);break;case 31:Ml(_e,Te),ke&4&&zm(_e,Te);break;case 13:Ml(_e,Te),ke&4&&jm(_e,Te),ke&64&&(_e=Te.memoizedState,_e!==null&&(_e=_e.dehydrated,_e!==null&&(Te=ay.bind(null,Te),Ey(_e,Te))));break;case 22:if(ke=Te.memoizedState!==null||Rl,!ke){Ae=Ae!==null&&Ae.memoizedState!==null||Dr,Ue=Rl;var He=Dr;Rl=ke,(Dr=Ae)&&!He?kl(_e,Te,(Te.subtreeFlags&8772)!==0):Ml(_e,Te),Rl=Ue,Dr=He}break;case 30:break;default:Ml(_e,Te)}}function Om(_e){var Ae=_e.alternate;Ae!==null&&(_e.alternate=null,Om(Ae)),_e.child=null,_e.deletions=null,_e.sibling=null,_e.tag===5&&(Ae=_e.stateNode,Ae!==null&&wr(Ae)),_e.stateNode=null,_e.return=null,_e.dependencies=null,_e.memoizedProps=null,_e.memoizedState=null,_e.pendingProps=null,_e.stateNode=null,_e.updateQueue=null}var vr=null,Ls=!1;function Nl(_e,Ae,Te){for(Te=Te.child;Te!==null;)Um(_e,Ae,Te),Te=Te.sibling}function Um(_e,Ae,Te){if(Ki&&typeof Ki.onCommitFiberUnmount=="function")try{Ki.onCommitFiberUnmount(ea,Te)}catch{}switch(Te.tag){case 26:Dr||sl(Te,Ae),Nl(_e,Ae,Te),Te.memoizedState?Te.memoizedState.count--:Te.stateNode&&(Te=Te.stateNode,Te.parentNode.removeChild(Te));break;case 27:Dr||sl(Te,Ae);var ke=vr,Ue=Ls;Su(Te.type)&&(vr=Te.stateNode,Ls=!1),Nl(_e,Ae,Te),Nh(Te.stateNode),vr=ke,Ls=Ue;break;case 5:Dr||sl(Te,Ae);case 6:if(ke=vr,Ue=Ls,vr=null,Nl(_e,Ae,Te),vr=ke,Ls=Ue,vr!==null)if(Ls)try{(vr.nodeType===9?vr.body:vr.nodeName==="HTML"?vr.ownerDocument.body:vr).removeChild(Te.stateNode)}catch(He){$a(Te,Ae,He)}else try{vr.removeChild(Te.stateNode)}catch(He){$a(Te,Ae,He)}break;case 18:vr!==null&&(Ls?(_e=vr,Mg(_e.nodeType===9?_e.body:_e.nodeName==="HTML"?_e.ownerDocument.body:_e,Te.stateNode),$c(_e)):Mg(vr,Te.stateNode));break;case 4:ke=vr,Ue=Ls,vr=Te.stateNode.containerInfo,Ls=!0,Nl(_e,Ae,Te),vr=ke,Ls=Ue;break;case 0:case 11:case 14:case 15:mu(2,Te,Ae),Dr||mu(4,Te,Ae),Nl(_e,Ae,Te);break;case 1:Dr||(sl(Te,Ae),ke=Te.stateNode,typeof ke.componentWillUnmount=="function"&&km(Te,Ae,ke)),Nl(_e,Ae,Te);break;case 21:Nl(_e,Ae,Te);break;case 22:Dr=(ke=Dr)||Te.memoizedState!==null,Nl(_e,Ae,Te),Dr=ke;break;default:Nl(_e,Ae,Te)}}function zm(_e,Ae){if(Ae.memoizedState===null&&(_e=Ae.alternate,_e!==null&&(_e=_e.memoizedState,_e!==null))){_e=_e.dehydrated;try{$c(_e)}catch(Te){$a(Ae,Ae.return,Te)}}}function jm(_e,Ae){if(Ae.memoizedState===null&&(_e=Ae.alternate,_e!==null&&(_e=_e.memoizedState,_e!==null&&(_e=_e.dehydrated,_e!==null))))try{$c(_e)}catch(Te){$a(Ae,Ae.return,Te)}}function $0(_e){switch(_e.tag){case 31:case 13:case 19:var Ae=_e.stateNode;return Ae===null&&(Ae=_e.stateNode=new Dm),Ae;case 22:return _e=_e.stateNode,Ae=_e._retryCache,Ae===null&&(Ae=_e._retryCache=new Dm),Ae;default:throw Error(xe(435,_e.tag))}}function ud(_e,Ae){var Te=$0(_e);Ae.forEach(function(ke){if(!Te.has(ke)){Te.add(ke);var Ue=ry.bind(null,_e,ke);ke.then(Ue,Ue)}})}function Is(_e,Ae){var Te=Ae.deletions;if(Te!==null)for(var ke=0;ke<Te.length;ke++){var Ue=Te[ke],He=_e,bn=Ae,In=bn;e:for(;In!==null;){switch(In.tag){case 27:if(Su(In.type)){vr=In.stateNode,Ls=!1;break e}break;case 5:vr=In.stateNode,Ls=!1;break e;case 3:case 4:vr=In.stateNode.containerInfo,Ls=!0;break e}In=In.return}if(vr===null)throw Error(xe(160));Um(He,bn,Ue),vr=null,Ls=!1,He=Ue.alternate,He!==null&&(He.return=null),Ue.return=null}if(Ae.subtreeFlags&13886)for(Ae=Ae.child;Ae!==null;)qm(Ae,_e),Ae=Ae.sibling}var Bo=null;function qm(_e,Ae){var Te=_e.alternate,ke=_e.flags;switch(_e.tag){case 0:case 11:case 14:case 15:Is(Ae,_e),Ds(_e),ke&4&&(mu(3,_e,_e.return),_h(3,_e),mu(5,_e,_e.return));break;case 1:Is(Ae,_e),Ds(_e),ke&512&&(Dr||Te===null||sl(Te,Te.return)),ke&64&&Rl&&(_e=_e.updateQueue,_e!==null&&(ke=_e.callbacks,ke!==null&&(Te=_e.shared.hiddenCallbacks,_e.shared.hiddenCallbacks=Te===null?ke:Te.concat(ke))));break;case 26:var Ue=Bo;if(Is(Ae,_e),Ds(_e),ke&512&&(Dr||Te===null||sl(Te,Te.return)),ke&4){var He=Te!==null?Te.memoizedState:null;if(ke=_e.memoizedState,Te===null)if(ke===null)if(_e.stateNode===null){e:{ke=_e.type,Te=_e.memoizedProps,Ue=Ue.ownerDocument||Ue;t:switch(ke){case"title":He=Ue.getElementsByTagName("title")[0],(!He||He[tr]||He[Zi]||He.namespaceURI==="http://www.w3.org/2000/svg"||He.hasAttribute("itemprop"))&&(He=Ue.createElement(ke),Ue.head.insertBefore(He,Ue.querySelector("head > title"))),rs(He,ke,Te),He[Zi]=_e,Ar(He),ke=He;break e;case"link":var bn=qg("link","href",Ue).get(ke+(Te.href||""));if(bn){for(var In=0;In<bn.length;In++)if(He=bn[In],He.getAttribute("href")===(Te.href==null||Te.href===""?null:Te.href)&&He.getAttribute("rel")===(Te.rel==null?null:Te.rel)&&He.getAttribute("title")===(Te.title==null?null:Te.title)&&He.getAttribute("crossorigin")===(Te.crossOrigin==null?null:Te.crossOrigin)){bn.splice(In,1);break t}}He=Ue.createElement(ke),rs(He,ke,Te),Ue.head.appendChild(He);break;case"meta":if(bn=qg("meta","content",Ue).get(ke+(Te.content||""))){for(In=0;In<bn.length;In++)if(He=bn[In],He.getAttribute("content")===(Te.content==null?null:""+Te.content)&&He.getAttribute("name")===(Te.name==null?null:Te.name)&&He.getAttribute("property")===(Te.property==null?null:Te.property)&&He.getAttribute("http-equiv")===(Te.httpEquiv==null?null:Te.httpEquiv)&&He.getAttribute("charset")===(Te.charSet==null?null:Te.charSet)){bn.splice(In,1);break t}}He=Ue.createElement(ke),rs(He,ke,Te),Ue.head.appendChild(He);break;default:throw Error(xe(468,ke))}He[Zi]=_e,Ar(He),ke=He}_e.stateNode=ke}else Hg(Ue,_e.type,_e.stateNode);else _e.stateNode=jg(Ue,ke,_e.memoizedProps);else He!==ke?(He===null?Te.stateNode!==null&&(Te=Te.stateNode,Te.parentNode.removeChild(Te)):He.count--,ke===null?Hg(Ue,_e.type,_e.stateNode):jg(Ue,ke,_e.memoizedProps)):ke===null&&_e.stateNode!==null&&Sf(_e,_e.memoizedProps,Te.memoizedProps)}break;case 27:Is(Ae,_e),Ds(_e),ke&512&&(Dr||Te===null||sl(Te,Te.return)),Te!==null&&ke&4&&Sf(_e,_e.memoizedProps,Te.memoizedProps);break;case 5:if(Is(Ae,_e),Ds(_e),ke&512&&(Dr||Te===null||sl(Te,Te.return)),_e.flags&32){Ue=_e.stateNode;try{Zs(Ue,"")}catch(ha){$a(_e,_e.return,ha)}}ke&4&&_e.stateNode!=null&&(Ue=_e.memoizedProps,Sf(_e,Ue,Te!==null?Te.memoizedProps:Ue)),ke&1024&&(Pf=!0);break;case 6:if(Is(Ae,_e),Ds(_e),ke&4){if(_e.stateNode===null)throw Error(xe(162));ke=_e.memoizedProps,Te=_e.stateNode;try{Te.nodeValue=ke}catch(ha){$a(_e,_e.return,ha)}}break;case 3:if(wd=null,Ue=Bo,Bo=Ed(Ae.containerInfo),Is(Ae,_e),Bo=Ue,Ds(_e),ke&4&&Te!==null&&Te.memoizedState.isDehydrated)try{$c(Ae.containerInfo)}catch(ha){$a(_e,_e.return,ha)}Pf&&(Pf=!1,Hm(_e));break;case 4:ke=Bo,Bo=Ed(_e.stateNode.containerInfo),Is(Ae,_e),Ds(_e),Bo=ke;break;case 12:Is(Ae,_e),Ds(_e);break;case 31:Is(Ae,_e),Ds(_e),ke&4&&(ke=_e.updateQueue,ke!==null&&(_e.updateQueue=null,ud(_e,ke)));break;case 13:Is(Ae,_e),Ds(_e),_e.child.flags&8192&&_e.memoizedState!==null!=(Te!==null&&Te.memoizedState!==null)&&(hd=pi()),ke&4&&(ke=_e.updateQueue,ke!==null&&(_e.updateQueue=null,ud(_e,ke)));break;case 22:Ue=_e.memoizedState!==null;var ri=Te!==null&&Te.memoizedState!==null,Mi=Rl,zi=Dr;if(Rl=Mi||Ue,Dr=zi||ri,Is(Ae,_e),Dr=zi,Rl=Mi,Ds(_e),ke&8192)e:for(Ae=_e.stateNode,Ae._visibility=Ue?Ae._visibility&-2:Ae._visibility|1,Ue&&(Te===null||ri||Rl||Dr||ic(_e)),Te=null,Ae=_e;;){if(Ae.tag===5||Ae.tag===26){if(Te===null){ri=Te=Ae;try{if(He=ri.stateNode,Ue)bn=He.style,typeof bn.setProperty=="function"?bn.setProperty("display","none","important"):bn.display="none";else{In=ri.stateNode;var $i=ri.memoizedProps.style,Vi=$i!=null&&$i.hasOwnProperty("display")?$i.display:null;In.style.display=Vi==null||typeof Vi=="boolean"?"":(""+Vi).trim()}}catch(ha){$a(ri,ri.return,ha)}}}else if(Ae.tag===6){if(Te===null){ri=Ae;try{ri.stateNode.nodeValue=Ue?"":ri.memoizedProps}catch(ha){$a(ri,ri.return,ha)}}}else if(Ae.tag===18){if(Te===null){ri=Ae;try{var Li=ri.stateNode;Ue?kg(Li,!0):kg(ri.stateNode,!1)}catch(ha){$a(ri,ri.return,ha)}}}else if((Ae.tag!==22&&Ae.tag!==23||Ae.memoizedState===null||Ae===_e)&&Ae.child!==null){Ae.child.return=Ae,Ae=Ae.child;continue}if(Ae===_e)break e;for(;Ae.sibling===null;){if(Ae.return===null||Ae.return===_e)break e;Te===Ae&&(Te=null),Ae=Ae.return}Te===Ae&&(Te=null),Ae.sibling.return=Ae.return,Ae=Ae.sibling}ke&4&&(ke=_e.updateQueue,ke!==null&&(Te=ke.retryQueue,Te!==null&&(ke.retryQueue=null,ud(_e,Te))));break;case 19:Is(Ae,_e),Ds(_e),ke&4&&(ke=_e.updateQueue,ke!==null&&(_e.updateQueue=null,ud(_e,ke)));break;case 30:break;case 21:break;default:Is(Ae,_e),Ds(_e)}}function Ds(_e){var Ae=_e.flags;if(Ae&2){try{for(var Te,ke=_e.return;ke!==null;){if(Lm(ke)){Te=ke;break}ke=ke.return}if(Te==null)throw Error(xe(160));switch(Te.tag){case 27:var Ue=Te.stateNode,He=Af(_e);ld(_e,He,Ue);break;case 5:var bn=Te.stateNode;Te.flags&32&&(Zs(bn,""),Te.flags&=-33);var In=Af(_e);ld(_e,In,bn);break;case 3:case 4:var ri=Te.stateNode.containerInfo,Mi=Af(_e);Ef(_e,Mi,ri);break;default:throw Error(xe(161))}}catch(zi){$a(_e,_e.return,zi)}_e.flags&=-3}Ae&4096&&(_e.flags&=-4097)}function Hm(_e){if(_e.subtreeFlags&1024)for(_e=_e.child;_e!==null;){var Ae=_e;Hm(Ae),Ae.tag===5&&Ae.flags&1024&&Ae.stateNode.reset(),_e=_e.sibling}}function Ml(_e,Ae){if(Ae.subtreeFlags&8772)for(Ae=Ae.child;Ae!==null;)Fm(_e,Ae.alternate,Ae),Ae=Ae.sibling}function ic(_e){for(_e=_e.child;_e!==null;){var Ae=_e;switch(Ae.tag){case 0:case 11:case 14:case 15:mu(4,Ae,Ae.return),ic(Ae);break;case 1:sl(Ae,Ae.return);var Te=Ae.stateNode;typeof Te.componentWillUnmount=="function"&&km(Ae,Ae.return,Te),ic(Ae);break;case 27:Nh(Ae.stateNode);case 26:case 5:sl(Ae,Ae.return),ic(Ae);break;case 22:Ae.memoizedState===null&&ic(Ae);break;case 30:ic(Ae);break;default:ic(Ae)}_e=_e.sibling}}function kl(_e,Ae,Te){for(Te=Te&&(Ae.subtreeFlags&8772)!==0,Ae=Ae.child;Ae!==null;){var ke=Ae.alternate,Ue=_e,He=Ae,bn=He.flags;switch(He.tag){case 0:case 11:case 15:kl(Ue,He,Te),_h(4,He);break;case 1:if(kl(Ue,He,Te),ke=He,Ue=ke.stateNode,typeof Ue.componentDidMount=="function")try{Ue.componentDidMount()}catch(Mi){$a(ke,ke.return,Mi)}if(ke=He,Ue=ke.updateQueue,Ue!==null){var In=ke.stateNode;try{var ri=Ue.shared.hiddenCallbacks;if(ri!==null)for(Ue.shared.hiddenCallbacks=null,Ue=0;Ue<ri.length;Ue++)cs(ri[Ue],In)}catch(Mi){$a(ke,ke.return,Mi)}}Te&&bn&64&&Mm(He),Sh(He,He.return);break;case 27:Im(He);case 26:case 5:kl(Ue,He,Te),Te&&ke===null&&bn&4&&Vm(He),Sh(He,He.return);break;case 12:kl(Ue,He,Te);break;case 31:kl(Ue,He,Te),Te&&bn&4&&zm(Ue,He);break;case 13:kl(Ue,He,Te),Te&&bn&4&&jm(Ue,He);break;case 22:He.memoizedState===null&&kl(Ue,He,Te),Sh(He,He.return);break;case 30:break;default:kl(Ue,He,Te)}Ae=Ae.sibling}}function wf(_e,Ae){var Te=null;_e!==null&&_e.memoizedState!==null&&_e.memoizedState.cachePool!==null&&(Te=_e.memoizedState.cachePool.pool),_e=null,Ae.memoizedState!==null&&Ae.memoizedState.cachePool!==null&&(_e=Ae.memoizedState.cachePool.pool),_e!==Te&&(_e!=null&&_e.refCount++,Te!=null&&$u(Te))}function Tf(_e,Ae){_e=null,Ae.alternate!==null&&(_e=Ae.alternate.memoizedState.cache),Ae=Ae.memoizedState.cache,Ae!==_e&&(Ae.refCount++,_e!=null&&$u(_e))}function Ro(_e,Ae,Te,ke){if(Ae.subtreeFlags&10256)for(Ae=Ae.child;Ae!==null;)Gm(_e,Ae,Te,ke),Ae=Ae.sibling}function Gm(_e,Ae,Te,ke){var Ue=Ae.flags;switch(Ae.tag){case 0:case 11:case 15:Ro(_e,Ae,Te,ke),Ue&2048&&_h(9,Ae);break;case 1:Ro(_e,Ae,Te,ke);break;case 3:Ro(_e,Ae,Te,ke),Ue&2048&&(_e=null,Ae.alternate!==null&&(_e=Ae.alternate.memoizedState.cache),Ae=Ae.memoizedState.cache,Ae!==_e&&(Ae.refCount++,_e!=null&&$u(_e)));break;case 12:if(Ue&2048){Ro(_e,Ae,Te,ke),_e=Ae.stateNode;try{var He=Ae.memoizedProps,bn=He.id,In=He.onPostCommit;typeof In=="function"&&In(bn,Ae.alternate===null?"mount":"update",_e.passiveEffectDuration,-0)}catch(ri){$a(Ae,Ae.return,ri)}}else Ro(_e,Ae,Te,ke);break;case 31:Ro(_e,Ae,Te,ke);break;case 13:Ro(_e,Ae,Te,ke);break;case 23:break;case 22:He=Ae.stateNode,bn=Ae.alternate,Ae.memoizedState!==null?He._visibility&2?Ro(_e,Ae,Te,ke):Ah(_e,Ae):He._visibility&2?Ro(_e,Ae,Te,ke):(He._visibility|=2,Oc(_e,Ae,Te,ke,(Ae.subtreeFlags&10256)!==0||!1)),Ue&2048&&wf(bn,Ae);break;case 24:Ro(_e,Ae,Te,ke),Ue&2048&&Tf(Ae.alternate,Ae);break;default:Ro(_e,Ae,Te,ke)}}function Oc(_e,Ae,Te,ke,Ue){for(Ue=Ue&&((Ae.subtreeFlags&10256)!==0||!1),Ae=Ae.child;Ae!==null;){var He=_e,bn=Ae,In=Te,ri=ke,Mi=bn.flags;switch(bn.tag){case 0:case 11:case 15:Oc(He,bn,In,ri,Ue),_h(8,bn);break;case 23:break;case 22:var zi=bn.stateNode;bn.memoizedState!==null?zi._visibility&2?Oc(He,bn,In,ri,Ue):Ah(He,bn):(zi._visibility|=2,Oc(He,bn,In,ri,Ue)),Ue&&Mi&2048&&wf(bn.alternate,bn);break;case 24:Oc(He,bn,In,ri,Ue),Ue&&Mi&2048&&Tf(bn.alternate,bn);break;default:Oc(He,bn,In,ri,Ue)}Ae=Ae.sibling}}function Ah(_e,Ae){if(Ae.subtreeFlags&10256)for(Ae=Ae.child;Ae!==null;){var Te=_e,ke=Ae,Ue=ke.flags;switch(ke.tag){case 22:Ah(Te,ke),Ue&2048&&wf(ke.alternate,ke);break;case 24:Ah(Te,ke),Ue&2048&&Tf(ke.alternate,ke);break;default:Ah(Te,ke)}Ae=Ae.sibling}}var Eh=8192;function Uc(_e,Ae,Te){if(_e.subtreeFlags&Eh)for(_e=_e.child;_e!==null;)Ym(_e,Ae,Te),_e=_e.sibling}function Ym(_e,Ae,Te){switch(_e.tag){case 26:Uc(_e,Ae,Te),_e.flags&Eh&&_e.memoizedState!==null&&Iy(Te,Bo,_e.memoizedState,_e.memoizedProps);break;case 5:Uc(_e,Ae,Te);break;case 3:case 4:var ke=Bo;Bo=Ed(_e.stateNode.containerInfo),Uc(_e,Ae,Te),Bo=ke;break;case 22:_e.memoizedState===null&&(ke=_e.alternate,ke!==null&&ke.memoizedState!==null?(ke=Eh,Eh=16777216,Uc(_e,Ae,Te),Eh=ke):Uc(_e,Ae,Te));break;default:Uc(_e,Ae,Te)}}function Jm(_e){var Ae=_e.alternate;if(Ae!==null&&(_e=Ae.child,_e!==null)){Ae.child=null;do Ae=_e.sibling,_e.sibling=null,_e=Ae;while(_e!==null)}}function Ph(_e){var Ae=_e.deletions;if((_e.flags&16)!==0){if(Ae!==null)for(var Te=0;Te<Ae.length;Te++){var ke=Ae[Te];Zr=ke,Wm(ke,_e)}Jm(_e)}if(_e.subtreeFlags&10256)for(_e=_e.child;_e!==null;)Xm(_e),_e=_e.sibling}function Xm(_e){switch(_e.tag){case 0:case 11:case 15:Ph(_e),_e.flags&2048&&mu(9,_e,_e.return);break;case 3:Ph(_e);break;case 12:Ph(_e);break;case 22:var Ae=_e.stateNode;_e.memoizedState!==null&&Ae._visibility&2&&(_e.return===null||_e.return.tag!==13)?(Ae._visibility&=-3,cd(_e)):Ph(_e);break;default:Ph(_e)}}function cd(_e){var Ae=_e.deletions;if((_e.flags&16)!==0){if(Ae!==null)for(var Te=0;Te<Ae.length;Te++){var ke=Ae[Te];Zr=ke,Wm(ke,_e)}Jm(_e)}for(_e=_e.child;_e!==null;){switch(Ae=_e,Ae.tag){case 0:case 11:case 15:mu(8,Ae,Ae.return),cd(Ae);break;case 22:Te=Ae.stateNode,Te._visibility&2&&(Te._visibility&=-3,cd(Ae));break;default:cd(Ae)}_e=_e.sibling}}function Wm(_e,Ae){for(;Zr!==null;){var Te=Zr;switch(Te.tag){case 0:case 11:case 15:mu(8,Te,Ae);break;case 23:case 22:if(Te.memoizedState!==null&&Te.memoizedState.cachePool!==null){var ke=Te.memoizedState.cachePool.pool;ke!=null&&ke.refCount++}break;case 24:$u(Te.memoizedState.cache)}if(ke=Te.child,ke!==null)ke.return=Te,Zr=ke;else e:for(Te=_e;Zr!==null;){ke=Zr;var Ue=ke.sibling,He=ke.return;if(Om(ke),ke===Te){Zr=null;break e}if(Ue!==null){Ue.return=He,Zr=Ue;break e}Zr=He}}}var K0={getCacheForType:function(_e){var Ae=jr(xr),Te=Ae.data.get(_e);return Te===void 0&&(Te=_e(),Ae.data.set(_e,Te)),Te},cacheSignal:function(){return jr(xr).controller.signal}},Q0=typeof WeakMap=="function"?WeakMap:Map,Ja=0,rr=null,Ma=null,Ia=0,Wa=0,Ws=null,gu=!1,zc=!1,Cf=!1,Vl=0,Pr=0,yu=0,ac=0,Bf=0,$s=0,jc=0,wh=null,Fs=null,Rf=!1,hd=0,$m=0,dd=1/0,pd=null,vu=null,Hr=0,bu=null,qc=null,Ll=0,Nf=0,Mf=null,Km=null,Th=0,kf=null;function Ks(){return(Ja&2)!==0&&Ia!==0?Ia&-Ia:mn.T!==null?Of():ji()}function Qm(){if($s===0)if((Ia&536870912)===0||Ra){var _e=Rn;Rn<<=1,(Rn&3932160)===0&&(Rn=262144),$s=_e}else $s=536870912;return _e=_r.current,_e!==null&&(_e.flags|=32),$s}function Os(_e,Ae,Te){(_e===rr&&(Wa===2||Wa===9)||_e.cancelPendingCommit!==null)&&(Hc(_e,0),xu(_e,Ia,$s,!1)),Gn(_e,Te),((Ja&2)===0||_e!==rr)&&(_e===rr&&((Ja&2)===0&&(ac|=Te),Pr===4&&xu(_e,Ia,$s,!1)),ol(_e))}function Zm(_e,Ae,Te){if((Ja&6)!==0)throw Error(xe(327));var ke=!Te&&(Ae&127)===0&&(Ae&_e.expiredLanes)===0||Ci(_e,Ae),Ue=ke?ty(_e,Ae):Lf(_e,Ae,!0),He=ke;do{if(Ue===0){zc&&!ke&&xu(_e,Ae,0,!1);break}else{if(Te=_e.current.alternate,He&&!Z0(Te)){Ue=Lf(_e,Ae,!1),He=!1;continue}if(Ue===2){if(He=Ae,_e.errorRecoveryDisabledLanes&He)var bn=0;else bn=_e.pendingLanes&-536870913,bn=bn!==0?bn:bn&536870912?536870912:0;if(bn!==0){Ae=bn;e:{var In=_e;Ue=wh;var ri=In.current.memoizedState.isDehydrated;if(ri&&(Hc(In,bn).flags|=256),bn=Lf(In,bn,!1),bn!==2){if(Cf&&!ri){In.errorRecoveryDisabledLanes|=He,ac|=He,Ue=4;break e}He=Fs,Fs=Ue,He!==null&&(Fs===null?Fs=He:Fs.push.apply(Fs,He))}Ue=bn}if(He=!1,Ue!==2)continue}}if(Ue===1){Hc(_e,0),xu(_e,Ae,0,!0);break}e:{switch(ke=_e,He=Ue,He){case 0:case 1:throw Error(xe(345));case 4:if((Ae&4194048)!==Ae)break;case 6:xu(ke,Ae,$s,!gu);break e;case 2:Fs=null;break;case 3:case 5:break;default:throw Error(xe(329))}if((Ae&62914560)===Ae&&(Ue=hd+300-pi(),10<Ue)){if(xu(ke,Ae,$s,!gu),Si(ke,0,!0)!==0)break e;Ll=Ae,ke.timeoutHandle=Rg(eg.bind(null,ke,Te,Fs,pd,Rf,Ae,$s,ac,jc,gu,He,"Throttled",-0,0),Ue);break e}eg(ke,Te,Fs,pd,Rf,Ae,$s,ac,jc,gu,He,null,-0,0)}}break}while(!0);ol(_e)}function eg(_e,Ae,Te,ke,Ue,He,bn,In,ri,Mi,zi,$i,Vi,Li){if(_e.timeoutHandle=-1,$i=Ae.subtreeFlags,$i&8192||($i&16785408)===16785408){$i={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:or},Ym(Ae,He,$i);var ha=(He&62914560)===He?hd-pi():(He&4194048)===He?$m-pi():0;if(ha=Dy($i,ha),ha!==null){Ll=He,_e.cancelPendingCommit=ha(lg.bind(null,_e,Ae,He,Te,ke,Ue,bn,In,ri,zi,$i,null,Vi,Li)),xu(_e,He,bn,!Mi);return}}lg(_e,Ae,He,Te,ke,Ue,bn,In,ri)}function Z0(_e){for(var Ae=_e;;){var Te=Ae.tag;if((Te===0||Te===11||Te===15)&&Ae.flags&16384&&(Te=Ae.updateQueue,Te!==null&&(Te=Te.stores,Te!==null)))for(var ke=0;ke<Te.length;ke++){var Ue=Te[ke],He=Ue.getSnapshot;Ue=Ue.value;try{if(!Jr(He(),Ue))return!1}catch{return!1}}if(Te=Ae.child,Ae.subtreeFlags&16384&&Te!==null)Te.return=Ae,Ae=Te;else{if(Ae===_e)break;for(;Ae.sibling===null;){if(Ae.return===null||Ae.return===_e)return!0;Ae=Ae.return}Ae.sibling.return=Ae.return,Ae=Ae.sibling}}return!0}function xu(_e,Ae,Te,ke){Ae&=~Bf,Ae&=~ac,_e.suspendedLanes|=Ae,_e.pingedLanes&=~Ae,ke&&(_e.warmLanes|=Ae),ke=_e.expirationTimes;for(var Ue=Ae;0<Ue;){var He=31-Kn(Ue),bn=1<<He;ke[He]=-1,Ue&=~bn}Te!==0&&ii(_e,Te,Ae)}function md(){return(Ja&6)===0?(Ch(0),!1):!0}function Vf(){if(Ma!==null){if(Wa===0)var _e=Ma.return;else _e=Ma,io=Qo=null,Mc(_e),Hi=null,oa=0,_e=Ma;for(;_e!==null;)Nm(_e.alternate,_e),_e=_e.return;Ma=null}}function Hc(_e,Ae){var Te=_e.timeoutHandle;Te!==-1&&(_e.timeoutHandle=-1,by(Te)),Te=_e.cancelPendingCommit,Te!==null&&(_e.cancelPendingCommit=null,Te()),Ll=0,Vf(),rr=_e,Ma=Te=Ts(_e.current,null),Ia=Ae,Wa=0,Ws=null,gu=!1,zc=Ci(_e,Ae),Cf=!1,jc=$s=Bf=ac=yu=Pr=0,Fs=wh=null,Rf=!1,(Ae&8)!==0&&(Ae|=Ae&32);var ke=_e.entangledLanes;if(ke!==0)for(_e=_e.entanglements,ke&=Ae;0<ke;){var Ue=31-Kn(ke),He=1<<Ue;Ae|=_e[Ue],ke&=~He}return Vl=Ae,Xo(),Te}function tg(_e,Ae){Ea=null,mn.H=vh,Ae===ci||Ae===Bi?(Ae=Gi(),Wa=3):Ae===Ri?(Ae=Gi(),Wa=4):Wa=Ae===df?8:Ae!==null&&typeof Ae=="object"&&typeof Ae.then=="function"?6:1,Ws=Ae,Ma===null&&(Pr=1,id(_e,Cs(Ae,_e.current)))}function ng(){var _e=_r.current;return _e===null?!0:(Ia&4194048)===Ia?Vr===null:(Ia&62914560)===Ia||(Ia&536870912)!==0?_e===Vr:!1}function ig(){var _e=mn.H;return mn.H=vh,_e===null?vh:_e}function ag(){var _e=mn.A;return mn.A=K0,_e}function gd(){Pr=4,gu||(Ia&4194048)!==Ia&&_r.current!==null||(zc=!0),(yu&134217727)===0&&(ac&134217727)===0||rr===null||xu(rr,Ia,$s,!1)}function Lf(_e,Ae,Te){var ke=Ja;Ja|=2;var Ue=ig(),He=ag();(rr!==_e||Ia!==Ae)&&(pd=null,Hc(_e,Ae)),Ae=!1;var bn=Pr;e:do try{if(Wa!==0&&Ma!==null){var In=Ma,ri=Ws;switch(Wa){case 8:Vf(),bn=6;break e;case 3:case 2:case 9:case 6:_r.current===null&&(Ae=!0);var Mi=Wa;if(Wa=0,Ws=null,Gc(_e,In,ri,Mi),Te&&zc){bn=0;break e}break;default:Mi=Wa,Wa=0,Ws=null,Gc(_e,In,ri,Mi)}}ey(),bn=Pr;break}catch(zi){tg(_e,zi)}while(!0);return Ae&&_e.shellSuspendCounter++,io=Qo=null,Ja=ke,mn.H=Ue,mn.A=He,Ma===null&&(rr=null,Ia=0,Xo()),bn}function ey(){for(;Ma!==null;)rg(Ma)}function ty(_e,Ae){var Te=Ja;Ja|=2;var ke=ig(),Ue=ag();rr!==_e||Ia!==Ae?(pd=null,dd=pi()+500,Hc(_e,Ae)):zc=Ci(_e,Ae);e:do try{if(Wa!==0&&Ma!==null){Ae=Ma;var He=Ws;t:switch(Wa){case 1:Wa=0,Ws=null,Gc(_e,Ae,He,1);break;case 2:case 9:if(Xi(He)){Wa=0,Ws=null,sg(Ae);break}Ae=function(){Wa!==2&&Wa!==9||rr!==_e||(Wa=7),ol(_e)},He.then(Ae,Ae);break e;case 3:Wa=7;break e;case 4:Wa=5;break e;case 7:Xi(He)?(Wa=0,Ws=null,sg(Ae)):(Wa=0,Ws=null,Gc(_e,Ae,He,7));break;case 5:var bn=null;switch(Ma.tag){case 26:bn=Ma.memoizedState;case 5:case 27:var In=Ma;if(bn?Gg(bn):In.stateNode.complete){Wa=0,Ws=null;var ri=In.sibling;if(ri!==null)Ma=ri;else{var Mi=In.return;Mi!==null?(Ma=Mi,yd(Mi)):Ma=null}break t}}Wa=0,Ws=null,Gc(_e,Ae,He,5);break;case 6:Wa=0,Ws=null,Gc(_e,Ae,He,6);break;case 8:Vf(),Pr=6;break e;default:throw Error(xe(462))}}ny();break}catch(zi){tg(_e,zi)}while(!0);return io=Qo=null,mn.H=ke,mn.A=Ue,Ja=Te,Ma!==null?0:(rr=null,Ia=0,Xo(),Pr)}function ny(){for(;Ma!==null&&!ni();)rg(Ma)}function rg(_e){var Ae=Bm(_e.alternate,_e,Vl);_e.memoizedProps=_e.pendingProps,Ae===null?yd(_e):Ma=Ae}function sg(_e){var Ae=_e,Te=Ae.alternate;switch(Ae.tag){case 15:case 0:Ae=Am(Te,Ae,Ae.pendingProps,Ae.type,void 0,Ia);break;case 11:Ae=Am(Te,Ae,Ae.pendingProps,Ae.type.render,Ae.ref,Ia);break;case 5:Mc(Ae);default:Nm(Te,Ae),Ae=Ma=Ju(Ae,Vl),Ae=Bm(Te,Ae,Vl)}_e.memoizedProps=_e.pendingProps,Ae===null?yd(_e):Ma=Ae}function Gc(_e,Ae,Te,ke){io=Qo=null,Mc(Ae),Hi=null,oa=0;var Ue=Ae.return;try{if(H0(_e,Ue,Ae,Te,Ia)){Pr=1,id(_e,Cs(Te,_e.current)),Ma=null;return}}catch(He){if(Ue!==null)throw Ma=Ue,He;Pr=1,id(_e,Cs(Te,_e.current)),Ma=null;return}Ae.flags&32768?(Ra||ke===1?_e=!0:zc||(Ia&536870912)!==0?_e=!1:(gu=_e=!0,(ke===2||ke===9||ke===3||ke===6)&&(ke=_r.current,ke!==null&&ke.tag===13&&(ke.flags|=16384))),og(Ae,_e)):yd(Ae)}function yd(_e){var Ae=_e;do{if((Ae.flags&32768)!==0){og(Ae,gu);return}_e=Ae.return;var Te=J0(Ae.alternate,Ae,Vl);if(Te!==null){Ma=Te;return}if(Ae=Ae.sibling,Ae!==null){Ma=Ae;return}Ma=Ae=_e}while(Ae!==null);Pr===0&&(Pr=5)}function og(_e,Ae){do{var Te=X0(_e.alternate,_e);if(Te!==null){Te.flags&=32767,Ma=Te;return}if(Te=_e.return,Te!==null&&(Te.flags|=32768,Te.subtreeFlags=0,Te.deletions=null),!Ae&&(_e=_e.sibling,_e!==null)){Ma=_e;return}Ma=_e=Te}while(_e!==null);Pr=6,Ma=null}function lg(_e,Ae,Te,ke,Ue,He,bn,In,ri){_e.cancelPendingCommit=null;do vd();while(Hr!==0);if((Ja&6)!==0)throw Error(xe(327));if(Ae!==null){if(Ae===_e.current)throw Error(xe(177));if(He=Ae.lanes|Ae.childLanes,He|=Js,ei(_e,Te,He,bn,In,ri),_e===rr&&(Ma=rr=null,Ia=0),qc=Ae,bu=_e,Ll=Te,Nf=He,Mf=Ue,Km=ke,(Ae.subtreeFlags&10256)!==0||(Ae.flags&10256)!==0?(_e.callbackNode=null,_e.callbackPriority=0,sy(Di,function(){return fg(),null})):(_e.callbackNode=null,_e.callbackPriority=0),ke=(Ae.flags&13878)!==0,(Ae.subtreeFlags&13878)!==0||ke){ke=mn.T,mn.T=null,Ue=Sn.p,Sn.p=2,bn=Ja,Ja|=4;try{W0(_e,Ae,Te)}finally{Ja=bn,Sn.p=Ue,mn.T=ke}}Hr=1,ug(),cg(),hg()}}function ug(){if(Hr===1){Hr=0;var _e=bu,Ae=qc,Te=(Ae.flags&13878)!==0;if((Ae.subtreeFlags&13878)!==0||Te){Te=mn.T,mn.T=null;var ke=Sn.p;Sn.p=2;var Ue=Ja;Ja|=4;try{qm(Ae,_e);var He=Jf,bn=vo(_e.containerInfo),In=He.focusedElem,ri=He.selectionRange;if(bn!==In&&In&&In.ownerDocument&&Xr(In.ownerDocument.documentElement,In)){if(ri!==null&&qs(In)){var Mi=ri.start,zi=ri.end;if(zi===void 0&&(zi=Mi),"selectionStart"in In)In.selectionStart=Mi,In.selectionEnd=Math.min(zi,In.value.length);else{var $i=In.ownerDocument||document,Vi=$i&&$i.defaultView||window;if(Vi.getSelection){var Li=Vi.getSelection(),ha=In.textContent.length,ba=Math.min(ri.start,ha),er=ri.end===void 0?ba:Math.min(ri.end,ha);!Li.extend&&ba>er&&(bn=er,er=ba,ba=bn);var _i=ns(In,ba),fi=ns(In,er);if(_i&&fi&&(Li.rangeCount!==1||Li.anchorNode!==_i.node||Li.anchorOffset!==_i.offset||Li.focusNode!==fi.node||Li.focusOffset!==fi.offset)){var Ni=$i.createRange();Ni.setStart(_i.node,_i.offset),Li.removeAllRanges(),ba>er?(Li.addRange(Ni),Li.extend(fi.node,fi.offset)):(Ni.setEnd(fi.node,fi.offset),Li.addRange(Ni))}}}}for($i=[],Li=In;Li=Li.parentNode;)Li.nodeType===1&&$i.push({element:Li,left:Li.scrollLeft,top:Li.scrollTop});for(typeof In.focus=="function"&&In.focus(),In=0;In<$i.length;In++){var Yi=$i[In];Yi.element.scrollLeft=Yi.left,Yi.element.scrollTop=Yi.top}}Rd=!!Yf,Jf=Yf=null}finally{Ja=Ue,Sn.p=ke,mn.T=Te}}_e.current=Ae,Hr=2}}function cg(){if(Hr===2){Hr=0;var _e=bu,Ae=qc,Te=(Ae.flags&8772)!==0;if((Ae.subtreeFlags&8772)!==0||Te){Te=mn.T,mn.T=null;var ke=Sn.p;Sn.p=2;var Ue=Ja;Ja|=4;try{Fm(_e,Ae.alternate,Ae)}finally{Ja=Ue,Sn.p=ke,mn.T=Te}}Hr=3}}function hg(){if(Hr===4||Hr===3){Hr=0,yi();var _e=bu,Ae=qc,Te=Ll,ke=Km;(Ae.subtreeFlags&10256)!==0||(Ae.flags&10256)!==0?Hr=5:(Hr=0,qc=bu=null,dg(_e,_e.pendingLanes));var Ue=_e.pendingLanes;if(Ue===0&&(vu=null),qi(Te),Ae=Ae.stateNode,Ki&&typeof Ki.onCommitFiberRoot=="function")try{Ki.onCommitFiberRoot(ea,Ae,void 0,(Ae.current.flags&128)===128)}catch{}if(ke!==null){Ae=mn.T,Ue=Sn.p,Sn.p=2,mn.T=null;try{for(var He=_e.onRecoverableError,bn=0;bn<ke.length;bn++){var In=ke[bn];He(In.value,{componentStack:In.stack})}}finally{mn.T=Ae,Sn.p=Ue}}(Ll&3)!==0&&vd(),ol(_e),Ue=_e.pendingLanes,(Te&261930)!==0&&(Ue&42)!==0?_e===kf?Th++:(Th=0,kf=_e):Th=0,Ch(0)}}function dg(_e,Ae){(_e.pooledCacheLanes&=Ae)===0&&(Ae=_e.pooledCache,Ae!=null&&(_e.pooledCache=null,$u(Ae)))}function vd(){return ug(),cg(),hg(),fg()}function fg(){if(Hr!==5)return!1;var _e=bu,Ae=Nf;Nf=0;var Te=qi(Ll),ke=mn.T,Ue=Sn.p;try{Sn.p=32>Te?32:Te,mn.T=null,Te=Mf,Mf=null;var He=bu,bn=Ll;if(Hr=0,qc=bu=null,Ll=0,(Ja&6)!==0)throw Error(xe(331));var In=Ja;if(Ja|=4,Xm(He.current),Gm(He,He.current,bn,Te),Ja=In,Ch(0,!1),Ki&&typeof Ki.onPostCommitFiberRoot=="function")try{Ki.onPostCommitFiberRoot(ea,He)}catch{}return!0}finally{Sn.p=Ue,mn.T=ke,dg(_e,Ae)}}function pg(_e,Ae,Te){Ae=Cs(Te,Ae),Ae=hf(_e.stateNode,Ae,2),_e=Xa(_e,Ae,2),_e!==null&&(Gn(_e,2),ol(_e))}function $a(_e,Ae,Te){if(_e.tag===3)pg(_e,_e,Te);else for(;Ae!==null;){if(Ae.tag===3){pg(Ae,_e,Te);break}else if(Ae.tag===1){var ke=Ae.stateNode;if(typeof Ae.type.getDerivedStateFromError=="function"||typeof ke.componentDidCatch=="function"&&(vu===null||!vu.has(ke))){_e=Cs(Te,_e),Te=mm(2),ke=Xa(Ae,Te,2),ke!==null&&(gm(Te,ke,Ae,_e),Gn(ke,2),ol(ke));break}}Ae=Ae.return}}function If(_e,Ae,Te){var ke=_e.pingCache;if(ke===null){ke=_e.pingCache=new Q0;var Ue=new Set;ke.set(Ae,Ue)}else Ue=ke.get(Ae),Ue===void 0&&(Ue=new Set,ke.set(Ae,Ue));Ue.has(Te)||(Cf=!0,Ue.add(Te),_e=iy.bind(null,_e,Ae,Te),Ae.then(_e,_e))}function iy(_e,Ae,Te){var ke=_e.pingCache;ke!==null&&ke.delete(Ae),_e.pingedLanes|=_e.suspendedLanes&Te,_e.warmLanes&=~Te,rr===_e&&(Ia&Te)===Te&&(Pr===4||Pr===3&&(Ia&62914560)===Ia&&300>pi()-hd?(Ja&2)===0&&Hc(_e,0):Bf|=Te,jc===Ia&&(jc=0)),ol(_e)}function mg(_e,Ae){Ae===0&&(Ae=Fn()),_e=So(_e,Ae),_e!==null&&(Gn(_e,Ae),ol(_e))}function ay(_e){var Ae=_e.memoizedState,Te=0;Ae!==null&&(Te=Ae.retryLane),mg(_e,Te)}function ry(_e,Ae){var Te=0;switch(_e.tag){case 31:case 13:var ke=_e.stateNode,Ue=_e.memoizedState;Ue!==null&&(Te=Ue.retryLane);break;case 19:ke=_e.stateNode;break;case 22:ke=_e.stateNode._retryCache;break;default:throw Error(xe(314))}ke!==null&&ke.delete(Ae),mg(_e,Te)}function sy(_e,Ae){return Un(_e,Ae)}var bd=null,Yc=null,Df=!1,xd=!1,Ff=!1,_u=0;function ol(_e){_e!==Yc&&_e.next===null&&(Yc===null?bd=Yc=_e:Yc=Yc.next=_e),xd=!0,Df||(Df=!0,ly())}function Ch(_e,Ae){if(!Ff&&xd){Ff=!0;do for(var Te=!1,ke=bd;ke!==null;){if(_e!==0){var Ue=ke.pendingLanes;if(Ue===0)var He=0;else{var bn=ke.suspendedLanes,In=ke.pingedLanes;He=(1<<31-Kn(42|_e)+1)-1,He&=Ue&~(bn&~In),He=He&201326741?He&201326741|1:He?He|2:0}He!==0&&(Te=!0,bg(ke,He))}else He=Ia,He=Si(ke,ke===rr?He:0,ke.cancelPendingCommit!==null||ke.timeoutHandle!==-1),(He&3)===0||Ci(ke,He)||(Te=!0,bg(ke,He));ke=ke.next}while(Te);Ff=!1}}function oy(){gg()}function gg(){xd=Df=!1;var _e=0;_u!==0&&vy()&&(_e=_u);for(var Ae=pi(),Te=null,ke=bd;ke!==null;){var Ue=ke.next,He=yg(ke,Ae);He===0?(ke.next=null,Te===null?bd=Ue:Te.next=Ue,Ue===null&&(Yc=Te)):(Te=ke,(_e!==0||(He&3)!==0)&&(xd=!0)),ke=Ue}Hr!==0&&Hr!==5||Ch(_e),_u!==0&&(_u=0)}function yg(_e,Ae){for(var Te=_e.suspendedLanes,ke=_e.pingedLanes,Ue=_e.expirationTimes,He=_e.pendingLanes&-62914561;0<He;){var bn=31-Kn(He),In=1<<bn,ri=Ue[bn];ri===-1?((In&Te)===0||(In&ke)!==0)&&(Ue[bn]=Oi(In,Ae)):ri<=Ae&&(_e.expiredLanes|=In),He&=~In}if(Ae=rr,Te=Ia,Te=Si(_e,_e===Ae?Te:0,_e.cancelPendingCommit!==null||_e.timeoutHandle!==-1),ke=_e.callbackNode,Te===0||_e===Ae&&(Wa===2||Wa===9)||_e.cancelPendingCommit!==null)return ke!==null&&ke!==null&&zn(ke),_e.callbackNode=null,_e.callbackPriority=0;if((Te&3)===0||Ci(_e,Te)){if(Ae=Te&-Te,Ae===_e.callbackPriority)return Ae;switch(ke!==null&&zn(ke),qi(Te)){case 2:case 8:Te=ai;break;case 32:Te=Di;break;case 268435456:Te=Ji;break;default:Te=Di}return ke=vg.bind(null,_e),Te=Un(Te,ke),_e.callbackPriority=Ae,_e.callbackNode=Te,Ae}return ke!==null&&ke!==null&&zn(ke),_e.callbackPriority=2,_e.callbackNode=null,2}function vg(_e,Ae){if(Hr!==0&&Hr!==5)return _e.callbackNode=null,_e.callbackPriority=0,null;var Te=_e.callbackNode;if(vd()&&_e.callbackNode!==Te)return null;var ke=Ia;return ke=Si(_e,_e===rr?ke:0,_e.cancelPendingCommit!==null||_e.timeoutHandle!==-1),ke===0?null:(Zm(_e,ke,Ae),yg(_e,pi()),_e.callbackNode!=null&&_e.callbackNode===Te?vg.bind(null,_e):null)}function bg(_e,Ae){if(vd())return null;Zm(_e,Ae,!0)}function ly(){xy(function(){(Ja&6)!==0?Un(Yn,oy):gg()})}function Of(){if(_u===0){var _e=De;_e===0&&(_e=Ai,Ai<<=1,(Ai&261888)===0&&(Ai=256)),_u=_e}return _u}function xg(_e){return _e==null||typeof _e=="symbol"||typeof _e=="boolean"?null:typeof _e=="function"?_e:ul(""+_e)}function _g(_e,Ae){var Te=Ae.ownerDocument.createElement("input");return Te.name=Ae.name,Te.value=Ae.value,_e.id&&Te.setAttribute("form",_e.id),Ae.parentNode.insertBefore(Te,Ae),_e=new FormData(_e),Te.parentNode.removeChild(Te),_e}function uy(_e,Ae,Te,ke,Ue){if(Ae==="submit"&&Te&&Te.stateNode===Ue){var He=xg((Ue[aa]||null).action),bn=ke.submitter;bn&&(Ae=(Ae=bn[aa]||null)?xg(Ae.formAction):bn.getAttribute("formAction"),Ae!==null&&(He=Ae,bn=null));var In=new dl("action","action",null,ke,Ue);_e.push({event:In,listeners:[{instance:null,listener:function(){if(ke.defaultPrevented){if(_u!==0){var ri=bn?_g(Ue,bn):new FormData(Ue);rf(Te,{pending:!0,data:ri,method:Ue.method,action:He},null,ri)}}else typeof He=="function"&&(In.preventDefault(),ri=bn?_g(Ue,bn):new FormData(Ue),rf(Te,{pending:!0,data:ri,method:Ue.method,action:He},He,ri))},currentTarget:Ue}]})}}for(var Uf=0;Uf<us.length;Uf++){var zf=us[Uf],cy=zf.toLowerCase(),hy=zf[0].toUpperCase()+zf.slice(1);Ca(cy,"on"+hy)}Ca(Go,"onAnimationEnd"),Ca(xo,"onAnimationIteration"),Ca(Yo,"onAnimationStart"),Ca("dblclick","onDoubleClick"),Ca("focusin","onFocus"),Ca("focusout","onBlur"),Ca(nu,"onTransitionRun"),Ca(bl,"onTransitionStart"),Ca(Jo,"onTransitionCancel"),Ca(iu,"onTransitionEnd"),Qs("onMouseEnter",["mouseout","mouseover"]),Qs("onMouseLeave",["mouseout","mouseover"]),Qs("onPointerEnter",["pointerout","pointerover"]),Qs("onPointerLeave",["pointerout","pointerover"]),fo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fo("onBeforeInput",["compositionend","keypress","textInput","paste"]),fo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bh));function Sg(_e,Ae){Ae=(Ae&4)!==0;for(var Te=0;Te<_e.length;Te++){var ke=_e[Te],Ue=ke.event;ke=ke.listeners;e:{var He=void 0;if(Ae)for(var bn=ke.length-1;0<=bn;bn--){var In=ke[bn],ri=In.instance,Mi=In.currentTarget;if(In=In.listener,ri!==He&&Ue.isPropagationStopped())break e;He=In,Ue.currentTarget=Mi;try{He(Ue)}catch(zi){Ga(zi)}Ue.currentTarget=null,He=ri}else for(bn=0;bn<ke.length;bn++){if(In=ke[bn],ri=In.instance,Mi=In.currentTarget,In=In.listener,ri!==He&&Ue.isPropagationStopped())break e;He=In,Ue.currentTarget=Mi;try{He(Ue)}catch(zi){Ga(zi)}Ue.currentTarget=null,He=ri}}}}function ka(_e,Ae){var Te=Ae[ma];Te===void 0&&(Te=Ae[ma]=new Set);var ke=_e+"__bubble";Te.has(ke)||(Ag(Ae,_e,2,!1),Te.add(ke))}function jf(_e,Ae,Te){var ke=0;Ae&&(ke|=4),Ag(Te,_e,ke,Ae)}var _d="_reactListening"+Math.random().toString(36).slice(2);function qf(_e){if(!_e[_d]){_e[_d]=!0,ll.forEach(function(Te){Te!=="selectionchange"&&(dy.has(Te)||jf(Te,!1,_e),jf(Te,!0,_e))});var Ae=_e.nodeType===9?_e:_e.ownerDocument;Ae===null||Ae[_d]||(Ae[_d]=!0,jf("selectionchange",!1,Ae))}}function Ag(_e,Ae,Te,ke){switch(Qg(Ae)){case 2:var Ue=Uy;break;case 8:Ue=zy;break;default:Ue=ap}Te=Ue.bind(null,Ae,Te,_e),Ue=void 0,!cl||Ae!=="touchstart"&&Ae!=="touchmove"&&Ae!=="wheel"||(Ue=!0),ke?Ue!==void 0?_e.addEventListener(Ae,Te,{capture:!0,passive:Ue}):_e.addEventListener(Ae,Te,!0):Ue!==void 0?_e.addEventListener(Ae,Te,{passive:Ue}):_e.addEventListener(Ae,Te,!1)}function Hf(_e,Ae,Te,ke,Ue){var He=ke;if((Ae&1)===0&&(Ae&2)===0&&ke!==null)e:for(;;){if(ke===null)return;var bn=ke.tag;if(bn===3||bn===4){var In=ke.stateNode.containerInfo;if(In===Ue)break;if(bn===4)for(bn=ke.return;bn!==null;){var ri=bn.tag;if((ri===3||ri===4)&&bn.stateNode.containerInfo===Ue)return;bn=bn.return}for(;In!==null;){if(bn=Sr(In),bn===null)return;if(ri=bn.tag,ri===5||ri===6||ri===26||ri===27){ke=He=bn;continue e}In=In.parentNode}}ke=ke.return}Lu(function(){var Mi=He,zi=Hl(Te),$i=[];e:{var Vi=ms.get(_e);if(Vi!==void 0){var Li=dl,ha=_e;switch(_e){case"keypress":if(zs(Te)===0)break e;case"keydown":case"keyup":Li=qu;break;case"focusin":ha="focus",Li=Fu;break;case"focusout":ha="blur",Li=Fu;break;case"beforeblur":case"afterblur":Li=Fu;break;case"click":if(Te.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Li=mo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Li=Du;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Li=Bn;break;case Go:case xo:case Yo:Li=ah;break;case iu:Li=ui;break;case"scroll":case"scrollend":Li=fc;break;case"wheel":Li=Fi;break;case"copy":case"cut":case"paste":Li=Uu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Li=Wl;break;case"toggle":case"beforetoggle":Li=ua}var ba=(Ae&4)!==0,er=!ba&&(_e==="scroll"||_e==="scrollend"),_i=ba?Vi!==null?Vi+"Capture":null:Vi;ba=[];for(var fi=Mi,Ni;fi!==null;){var Yi=fi;if(Ni=Yi.stateNode,Yi=Yi.tag,Yi!==5&&Yi!==26&&Yi!==27||Ni===null||_i===null||(Yi=Lo(fi,_i),Yi!=null&&ba.push(Rh(fi,Yi,Ni))),er)break;fi=fi.return}0<ba.length&&(Vi=new Li(Vi,ha,null,Te,zi),$i.push({event:Vi,listeners:ba}))}}if((Ae&7)===0){e:{if(Vi=_e==="mouseover"||_e==="pointerover",Li=_e==="mouseout"||_e==="pointerout",Vi&&Te!==Vu&&(ha=Te.relatedTarget||Te.fromElement)&&(Sr(ha)||ha[ca]))break e;if((Li||Vi)&&(Vi=zi.window===zi?zi:(Vi=zi.ownerDocument)?Vi.defaultView||Vi.parentWindow:window,Li?(ha=Te.relatedTarget||Te.toElement,Li=Mi,ha=ha?Sr(ha):null,ha!==null&&(er=Ee(ha),ba=ha.tag,ha!==er||ba!==5&&ba!==27&&ba!==6)&&(ha=null)):(Li=null,ha=Mi),Li!==ha)){if(ba=mo,Yi="onMouseLeave",_i="onMouseEnter",fi="mouse",(_e==="pointerout"||_e==="pointerover")&&(ba=Wl,Yi="onPointerLeave",_i="onPointerEnter",fi="pointer"),er=Li==null?Vi:No(Li),Ni=ha==null?Vi:No(ha),Vi=new ba(Yi,fi+"leave",Li,Te,zi),Vi.target=er,Vi.relatedTarget=Ni,Yi=null,Sr(zi)===Mi&&(ba=new ba(_i,fi+"enter",ha,Te,zi),ba.target=Ni,ba.relatedTarget=er,Yi=ba),er=Yi,Li&&ha)t:{for(ba=fy,_i=Li,fi=ha,Ni=0,Yi=_i;Yi;Yi=ba(Yi))Ni++;Yi=0;for(var ga=fi;ga;ga=ba(ga))Yi++;for(;0<Ni-Yi;)_i=ba(_i),Ni--;for(;0<Yi-Ni;)fi=ba(fi),Yi--;for(;Ni--;){if(_i===fi||fi!==null&&_i===fi.alternate){ba=_i;break t}_i=ba(_i),fi=ba(fi)}ba=null}else ba=null;Li!==null&&Eg($i,Vi,Li,ba,!1),ha!==null&&er!==null&&Eg($i,er,ha,ba,!0)}}e:{if(Vi=Mi?No(Mi):window,Li=Vi.nodeName&&Vi.nodeName.toLowerCase(),Li==="select"||Li==="input"&&Vi.type==="file")var qa=Rr;else if($l(Vi))if(yl)qa=Zl;else{qa=vc;var da=Gu}else Li=Vi.nodeName,!Li||Li.toLowerCase()!=="input"||Vi.type!=="checkbox"&&Vi.type!=="radio"?Mi&&Us(Mi.elementType)&&(qa=Rr):qa=Ps;if(qa&&(qa=qa(_e,Mi))){Kl($i,qa,Te,zi);break e}da&&da(_e,Vi,Mi),_e==="focusout"&&Mi&&Vi.type==="number"&&Mi.memoizedProps.value!=null&&zl(Vi,"number",Vi.value)}switch(da=Mi?No(Mi):window,_e){case"focusin":($l(da)||da.contentEditable==="true")&&(Hs=da,Gs=Mi,nr=null);break;case"focusout":nr=Gs=Hs=null;break;case"mousedown":vl=!0;break;case"contextmenu":case"mouseup":case"dragend":vl=!1,Wr($i,Te,zi);break;case"selectionchange":if(bo)break;case"keydown":case"keyup":Wr($i,Te,zi)}var wa;if(Aa)e:{switch(_e){case"compositionstart":var Da="onCompositionStart";break e;case"compositionend":Da="onCompositionEnd";break e;case"compositionupdate":Da="onCompositionUpdate";break e}Da=void 0}else Yr?Fr(_e,Te)&&(Da="onCompositionEnd"):_e==="keydown"&&Te.keyCode===229&&(Da="onCompositionStart");Da&&(lr&&Te.locale!=="ko"&&(Yr||Da!=="onCompositionStart"?Da==="onCompositionEnd"&&Yr&&(wa=Do()):(eo=zi,Iu="value"in eo?eo.value:eo.textContent,Yr=!0)),da=Sd(Mi,Da),0<da.length&&(Da=new ml(Da,_e,null,Te,zi),$i.push({event:Da,listeners:da}),wa?Da.data=wa:(wa=Tr(Te),wa!==null&&(Da.data=wa)))),(wa=Va?fs(_e,Te):to(_e,Te))&&(Da=Sd(Mi,"onBeforeInput"),0<Da.length&&(da=new ml("onBeforeInput","beforeinput",null,Te,zi),$i.push({event:da,listeners:Da}),da.data=wa)),uy($i,_e,Mi,Te,zi)}Sg($i,Ae)})}function Rh(_e,Ae,Te){return{instance:_e,listener:Ae,currentTarget:Te}}function Sd(_e,Ae){for(var Te=Ae+"Capture",ke=[];_e!==null;){var Ue=_e,He=Ue.stateNode;if(Ue=Ue.tag,Ue!==5&&Ue!==26&&Ue!==27||He===null||(Ue=Lo(_e,Te),Ue!=null&&ke.unshift(Rh(_e,Ue,He)),Ue=Lo(_e,Ae),Ue!=null&&ke.push(Rh(_e,Ue,He))),_e.tag===3)return ke;_e=_e.return}return[]}function fy(_e){if(_e===null)return null;do _e=_e.return;while(_e&&_e.tag!==5&&_e.tag!==27);return _e||null}function Eg(_e,Ae,Te,ke,Ue){for(var He=Ae._reactName,bn=[];Te!==null&&Te!==ke;){var In=Te,ri=In.alternate,Mi=In.stateNode;if(In=In.tag,ri!==null&&ri===ke)break;In!==5&&In!==26&&In!==27||Mi===null||(ri=Mi,Ue?(Mi=Lo(Te,He),Mi!=null&&bn.unshift(Rh(Te,Mi,ri))):Ue||(Mi=Lo(Te,He),Mi!=null&&bn.push(Rh(Te,Mi,ri)))),Te=Te.return}bn.length!==0&&_e.push({event:Ae,listeners:bn})}var py=/\r\n?/g,my=/\u0000|\uFFFD/g;function Pg(_e){return(typeof _e=="string"?_e:""+_e).replace(py,`
`).replace(my,"")}function wg(_e,Ae){return Ae=Pg(Ae),Pg(_e)===Ae}function Za(_e,Ae,Te,ke,Ue,He){switch(Te){case"children":typeof ke=="string"?Ae==="body"||Ae==="textarea"&&ke===""||Zs(_e,ke):(typeof ke=="number"||typeof ke=="bigint")&&Ae!=="body"&&Zs(_e,""+ke);break;case"className":sr(_e,"class",ke);break;case"tabIndex":sr(_e,"tabindex",ke);break;case"dir":case"role":case"viewBox":case"width":case"height":sr(_e,Te,ke);break;case"style":hc(_e,ke,He);break;case"data":if(Ae!=="object"){sr(_e,"data",ke);break}case"src":case"href":if(ke===""&&(Ae!=="a"||Te!=="href")){_e.removeAttribute(Te);break}if(ke==null||typeof ke=="function"||typeof ke=="symbol"||typeof ke=="boolean"){_e.removeAttribute(Te);break}ke=ul(""+ke),_e.setAttribute(Te,ke);break;case"action":case"formAction":if(typeof ke=="function"){_e.setAttribute(Te,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof He=="function"&&(Te==="formAction"?(Ae!=="input"&&Za(_e,Ae,"name",Ue.name,Ue,null),Za(_e,Ae,"formEncType",Ue.formEncType,Ue,null),Za(_e,Ae,"formMethod",Ue.formMethod,Ue,null),Za(_e,Ae,"formTarget",Ue.formTarget,Ue,null)):(Za(_e,Ae,"encType",Ue.encType,Ue,null),Za(_e,Ae,"method",Ue.method,Ue,null),Za(_e,Ae,"target",Ue.target,Ue,null)));if(ke==null||typeof ke=="symbol"||typeof ke=="boolean"){_e.removeAttribute(Te);break}ke=ul(""+ke),_e.setAttribute(Te,ke);break;case"onClick":ke!=null&&(_e.onclick=or);break;case"onScroll":ke!=null&&ka("scroll",_e);break;case"onScrollEnd":ke!=null&&ka("scrollend",_e);break;case"dangerouslySetInnerHTML":if(ke!=null){if(typeof ke!="object"||!("__html"in ke))throw Error(xe(61));if(Te=ke.__html,Te!=null){if(Ue.children!=null)throw Error(xe(60));_e.innerHTML=Te}}break;case"multiple":_e.multiple=ke&&typeof ke!="function"&&typeof ke!="symbol";break;case"muted":_e.muted=ke&&typeof ke!="function"&&typeof ke!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(ke==null||typeof ke=="function"||typeof ke=="boolean"||typeof ke=="symbol"){_e.removeAttribute("xlink:href");break}Te=ul(""+ke),_e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Te);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":ke!=null&&typeof ke!="function"&&typeof ke!="symbol"?_e.setAttribute(Te,""+ke):_e.removeAttribute(Te);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":ke&&typeof ke!="function"&&typeof ke!="symbol"?_e.setAttribute(Te,""):_e.removeAttribute(Te);break;case"capture":case"download":ke===!0?_e.setAttribute(Te,""):ke!==!1&&ke!=null&&typeof ke!="function"&&typeof ke!="symbol"?_e.setAttribute(Te,ke):_e.removeAttribute(Te);break;case"cols":case"rows":case"size":case"span":ke!=null&&typeof ke!="function"&&typeof ke!="symbol"&&!isNaN(ke)&&1<=ke?_e.setAttribute(Te,ke):_e.removeAttribute(Te);break;case"rowSpan":case"start":ke==null||typeof ke=="function"||typeof ke=="symbol"||isNaN(ke)?_e.removeAttribute(Te):_e.setAttribute(Te,ke);break;case"popover":ka("beforetoggle",_e),ka("toggle",_e),Ol(_e,"popover",ke);break;case"xlinkActuate":xs(_e,"http://www.w3.org/1999/xlink","xlink:actuate",ke);break;case"xlinkArcrole":xs(_e,"http://www.w3.org/1999/xlink","xlink:arcrole",ke);break;case"xlinkRole":xs(_e,"http://www.w3.org/1999/xlink","xlink:role",ke);break;case"xlinkShow":xs(_e,"http://www.w3.org/1999/xlink","xlink:show",ke);break;case"xlinkTitle":xs(_e,"http://www.w3.org/1999/xlink","xlink:title",ke);break;case"xlinkType":xs(_e,"http://www.w3.org/1999/xlink","xlink:type",ke);break;case"xmlBase":xs(_e,"http://www.w3.org/XML/1998/namespace","xml:base",ke);break;case"xmlLang":xs(_e,"http://www.w3.org/XML/1998/namespace","xml:lang",ke);break;case"xmlSpace":xs(_e,"http://www.w3.org/XML/1998/namespace","xml:space",ke);break;case"is":Ol(_e,"is",ke);break;case"innerText":case"textContent":break;default:(!(2<Te.length)||Te[0]!=="o"&&Te[0]!=="O"||Te[1]!=="n"&&Te[1]!=="N")&&(Te=jl.get(Te)||Te,Ol(_e,Te,ke))}}function Gf(_e,Ae,Te,ke,Ue,He){switch(Te){case"style":hc(_e,ke,He);break;case"dangerouslySetInnerHTML":if(ke!=null){if(typeof ke!="object"||!("__html"in ke))throw Error(xe(61));if(Te=ke.__html,Te!=null){if(Ue.children!=null)throw Error(xe(60));_e.innerHTML=Te}}break;case"children":typeof ke=="string"?Zs(_e,ke):(typeof ke=="number"||typeof ke=="bigint")&&Zs(_e,""+ke);break;case"onScroll":ke!=null&&ka("scroll",_e);break;case"onScrollEnd":ke!=null&&ka("scrollend",_e);break;case"onClick":ke!=null&&(_e.onclick=or);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Cu.hasOwnProperty(Te))e:{if(Te[0]==="o"&&Te[1]==="n"&&(Ue=Te.endsWith("Capture"),Ae=Te.slice(2,Ue?Te.length-7:void 0),He=_e[aa]||null,He=He!=null?He[Te]:null,typeof He=="function"&&_e.removeEventListener(Ae,He,Ue),typeof ke=="function")){typeof He!="function"&&He!==null&&(Te in _e?_e[Te]=null:_e.hasAttribute(Te)&&_e.removeAttribute(Te)),_e.addEventListener(Ae,ke,Ue);break e}Te in _e?_e[Te]=ke:ke===!0?_e.setAttribute(Te,""):Ol(_e,Te,ke)}}}function rs(_e,Ae,Te){switch(Ae){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ka("error",_e),ka("load",_e);var ke=!1,Ue=!1,He;for(He in Te)if(Te.hasOwnProperty(He)){var bn=Te[He];if(bn!=null)switch(He){case"src":ke=!0;break;case"srcSet":Ue=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(xe(137,Ae));default:Za(_e,Ae,He,bn,Te,null)}}Ue&&Za(_e,Ae,"srcSet",Te.srcSet,Te,null),ke&&Za(_e,Ae,"src",Te.src,Te,null);return;case"input":ka("invalid",_e);var In=He=bn=Ue=null,ri=null,Mi=null;for(ke in Te)if(Te.hasOwnProperty(ke)){var zi=Te[ke];if(zi!=null)switch(ke){case"name":Ue=zi;break;case"type":bn=zi;break;case"checked":ri=zi;break;case"defaultChecked":Mi=zi;break;case"value":He=zi;break;case"defaultValue":In=zi;break;case"children":case"dangerouslySetInnerHTML":if(zi!=null)throw Error(xe(137,Ae));break;default:Za(_e,Ae,ke,zi,Te,null)}}oc(_e,He,In,ri,Mi,bn,Ue,!1);return;case"select":ka("invalid",_e),ke=bn=He=null;for(Ue in Te)if(Te.hasOwnProperty(Ue)&&(In=Te[Ue],In!=null))switch(Ue){case"value":He=In;break;case"defaultValue":bn=In;break;case"multiple":ke=In;default:Za(_e,Ae,Ue,In,Te,null)}Ae=He,Te=bn,_e.multiple=!!ke,Ae!=null?ko(_e,!!ke,Ae,!1):Te!=null&&ko(_e,!!ke,Te,!0);return;case"textarea":ka("invalid",_e),He=Ue=ke=null;for(bn in Te)if(Te.hasOwnProperty(bn)&&(In=Te[bn],In!=null))switch(bn){case"value":ke=In;break;case"defaultValue":Ue=In;break;case"children":He=In;break;case"dangerouslySetInnerHTML":if(In!=null)throw Error(xe(91));break;default:Za(_e,Ae,bn,In,Te,null)}uc(_e,ke,Ue,He);return;case"option":for(ri in Te)if(Te.hasOwnProperty(ri)&&(ke=Te[ri],ke!=null))switch(ri){case"selected":_e.selected=ke&&typeof ke!="function"&&typeof ke!="symbol";break;default:Za(_e,Ae,ri,ke,Te,null)}return;case"dialog":ka("beforetoggle",_e),ka("toggle",_e),ka("cancel",_e),ka("close",_e);break;case"iframe":case"object":ka("load",_e);break;case"video":case"audio":for(ke=0;ke<Bh.length;ke++)ka(Bh[ke],_e);break;case"image":ka("error",_e),ka("load",_e);break;case"details":ka("toggle",_e);break;case"embed":case"source":case"link":ka("error",_e),ka("load",_e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Mi in Te)if(Te.hasOwnProperty(Mi)&&(ke=Te[Mi],ke!=null))switch(Mi){case"children":case"dangerouslySetInnerHTML":throw Error(xe(137,Ae));default:Za(_e,Ae,Mi,ke,Te,null)}return;default:if(Us(Ae)){for(zi in Te)Te.hasOwnProperty(zi)&&(ke=Te[zi],ke!==void 0&&Gf(_e,Ae,zi,ke,Te,void 0));return}}for(In in Te)Te.hasOwnProperty(In)&&(ke=Te[In],ke!=null&&Za(_e,Ae,In,ke,Te,null))}function gy(_e,Ae,Te,ke){switch(Ae){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var Ue=null,He=null,bn=null,In=null,ri=null,Mi=null,zi=null;for(Li in Te){var $i=Te[Li];if(Te.hasOwnProperty(Li)&&$i!=null)switch(Li){case"checked":break;case"value":break;case"defaultValue":ri=$i;default:ke.hasOwnProperty(Li)||Za(_e,Ae,Li,null,ke,$i)}}for(var Vi in ke){var Li=ke[Vi];if($i=Te[Vi],ke.hasOwnProperty(Vi)&&(Li!=null||$i!=null))switch(Vi){case"type":He=Li;break;case"name":Ue=Li;break;case"checked":Mi=Li;break;case"defaultChecked":zi=Li;break;case"value":bn=Li;break;case"defaultValue":In=Li;break;case"children":case"dangerouslySetInnerHTML":if(Li!=null)throw Error(xe(137,Ae));break;default:Li!==$i&&Za(_e,Ae,Vi,Li,ke,$i)}}Ul(_e,bn,In,ri,Mi,zi,He,Ue);return;case"select":Li=bn=In=Vi=null;for(He in Te)if(ri=Te[He],Te.hasOwnProperty(He)&&ri!=null)switch(He){case"value":break;case"multiple":Li=ri;default:ke.hasOwnProperty(He)||Za(_e,Ae,He,null,ke,ri)}for(Ue in ke)if(He=ke[Ue],ri=Te[Ue],ke.hasOwnProperty(Ue)&&(He!=null||ri!=null))switch(Ue){case"value":Vi=He;break;case"defaultValue":In=He;break;case"multiple":bn=He;default:He!==ri&&Za(_e,Ae,Ue,He,ke,ri)}Ae=In,Te=bn,ke=Li,Vi!=null?ko(_e,!!Te,Vi,!1):!!ke!=!!Te&&(Ae!=null?ko(_e,!!Te,Ae,!0):ko(_e,!!Te,Te?[]:"",!1));return;case"textarea":Li=Vi=null;for(In in Te)if(Ue=Te[In],Te.hasOwnProperty(In)&&Ue!=null&&!ke.hasOwnProperty(In))switch(In){case"value":break;case"children":break;default:Za(_e,Ae,In,null,ke,Ue)}for(bn in ke)if(Ue=ke[bn],He=Te[bn],ke.hasOwnProperty(bn)&&(Ue!=null||He!=null))switch(bn){case"value":Vi=Ue;break;case"defaultValue":Li=Ue;break;case"children":break;case"dangerouslySetInnerHTML":if(Ue!=null)throw Error(xe(91));break;default:Ue!==He&&Za(_e,Ae,bn,Ue,ke,He)}ku(_e,Vi,Li);return;case"option":for(var ha in Te)if(Vi=Te[ha],Te.hasOwnProperty(ha)&&Vi!=null&&!ke.hasOwnProperty(ha))switch(ha){case"selected":_e.selected=!1;break;default:Za(_e,Ae,ha,null,ke,Vi)}for(ri in ke)if(Vi=ke[ri],Li=Te[ri],ke.hasOwnProperty(ri)&&Vi!==Li&&(Vi!=null||Li!=null))switch(ri){case"selected":_e.selected=Vi&&typeof Vi!="function"&&typeof Vi!="symbol";break;default:Za(_e,Ae,ri,Vi,ke,Li)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ba in Te)Vi=Te[ba],Te.hasOwnProperty(ba)&&Vi!=null&&!ke.hasOwnProperty(ba)&&Za(_e,Ae,ba,null,ke,Vi);for(Mi in ke)if(Vi=ke[Mi],Li=Te[Mi],ke.hasOwnProperty(Mi)&&Vi!==Li&&(Vi!=null||Li!=null))switch(Mi){case"children":case"dangerouslySetInnerHTML":if(Vi!=null)throw Error(xe(137,Ae));break;default:Za(_e,Ae,Mi,Vi,ke,Li)}return;default:if(Us(Ae)){for(var er in Te)Vi=Te[er],Te.hasOwnProperty(er)&&Vi!==void 0&&!ke.hasOwnProperty(er)&&Gf(_e,Ae,er,void 0,ke,Vi);for(zi in ke)Vi=ke[zi],Li=Te[zi],!ke.hasOwnProperty(zi)||Vi===Li||Vi===void 0&&Li===void 0||Gf(_e,Ae,zi,Vi,ke,Li);return}}for(var _i in Te)Vi=Te[_i],Te.hasOwnProperty(_i)&&Vi!=null&&!ke.hasOwnProperty(_i)&&Za(_e,Ae,_i,null,ke,Vi);for($i in ke)Vi=ke[$i],Li=Te[$i],!ke.hasOwnProperty($i)||Vi===Li||Vi==null&&Li==null||Za(_e,Ae,$i,Vi,ke,Li)}function Tg(_e){switch(_e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function yy(){if(typeof performance.getEntriesByType=="function"){for(var _e=0,Ae=0,Te=performance.getEntriesByType("resource"),ke=0;ke<Te.length;ke++){var Ue=Te[ke],He=Ue.transferSize,bn=Ue.initiatorType,In=Ue.duration;if(He&&In&&Tg(bn)){for(bn=0,In=Ue.responseEnd,ke+=1;ke<Te.length;ke++){var ri=Te[ke],Mi=ri.startTime;if(Mi>In)break;var zi=ri.transferSize,$i=ri.initiatorType;zi&&Tg($i)&&(ri=ri.responseEnd,bn+=zi*(ri<In?1:(In-Mi)/(ri-Mi)))}if(--ke,Ae+=8*(He+bn)/(Ue.duration/1e3),_e++,10<_e)break}}if(0<_e)return Ae/_e/1e6}return navigator.connection&&(_e=navigator.connection.downlink,typeof _e=="number")?_e:5}var Yf=null,Jf=null;function Ad(_e){return _e.nodeType===9?_e:_e.ownerDocument}function Cg(_e){switch(_e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Bg(_e,Ae){if(_e===0)switch(Ae){case"svg":return 1;case"math":return 2;default:return 0}return _e===1&&Ae==="foreignObject"?0:_e}function Xf(_e,Ae){return _e==="textarea"||_e==="noscript"||typeof Ae.children=="string"||typeof Ae.children=="number"||typeof Ae.children=="bigint"||typeof Ae.dangerouslySetInnerHTML=="object"&&Ae.dangerouslySetInnerHTML!==null&&Ae.dangerouslySetInnerHTML.__html!=null}var Wf=null;function vy(){var _e=window.event;return _e&&_e.type==="popstate"?_e===Wf?!1:(Wf=_e,!0):(Wf=null,!1)}var Rg=typeof setTimeout=="function"?setTimeout:void 0,by=typeof clearTimeout=="function"?clearTimeout:void 0,Ng=typeof Promise=="function"?Promise:void 0,xy=typeof queueMicrotask=="function"?queueMicrotask:typeof Ng<"u"?function(_e){return Ng.resolve(null).then(_e).catch(_y)}:Rg;function _y(_e){setTimeout(function(){throw _e})}function Su(_e){return _e==="head"}function Mg(_e,Ae){var Te=Ae,ke=0;do{var Ue=Te.nextSibling;if(_e.removeChild(Te),Ue&&Ue.nodeType===8)if(Te=Ue.data,Te==="/$"||Te==="/&"){if(ke===0){_e.removeChild(Ue),$c(Ae);return}ke--}else if(Te==="$"||Te==="$?"||Te==="$~"||Te==="$!"||Te==="&")ke++;else if(Te==="html")Nh(_e.ownerDocument.documentElement);else if(Te==="head"){Te=_e.ownerDocument.head,Nh(Te);for(var He=Te.firstChild;He;){var bn=He.nextSibling,In=He.nodeName;He[tr]||In==="SCRIPT"||In==="STYLE"||In==="LINK"&&He.rel.toLowerCase()==="stylesheet"||Te.removeChild(He),He=bn}}else Te==="body"&&Nh(_e.ownerDocument.body);Te=Ue}while(Te);$c(Ae)}function kg(_e,Ae){var Te=_e;_e=0;do{var ke=Te.nextSibling;if(Te.nodeType===1?Ae?(Te._stashedDisplay=Te.style.display,Te.style.display="none"):(Te.style.display=Te._stashedDisplay||"",Te.getAttribute("style")===""&&Te.removeAttribute("style")):Te.nodeType===3&&(Ae?(Te._stashedText=Te.nodeValue,Te.nodeValue=""):Te.nodeValue=Te._stashedText||""),ke&&ke.nodeType===8)if(Te=ke.data,Te==="/$"){if(_e===0)break;_e--}else Te!=="$"&&Te!=="$?"&&Te!=="$~"&&Te!=="$!"||_e++;Te=ke}while(Te)}function $f(_e){var Ae=_e.firstChild;for(Ae&&Ae.nodeType===10&&(Ae=Ae.nextSibling);Ae;){var Te=Ae;switch(Ae=Ae.nextSibling,Te.nodeName){case"HTML":case"HEAD":case"BODY":$f(Te),wr(Te);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(Te.rel.toLowerCase()==="stylesheet")continue}_e.removeChild(Te)}}function Sy(_e,Ae,Te,ke){for(;_e.nodeType===1;){var Ue=Te;if(_e.nodeName.toLowerCase()!==Ae.toLowerCase()){if(!ke&&(_e.nodeName!=="INPUT"||_e.type!=="hidden"))break}else if(ke){if(!_e[tr])switch(Ae){case"meta":if(!_e.hasAttribute("itemprop"))break;return _e;case"link":if(He=_e.getAttribute("rel"),He==="stylesheet"&&_e.hasAttribute("data-precedence"))break;if(He!==Ue.rel||_e.getAttribute("href")!==(Ue.href==null||Ue.href===""?null:Ue.href)||_e.getAttribute("crossorigin")!==(Ue.crossOrigin==null?null:Ue.crossOrigin)||_e.getAttribute("title")!==(Ue.title==null?null:Ue.title))break;return _e;case"style":if(_e.hasAttribute("data-precedence"))break;return _e;case"script":if(He=_e.getAttribute("src"),(He!==(Ue.src==null?null:Ue.src)||_e.getAttribute("type")!==(Ue.type==null?null:Ue.type)||_e.getAttribute("crossorigin")!==(Ue.crossOrigin==null?null:Ue.crossOrigin))&&He&&_e.hasAttribute("async")&&!_e.hasAttribute("itemprop"))break;return _e;default:return _e}}else if(Ae==="input"&&_e.type==="hidden"){var He=Ue.name==null?null:""+Ue.name;if(Ue.type==="hidden"&&_e.getAttribute("name")===He)return _e}else return _e;if(_e=uo(_e.nextSibling),_e===null)break}return null}function Ay(_e,Ae,Te){if(Ae==="")return null;for(;_e.nodeType!==3;)if((_e.nodeType!==1||_e.nodeName!=="INPUT"||_e.type!=="hidden")&&!Te||(_e=uo(_e.nextSibling),_e===null))return null;return _e}function Vg(_e,Ae){for(;_e.nodeType!==8;)if((_e.nodeType!==1||_e.nodeName!=="INPUT"||_e.type!=="hidden")&&!Ae||(_e=uo(_e.nextSibling),_e===null))return null;return _e}function Kf(_e){return _e.data==="$?"||_e.data==="$~"}function Qf(_e){return _e.data==="$!"||_e.data==="$?"&&_e.ownerDocument.readyState!=="loading"}function Ey(_e,Ae){var Te=_e.ownerDocument;if(_e.data==="$~")_e._reactRetry=Ae;else if(_e.data!=="$?"||Te.readyState!=="loading")Ae();else{var ke=function(){Ae(),Te.removeEventListener("DOMContentLoaded",ke)};Te.addEventListener("DOMContentLoaded",ke),_e._reactRetry=ke}}function uo(_e){for(;_e!=null;_e=_e.nextSibling){var Ae=_e.nodeType;if(Ae===1||Ae===3)break;if(Ae===8){if(Ae=_e.data,Ae==="$"||Ae==="$!"||Ae==="$?"||Ae==="$~"||Ae==="&"||Ae==="F!"||Ae==="F")break;if(Ae==="/$"||Ae==="/&")return null}}return _e}var Zf=null;function Lg(_e){_e=_e.nextSibling;for(var Ae=0;_e;){if(_e.nodeType===8){var Te=_e.data;if(Te==="/$"||Te==="/&"){if(Ae===0)return uo(_e.nextSibling);Ae--}else Te!=="$"&&Te!=="$!"&&Te!=="$?"&&Te!=="$~"&&Te!=="&"||Ae++}_e=_e.nextSibling}return null}function Ig(_e){_e=_e.previousSibling;for(var Ae=0;_e;){if(_e.nodeType===8){var Te=_e.data;if(Te==="$"||Te==="$!"||Te==="$?"||Te==="$~"||Te==="&"){if(Ae===0)return _e;Ae--}else Te!=="/$"&&Te!=="/&"||Ae++}_e=_e.previousSibling}return null}function Dg(_e,Ae,Te){switch(Ae=Ad(Te),_e){case"html":if(_e=Ae.documentElement,!_e)throw Error(xe(452));return _e;case"head":if(_e=Ae.head,!_e)throw Error(xe(453));return _e;case"body":if(_e=Ae.body,!_e)throw Error(xe(454));return _e;default:throw Error(xe(451))}}function Nh(_e){for(var Ae=_e.attributes;Ae.length;)_e.removeAttributeNode(Ae[0]);wr(_e)}var co=new Map,Fg=new Set;function Ed(_e){return typeof _e.getRootNode=="function"?_e.getRootNode():_e.nodeType===9?_e:_e.ownerDocument}var Il=Sn.d;Sn.d={f:Py,r:wy,D:Ty,C:Cy,L:By,m:Ry,X:My,S:Ny,M:ky};function Py(){var _e=Il.f(),Ae=md();return _e||Ae}function wy(_e){var Ae=ss(_e);Ae!==null&&Ae.tag===5&&Ae.type==="form"?tm(Ae):Il.r(_e)}var Jc=typeof document>"u"?null:document;function Og(_e,Ae,Te){var ke=Jc;if(ke&&typeof Ae=="string"&&Ae){var Ue=Gr(Ae);Ue='link[rel="'+_e+'"][href="'+Ue+'"]',typeof Te=="string"&&(Ue+='[crossorigin="'+Te+'"]'),Fg.has(Ue)||(Fg.add(Ue),_e={rel:_e,crossOrigin:Te,href:Ae},ke.querySelector(Ue)===null&&(Ae=ke.createElement("link"),rs(Ae,"link",_e),Ar(Ae),ke.head.appendChild(Ae)))}}function Ty(_e){Il.D(_e),Og("dns-prefetch",_e,null)}function Cy(_e,Ae){Il.C(_e,Ae),Og("preconnect",_e,Ae)}function By(_e,Ae,Te){Il.L(_e,Ae,Te);var ke=Jc;if(ke&&_e&&Ae){var Ue='link[rel="preload"][as="'+Gr(Ae)+'"]';Ae==="image"&&Te&&Te.imageSrcSet?(Ue+='[imagesrcset="'+Gr(Te.imageSrcSet)+'"]',typeof Te.imageSizes=="string"&&(Ue+='[imagesizes="'+Gr(Te.imageSizes)+'"]')):Ue+='[href="'+Gr(_e)+'"]';var He=Ue;switch(Ae){case"style":He=Xc(_e);break;case"script":He=Wc(_e)}co.has(He)||(_e=Ve({rel:"preload",href:Ae==="image"&&Te&&Te.imageSrcSet?void 0:_e,as:Ae},Te),co.set(He,_e),ke.querySelector(Ue)!==null||Ae==="style"&&ke.querySelector(Mh(He))||Ae==="script"&&ke.querySelector(kh(He))||(Ae=ke.createElement("link"),rs(Ae,"link",_e),Ar(Ae),ke.head.appendChild(Ae)))}}function Ry(_e,Ae){Il.m(_e,Ae);var Te=Jc;if(Te&&_e){var ke=Ae&&typeof Ae.as=="string"?Ae.as:"script",Ue='link[rel="modulepreload"][as="'+Gr(ke)+'"][href="'+Gr(_e)+'"]',He=Ue;switch(ke){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":He=Wc(_e)}if(!co.has(He)&&(_e=Ve({rel:"modulepreload",href:_e},Ae),co.set(He,_e),Te.querySelector(Ue)===null)){switch(ke){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(Te.querySelector(kh(He)))return}ke=Te.createElement("link"),rs(ke,"link",_e),Ar(ke),Te.head.appendChild(ke)}}}function Ny(_e,Ae,Te){Il.S(_e,Ae,Te);var ke=Jc;if(ke&&_e){var Ue=Mo(ke).hoistableStyles,He=Xc(_e);Ae=Ae||"default";var bn=Ue.get(He);if(!bn){var In={loading:0,preload:null};if(bn=ke.querySelector(Mh(He)))In.loading=5;else{_e=Ve({rel:"stylesheet",href:_e,"data-precedence":Ae},Te),(Te=co.get(He))&&ep(_e,Te);var ri=bn=ke.createElement("link");Ar(ri),rs(ri,"link",_e),ri._p=new Promise(function(Mi,zi){ri.onload=Mi,ri.onerror=zi}),ri.addEventListener("load",function(){In.loading|=1}),ri.addEventListener("error",function(){In.loading|=2}),In.loading|=4,Pd(bn,Ae,ke)}bn={type:"stylesheet",instance:bn,count:1,state:In},Ue.set(He,bn)}}}function My(_e,Ae){Il.X(_e,Ae);var Te=Jc;if(Te&&_e){var ke=Mo(Te).hoistableScripts,Ue=Wc(_e),He=ke.get(Ue);He||(He=Te.querySelector(kh(Ue)),He||(_e=Ve({src:_e,async:!0},Ae),(Ae=co.get(Ue))&&tp(_e,Ae),He=Te.createElement("script"),Ar(He),rs(He,"link",_e),Te.head.appendChild(He)),He={type:"script",instance:He,count:1,state:null},ke.set(Ue,He))}}function ky(_e,Ae){Il.M(_e,Ae);var Te=Jc;if(Te&&_e){var ke=Mo(Te).hoistableScripts,Ue=Wc(_e),He=ke.get(Ue);He||(He=Te.querySelector(kh(Ue)),He||(_e=Ve({src:_e,async:!0,type:"module"},Ae),(Ae=co.get(Ue))&&tp(_e,Ae),He=Te.createElement("script"),Ar(He),rs(He,"link",_e),Te.head.appendChild(He)),He={type:"script",instance:He,count:1,state:null},ke.set(Ue,He))}}function Ug(_e,Ae,Te,ke){var Ue=(Ue=fn.current)?Ed(Ue):null;if(!Ue)throw Error(xe(446));switch(_e){case"meta":case"title":return null;case"style":return typeof Te.precedence=="string"&&typeof Te.href=="string"?(Ae=Xc(Te.href),Te=Mo(Ue).hoistableStyles,ke=Te.get(Ae),ke||(ke={type:"style",instance:null,count:0,state:null},Te.set(Ae,ke)),ke):{type:"void",instance:null,count:0,state:null};case"link":if(Te.rel==="stylesheet"&&typeof Te.href=="string"&&typeof Te.precedence=="string"){_e=Xc(Te.href);var He=Mo(Ue).hoistableStyles,bn=He.get(_e);if(bn||(Ue=Ue.ownerDocument||Ue,bn={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},He.set(_e,bn),(He=Ue.querySelector(Mh(_e)))&&!He._p&&(bn.instance=He,bn.state.loading=5),co.has(_e)||(Te={rel:"preload",as:"style",href:Te.href,crossOrigin:Te.crossOrigin,integrity:Te.integrity,media:Te.media,hrefLang:Te.hrefLang,referrerPolicy:Te.referrerPolicy},co.set(_e,Te),He||Vy(Ue,_e,Te,bn.state))),Ae&&ke===null)throw Error(xe(528,""));return bn}if(Ae&&ke!==null)throw Error(xe(529,""));return null;case"script":return Ae=Te.async,Te=Te.src,typeof Te=="string"&&Ae&&typeof Ae!="function"&&typeof Ae!="symbol"?(Ae=Wc(Te),Te=Mo(Ue).hoistableScripts,ke=Te.get(Ae),ke||(ke={type:"script",instance:null,count:0,state:null},Te.set(Ae,ke)),ke):{type:"void",instance:null,count:0,state:null};default:throw Error(xe(444,_e))}}function Xc(_e){return'href="'+Gr(_e)+'"'}function Mh(_e){return'link[rel="stylesheet"]['+_e+"]"}function zg(_e){return Ve({},_e,{"data-precedence":_e.precedence,precedence:null})}function Vy(_e,Ae,Te,ke){_e.querySelector('link[rel="preload"][as="style"]['+Ae+"]")?ke.loading=1:(Ae=_e.createElement("link"),ke.preload=Ae,Ae.addEventListener("load",function(){return ke.loading|=1}),Ae.addEventListener("error",function(){return ke.loading|=2}),rs(Ae,"link",Te),Ar(Ae),_e.head.appendChild(Ae))}function Wc(_e){return'[src="'+Gr(_e)+'"]'}function kh(_e){return"script[async]"+_e}function jg(_e,Ae,Te){if(Ae.count++,Ae.instance===null)switch(Ae.type){case"style":var ke=_e.querySelector('style[data-href~="'+Gr(Te.href)+'"]');if(ke)return Ae.instance=ke,Ar(ke),ke;var Ue=Ve({},Te,{"data-href":Te.href,"data-precedence":Te.precedence,href:null,precedence:null});return ke=(_e.ownerDocument||_e).createElement("style"),Ar(ke),rs(ke,"style",Ue),Pd(ke,Te.precedence,_e),Ae.instance=ke;case"stylesheet":Ue=Xc(Te.href);var He=_e.querySelector(Mh(Ue));if(He)return Ae.state.loading|=4,Ae.instance=He,Ar(He),He;ke=zg(Te),(Ue=co.get(Ue))&&ep(ke,Ue),He=(_e.ownerDocument||_e).createElement("link"),Ar(He);var bn=He;return bn._p=new Promise(function(In,ri){bn.onload=In,bn.onerror=ri}),rs(He,"link",ke),Ae.state.loading|=4,Pd(He,Te.precedence,_e),Ae.instance=He;case"script":return He=Wc(Te.src),(Ue=_e.querySelector(kh(He)))?(Ae.instance=Ue,Ar(Ue),Ue):(ke=Te,(Ue=co.get(He))&&(ke=Ve({},Te),tp(ke,Ue)),_e=_e.ownerDocument||_e,Ue=_e.createElement("script"),Ar(Ue),rs(Ue,"link",ke),_e.head.appendChild(Ue),Ae.instance=Ue);case"void":return null;default:throw Error(xe(443,Ae.type))}else Ae.type==="stylesheet"&&(Ae.state.loading&4)===0&&(ke=Ae.instance,Ae.state.loading|=4,Pd(ke,Te.precedence,_e));return Ae.instance}function Pd(_e,Ae,Te){for(var ke=Te.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),Ue=ke.length?ke[ke.length-1]:null,He=Ue,bn=0;bn<ke.length;bn++){var In=ke[bn];if(In.dataset.precedence===Ae)He=In;else if(He!==Ue)break}He?He.parentNode.insertBefore(_e,He.nextSibling):(Ae=Te.nodeType===9?Te.head:Te,Ae.insertBefore(_e,Ae.firstChild))}function ep(_e,Ae){_e.crossOrigin==null&&(_e.crossOrigin=Ae.crossOrigin),_e.referrerPolicy==null&&(_e.referrerPolicy=Ae.referrerPolicy),_e.title==null&&(_e.title=Ae.title)}function tp(_e,Ae){_e.crossOrigin==null&&(_e.crossOrigin=Ae.crossOrigin),_e.referrerPolicy==null&&(_e.referrerPolicy=Ae.referrerPolicy),_e.integrity==null&&(_e.integrity=Ae.integrity)}var wd=null;function qg(_e,Ae,Te){if(wd===null){var ke=new Map,Ue=wd=new Map;Ue.set(Te,ke)}else Ue=wd,ke=Ue.get(Te),ke||(ke=new Map,Ue.set(Te,ke));if(ke.has(_e))return ke;for(ke.set(_e,null),Te=Te.getElementsByTagName(_e),Ue=0;Ue<Te.length;Ue++){var He=Te[Ue];if(!(He[tr]||He[Zi]||_e==="link"&&He.getAttribute("rel")==="stylesheet")&&He.namespaceURI!=="http://www.w3.org/2000/svg"){var bn=He.getAttribute(Ae)||"";bn=_e+bn;var In=ke.get(bn);In?In.push(He):ke.set(bn,[He])}}return ke}function Hg(_e,Ae,Te){_e=_e.ownerDocument||_e,_e.head.insertBefore(Te,Ae==="title"?_e.querySelector("head > title"):null)}function Ly(_e,Ae,Te){if(Te===1||Ae.itemProp!=null)return!1;switch(_e){case"meta":case"title":return!0;case"style":if(typeof Ae.precedence!="string"||typeof Ae.href!="string"||Ae.href==="")break;return!0;case"link":if(typeof Ae.rel!="string"||typeof Ae.href!="string"||Ae.href===""||Ae.onLoad||Ae.onError)break;switch(Ae.rel){case"stylesheet":return _e=Ae.disabled,typeof Ae.precedence=="string"&&_e==null;default:return!0}case"script":if(Ae.async&&typeof Ae.async!="function"&&typeof Ae.async!="symbol"&&!Ae.onLoad&&!Ae.onError&&Ae.src&&typeof Ae.src=="string")return!0}return!1}function Gg(_e){return!(_e.type==="stylesheet"&&(_e.state.loading&3)===0)}function Iy(_e,Ae,Te,ke){if(Te.type==="stylesheet"&&(typeof ke.media!="string"||matchMedia(ke.media).matches!==!1)&&(Te.state.loading&4)===0){if(Te.instance===null){var Ue=Xc(ke.href),He=Ae.querySelector(Mh(Ue));if(He){Ae=He._p,Ae!==null&&typeof Ae=="object"&&typeof Ae.then=="function"&&(_e.count++,_e=Td.bind(_e),Ae.then(_e,_e)),Te.state.loading|=4,Te.instance=He,Ar(He);return}He=Ae.ownerDocument||Ae,ke=zg(ke),(Ue=co.get(Ue))&&ep(ke,Ue),He=He.createElement("link"),Ar(He);var bn=He;bn._p=new Promise(function(In,ri){bn.onload=In,bn.onerror=ri}),rs(He,"link",ke),Te.instance=He}_e.stylesheets===null&&(_e.stylesheets=new Map),_e.stylesheets.set(Te,Ae),(Ae=Te.state.preload)&&(Te.state.loading&3)===0&&(_e.count++,Te=Td.bind(_e),Ae.addEventListener("load",Te),Ae.addEventListener("error",Te))}}var np=0;function Dy(_e,Ae){return _e.stylesheets&&_e.count===0&&Bd(_e,_e.stylesheets),0<_e.count||0<_e.imgCount?function(Te){var ke=setTimeout(function(){if(_e.stylesheets&&Bd(_e,_e.stylesheets),_e.unsuspend){var He=_e.unsuspend;_e.unsuspend=null,He()}},6e4+Ae);0<_e.imgBytes&&np===0&&(np=62500*yy());var Ue=setTimeout(function(){if(_e.waitingForImages=!1,_e.count===0&&(_e.stylesheets&&Bd(_e,_e.stylesheets),_e.unsuspend)){var He=_e.unsuspend;_e.unsuspend=null,He()}},(_e.imgBytes>np?50:800)+Ae);return _e.unsuspend=Te,function(){_e.unsuspend=null,clearTimeout(ke),clearTimeout(Ue)}}:null}function Td(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Bd(this,this.stylesheets);else if(this.unsuspend){var _e=this.unsuspend;this.unsuspend=null,_e()}}}var Cd=null;function Bd(_e,Ae){_e.stylesheets=null,_e.unsuspend!==null&&(_e.count++,Cd=new Map,Ae.forEach(Fy,_e),Cd=null,Td.call(_e))}function Fy(_e,Ae){if(!(Ae.state.loading&4)){var Te=Cd.get(_e);if(Te)var ke=Te.get(null);else{Te=new Map,Cd.set(_e,Te);for(var Ue=_e.querySelectorAll("link[data-precedence],style[data-precedence]"),He=0;He<Ue.length;He++){var bn=Ue[He];(bn.nodeName==="LINK"||bn.getAttribute("media")!=="not all")&&(Te.set(bn.dataset.precedence,bn),ke=bn)}ke&&Te.set(null,ke)}Ue=Ae.instance,bn=Ue.getAttribute("data-precedence"),He=Te.get(bn)||ke,He===ke&&Te.set(null,Ue),Te.set(bn,Ue),this.count++,ke=Td.bind(this),Ue.addEventListener("load",ke),Ue.addEventListener("error",ke),He?He.parentNode.insertBefore(Ue,He.nextSibling):(_e=_e.nodeType===9?_e.head:_e,_e.insertBefore(Ue,_e.firstChild)),Ae.state.loading|=4}}var Vh={$$typeof:sn,Provider:null,Consumer:null,_currentValue:Pn,_currentValue2:Pn,_threadCount:0};function Oy(_e,Ae,Te,ke,Ue,He,bn,In,ri){this.tag=1,this.containerInfo=_e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nn(0),this.hiddenUpdates=Nn(null),this.identifierPrefix=ke,this.onUncaughtError=Ue,this.onCaughtError=He,this.onRecoverableError=bn,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ri,this.incompleteTransitions=new Map}function Yg(_e,Ae,Te,ke,Ue,He,bn,In,ri,Mi,zi,$i){return _e=new Oy(_e,Ae,Te,bn,ri,Mi,zi,$i,In),Ae=1,He===!0&&(Ae|=24),He=Kr(3,null,null,Ae),_e.current=He,He.stateNode=_e,Ae=cu(),Ae.refCount++,_e.pooledCache=Ae,Ae.refCount++,He.memoizedState={element:ke,isDehydrated:Te,cache:Ae},Ya(He),_e}function Jg(_e){return _e?(_e=Or,_e):Or}function Xg(_e,Ae,Te,ke,Ue,He){Ue=Jg(Ue),ke.context===null?ke.context=Ue:ke.pendingContext=Ue,ke=va(Ae),ke.payload={element:Te},He=He===void 0?null:He,He!==null&&(ke.callback=He),Te=Xa(_e,ke,Ae),Te!==null&&(Os(Te,_e,Ae),Mr(Te,_e,Ae))}function Wg(_e,Ae){if(_e=_e.memoizedState,_e!==null&&_e.dehydrated!==null){var Te=_e.retryLane;_e.retryLane=Te!==0&&Te<Ae?Te:Ae}}function ip(_e,Ae){Wg(_e,Ae),(_e=_e.alternate)&&Wg(_e,Ae)}function $g(_e){if(_e.tag===13||_e.tag===31){var Ae=So(_e,67108864);Ae!==null&&Os(Ae,_e,67108864),ip(_e,67108864)}}function Kg(_e){if(_e.tag===13||_e.tag===31){var Ae=Ks();Ae=Wi(Ae);var Te=So(_e,Ae);Te!==null&&Os(Te,_e,Ae),ip(_e,Ae)}}var Rd=!0;function Uy(_e,Ae,Te,ke){var Ue=mn.T;mn.T=null;var He=Sn.p;try{Sn.p=2,ap(_e,Ae,Te,ke)}finally{Sn.p=He,mn.T=Ue}}function zy(_e,Ae,Te,ke){var Ue=mn.T;mn.T=null;var He=Sn.p;try{Sn.p=8,ap(_e,Ae,Te,ke)}finally{Sn.p=He,mn.T=Ue}}function ap(_e,Ae,Te,ke){if(Rd){var Ue=rp(ke);if(Ue===null)Hf(_e,Ae,ke,Nd,Te),Zg(_e,ke);else if(qy(Ue,_e,Ae,Te,ke))ke.stopPropagation();else if(Zg(_e,ke),Ae&4&&-1<jy.indexOf(_e)){for(;Ue!==null;){var He=ss(Ue);if(He!==null)switch(He.tag){case 3:if(He=He.stateNode,He.current.memoizedState.isDehydrated){var bn=Xn(He.pendingLanes);if(bn!==0){var In=He;for(In.pendingLanes|=2,In.entangledLanes|=2;bn;){var ri=1<<31-Kn(bn);In.entanglements[1]|=ri,bn&=~ri}ol(He),(Ja&6)===0&&(dd=pi()+500,Ch(0))}}break;case 31:case 13:In=So(He,2),In!==null&&Os(In,He,2),md(),ip(He,2)}if(He=rp(ke),He===null&&Hf(_e,Ae,ke,Nd,Te),He===Ue)break;Ue=He}Ue!==null&&ke.stopPropagation()}else Hf(_e,Ae,ke,null,Te)}}function rp(_e){return _e=Hl(_e),sp(_e)}var Nd=null;function sp(_e){if(Nd=null,_e=Sr(_e),_e!==null){var Ae=Ee(_e);if(Ae===null)_e=null;else{var Te=Ae.tag;if(Te===13){if(_e=Pe(Ae),_e!==null)return _e;_e=null}else if(Te===31){if(_e=Ce(Ae),_e!==null)return _e;_e=null}else if(Te===3){if(Ae.stateNode.current.memoizedState.isDehydrated)return Ae.tag===3?Ae.stateNode.containerInfo:null;_e=null}else Ae!==_e&&(_e=null)}}return Nd=_e,null}function Qg(_e){switch(_e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($n()){case Yn:return 2;case ai:return 8;case Di:case ki:return 32;case Ji:return 268435456;default:return 32}default:return 32}}var op=!1,Au=null,Eu=null,Pu=null,Lh=new Map,Ih=new Map,wu=[],jy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Zg(_e,Ae){switch(_e){case"focusin":case"focusout":Au=null;break;case"dragenter":case"dragleave":Eu=null;break;case"mouseover":case"mouseout":Pu=null;break;case"pointerover":case"pointerout":Lh.delete(Ae.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ih.delete(Ae.pointerId)}}function Dh(_e,Ae,Te,ke,Ue,He){return _e===null||_e.nativeEvent!==He?(_e={blockedOn:Ae,domEventName:Te,eventSystemFlags:ke,nativeEvent:He,targetContainers:[Ue]},Ae!==null&&(Ae=ss(Ae),Ae!==null&&$g(Ae)),_e):(_e.eventSystemFlags|=ke,Ae=_e.targetContainers,Ue!==null&&Ae.indexOf(Ue)===-1&&Ae.push(Ue),_e)}function qy(_e,Ae,Te,ke,Ue){switch(Ae){case"focusin":return Au=Dh(Au,_e,Ae,Te,ke,Ue),!0;case"dragenter":return Eu=Dh(Eu,_e,Ae,Te,ke,Ue),!0;case"mouseover":return Pu=Dh(Pu,_e,Ae,Te,ke,Ue),!0;case"pointerover":var He=Ue.pointerId;return Lh.set(He,Dh(Lh.get(He)||null,_e,Ae,Te,ke,Ue)),!0;case"gotpointercapture":return He=Ue.pointerId,Ih.set(He,Dh(Ih.get(He)||null,_e,Ae,Te,ke,Ue)),!0}return!1}function e0(_e){var Ae=Sr(_e.target);if(Ae!==null){var Te=Ee(Ae);if(Te!==null){if(Ae=Te.tag,Ae===13){if(Ae=Pe(Te),Ae!==null){_e.blockedOn=Ae,la(_e.priority,function(){Kg(Te)});return}}else if(Ae===31){if(Ae=Ce(Te),Ae!==null){_e.blockedOn=Ae,la(_e.priority,function(){Kg(Te)});return}}else if(Ae===3&&Te.stateNode.current.memoizedState.isDehydrated){_e.blockedOn=Te.tag===3?Te.stateNode.containerInfo:null;return}}}_e.blockedOn=null}function Md(_e){if(_e.blockedOn!==null)return!1;for(var Ae=_e.targetContainers;0<Ae.length;){var Te=rp(_e.nativeEvent);if(Te===null){Te=_e.nativeEvent;var ke=new Te.constructor(Te.type,Te);Vu=ke,Te.target.dispatchEvent(ke),Vu=null}else return Ae=ss(Te),Ae!==null&&$g(Ae),_e.blockedOn=Te,!1;Ae.shift()}return!0}function t0(_e,Ae,Te){Md(_e)&&Te.delete(Ae)}function Hy(){op=!1,Au!==null&&Md(Au)&&(Au=null),Eu!==null&&Md(Eu)&&(Eu=null),Pu!==null&&Md(Pu)&&(Pu=null),Lh.forEach(t0),Ih.forEach(t0)}function kd(_e,Ae){_e.blockedOn===Ae&&(_e.blockedOn=null,op||(op=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Hy)))}var Vd=null;function n0(_e){Vd!==_e&&(Vd=_e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Vd===_e&&(Vd=null);for(var Ae=0;Ae<_e.length;Ae+=3){var Te=_e[Ae],ke=_e[Ae+1],Ue=_e[Ae+2];if(typeof ke!="function"){if(sp(ke||Te)===null)continue;break}var He=ss(Te);He!==null&&(_e.splice(Ae,3),Ae-=3,rf(He,{pending:!0,data:Ue,method:Te.method,action:ke},ke,Ue))}}))}function $c(_e){function Ae(ri){return kd(ri,_e)}Au!==null&&kd(Au,_e),Eu!==null&&kd(Eu,_e),Pu!==null&&kd(Pu,_e),Lh.forEach(Ae),Ih.forEach(Ae);for(var Te=0;Te<wu.length;Te++){var ke=wu[Te];ke.blockedOn===_e&&(ke.blockedOn=null)}for(;0<wu.length&&(Te=wu[0],Te.blockedOn===null);)e0(Te),Te.blockedOn===null&&wu.shift();if(Te=(_e.ownerDocument||_e).$$reactFormReplay,Te!=null)for(ke=0;ke<Te.length;ke+=3){var Ue=Te[ke],He=Te[ke+1],bn=Ue[aa]||null;if(typeof He=="function")bn||n0(Te);else if(bn){var In=null;if(He&&He.hasAttribute("formAction")){if(Ue=He,bn=He[aa]||null)In=bn.formAction;else if(sp(Ue)!==null)continue}else In=bn.action;typeof In=="function"?Te[ke+1]=In:(Te.splice(ke,3),ke-=3),n0(Te)}}}function i0(){function _e(He){He.canIntercept&&He.info==="react-transition"&&He.intercept({handler:function(){return new Promise(function(bn){return Ue=bn})},focusReset:"manual",scroll:"manual"})}function Ae(){Ue!==null&&(Ue(),Ue=null),ke||setTimeout(Te,20)}function Te(){if(!ke&&!navigation.transition){var He=navigation.currentEntry;He&&He.url!=null&&navigation.navigate(He.url,{state:He.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var ke=!1,Ue=null;return navigation.addEventListener("navigate",_e),navigation.addEventListener("navigatesuccess",Ae),navigation.addEventListener("navigateerror",Ae),setTimeout(Te,100),function(){ke=!0,navigation.removeEventListener("navigate",_e),navigation.removeEventListener("navigatesuccess",Ae),navigation.removeEventListener("navigateerror",Ae),Ue!==null&&(Ue(),Ue=null)}}}function lp(_e){this._internalRoot=_e}Ld.prototype.render=lp.prototype.render=function(_e){var Ae=this._internalRoot;if(Ae===null)throw Error(xe(409));var Te=Ae.current,ke=Ks();Xg(Te,ke,_e,Ae,null,null)},Ld.prototype.unmount=lp.prototype.unmount=function(){var _e=this._internalRoot;if(_e!==null){this._internalRoot=null;var Ae=_e.containerInfo;Xg(_e.current,2,null,_e,null,null),md(),Ae[ca]=null}};function Ld(_e){this._internalRoot=_e}Ld.prototype.unstable_scheduleHydration=function(_e){if(_e){var Ae=ji();_e={blockedOn:null,target:_e,priority:Ae};for(var Te=0;Te<wu.length&&Ae!==0&&Ae<wu[Te].priority;Te++);wu.splice(Te,0,_e),Te===0&&e0(_e)}};var a0=e.version;if(a0!=="19.2.3")throw Error(xe(527,a0,"19.2.3"));Sn.findDOMNode=function(_e){var Ae=_e._reactInternals;if(Ae===void 0)throw typeof _e.render=="function"?Error(xe(188)):(_e=Object.keys(_e).join(","),Error(xe(268,_e)));return _e=Be(Ae),_e=_e!==null?Me(_e):null,_e=_e===null?null:_e.stateNode,_e};var Gy={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:mn,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Id=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Id.isDisabled&&Id.supportsFiber)try{ea=Id.inject(Gy),Ki=Id}catch{}}return reactDomClient_production.createRoot=function(_e,Ae){if(!Se(_e))throw Error(xe(299));var Te=!1,ke="",Ue=hm,He=dm,bn=fm;return Ae!=null&&(Ae.unstable_strictMode===!0&&(Te=!0),Ae.identifierPrefix!==void 0&&(ke=Ae.identifierPrefix),Ae.onUncaughtError!==void 0&&(Ue=Ae.onUncaughtError),Ae.onCaughtError!==void 0&&(He=Ae.onCaughtError),Ae.onRecoverableError!==void 0&&(bn=Ae.onRecoverableError)),Ae=Yg(_e,1,!1,null,null,Te,ke,null,Ue,He,bn,i0),_e[ca]=Ae.current,qf(_e),new lp(Ae)},reactDomClient_production.hydrateRoot=function(_e,Ae,Te){if(!Se(_e))throw Error(xe(299));var ke=!1,Ue="",He=hm,bn=dm,In=fm,ri=null;return Te!=null&&(Te.unstable_strictMode===!0&&(ke=!0),Te.identifierPrefix!==void 0&&(Ue=Te.identifierPrefix),Te.onUncaughtError!==void 0&&(He=Te.onUncaughtError),Te.onCaughtError!==void 0&&(bn=Te.onCaughtError),Te.onRecoverableError!==void 0&&(In=Te.onRecoverableError),Te.formState!==void 0&&(ri=Te.formState)),Ae=Yg(_e,1,!0,Ae,Te??null,ke,Ue,ri,He,bn,In,i0),Ae.context=Jg(null),Te=Ae.current,ke=Ks(),ke=Wi(ke),Ue=va(ke),Ue.callback=null,Xa(Te,Ue,ke),Te=ke,Ae.current.lanes=Te,Gn(Ae,Te),ol(Ae),_e[ca]=Ae.current,qf(_e),new Ld(Ae)},reactDomClient_production.version="19.2.3",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const DB_NAME="RambutanDB",DB_VERSION=2,STORE_NAME="sessions",PROCESSED_STORE_NAME="processed_images";class StorageService{constructor(){this.db=null}async getDB(){return this.db?this.db:new Promise((e,r)=>{const xe=indexedDB.open(DB_NAME,DB_VERSION);xe.onupgradeneeded=Se=>{const Ee=Se.target.result;Ee.objectStoreNames.contains(STORE_NAME)||Ee.createObjectStore(STORE_NAME,{keyPath:"id"}),Ee.objectStoreNames.contains(PROCESSED_STORE_NAME)||Ee.createObjectStore(PROCESSED_STORE_NAME)},xe.onsuccess=Se=>{this.db=Se.target.result,e(this.db)},xe.onerror=Se=>{r(Se.target.error)}})}async saveSession(e){try{const r=await this.getDB();return new Promise((xe,Se)=>{const Ce=r.transaction([STORE_NAME],"readwrite").objectStore(STORE_NAME).put(e);Ce.onsuccess=()=>xe(),Ce.onerror=()=>Se(Ce.error)})}catch(r){console.error("IndexedDB Save Error:",r)}}async getAllSessions(){try{const e=await this.getDB();return new Promise((r,xe)=>{const Pe=e.transaction([STORE_NAME],"readonly").objectStore(STORE_NAME).getAll();Pe.onsuccess=()=>{const Ce=Pe.result;r(Ce.sort((Re,Be)=>new Date(Be.createdAt).getTime()-new Date(Re.createdAt).getTime()))},Pe.onerror=()=>xe(Pe.error)})}catch(e){return console.error("IndexedDB Retrieval Error:",e),[]}}async deleteSession(e){try{const r=await this.getDB();return await this.deleteProcessedImagesForSession(e),new Promise((xe,Se)=>{const Ce=r.transaction([STORE_NAME],"readwrite").objectStore(STORE_NAME).delete(e);Ce.onsuccess=()=>xe(),Ce.onerror=()=>Se(Ce.error)})}catch(r){console.error("IndexedDB Delete Error:",r)}}async saveProcessedImage(e,r){try{const xe=await this.getDB();return new Promise((Se,Ee)=>{const Re=xe.transaction([PROCESSED_STORE_NAME],"readwrite").objectStore(PROCESSED_STORE_NAME).put(r,e);Re.onsuccess=()=>Se(),Re.onerror=()=>Ee(Re.error)})}catch(xe){console.error("Cache Save Error:",xe)}}async getProcessedImage(e){try{const r=await this.getDB();return new Promise((xe,Se)=>{const Ce=r.transaction([PROCESSED_STORE_NAME],"readonly").objectStore(PROCESSED_STORE_NAME).get(e);Ce.onsuccess=()=>xe(Ce.result||null),Ce.onerror=()=>Se(Ce.error)})}catch(r){return console.error("Cache Retrieval Error:",r),null}}async deleteProcessedImagesForSession(e){try{const r=await this.getDB();return new Promise((xe,Se)=>{const Pe=r.transaction([PROCESSED_STORE_NAME],"readwrite").objectStore(PROCESSED_STORE_NAME),Ce=Pe.openKeyCursor();Ce.onsuccess=Re=>{const Be=Re.target.result;if(Be){const Me=Be.key;Me.startsWith(`${e}-`)&&Pe.delete(Me),Be.continue()}else xe()},Ce.onerror=()=>Se(Ce.error)})}catch(r){console.error("Cache Session Cleanup Error:",r)}}async clearAllProcessedImages(){try{const e=await this.getDB();return new Promise((r,xe)=>{const Pe=e.transaction([PROCESSED_STORE_NAME],"readwrite").objectStore(PROCESSED_STORE_NAME).clear();Pe.onsuccess=()=>r(),Pe.onerror=()=>xe(Pe.error)})}catch(e){console.error("Cache Clear Error:",e)}}async getStorageStats(){try{const e=await this.getDB();let r=0,xe=0,Se=0;const Ee=Ce=>new Promise(Re=>{let Be=0;const Fe=e.transaction([Ce],"readonly").objectStore(Ce).openCursor();Fe.onsuccess=Ie=>{const qe=Ie.target.result;if(qe){const Ye=qe.value;Be+=JSON.stringify(Ye).length*2,qe.continue()}else Re(Be)},Fe.onerror=()=>Re(0)}),Pe=Ce=>new Promise(Re=>{const Ve=e.transaction([Ce],"readonly").objectStore(Ce).count();Ve.onsuccess=()=>Re(Ve.result),Ve.onerror=()=>Re(0)});return r=await Ee(STORE_NAME),xe=await Ee(PROCESSED_STORE_NAME),Se=await Pe(STORE_NAME),{sessionSize:r,cacheSize:xe,totalSize:r+xe,sessionCount:Se}}catch(e){return console.error("Stats Error:",e),{sessionSize:0,cacheSize:0,totalSize:0,sessionCount:0}}}}const storage=new StorageService,processImageWithSauvola=async t=>new Promise((e,r)=>{const xe=new Image;xe.crossOrigin="Anonymous",xe.onload=()=>{setTimeout(()=>{try{const Se=document.createElement("canvas");Se.width=xe.width,Se.height=xe.height;const Ee=Se.getContext("2d");if(!Ee){r("No context");return}Ee.drawImage(xe,0,0);const Ce=Ee.getImageData(0,0,Se.width,Se.height).data,Re=Se.width,Be=Se.height,Me=new Float64Array(Re*Be),Ve=new Float64Array(Re*Be);for(let Qe=0;Qe<Be;Qe++){let sn=0,cn=0;for(let nn=0;nn<Re;nn++){const an=(Qe*Re+nn)*4,Ze=Ce[an]*.2126+Ce[an+1]*.7152+Ce[an+2]*.0722;if(sn+=Ze,cn+=Ze*Ze,Qe===0)Me[nn]=sn,Ve[nn]=cn;else{const tn=Qe*Re+nn,We=(Qe-1)*Re+nn;Me[tn]=Me[We]+sn,Ve[tn]=Ve[We]+cn}}}const Fe=41,Ie=.2,qe=128,Ye=Math.floor(Fe/2),Xe=Ee.createImageData(Re,Be),je=Xe.data;for(let Qe=0;Qe<Be;Qe++)for(let sn=0;sn<Re;sn++){const cn=Math.max(0,sn-Ye),nn=Math.max(0,Qe-Ye),an=Math.min(Re-1,sn+Ye),Ze=Math.min(Be-1,Qe+Ye),tn=(an-cn+1)*(Ze-nn+1),We=Me[Ze*Re+an],An=nn>0?Me[(nn-1)*Re+an]:0,Je=cn>0?Me[Ze*Re+(cn-1)]:0,St=cn>0&&nn>0?Me[(nn-1)*Re+(cn-1)]:0,hn=We-An-Je+St,_n=Ve[Ze*Re+an],yn=nn>0?Ve[(nn-1)*Re+an]:0,mn=cn>0?Ve[Ze*Re+(cn-1)]:0,Sn=cn>0&&nn>0?Ve[(nn-1)*Re+(cn-1)]:0,Pn=_n-yn-mn+Sn,pn=hn/tn,on=Math.max(0,Pn/tn-pn*pn),xn=Math.sqrt(on),Ge=pn*(1+Ie*(xn/qe-1)),Oe=(Qe*Re+sn)*4,rn=Ce[Oe]*.2126+Ce[Oe+1]*.7152+Ce[Oe+2]*.0722>Ge?255:0;je[Oe]=rn,je[Oe+1]=rn,je[Oe+2]=rn,je[Oe+3]=255}Ee.putImageData(Xe,0,0),e(Se.toDataURL("image/jpeg",.9))}catch(Se){r(Se)}},50)},xe.onerror=Se=>r(Se),xe.src=t}),ERROR_CODES=[{mode:"content",code:"LOG",label:"Logic Issue",description:"Idea does not make sense."},{mode:"content",code:"REF",label:"Unclear Reference",description:'A word like "it" or "they" is not clear.'},{mode:"content",code:"MP",label:"Major Problem",description:"Sentence is not understandable."},{mode:"communicative",code:"FOR",label:"Formal",description:"Language is too casual for the situation."},{mode:"communicative",code:"WCH",label:"Word Choice",description:"Word choice is not the best for the meaning."},{mode:"communicative",code:"COL",label:"Collocation",description:"Words that normally go together are used wrong."},{mode:"communicative",code:"SIM",label:"Simplify",description:"Sentence is too long or wordy."},{mode:"communicative",code:"XTR",label:"Extra",description:"There is an extra word you can remove."},{mode:"communicative",code:"AWK",label:"Awkward",description:"Sentence is grammatically correct but sounds awkward."},{mode:"organisation",code:"CON",label:"Connector",description:"A connector is missing or wrong."},{mode:"organisation",code:"CD",label:"Cohesive Device",description:"Cohesive device is missing."},{mode:"organisation",code:"SST",label:"Sentence Structure",description:"Sentence is incomplete or word order is wrong."},{mode:"organisation",code:"RO",label:"Run-on Sentence",description:"Two or more sentences joined without proper punctuation."},{mode:"organisation",code:"LIST",label:"Listing",description:"Items in a list are not parallel."},{mode:"language",code:"V",label:"Verb-related",description:"Wrong verb form or tense."},{mode:"language",code:"SVA",label:"Subj-Verb Agreement",description:"Subject and verb do not match."},{mode:"language",code:"PRO",label:"Pronouns",description:"Missing or wrong pronouns."},{mode:"language",code:"WCL",label:"Word Class",description:"Wrong form of a word."},{mode:"language",code:"WO",label:"Word Order",description:"Words are in the wrong order."},{mode:"language",code:"AUX",label:"Auxiliary Verb",description:"Missing or wrong auxiliary/modal verb."},{mode:"language",code:"ART",label:"Articles",description:"Wrong or missing article."},{mode:"language",code:"PREP",label:"Prepositions",description:"Wrong preposition."},{mode:"language",code:"COU",label:"Number",description:"Wrong noun form or wrong number."},{mode:"language",code:"MIS",label:"Missing Word",description:"A word is missing."},{mode:"language",code:"SP",label:"Spelling",description:"Spelling mistake."},{mode:"language",code:"P",label:"Punctuation",description:"Punctuation error."},{mode:"language",code:"US",label:"Usage",description:"Wrong word usage."}],RUBRICS={1:{content:[{score:5,desc:"All content is **relevant** (related/relatable to task). **Target reader** (intended recipient) is **fully informed** (all requirements addressed)."},{score:4,desc:"**Performance shares features of scores 3 and 5**"},{score:3,desc:"Minor **irrelevances** (unrelated points) and/or **omissions** (missing requirements) present. **Target reader** is **on the whole informed**."},{score:2,desc:"**Performance shares features of scores 1 and 3**"},{score:1,desc:"**Irrelevances** and/or misinterpretation of task present. **Target reader** is **minimally informed**."},{score:0,desc:"Content is **totally irrelevant** (nothing to do with task). **Target reader** is **not informed**."}],communicative:[{score:5,desc:"Communicates **straightforward ideas** (clearly communicated) using **conventions** (genre, format, register) reasonably well."},{score:4,desc:"**Performance shares features of scores 3 and 5**"},{score:3,desc:"Communicates **simple ideas** (clear, simple ways)."},{score:2,desc:"**Performance shares features of scores 1 and 3**"},{score:1,desc:"Produces isolated short units about simple/concrete matters; not always communicating successfully."},{score:0,desc:"**Performance below band 1**"}],organisation:[{score:5,desc:"Uses simple connectors and a **limited number of cohesive devices** (linking words, pronouns, substitution) appropriately."},{score:4,desc:"**Performance shares features of scores 3 and 5**"},{score:3,desc:"Text is connected using **basic, high frequency connectors** (e.g., *and, so, because*)."},{score:2,desc:"**Performance shares features of scores 1 and 3**"},{score:1,desc:"**Production unlikely to be connected** (lacks cohesion), though punctuation and simple connectors (i.e., *and*) may occur."},{score:0,desc:"**Performance below band 1**"}],language:[{score:5,desc:"Uses **basic vocabulary** appropriately. Uses **simple grammatical forms** (basic tenses, simple clauses) with **good control** (consistent accuracy). **Errors** (systematic mistakes) are noticeable; meaning is still determined."},{score:4,desc:"**Performance shares features of scores 3 and 5**"},{score:3,desc:"Uses basic vocabulary reasonably. Uses simple grammatical forms with some degree of control. **Errors** may **impede** (get in the way of) meaning at times."},{score:2,desc:"**Performance shares features of scores 1 and 3**"},{score:1,desc:"Produces **basic vocabulary** of isolated words/phrases. Few simple grammatical forms with **limited control**."},{score:0,desc:"**Performance below band 1**"}]},2:{content:[{score:5,desc:"All content is **relevant** (related/relatable to task). **Target reader** (intended recipient) is **fully informed** (all requirements addressed)."},{score:4,desc:"**Performance shares features of scores 3 and 5**"},{score:3,desc:"Minor **irrelevances** (unrelated points) and/or **omissions** (missing requirements) present. **Target reader** is **on the whole informed**."},{score:2,desc:"**Performance shares features of scores 1 and 3**"},{score:1,desc:"**Irrelevances** and/or misinterpretation of task present. **Target reader** is **minimally informed**."},{score:0,desc:"Content is **totally irrelevant** (nothing to do with task). **Target reader** is **not informed**."}],communicative:[{score:5,desc:"Uses **conventions** (genre, format, register) to hold readers attention and communicate **straightforward ideas**."},{score:4,desc:"**Performance shares features of scores 3 and 5**"},{score:3,desc:"Communicates **straightforward ideas** (clearly communicated) using **conventions** reasonably well."},{score:2,desc:"**Performance shares features of scores 1 and 3**"},{score:1,desc:"Communicates **simple ideas** in simple ways."},{score:0,desc:"**Performance below band 1**"}],organisation:[{score:5,desc:"Text is generally **well-organised and coherent** (well planned, united whole), using a **variety of cohesive devices**."},{score:4,desc:"**Performance shares features of scores 3 and 5**"},{score:3,desc:"Uses **simple connectors** and a **limited number of cohesive devices** (linking words, pronouns) appropriately."},{score:2,desc:"**Performance shares features of scores 1 and 3**"},{score:1,desc:"Text is connected using **basic, high frequency connectors** (e.g., *and, so, because*)."},{score:0,desc:"**Performance below band 1**"}],language:[{score:5,desc:"Uses a **range** (variety) of **everyday vocabulary** with occasional inappropriate use of **less common lexis**. Uses a **range of simple and some complex grammatical forms** (e.g., noun clauses, passives) with **good control**. **Errors** do not **impede** communication."},{score:4,desc:"**Performance shares features of scores 3 and 5**"},{score:3,desc:"Uses **basic vocabulary** appropriately. Uses **simple grammatical forms** with **good control** (consistent accuracy). While **errors** (systematic mistakes) are noticeable, meaning can still be determined."},{score:2,desc:"**Performance shares features of scores 1 and 3**"},{score:1,desc:"Uses **basic vocabulary** reasonably. Uses **simple grammatical forms** with some degree of control. **Errors** may **impede** (get in the way of) meaning at times."},{score:0,desc:"**Performance below band 1**"}]},3:{content:[{score:5,desc:"All content is **relevant** (related/relatable to task). **Target reader** (intended recipient) is **fully informed** (all requirements addressed)."},{score:4,desc:"**Performance shares features of Scores 3 and 5**"},{score:3,desc:"Minor **irrelevances** (unrelated points) and/or **omissions** (missing requirements) may be present. **Target reader** is **on the whole informed**."},{score:2,desc:"**Performance shares features of Scores 1 and 3**"},{score:1,desc:"**Irrelevances** and/or misinterpretation of the task may be present. **Target reader** is **minimally informed**."},{score:0,desc:"Content is **totally irrelevant** (nothing to do with task). **Target reader** is **not informed**."}],communicative:[{score:5,desc:"Uses the **conventions** (genre, format, register) of the communicative task effectively to hold the **target reader's** attention and communicate with ease, fulfilling all communicative purposes."},{score:4,desc:"**Performance shares features of Scores 3 and 5**"},{score:3,desc:"Uses the **conventions** (genre, format, register) of the communicative task to hold the reader's attention and communicate **straightforward ideas** (clearly communicated) appropriately."},{score:2,desc:"**Performance shares features of Scores 1 and 3**"},{score:1,desc:"Produces a text that communicates **straightforward ideas** using the **conventions** of the communicative task reasonably appropriately."},{score:0,desc:"**Performance below Score 1**"}],organisation:[{score:5,desc:"Text is **well-organised and coherent** (well planned, united whole), using a **variety of cohesive devices** (linking words, pronouns) with generally good effect."},{score:4,desc:"**Performance shares features of Scores 3 and 5**"},{score:3,desc:"Text is generally **well-organised and coherent**, using a **variety of cohesive devices**."},{score:2,desc:"**Performance shares features of Scores 1 and 3**"},{score:1,desc:"Uses **simple connectors** and a **limited number of cohesive devices** appropriately."},{score:0,desc:"**Performance below Score 1**"}],language:[{score:5,desc:"Uses a **range** (variety) of vocabulary, including **less common lexis** (not frequently used), appropriately. Uses a **range** of **simple and complex grammatical forms** (e.g., noun clauses, passives) with control and flexibility. Occasional **errors** (systematic mistakes) and **slips** (non-systematic mistakes) may be present."},{score:4,desc:"**Performance shares features of Scores 3 and 5**"},{score:3,desc:"Uses a **range** of **everyday vocabulary** with occasional inappropriate use of **less common lexis**. Uses a **range** of **simple and some complex grammatical forms** with a good degree of control. **Errors** do not **impede** (get in the way of) communication."},{score:2,desc:"**Performance shares features of Scores 1 and 3**"},{score:1,desc:"Uses **basic vocabulary** appropriately. Uses **simple grammatical forms** (basic tenses, simple clauses) with a good degree of control. While **errors** are noticeable, meaning can still be determined."},{score:0,desc:"**Performance below Score 1**"}]}};var define_globalThis_process_env_default={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let _defaultBaseGeminiUrl,_defaultBaseVertexUrl;function getDefaultBaseUrls(){return{geminiUrl:_defaultBaseGeminiUrl,vertexUrl:_defaultBaseVertexUrl}}function getBaseUrl(t,e,r,xe){var Se,Ee;if(!(t!=null&&t.baseUrl)){const Pe=getDefaultBaseUrls();return e?(Se=Pe.vertexUrl)!==null&&Se!==void 0?Se:r:(Ee=Pe.geminiUrl)!==null&&Ee!==void 0?Ee:xe}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BaseModule{}function formatMap(t,e){const r=/\{([^}]+)\}/g;return t.replace(r,(xe,Se)=>{if(Object.prototype.hasOwnProperty.call(e,Se)){const Ee=e[Se];return Ee!=null?String(Ee):""}else throw new Error(`Key '${Se}' not found in valueMap.`)})}function setValueByPath(t,e,r){for(let Ee=0;Ee<e.length-1;Ee++){const Pe=e[Ee];if(Pe.endsWith("[]")){const Ce=Pe.slice(0,-2);if(!(Ce in t))if(Array.isArray(r))t[Ce]=Array.from({length:r.length},()=>({}));else throw new Error(`Value must be a list given an array path ${Pe}`);if(Array.isArray(t[Ce])){const Re=t[Ce];if(Array.isArray(r))for(let Be=0;Be<Re.length;Be++){const Me=Re[Be];setValueByPath(Me,e.slice(Ee+1),r[Be])}else for(const Be of Re)setValueByPath(Be,e.slice(Ee+1),r)}return}else if(Pe.endsWith("[0]")){const Ce=Pe.slice(0,-3);Ce in t||(t[Ce]=[{}]);const Re=t[Ce];setValueByPath(Re[0],e.slice(Ee+1),r);return}(!t[Pe]||typeof t[Pe]!="object")&&(t[Pe]={}),t=t[Pe]}const xe=e[e.length-1],Se=t[xe];if(Se!==void 0){if(!r||typeof r=="object"&&Object.keys(r).length===0||r===Se)return;if(typeof Se=="object"&&typeof r=="object"&&Se!==null&&r!==null)Object.assign(Se,r);else throw new Error(`Cannot set value for an existing key. Key: ${xe}`)}else xe==="_self"&&typeof r=="object"&&r!==null&&!Array.isArray(r)?Object.assign(t,r):t[xe]=r}function getValueByPath(t,e,r=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let xe=0;xe<e.length;xe++){if(typeof t!="object"||t===null)return r;const Se=e[xe];if(Se.endsWith("[]")){const Ee=Se.slice(0,-2);if(Ee in t){const Pe=t[Ee];return Array.isArray(Pe)?Pe.map(Ce=>getValueByPath(Ce,e.slice(xe+1),r)):r}else return r}else t=t[Se]}return t}catch(xe){if(xe instanceof TypeError)return r;throw xe}}function moveValueByPath(t,e){for(const[r,xe]of Object.entries(e)){const Se=r.split("."),Ee=xe.split("."),Pe=new Set;let Ce=-1;for(let Re=0;Re<Se.length;Re++)if(Se[Re]==="*"){Ce=Re;break}if(Ce!==-1&&Ee.length>Ce)for(let Re=Ce;Re<Ee.length;Re++){const Be=Ee[Re];Be!=="*"&&!Be.endsWith("[]")&&!Be.endsWith("[0]")&&Pe.add(Be)}_moveValueRecursive(t,Se,Ee,0,Pe)}}function _moveValueRecursive(t,e,r,xe,Se){if(xe>=e.length||typeof t!="object"||t===null)return;const Ee=e[xe];if(Ee.endsWith("[]")){const Pe=Ee.slice(0,-2),Ce=t;if(Pe in Ce&&Array.isArray(Ce[Pe]))for(const Re of Ce[Pe])_moveValueRecursive(Re,e,r,xe+1,Se)}else if(Ee==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const Pe=t,Ce=Object.keys(Pe).filter(Be=>!Be.startsWith("_")&&!Se.has(Be)),Re={};for(const Be of Ce)Re[Be]=Pe[Be];for(const[Be,Me]of Object.entries(Re)){const Ve=[];for(const Fe of r.slice(xe))Fe==="*"?Ve.push(Be):Ve.push(Fe);setValueByPath(Pe,Ve,Me)}for(const Be of Ce)delete Pe[Be]}}else{const Pe=t;Ee in Pe&&_moveValueRecursive(Pe[Ee],e,r,xe+1,Se)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tBytes$1(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fetchPredictOperationParametersToVertex(t){const e={},r=getValueByPath(t,["operationName"]);r!=null&&setValueByPath(e,["operationName"],r);const xe=getValueByPath(t,["resourceName"]);return xe!=null&&setValueByPath(e,["_url","resourceName"],xe),e}function generateVideosOperationFromMldev$1(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const xe=getValueByPath(t,["metadata"]);xe!=null&&setValueByPath(e,["metadata"],xe);const Se=getValueByPath(t,["done"]);Se!=null&&setValueByPath(e,["done"],Se);const Ee=getValueByPath(t,["error"]);Ee!=null&&setValueByPath(e,["error"],Ee);const Pe=getValueByPath(t,["response","generateVideoResponse"]);return Pe!=null&&setValueByPath(e,["response"],generateVideosResponseFromMldev$1(Pe)),e}function generateVideosOperationFromVertex$1(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const xe=getValueByPath(t,["metadata"]);xe!=null&&setValueByPath(e,["metadata"],xe);const Se=getValueByPath(t,["done"]);Se!=null&&setValueByPath(e,["done"],Se);const Ee=getValueByPath(t,["error"]);Ee!=null&&setValueByPath(e,["error"],Ee);const Pe=getValueByPath(t,["response"]);return Pe!=null&&setValueByPath(e,["response"],generateVideosResponseFromVertex$1(Pe)),e}function generateVideosResponseFromMldev$1(t){const e={},r=getValueByPath(t,["generatedSamples"]);if(r!=null){let Ee=r;Array.isArray(Ee)&&(Ee=Ee.map(Pe=>generatedVideoFromMldev$1(Pe))),setValueByPath(e,["generatedVideos"],Ee)}const xe=getValueByPath(t,["raiMediaFilteredCount"]);xe!=null&&setValueByPath(e,["raiMediaFilteredCount"],xe);const Se=getValueByPath(t,["raiMediaFilteredReasons"]);return Se!=null&&setValueByPath(e,["raiMediaFilteredReasons"],Se),e}function generateVideosResponseFromVertex$1(t){const e={},r=getValueByPath(t,["videos"]);if(r!=null){let Ee=r;Array.isArray(Ee)&&(Ee=Ee.map(Pe=>generatedVideoFromVertex$1(Pe))),setValueByPath(e,["generatedVideos"],Ee)}const xe=getValueByPath(t,["raiMediaFilteredCount"]);xe!=null&&setValueByPath(e,["raiMediaFilteredCount"],xe);const Se=getValueByPath(t,["raiMediaFilteredReasons"]);return Se!=null&&setValueByPath(e,["raiMediaFilteredReasons"],Se),e}function generatedVideoFromMldev$1(t){const e={},r=getValueByPath(t,["video"]);return r!=null&&setValueByPath(e,["video"],videoFromMldev$1(r)),e}function generatedVideoFromVertex$1(t){const e={},r=getValueByPath(t,["_self"]);return r!=null&&setValueByPath(e,["video"],videoFromVertex$1(r)),e}function getOperationParametersToMldev(t){const e={},r=getValueByPath(t,["operationName"]);return r!=null&&setValueByPath(e,["_url","operationName"],r),e}function getOperationParametersToVertex(t){const e={},r=getValueByPath(t,["operationName"]);return r!=null&&setValueByPath(e,["_url","operationName"],r),e}function importFileOperationFromMldev$1(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const xe=getValueByPath(t,["metadata"]);xe!=null&&setValueByPath(e,["metadata"],xe);const Se=getValueByPath(t,["done"]);Se!=null&&setValueByPath(e,["done"],Se);const Ee=getValueByPath(t,["error"]);Ee!=null&&setValueByPath(e,["error"],Ee);const Pe=getValueByPath(t,["response"]);return Pe!=null&&setValueByPath(e,["response"],importFileResponseFromMldev$1(Pe)),e}function importFileResponseFromMldev$1(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["parent"]);xe!=null&&setValueByPath(e,["parent"],xe);const Se=getValueByPath(t,["documentName"]);return Se!=null&&setValueByPath(e,["documentName"],Se),e}function uploadToFileSearchStoreOperationFromMldev(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const xe=getValueByPath(t,["metadata"]);xe!=null&&setValueByPath(e,["metadata"],xe);const Se=getValueByPath(t,["done"]);Se!=null&&setValueByPath(e,["done"],Se);const Ee=getValueByPath(t,["error"]);Ee!=null&&setValueByPath(e,["error"],Ee);const Pe=getValueByPath(t,["response"]);return Pe!=null&&setValueByPath(e,["response"],uploadToFileSearchStoreResponseFromMldev(Pe)),e}function uploadToFileSearchStoreResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["parent"]);xe!=null&&setValueByPath(e,["parent"],xe);const Se=getValueByPath(t,["documentName"]);return Se!=null&&setValueByPath(e,["documentName"],Se),e}function videoFromMldev$1(t){const e={},r=getValueByPath(t,["uri"]);r!=null&&setValueByPath(e,["uri"],r);const xe=getValueByPath(t,["encodedVideo"]);xe!=null&&setValueByPath(e,["videoBytes"],tBytes$1(xe));const Se=getValueByPath(t,["encoding"]);return Se!=null&&setValueByPath(e,["mimeType"],Se),e}function videoFromVertex$1(t){const e={},r=getValueByPath(t,["gcsUri"]);r!=null&&setValueByPath(e,["uri"],r);const xe=getValueByPath(t,["bytesBase64Encoded"]);xe!=null&&setValueByPath(e,["videoBytes"],tBytes$1(xe));const Se=getValueByPath(t,["mimeType"]);return Se!=null&&setValueByPath(e,["mimeType"],Se),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Outcome;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Outcome||(Outcome={}));var Language;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Language||(Language={}));var FunctionResponseScheduling;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(FunctionResponseScheduling||(FunctionResponseScheduling={}));var Type;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Type||(Type={}));var Mode;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Mode||(Mode={}));var ApiSpec;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(ApiSpec||(ApiSpec={}));var AuthType;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(AuthType||(AuthType={}));var HttpElementLocation;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(HttpElementLocation||(HttpElementLocation={}));var PhishBlockThreshold;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(PhishBlockThreshold||(PhishBlockThreshold={}));var ThinkingLevel;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(ThinkingLevel||(ThinkingLevel={}));var HarmCategory;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(HarmCategory||(HarmCategory={}));var HarmBlockMethod;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(HarmBlockMethod||(HarmBlockMethod={}));var HarmBlockThreshold;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(HarmBlockThreshold||(HarmBlockThreshold={}));var FinishReason;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(FinishReason||(FinishReason={}));var HarmProbability;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(HarmProbability||(HarmProbability={}));var HarmSeverity;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(HarmSeverity||(HarmSeverity={}));var UrlRetrievalStatus;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(UrlRetrievalStatus||(UrlRetrievalStatus={}));var BlockedReason;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(BlockedReason||(BlockedReason={}));var TrafficType;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(TrafficType||(TrafficType={}));var Modality;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Modality||(Modality={}));var MediaResolution;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(MediaResolution||(MediaResolution={}));var TuningMode;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(TuningMode||(TuningMode={}));var AdapterSize;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(AdapterSize||(AdapterSize={}));var JobState;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(JobState||(JobState={}));var TuningTask;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(TuningTask||(TuningTask={}));var PartMediaResolutionLevel;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(PartMediaResolutionLevel||(PartMediaResolutionLevel={}));var FeatureSelectionPreference;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(FeatureSelectionPreference||(FeatureSelectionPreference={}));var Behavior;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Behavior||(Behavior={}));var DynamicRetrievalConfigMode;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(DynamicRetrievalConfigMode||(DynamicRetrievalConfigMode={}));var Environment;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Environment||(Environment={}));var FunctionCallingConfigMode;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(FunctionCallingConfigMode||(FunctionCallingConfigMode={}));var SafetyFilterLevel;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(SafetyFilterLevel||(SafetyFilterLevel={}));var PersonGeneration;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(PersonGeneration||(PersonGeneration={}));var ImagePromptLanguage;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(ImagePromptLanguage||(ImagePromptLanguage={}));var MaskReferenceMode;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(MaskReferenceMode||(MaskReferenceMode={}));var ControlReferenceType;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ControlReferenceType||(ControlReferenceType={}));var SubjectReferenceType;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(SubjectReferenceType||(SubjectReferenceType={}));var EditMode;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(EditMode||(EditMode={}));var SegmentMode;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(SegmentMode||(SegmentMode={}));var VideoGenerationReferenceType;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(VideoGenerationReferenceType||(VideoGenerationReferenceType={}));var VideoGenerationMaskMode;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(VideoGenerationMaskMode||(VideoGenerationMaskMode={}));var VideoCompressionQuality;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(VideoCompressionQuality||(VideoCompressionQuality={}));var TuningMethod;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(TuningMethod||(TuningMethod={}));var DocumentState;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(DocumentState||(DocumentState={}));var FileState;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(FileState||(FileState={}));var FileSource;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(FileSource||(FileSource={}));var TurnCompleteReason;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(TurnCompleteReason||(TurnCompleteReason={}));var MediaModality;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(MediaModality||(MediaModality={}));var VadSignalType;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(VadSignalType||(VadSignalType={}));var StartSensitivity;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(StartSensitivity||(StartSensitivity={}));var EndSensitivity;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(EndSensitivity||(EndSensitivity={}));var ActivityHandling;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(ActivityHandling||(ActivityHandling={}));var TurnCoverage;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(TurnCoverage||(TurnCoverage={}));var Scale;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Scale||(Scale={}));var MusicGenerationMode;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(MusicGenerationMode||(MusicGenerationMode={}));var LiveMusicPlaybackControl;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(LiveMusicPlaybackControl||(LiveMusicPlaybackControl={}));class HttpResponse{constructor(e){const r={};for(const xe of e.headers.entries())r[xe[0]]=xe[1];this.headers=r,this.responseInternal=e}json(){return this.responseInternal.json()}}class GenerateContentResponse{get text(){var e,r,xe,Se,Ee,Pe,Ce,Re;if(((Se=(xe=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||xe===void 0?void 0:xe.parts)===null||Se===void 0?void 0:Se.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let Be="",Me=!1;const Ve=[];for(const Fe of(Re=(Ce=(Pe=(Ee=this.candidates)===null||Ee===void 0?void 0:Ee[0])===null||Pe===void 0?void 0:Pe.content)===null||Ce===void 0?void 0:Ce.parts)!==null&&Re!==void 0?Re:[]){for(const[Ie,qe]of Object.entries(Fe))Ie!=="text"&&Ie!=="thought"&&Ie!=="thoughtSignature"&&(qe!==null||qe!==void 0)&&Ve.push(Ie);if(typeof Fe.text=="string"){if(typeof Fe.thought=="boolean"&&Fe.thought)continue;Me=!0,Be+=Fe.text}}return Ve.length>0&&console.warn(`there are non-text parts ${Ve} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),Me?Be:void 0}get data(){var e,r,xe,Se,Ee,Pe,Ce,Re;if(((Se=(xe=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||xe===void 0?void 0:xe.parts)===null||Se===void 0?void 0:Se.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let Be="";const Me=[];for(const Ve of(Re=(Ce=(Pe=(Ee=this.candidates)===null||Ee===void 0?void 0:Ee[0])===null||Pe===void 0?void 0:Pe.content)===null||Ce===void 0?void 0:Ce.parts)!==null&&Re!==void 0?Re:[]){for(const[Fe,Ie]of Object.entries(Ve))Fe!=="inlineData"&&(Ie!==null||Ie!==void 0)&&Me.push(Fe);Ve.inlineData&&typeof Ve.inlineData.data=="string"&&(Be+=atob(Ve.inlineData.data))}return Me.length>0&&console.warn(`there are non-data parts ${Me} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),Be.length>0?btoa(Be):void 0}get functionCalls(){var e,r,xe,Se,Ee,Pe,Ce,Re;if(((Se=(xe=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||xe===void 0?void 0:xe.parts)===null||Se===void 0?void 0:Se.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const Be=(Re=(Ce=(Pe=(Ee=this.candidates)===null||Ee===void 0?void 0:Ee[0])===null||Pe===void 0?void 0:Pe.content)===null||Ce===void 0?void 0:Ce.parts)===null||Re===void 0?void 0:Re.filter(Me=>Me.functionCall).map(Me=>Me.functionCall).filter(Me=>Me!==void 0);if((Be==null?void 0:Be.length)!==0)return Be}get executableCode(){var e,r,xe,Se,Ee,Pe,Ce,Re,Be;if(((Se=(xe=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||xe===void 0?void 0:xe.parts)===null||Se===void 0?void 0:Se.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const Me=(Re=(Ce=(Pe=(Ee=this.candidates)===null||Ee===void 0?void 0:Ee[0])===null||Pe===void 0?void 0:Pe.content)===null||Ce===void 0?void 0:Ce.parts)===null||Re===void 0?void 0:Re.filter(Ve=>Ve.executableCode).map(Ve=>Ve.executableCode).filter(Ve=>Ve!==void 0);if((Me==null?void 0:Me.length)!==0)return(Be=Me==null?void 0:Me[0])===null||Be===void 0?void 0:Be.code}get codeExecutionResult(){var e,r,xe,Se,Ee,Pe,Ce,Re,Be;if(((Se=(xe=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||xe===void 0?void 0:xe.parts)===null||Se===void 0?void 0:Se.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const Me=(Re=(Ce=(Pe=(Ee=this.candidates)===null||Ee===void 0?void 0:Ee[0])===null||Pe===void 0?void 0:Pe.content)===null||Ce===void 0?void 0:Ce.parts)===null||Re===void 0?void 0:Re.filter(Ve=>Ve.codeExecutionResult).map(Ve=>Ve.codeExecutionResult).filter(Ve=>Ve!==void 0);if((Me==null?void 0:Me.length)!==0)return(Be=Me==null?void 0:Me[0])===null||Be===void 0?void 0:Be.output}}class EmbedContentResponse{}class GenerateImagesResponse{}class EditImageResponse{}class UpscaleImageResponse{}class RecontextImageResponse{}class SegmentImageResponse{}class ListModelsResponse{}class DeleteModelResponse{}class CountTokensResponse{}class ComputeTokensResponse{}class GenerateVideosOperation{_fromAPIResponse({apiResponse:e,_isVertexAI:r}){const xe=new GenerateVideosOperation;let Se;const Ee=e;return r?Se=generateVideosOperationFromVertex$1(Ee):Se=generateVideosOperationFromMldev$1(Ee),Object.assign(xe,Se),xe}}class ListTuningJobsResponse{}class CancelTuningJobResponse{}class DeleteCachedContentResponse{}class ListCachedContentsResponse{}class ListDocumentsResponse{}class ListFileSearchStoresResponse{}class UploadToFileSearchStoreResumableResponse{}class ImportFileOperation{_fromAPIResponse({apiResponse:e,_isVertexAI:r}){const xe=new ImportFileOperation,Ee=importFileOperationFromMldev$1(e);return Object.assign(xe,Ee),xe}}class ListFilesResponse{}class CreateFileResponse{}class DeleteFileResponse{}class ListBatchJobsResponse{}class LiveServerMessage{get text(){var e,r,xe;let Se="",Ee=!1;const Pe=[];for(const Ce of(xe=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&xe!==void 0?xe:[]){for(const[Re,Be]of Object.entries(Ce))Re!=="text"&&Re!=="thought"&&Be!==null&&Pe.push(Re);if(typeof Ce.text=="string"){if(typeof Ce.thought=="boolean"&&Ce.thought)continue;Ee=!0,Se+=Ce.text}}return Pe.length>0&&console.warn(`there are non-text parts ${Pe} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),Ee?Se:void 0}get data(){var e,r,xe;let Se="";const Ee=[];for(const Pe of(xe=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&xe!==void 0?xe:[]){for(const[Ce,Re]of Object.entries(Pe))Ce!=="inlineData"&&Re!==null&&Ee.push(Ce);Pe.inlineData&&typeof Pe.inlineData.data=="string"&&(Se+=atob(Pe.inlineData.data))}return Ee.length>0&&console.warn(`there are non-data parts ${Ee} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),Se.length>0?btoa(Se):void 0}}class LiveMusicServerMessage{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class UploadToFileSearchStoreOperation{_fromAPIResponse({apiResponse:e,_isVertexAI:r}){const xe=new UploadToFileSearchStoreOperation,Ee=uploadToFileSearchStoreOperationFromMldev(e);return Object.assign(xe,Ee),xe}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tModel(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const r=e.split("/",2);return`publishers/${r[0]}/models/${r[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function tCachesModel(t,e){const r=tModel(t,e);return r?r.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}`:r.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${r}`:r:""}function tBlobs(t){return Array.isArray(t)?t.map(e=>tBlob(e)):[tBlob(t)]}function tBlob(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function tImageBlob(t){const e=tBlob(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function tAudioBlob(t){const e=tBlob(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function tPart(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function tParts(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>tPart(e)):[tPart(t)]}function _isContent(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function _isFunctionCallPart(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function _isFunctionResponsePart(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function tContent(t){if(t==null)throw new Error("ContentUnion is required");return _isContent(t)?t:{role:"user",parts:tParts(t)}}function tContentsForEmbed(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(r=>{const xe=tContent(r);return xe.parts&&xe.parts.length>0&&xe.parts[0].text!==void 0?[xe.parts[0].text]:[]});if(t.isVertexAI()){const r=tContent(e);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]}return Array.isArray(e)?e.map(r=>tContent(r)):[tContent(e)]}function tContents(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(_isFunctionCallPart(t)||_isFunctionResponsePart(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[tContent(t)]}const e=[],r=[],xe=_isContent(t[0]);for(const Se of t){const Ee=_isContent(Se);if(Ee!=xe)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(Ee)e.push(Se);else{if(_isFunctionCallPart(Se)||_isFunctionResponsePart(Se))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");r.push(Se)}}return xe||e.push({role:"user",parts:tParts(r)}),e}function flattenTypeArrayToAnyOf(t,e){t.includes("null")&&(e.nullable=!0);const r=t.filter(xe=>xe!=="null");if(r.length===1)e.type=Object.values(Type).includes(r[0].toUpperCase())?r[0].toUpperCase():Type.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const xe of r)e.anyOf.push({type:Object.values(Type).includes(xe.toUpperCase())?xe.toUpperCase():Type.TYPE_UNSPECIFIED})}}function processJsonSchema(t){const e={},r=["items"],xe=["anyOf"],Se=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const Ee=t.anyOf;Ee!=null&&Ee.length==2&&(Ee[0].type==="null"?(e.nullable=!0,t=Ee[1]):Ee[1].type==="null"&&(e.nullable=!0,t=Ee[0])),t.type instanceof Array&&flattenTypeArrayToAnyOf(t.type,e);for(const[Pe,Ce]of Object.entries(t))if(Ce!=null)if(Pe=="type"){if(Ce==="null")throw new Error("type: null can not be the only possible type for the field.");if(Ce instanceof Array)continue;e.type=Object.values(Type).includes(Ce.toUpperCase())?Ce.toUpperCase():Type.TYPE_UNSPECIFIED}else if(r.includes(Pe))e[Pe]=processJsonSchema(Ce);else if(xe.includes(Pe)){const Re=[];for(const Be of Ce){if(Be.type=="null"){e.nullable=!0;continue}Re.push(processJsonSchema(Be))}e[Pe]=Re}else if(Se.includes(Pe)){const Re={};for(const[Be,Me]of Object.entries(Ce))Re[Be]=processJsonSchema(Me);e[Pe]=Re}else{if(Pe==="additionalProperties")continue;e[Pe]=Ce}return e}function tSchema(t){return processJsonSchema(t)}function tSpeechConfig(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function tLiveSpeechConfig(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function tTool(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=processJsonSchema(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=processJsonSchema(e.response));return t}function tTools(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const r of t)e.push(r);return e}function resourceName(t,e,r,xe=1){const Se=!e.startsWith(`${r}/`)&&e.split("/").length===xe;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${r}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:Se?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}/${e}`:e:Se?`${r}/${e}`:e}function tCachedContentName(t,e){if(typeof e!="string")throw new Error("name must be a string");return resourceName(t,e,"cachedContents")}function tTuningJobStatus(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function tBytes(t){return tBytes$1(t)}function _isFile(t){return t!=null&&typeof t=="object"&&"name"in t}function isGeneratedVideo(t){return t!=null&&typeof t=="object"&&"video"in t}function isVideo(t){return t!=null&&typeof t=="object"&&"uri"in t}function tFileName(t){var e;let r;if(_isFile(t)&&(r=t.name),!(isVideo(t)&&(r=t.uri,r===void 0))&&!(isGeneratedVideo(t)&&(r=(e=t.video)===null||e===void 0?void 0:e.uri,r===void 0))){if(typeof t=="string"&&(r=t),r===void 0)throw new Error("Could not extract file name from the provided input.");if(r.startsWith("https://")){const Se=r.split("files/")[1].match(/[a-z0-9]+/);if(Se===null)throw new Error(`Could not extract file name from URI ${r}`);r=Se[0]}else r.startsWith("files/")&&(r=r.split("files/")[1]);return r}}function tModelsUrl(t,e){let r;return t.isVertexAI()?r=e?"publishers/google/models":"models":r=e?"models":"tunedModels",r}function tExtractModels(t){for(const e of["models","tunedModels","publisherModels"])if(hasField(t,e))return t[e];return[]}function hasField(t,e){return t!==null&&typeof t=="object"&&e in t}function mcpToGeminiTool(t,e={}){const r=t,xe={name:r.name,description:r.description,parametersJsonSchema:r.inputSchema};return r.outputSchema&&(xe.responseJsonSchema=r.outputSchema),e.behavior&&(xe.behavior=e.behavior),{functionDeclarations:[xe]}}function mcpToolsToGeminiTool(t,e={}){const r=[],xe=new Set;for(const Se of t){const Ee=Se.name;if(xe.has(Ee))throw new Error(`Duplicate function name ${Ee} found in MCP tools. Please ensure function names are unique.`);xe.add(Ee);const Pe=mcpToGeminiTool(Se,e);Pe.functionDeclarations&&r.push(...Pe.functionDeclarations)}return{functionDeclarations:r}}function tBatchJobSource(t,e){let r;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))r={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))r={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))r={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");r={inlinedRequests:e}}else r=e;const xe=[r.gcsUri,r.bigqueryUri].filter(Boolean).length,Se=[r.inlinedRequests,r.fileName].filter(Boolean).length;if(t.isVertexAI()){if(Se>0||xe!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(xe>0||Se!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return r}function tBatchJobDestination(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function tRecvBatchJobDestination(t){if(typeof t!="object"||t===null)return{};const e=t,r=e.inlinedResponses;if(typeof r!="object"||r===null)return t;const Se=r.inlinedResponses;if(!Array.isArray(Se)||Se.length===0)return t;let Ee=!1;for(const Pe of Se){if(typeof Pe!="object"||Pe===null)continue;const Re=Pe.response;if(typeof Re!="object"||Re===null)continue;if(Re.embedding!==void 0){Ee=!0;break}}return Ee&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function tBatchJobName(t,e){const r=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(r))return r.split("/").pop();throw new Error(`Invalid batch job name: ${r}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(r))return r.split("/").pop();if(/^\d+$/.test(r))return r;throw new Error(`Invalid batch job name: ${r}.`)}function tJobState(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function batchJobDestinationFromMldev(t){const e={},r=getValueByPath(t,["responsesFile"]);r!=null&&setValueByPath(e,["fileName"],r);const xe=getValueByPath(t,["inlinedResponses","inlinedResponses"]);if(xe!=null){let Ee=xe;Array.isArray(Ee)&&(Ee=Ee.map(Pe=>inlinedResponseFromMldev(Pe))),setValueByPath(e,["inlinedResponses"],Ee)}const Se=getValueByPath(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(Se!=null){let Ee=Se;Array.isArray(Ee)&&(Ee=Ee.map(Pe=>Pe)),setValueByPath(e,["inlinedEmbedContentResponses"],Ee)}return e}function batchJobDestinationFromVertex(t){const e={},r=getValueByPath(t,["predictionsFormat"]);r!=null&&setValueByPath(e,["format"],r);const xe=getValueByPath(t,["gcsDestination","outputUriPrefix"]);xe!=null&&setValueByPath(e,["gcsUri"],xe);const Se=getValueByPath(t,["bigqueryDestination","outputUri"]);return Se!=null&&setValueByPath(e,["bigqueryUri"],Se),e}function batchJobDestinationToVertex(t){const e={},r=getValueByPath(t,["format"]);r!=null&&setValueByPath(e,["predictionsFormat"],r);const xe=getValueByPath(t,["gcsUri"]);xe!=null&&setValueByPath(e,["gcsDestination","outputUriPrefix"],xe);const Se=getValueByPath(t,["bigqueryUri"]);if(Se!=null&&setValueByPath(e,["bigqueryDestination","outputUri"],Se),getValueByPath(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(getValueByPath(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(getValueByPath(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function batchJobFromMldev(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const xe=getValueByPath(t,["metadata","displayName"]);xe!=null&&setValueByPath(e,["displayName"],xe);const Se=getValueByPath(t,["metadata","state"]);Se!=null&&setValueByPath(e,["state"],tJobState(Se));const Ee=getValueByPath(t,["metadata","createTime"]);Ee!=null&&setValueByPath(e,["createTime"],Ee);const Pe=getValueByPath(t,["metadata","endTime"]);Pe!=null&&setValueByPath(e,["endTime"],Pe);const Ce=getValueByPath(t,["metadata","updateTime"]);Ce!=null&&setValueByPath(e,["updateTime"],Ce);const Re=getValueByPath(t,["metadata","model"]);Re!=null&&setValueByPath(e,["model"],Re);const Be=getValueByPath(t,["metadata","output"]);return Be!=null&&setValueByPath(e,["dest"],batchJobDestinationFromMldev(tRecvBatchJobDestination(Be))),e}function batchJobFromVertex(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const xe=getValueByPath(t,["displayName"]);xe!=null&&setValueByPath(e,["displayName"],xe);const Se=getValueByPath(t,["state"]);Se!=null&&setValueByPath(e,["state"],tJobState(Se));const Ee=getValueByPath(t,["error"]);Ee!=null&&setValueByPath(e,["error"],Ee);const Pe=getValueByPath(t,["createTime"]);Pe!=null&&setValueByPath(e,["createTime"],Pe);const Ce=getValueByPath(t,["startTime"]);Ce!=null&&setValueByPath(e,["startTime"],Ce);const Re=getValueByPath(t,["endTime"]);Re!=null&&setValueByPath(e,["endTime"],Re);const Be=getValueByPath(t,["updateTime"]);Be!=null&&setValueByPath(e,["updateTime"],Be);const Me=getValueByPath(t,["model"]);Me!=null&&setValueByPath(e,["model"],Me);const Ve=getValueByPath(t,["inputConfig"]);Ve!=null&&setValueByPath(e,["src"],batchJobSourceFromVertex(Ve));const Fe=getValueByPath(t,["outputConfig"]);Fe!=null&&setValueByPath(e,["dest"],batchJobDestinationFromVertex(tRecvBatchJobDestination(Fe)));const Ie=getValueByPath(t,["completionStats"]);return Ie!=null&&setValueByPath(e,["completionStats"],Ie),e}function batchJobSourceFromVertex(t){const e={},r=getValueByPath(t,["instancesFormat"]);r!=null&&setValueByPath(e,["format"],r);const xe=getValueByPath(t,["gcsSource","uris"]);xe!=null&&setValueByPath(e,["gcsUri"],xe);const Se=getValueByPath(t,["bigquerySource","inputUri"]);return Se!=null&&setValueByPath(e,["bigqueryUri"],Se),e}function batchJobSourceToMldev(t,e){const r={};if(getValueByPath(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(getValueByPath(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(getValueByPath(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const xe=getValueByPath(e,["fileName"]);xe!=null&&setValueByPath(r,["fileName"],xe);const Se=getValueByPath(e,["inlinedRequests"]);if(Se!=null){let Ee=Se;Array.isArray(Ee)&&(Ee=Ee.map(Pe=>inlinedRequestToMldev(t,Pe))),setValueByPath(r,["requests","requests"],Ee)}return r}function batchJobSourceToVertex(t){const e={},r=getValueByPath(t,["format"]);r!=null&&setValueByPath(e,["instancesFormat"],r);const xe=getValueByPath(t,["gcsUri"]);xe!=null&&setValueByPath(e,["gcsSource","uris"],xe);const Se=getValueByPath(t,["bigqueryUri"]);if(Se!=null&&setValueByPath(e,["bigquerySource","inputUri"],Se),getValueByPath(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(getValueByPath(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function blobToMldev$4(t){const e={},r=getValueByPath(t,["data"]);if(r!=null&&setValueByPath(e,["data"],r),getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const xe=getValueByPath(t,["mimeType"]);return xe!=null&&setValueByPath(e,["mimeType"],xe),e}function cancelBatchJobParametersToMldev(t,e){const r={},xe=getValueByPath(e,["name"]);return xe!=null&&setValueByPath(r,["_url","name"],tBatchJobName(t,xe)),r}function cancelBatchJobParametersToVertex(t,e){const r={},xe=getValueByPath(e,["name"]);return xe!=null&&setValueByPath(r,["_url","name"],tBatchJobName(t,xe)),r}function candidateFromMldev$1(t){const e={},r=getValueByPath(t,["content"]);r!=null&&setValueByPath(e,["content"],r);const xe=getValueByPath(t,["citationMetadata"]);xe!=null&&setValueByPath(e,["citationMetadata"],citationMetadataFromMldev$1(xe));const Se=getValueByPath(t,["tokenCount"]);Se!=null&&setValueByPath(e,["tokenCount"],Se);const Ee=getValueByPath(t,["finishReason"]);Ee!=null&&setValueByPath(e,["finishReason"],Ee);const Pe=getValueByPath(t,["avgLogprobs"]);Pe!=null&&setValueByPath(e,["avgLogprobs"],Pe);const Ce=getValueByPath(t,["groundingMetadata"]);Ce!=null&&setValueByPath(e,["groundingMetadata"],Ce);const Re=getValueByPath(t,["index"]);Re!=null&&setValueByPath(e,["index"],Re);const Be=getValueByPath(t,["logprobsResult"]);Be!=null&&setValueByPath(e,["logprobsResult"],Be);const Me=getValueByPath(t,["safetyRatings"]);if(Me!=null){let Fe=Me;Array.isArray(Fe)&&(Fe=Fe.map(Ie=>Ie)),setValueByPath(e,["safetyRatings"],Fe)}const Ve=getValueByPath(t,["urlContextMetadata"]);return Ve!=null&&setValueByPath(e,["urlContextMetadata"],Ve),e}function citationMetadataFromMldev$1(t){const e={},r=getValueByPath(t,["citationSources"]);if(r!=null){let xe=r;Array.isArray(xe)&&(xe=xe.map(Se=>Se)),setValueByPath(e,["citations"],xe)}return e}function contentToMldev$4(t){const e={},r=getValueByPath(t,["parts"]);if(r!=null){let Se=r;Array.isArray(Se)&&(Se=Se.map(Ee=>partToMldev$4(Ee))),setValueByPath(e,["parts"],Se)}const xe=getValueByPath(t,["role"]);return xe!=null&&setValueByPath(e,["role"],xe),e}function createBatchJobConfigToMldev(t,e){const r={},xe=getValueByPath(t,["displayName"]);if(e!==void 0&&xe!=null&&setValueByPath(e,["batch","displayName"],xe),getValueByPath(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return r}function createBatchJobConfigToVertex(t,e){const r={},xe=getValueByPath(t,["displayName"]);e!==void 0&&xe!=null&&setValueByPath(e,["displayName"],xe);const Se=getValueByPath(t,["dest"]);return e!==void 0&&Se!=null&&setValueByPath(e,["outputConfig"],batchJobDestinationToVertex(tBatchJobDestination(Se))),r}function createBatchJobParametersToMldev(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Se=getValueByPath(e,["src"]);Se!=null&&setValueByPath(r,["batch","inputConfig"],batchJobSourceToMldev(t,tBatchJobSource(t,Se)));const Ee=getValueByPath(e,["config"]);return Ee!=null&&createBatchJobConfigToMldev(Ee,r),r}function createBatchJobParametersToVertex(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["model"],tModel(t,xe));const Se=getValueByPath(e,["src"]);Se!=null&&setValueByPath(r,["inputConfig"],batchJobSourceToVertex(tBatchJobSource(t,Se)));const Ee=getValueByPath(e,["config"]);return Ee!=null&&createBatchJobConfigToVertex(Ee,r),r}function createEmbeddingsBatchJobConfigToMldev(t,e){const r={},xe=getValueByPath(t,["displayName"]);return e!==void 0&&xe!=null&&setValueByPath(e,["batch","displayName"],xe),r}function createEmbeddingsBatchJobParametersToMldev(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Se=getValueByPath(e,["src"]);Se!=null&&setValueByPath(r,["batch","inputConfig"],embeddingsBatchJobSourceToMldev(t,Se));const Ee=getValueByPath(e,["config"]);return Ee!=null&&createEmbeddingsBatchJobConfigToMldev(Ee,r),r}function deleteBatchJobParametersToMldev(t,e){const r={},xe=getValueByPath(e,["name"]);return xe!=null&&setValueByPath(r,["_url","name"],tBatchJobName(t,xe)),r}function deleteBatchJobParametersToVertex(t,e){const r={},xe=getValueByPath(e,["name"]);return xe!=null&&setValueByPath(r,["_url","name"],tBatchJobName(t,xe)),r}function deleteResourceJobFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["name"]);xe!=null&&setValueByPath(e,["name"],xe);const Se=getValueByPath(t,["done"]);Se!=null&&setValueByPath(e,["done"],Se);const Ee=getValueByPath(t,["error"]);return Ee!=null&&setValueByPath(e,["error"],Ee),e}function deleteResourceJobFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["name"]);xe!=null&&setValueByPath(e,["name"],xe);const Se=getValueByPath(t,["done"]);Se!=null&&setValueByPath(e,["done"],Se);const Ee=getValueByPath(t,["error"]);return Ee!=null&&setValueByPath(e,["error"],Ee),e}function embedContentBatchToMldev(t,e){const r={},xe=getValueByPath(e,["contents"]);if(xe!=null){let Ee=tContentsForEmbed(t,xe);Array.isArray(Ee)&&(Ee=Ee.map(Pe=>Pe)),setValueByPath(r,["requests[]","request","content"],Ee)}const Se=getValueByPath(e,["config"]);return Se!=null&&(setValueByPath(r,["_self"],embedContentConfigToMldev$1(Se,r)),moveValueByPath(r,{"requests[].*":"requests[].request.*"})),r}function embedContentConfigToMldev$1(t,e){const r={},xe=getValueByPath(t,["taskType"]);e!==void 0&&xe!=null&&setValueByPath(e,["requests[]","taskType"],xe);const Se=getValueByPath(t,["title"]);e!==void 0&&Se!=null&&setValueByPath(e,["requests[]","title"],Se);const Ee=getValueByPath(t,["outputDimensionality"]);if(e!==void 0&&Ee!=null&&setValueByPath(e,["requests[]","outputDimensionality"],Ee),getValueByPath(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(getValueByPath(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function embeddingsBatchJobSourceToMldev(t,e){const r={},xe=getValueByPath(e,["fileName"]);xe!=null&&setValueByPath(r,["file_name"],xe);const Se=getValueByPath(e,["inlinedRequests"]);return Se!=null&&setValueByPath(r,["requests"],embedContentBatchToMldev(t,Se)),r}function fileDataToMldev$4(t){const e={};if(getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=getValueByPath(t,["fileUri"]);r!=null&&setValueByPath(e,["fileUri"],r);const xe=getValueByPath(t,["mimeType"]);return xe!=null&&setValueByPath(e,["mimeType"],xe),e}function functionCallToMldev$4(t){const e={},r=getValueByPath(t,["id"]);r!=null&&setValueByPath(e,["id"],r);const xe=getValueByPath(t,["args"]);xe!=null&&setValueByPath(e,["args"],xe);const Se=getValueByPath(t,["name"]);if(Se!=null&&setValueByPath(e,["name"],Se),getValueByPath(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(getValueByPath(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function functionCallingConfigToMldev$2(t){const e={},r=getValueByPath(t,["mode"]);r!=null&&setValueByPath(e,["mode"],r);const xe=getValueByPath(t,["allowedFunctionNames"]);if(xe!=null&&setValueByPath(e,["allowedFunctionNames"],xe),getValueByPath(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function generateContentConfigToMldev$1(t,e,r){const xe={},Se=getValueByPath(e,["systemInstruction"]);r!==void 0&&Se!=null&&setValueByPath(r,["systemInstruction"],contentToMldev$4(tContent(Se)));const Ee=getValueByPath(e,["temperature"]);Ee!=null&&setValueByPath(xe,["temperature"],Ee);const Pe=getValueByPath(e,["topP"]);Pe!=null&&setValueByPath(xe,["topP"],Pe);const Ce=getValueByPath(e,["topK"]);Ce!=null&&setValueByPath(xe,["topK"],Ce);const Re=getValueByPath(e,["candidateCount"]);Re!=null&&setValueByPath(xe,["candidateCount"],Re);const Be=getValueByPath(e,["maxOutputTokens"]);Be!=null&&setValueByPath(xe,["maxOutputTokens"],Be);const Me=getValueByPath(e,["stopSequences"]);Me!=null&&setValueByPath(xe,["stopSequences"],Me);const Ve=getValueByPath(e,["responseLogprobs"]);Ve!=null&&setValueByPath(xe,["responseLogprobs"],Ve);const Fe=getValueByPath(e,["logprobs"]);Fe!=null&&setValueByPath(xe,["logprobs"],Fe);const Ie=getValueByPath(e,["presencePenalty"]);Ie!=null&&setValueByPath(xe,["presencePenalty"],Ie);const qe=getValueByPath(e,["frequencyPenalty"]);qe!=null&&setValueByPath(xe,["frequencyPenalty"],qe);const Ye=getValueByPath(e,["seed"]);Ye!=null&&setValueByPath(xe,["seed"],Ye);const Xe=getValueByPath(e,["responseMimeType"]);Xe!=null&&setValueByPath(xe,["responseMimeType"],Xe);const je=getValueByPath(e,["responseSchema"]);je!=null&&setValueByPath(xe,["responseSchema"],tSchema(je));const Qe=getValueByPath(e,["responseJsonSchema"]);if(Qe!=null&&setValueByPath(xe,["responseJsonSchema"],Qe),getValueByPath(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(getValueByPath(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const sn=getValueByPath(e,["safetySettings"]);if(r!==void 0&&sn!=null){let hn=sn;Array.isArray(hn)&&(hn=hn.map(_n=>safetySettingToMldev$1(_n))),setValueByPath(r,["safetySettings"],hn)}const cn=getValueByPath(e,["tools"]);if(r!==void 0&&cn!=null){let hn=tTools(cn);Array.isArray(hn)&&(hn=hn.map(_n=>toolToMldev$4(tTool(_n)))),setValueByPath(r,["tools"],hn)}const nn=getValueByPath(e,["toolConfig"]);if(r!==void 0&&nn!=null&&setValueByPath(r,["toolConfig"],toolConfigToMldev$2(nn)),getValueByPath(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const an=getValueByPath(e,["cachedContent"]);r!==void 0&&an!=null&&setValueByPath(r,["cachedContent"],tCachedContentName(t,an));const Ze=getValueByPath(e,["responseModalities"]);Ze!=null&&setValueByPath(xe,["responseModalities"],Ze);const tn=getValueByPath(e,["mediaResolution"]);tn!=null&&setValueByPath(xe,["mediaResolution"],tn);const We=getValueByPath(e,["speechConfig"]);if(We!=null&&setValueByPath(xe,["speechConfig"],tSpeechConfig(We)),getValueByPath(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const An=getValueByPath(e,["thinkingConfig"]);An!=null&&setValueByPath(xe,["thinkingConfig"],An);const Je=getValueByPath(e,["imageConfig"]);Je!=null&&setValueByPath(xe,["imageConfig"],imageConfigToMldev$1(Je));const St=getValueByPath(e,["enableEnhancedCivicAnswers"]);return St!=null&&setValueByPath(xe,["enableEnhancedCivicAnswers"],St),xe}function generateContentResponseFromMldev$1(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["candidates"]);if(xe!=null){let Re=xe;Array.isArray(Re)&&(Re=Re.map(Be=>candidateFromMldev$1(Be))),setValueByPath(e,["candidates"],Re)}const Se=getValueByPath(t,["modelVersion"]);Se!=null&&setValueByPath(e,["modelVersion"],Se);const Ee=getValueByPath(t,["promptFeedback"]);Ee!=null&&setValueByPath(e,["promptFeedback"],Ee);const Pe=getValueByPath(t,["responseId"]);Pe!=null&&setValueByPath(e,["responseId"],Pe);const Ce=getValueByPath(t,["usageMetadata"]);return Ce!=null&&setValueByPath(e,["usageMetadata"],Ce),e}function getBatchJobParametersToMldev(t,e){const r={},xe=getValueByPath(e,["name"]);return xe!=null&&setValueByPath(r,["_url","name"],tBatchJobName(t,xe)),r}function getBatchJobParametersToVertex(t,e){const r={},xe=getValueByPath(e,["name"]);return xe!=null&&setValueByPath(r,["_url","name"],tBatchJobName(t,xe)),r}function googleMapsToMldev$4(t){const e={};if(getValueByPath(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=getValueByPath(t,["enableWidget"]);return r!=null&&setValueByPath(e,["enableWidget"],r),e}function googleSearchToMldev$4(t){const e={};if(getValueByPath(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(getValueByPath(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=getValueByPath(t,["timeRangeFilter"]);return r!=null&&setValueByPath(e,["timeRangeFilter"],r),e}function imageConfigToMldev$1(t){const e={},r=getValueByPath(t,["aspectRatio"]);r!=null&&setValueByPath(e,["aspectRatio"],r);const xe=getValueByPath(t,["imageSize"]);if(xe!=null&&setValueByPath(e,["imageSize"],xe),getValueByPath(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(getValueByPath(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function inlinedRequestToMldev(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["request","model"],tModel(t,xe));const Se=getValueByPath(e,["contents"]);if(Se!=null){let Ce=tContents(Se);Array.isArray(Ce)&&(Ce=Ce.map(Re=>contentToMldev$4(Re))),setValueByPath(r,["request","contents"],Ce)}const Ee=getValueByPath(e,["metadata"]);Ee!=null&&setValueByPath(r,["metadata"],Ee);const Pe=getValueByPath(e,["config"]);return Pe!=null&&setValueByPath(r,["request","generationConfig"],generateContentConfigToMldev$1(t,Pe,getValueByPath(r,["request"],{}))),r}function inlinedResponseFromMldev(t){const e={},r=getValueByPath(t,["response"]);r!=null&&setValueByPath(e,["response"],generateContentResponseFromMldev$1(r));const xe=getValueByPath(t,["error"]);return xe!=null&&setValueByPath(e,["error"],xe),e}function listBatchJobsConfigToMldev(t,e){const r={},xe=getValueByPath(t,["pageSize"]);e!==void 0&&xe!=null&&setValueByPath(e,["_query","pageSize"],xe);const Se=getValueByPath(t,["pageToken"]);if(e!==void 0&&Se!=null&&setValueByPath(e,["_query","pageToken"],Se),getValueByPath(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return r}function listBatchJobsConfigToVertex(t,e){const r={},xe=getValueByPath(t,["pageSize"]);e!==void 0&&xe!=null&&setValueByPath(e,["_query","pageSize"],xe);const Se=getValueByPath(t,["pageToken"]);e!==void 0&&Se!=null&&setValueByPath(e,["_query","pageToken"],Se);const Ee=getValueByPath(t,["filter"]);return e!==void 0&&Ee!=null&&setValueByPath(e,["_query","filter"],Ee),r}function listBatchJobsParametersToMldev(t){const e={},r=getValueByPath(t,["config"]);return r!=null&&listBatchJobsConfigToMldev(r,e),e}function listBatchJobsParametersToVertex(t){const e={},r=getValueByPath(t,["config"]);return r!=null&&listBatchJobsConfigToVertex(r,e),e}function listBatchJobsResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["nextPageToken"]);xe!=null&&setValueByPath(e,["nextPageToken"],xe);const Se=getValueByPath(t,["operations"]);if(Se!=null){let Ee=Se;Array.isArray(Ee)&&(Ee=Ee.map(Pe=>batchJobFromMldev(Pe))),setValueByPath(e,["batchJobs"],Ee)}return e}function listBatchJobsResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["nextPageToken"]);xe!=null&&setValueByPath(e,["nextPageToken"],xe);const Se=getValueByPath(t,["batchPredictionJobs"]);if(Se!=null){let Ee=Se;Array.isArray(Ee)&&(Ee=Ee.map(Pe=>batchJobFromVertex(Pe))),setValueByPath(e,["batchJobs"],Ee)}return e}function partToMldev$4(t){const e={},r=getValueByPath(t,["mediaResolution"]);r!=null&&setValueByPath(e,["mediaResolution"],r);const xe=getValueByPath(t,["codeExecutionResult"]);xe!=null&&setValueByPath(e,["codeExecutionResult"],xe);const Se=getValueByPath(t,["executableCode"]);Se!=null&&setValueByPath(e,["executableCode"],Se);const Ee=getValueByPath(t,["fileData"]);Ee!=null&&setValueByPath(e,["fileData"],fileDataToMldev$4(Ee));const Pe=getValueByPath(t,["functionCall"]);Pe!=null&&setValueByPath(e,["functionCall"],functionCallToMldev$4(Pe));const Ce=getValueByPath(t,["functionResponse"]);Ce!=null&&setValueByPath(e,["functionResponse"],Ce);const Re=getValueByPath(t,["inlineData"]);Re!=null&&setValueByPath(e,["inlineData"],blobToMldev$4(Re));const Be=getValueByPath(t,["text"]);Be!=null&&setValueByPath(e,["text"],Be);const Me=getValueByPath(t,["thought"]);Me!=null&&setValueByPath(e,["thought"],Me);const Ve=getValueByPath(t,["thoughtSignature"]);Ve!=null&&setValueByPath(e,["thoughtSignature"],Ve);const Fe=getValueByPath(t,["videoMetadata"]);return Fe!=null&&setValueByPath(e,["videoMetadata"],Fe),e}function safetySettingToMldev$1(t){const e={},r=getValueByPath(t,["category"]);if(r!=null&&setValueByPath(e,["category"],r),getValueByPath(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const xe=getValueByPath(t,["threshold"]);return xe!=null&&setValueByPath(e,["threshold"],xe),e}function toolConfigToMldev$2(t){const e={},r=getValueByPath(t,["functionCallingConfig"]);r!=null&&setValueByPath(e,["functionCallingConfig"],functionCallingConfigToMldev$2(r));const xe=getValueByPath(t,["retrievalConfig"]);return xe!=null&&setValueByPath(e,["retrievalConfig"],xe),e}function toolToMldev$4(t){const e={},r=getValueByPath(t,["functionDeclarations"]);if(r!=null){let Me=r;Array.isArray(Me)&&(Me=Me.map(Ve=>Ve)),setValueByPath(e,["functionDeclarations"],Me)}if(getValueByPath(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const xe=getValueByPath(t,["googleSearchRetrieval"]);xe!=null&&setValueByPath(e,["googleSearchRetrieval"],xe);const Se=getValueByPath(t,["computerUse"]);Se!=null&&setValueByPath(e,["computerUse"],Se);const Ee=getValueByPath(t,["fileSearch"]);Ee!=null&&setValueByPath(e,["fileSearch"],Ee);const Pe=getValueByPath(t,["codeExecution"]);if(Pe!=null&&setValueByPath(e,["codeExecution"],Pe),getValueByPath(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const Ce=getValueByPath(t,["googleMaps"]);Ce!=null&&setValueByPath(e,["googleMaps"],googleMapsToMldev$4(Ce));const Re=getValueByPath(t,["googleSearch"]);Re!=null&&setValueByPath(e,["googleSearch"],googleSearchToMldev$4(Re));const Be=getValueByPath(t,["urlContext"]);return Be!=null&&setValueByPath(e,["urlContext"],Be),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var PagedItem;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(PagedItem||(PagedItem={}));class Pager{constructor(e,r,xe,Se){this.pageInternal=[],this.paramsInternal={},this.requestInternal=r,this.init(e,xe,Se)}init(e,r,xe){var Se,Ee;this.nameInternal=e,this.pageInternal=r[this.nameInternal]||[],this.sdkHttpResponseInternal=r==null?void 0:r.sdkHttpResponse,this.idxInternal=0;let Pe={config:{}};!xe||Object.keys(xe).length===0?Pe={config:{}}:typeof xe=="object"?Pe=Object.assign({},xe):Pe=xe,Pe.config&&(Pe.config.pageToken=r.nextPageToken),this.paramsInternal=Pe,this.pageInternalSize=(Ee=(Se=Pe.config)===null||Se===void 0?void 0:Se.pageSize)!==null&&Ee!==void 0?Ee:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Batches extends BaseModule{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Pager(PagedItem.PAGED_ITEM_BATCH_JOBS,xe=>this.listInternal(xe),await this.listInternal(r),r),this.create=async r=>(this.apiClient.isVertexAI()&&(r.config=this.formatDestination(r.src,r.config)),this.createInternal(r)),this.createEmbeddings=async r=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(r)}}createInlinedGenerateContentRequest(e){const r=createBatchJobParametersToMldev(this.apiClient,e),xe=r._url,Se=formatMap("{model}:batchGenerateContent",xe),Ce=r.batch.inputConfig.requests,Re=Ce.requests,Be=[];for(const Me of Re){const Ve=Object.assign({},Me);if(Ve.systemInstruction){const Fe=Ve.systemInstruction;delete Ve.systemInstruction;const Ie=Ve.request;Ie.systemInstruction=Fe,Ve.request=Ie}Be.push(Ve)}return Ce.requests=Be,delete r.config,delete r._url,delete r._query,{path:Se,body:r}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,r){const xe=r?Object.assign({},r):{},Se=Date.now().toString();if(xe.displayName||(xe.displayName=`genaiBatchJob_${Se}`),xe.dest===void 0){const Ee=this.getGcsUri(e),Pe=this.getBigqueryUri(e);if(Ee)Ee.endsWith(".jsonl")?xe.dest=`${Ee.slice(0,-6)}/dest`:xe.dest=`${Ee}_dest_${Se}`;else if(Pe)xe.dest=`${Pe}_dest_${Se}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return xe}async createInternal(e){var r,xe,Se,Ee;let Pe,Ce="",Re={};if(this.apiClient.isVertexAI()){const Be=createBatchJobParametersToVertex(this.apiClient,e);return Ce=formatMap("batchPredictionJobs",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Me=>Me.json()),Pe.then(Me=>batchJobFromVertex(Me))}else{const Be=createBatchJobParametersToMldev(this.apiClient,e);return Ce=formatMap("{model}:batchGenerateContent",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(Se=e.config)===null||Se===void 0?void 0:Se.httpOptions,abortSignal:(Ee=e.config)===null||Ee===void 0?void 0:Ee.abortSignal}).then(Me=>Me.json()),Pe.then(Me=>batchJobFromMldev(Me))}}async createEmbeddingsInternal(e){var r,xe;let Se,Ee="",Pe={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const Ce=createEmbeddingsBatchJobParametersToMldev(this.apiClient,e);return Ee=formatMap("{model}:asyncBatchEmbedContent",Ce._url),Pe=Ce._query,delete Ce._url,delete Ce._query,Se=this.apiClient.request({path:Ee,queryParams:Pe,body:JSON.stringify(Ce),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Re=>Re.json()),Se.then(Re=>batchJobFromMldev(Re))}}async get(e){var r,xe,Se,Ee;let Pe,Ce="",Re={};if(this.apiClient.isVertexAI()){const Be=getBatchJobParametersToVertex(this.apiClient,e);return Ce=formatMap("batchPredictionJobs/{name}",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Me=>Me.json()),Pe.then(Me=>batchJobFromVertex(Me))}else{const Be=getBatchJobParametersToMldev(this.apiClient,e);return Ce=formatMap("batches/{name}",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(Se=e.config)===null||Se===void 0?void 0:Se.httpOptions,abortSignal:(Ee=e.config)===null||Ee===void 0?void 0:Ee.abortSignal}).then(Me=>Me.json()),Pe.then(Me=>batchJobFromMldev(Me))}}async cancel(e){var r,xe,Se,Ee;let Pe="",Ce={};if(this.apiClient.isVertexAI()){const Re=cancelBatchJobParametersToVertex(this.apiClient,e);Pe=formatMap("batchPredictionJobs/{name}:cancel",Re._url),Ce=Re._query,delete Re._url,delete Re._query,await this.apiClient.request({path:Pe,queryParams:Ce,body:JSON.stringify(Re),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal})}else{const Re=cancelBatchJobParametersToMldev(this.apiClient,e);Pe=formatMap("batches/{name}:cancel",Re._url),Ce=Re._query,delete Re._url,delete Re._query,await this.apiClient.request({path:Pe,queryParams:Ce,body:JSON.stringify(Re),httpMethod:"POST",httpOptions:(Se=e.config)===null||Se===void 0?void 0:Se.httpOptions,abortSignal:(Ee=e.config)===null||Ee===void 0?void 0:Ee.abortSignal})}}async listInternal(e){var r,xe,Se,Ee;let Pe,Ce="",Re={};if(this.apiClient.isVertexAI()){const Be=listBatchJobsParametersToVertex(e);return Ce=formatMap("batchPredictionJobs",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Me=>Me.json().then(Ve=>{const Fe=Ve;return Fe.sdkHttpResponse={headers:Me.headers},Fe})),Pe.then(Me=>{const Ve=listBatchJobsResponseFromVertex(Me),Fe=new ListBatchJobsResponse;return Object.assign(Fe,Ve),Fe})}else{const Be=listBatchJobsParametersToMldev(e);return Ce=formatMap("batches",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(Se=e.config)===null||Se===void 0?void 0:Se.httpOptions,abortSignal:(Ee=e.config)===null||Ee===void 0?void 0:Ee.abortSignal}).then(Me=>Me.json().then(Ve=>{const Fe=Ve;return Fe.sdkHttpResponse={headers:Me.headers},Fe})),Pe.then(Me=>{const Ve=listBatchJobsResponseFromMldev(Me),Fe=new ListBatchJobsResponse;return Object.assign(Fe,Ve),Fe})}}async delete(e){var r,xe,Se,Ee;let Pe,Ce="",Re={};if(this.apiClient.isVertexAI()){const Be=deleteBatchJobParametersToVertex(this.apiClient,e);return Ce=formatMap("batchPredictionJobs/{name}",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Me=>Me.json().then(Ve=>{const Fe=Ve;return Fe.sdkHttpResponse={headers:Me.headers},Fe})),Pe.then(Me=>deleteResourceJobFromVertex(Me))}else{const Be=deleteBatchJobParametersToMldev(this.apiClient,e);return Ce=formatMap("batches/{name}",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"DELETE",httpOptions:(Se=e.config)===null||Se===void 0?void 0:Se.httpOptions,abortSignal:(Ee=e.config)===null||Ee===void 0?void 0:Ee.abortSignal}).then(Me=>Me.json().then(Ve=>{const Fe=Ve;return Fe.sdkHttpResponse={headers:Me.headers},Fe})),Pe.then(Me=>deleteResourceJobFromMldev(Me))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function blobToMldev$3(t){const e={},r=getValueByPath(t,["data"]);if(r!=null&&setValueByPath(e,["data"],r),getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const xe=getValueByPath(t,["mimeType"]);return xe!=null&&setValueByPath(e,["mimeType"],xe),e}function contentToMldev$3(t){const e={},r=getValueByPath(t,["parts"]);if(r!=null){let Se=r;Array.isArray(Se)&&(Se=Se.map(Ee=>partToMldev$3(Ee))),setValueByPath(e,["parts"],Se)}const xe=getValueByPath(t,["role"]);return xe!=null&&setValueByPath(e,["role"],xe),e}function createCachedContentConfigToMldev(t,e){const r={},xe=getValueByPath(t,["ttl"]);e!==void 0&&xe!=null&&setValueByPath(e,["ttl"],xe);const Se=getValueByPath(t,["expireTime"]);e!==void 0&&Se!=null&&setValueByPath(e,["expireTime"],Se);const Ee=getValueByPath(t,["displayName"]);e!==void 0&&Ee!=null&&setValueByPath(e,["displayName"],Ee);const Pe=getValueByPath(t,["contents"]);if(e!==void 0&&Pe!=null){let Me=tContents(Pe);Array.isArray(Me)&&(Me=Me.map(Ve=>contentToMldev$3(Ve))),setValueByPath(e,["contents"],Me)}const Ce=getValueByPath(t,["systemInstruction"]);e!==void 0&&Ce!=null&&setValueByPath(e,["systemInstruction"],contentToMldev$3(tContent(Ce)));const Re=getValueByPath(t,["tools"]);if(e!==void 0&&Re!=null){let Me=Re;Array.isArray(Me)&&(Me=Me.map(Ve=>toolToMldev$3(Ve))),setValueByPath(e,["tools"],Me)}const Be=getValueByPath(t,["toolConfig"]);if(e!==void 0&&Be!=null&&setValueByPath(e,["toolConfig"],toolConfigToMldev$1(Be)),getValueByPath(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return r}function createCachedContentConfigToVertex(t,e){const r={},xe=getValueByPath(t,["ttl"]);e!==void 0&&xe!=null&&setValueByPath(e,["ttl"],xe);const Se=getValueByPath(t,["expireTime"]);e!==void 0&&Se!=null&&setValueByPath(e,["expireTime"],Se);const Ee=getValueByPath(t,["displayName"]);e!==void 0&&Ee!=null&&setValueByPath(e,["displayName"],Ee);const Pe=getValueByPath(t,["contents"]);if(e!==void 0&&Pe!=null){let Ve=tContents(Pe);Array.isArray(Ve)&&(Ve=Ve.map(Fe=>Fe)),setValueByPath(e,["contents"],Ve)}const Ce=getValueByPath(t,["systemInstruction"]);e!==void 0&&Ce!=null&&setValueByPath(e,["systemInstruction"],tContent(Ce));const Re=getValueByPath(t,["tools"]);if(e!==void 0&&Re!=null){let Ve=Re;Array.isArray(Ve)&&(Ve=Ve.map(Fe=>toolToVertex$2(Fe))),setValueByPath(e,["tools"],Ve)}const Be=getValueByPath(t,["toolConfig"]);e!==void 0&&Be!=null&&setValueByPath(e,["toolConfig"],Be);const Me=getValueByPath(t,["kmsKeyName"]);return e!==void 0&&Me!=null&&setValueByPath(e,["encryption_spec","kmsKeyName"],Me),r}function createCachedContentParametersToMldev(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["model"],tCachesModel(t,xe));const Se=getValueByPath(e,["config"]);return Se!=null&&createCachedContentConfigToMldev(Se,r),r}function createCachedContentParametersToVertex(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["model"],tCachesModel(t,xe));const Se=getValueByPath(e,["config"]);return Se!=null&&createCachedContentConfigToVertex(Se,r),r}function deleteCachedContentParametersToMldev(t,e){const r={},xe=getValueByPath(e,["name"]);return xe!=null&&setValueByPath(r,["_url","name"],tCachedContentName(t,xe)),r}function deleteCachedContentParametersToVertex(t,e){const r={},xe=getValueByPath(e,["name"]);return xe!=null&&setValueByPath(r,["_url","name"],tCachedContentName(t,xe)),r}function deleteCachedContentResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);return r!=null&&setValueByPath(e,["sdkHttpResponse"],r),e}function deleteCachedContentResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);return r!=null&&setValueByPath(e,["sdkHttpResponse"],r),e}function fileDataToMldev$3(t){const e={};if(getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=getValueByPath(t,["fileUri"]);r!=null&&setValueByPath(e,["fileUri"],r);const xe=getValueByPath(t,["mimeType"]);return xe!=null&&setValueByPath(e,["mimeType"],xe),e}function functionCallToMldev$3(t){const e={},r=getValueByPath(t,["id"]);r!=null&&setValueByPath(e,["id"],r);const xe=getValueByPath(t,["args"]);xe!=null&&setValueByPath(e,["args"],xe);const Se=getValueByPath(t,["name"]);if(Se!=null&&setValueByPath(e,["name"],Se),getValueByPath(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(getValueByPath(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function functionCallingConfigToMldev$1(t){const e={},r=getValueByPath(t,["mode"]);r!=null&&setValueByPath(e,["mode"],r);const xe=getValueByPath(t,["allowedFunctionNames"]);if(xe!=null&&setValueByPath(e,["allowedFunctionNames"],xe),getValueByPath(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function functionDeclarationToVertex$2(t){const e={};if(getValueByPath(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=getValueByPath(t,["description"]);r!=null&&setValueByPath(e,["description"],r);const xe=getValueByPath(t,["name"]);xe!=null&&setValueByPath(e,["name"],xe);const Se=getValueByPath(t,["parameters"]);Se!=null&&setValueByPath(e,["parameters"],Se);const Ee=getValueByPath(t,["parametersJsonSchema"]);Ee!=null&&setValueByPath(e,["parametersJsonSchema"],Ee);const Pe=getValueByPath(t,["response"]);Pe!=null&&setValueByPath(e,["response"],Pe);const Ce=getValueByPath(t,["responseJsonSchema"]);return Ce!=null&&setValueByPath(e,["responseJsonSchema"],Ce),e}function getCachedContentParametersToMldev(t,e){const r={},xe=getValueByPath(e,["name"]);return xe!=null&&setValueByPath(r,["_url","name"],tCachedContentName(t,xe)),r}function getCachedContentParametersToVertex(t,e){const r={},xe=getValueByPath(e,["name"]);return xe!=null&&setValueByPath(r,["_url","name"],tCachedContentName(t,xe)),r}function googleMapsToMldev$3(t){const e={};if(getValueByPath(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=getValueByPath(t,["enableWidget"]);return r!=null&&setValueByPath(e,["enableWidget"],r),e}function googleSearchToMldev$3(t){const e={};if(getValueByPath(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(getValueByPath(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=getValueByPath(t,["timeRangeFilter"]);return r!=null&&setValueByPath(e,["timeRangeFilter"],r),e}function listCachedContentsConfigToMldev(t,e){const r={},xe=getValueByPath(t,["pageSize"]);e!==void 0&&xe!=null&&setValueByPath(e,["_query","pageSize"],xe);const Se=getValueByPath(t,["pageToken"]);return e!==void 0&&Se!=null&&setValueByPath(e,["_query","pageToken"],Se),r}function listCachedContentsConfigToVertex(t,e){const r={},xe=getValueByPath(t,["pageSize"]);e!==void 0&&xe!=null&&setValueByPath(e,["_query","pageSize"],xe);const Se=getValueByPath(t,["pageToken"]);return e!==void 0&&Se!=null&&setValueByPath(e,["_query","pageToken"],Se),r}function listCachedContentsParametersToMldev(t){const e={},r=getValueByPath(t,["config"]);return r!=null&&listCachedContentsConfigToMldev(r,e),e}function listCachedContentsParametersToVertex(t){const e={},r=getValueByPath(t,["config"]);return r!=null&&listCachedContentsConfigToVertex(r,e),e}function listCachedContentsResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["nextPageToken"]);xe!=null&&setValueByPath(e,["nextPageToken"],xe);const Se=getValueByPath(t,["cachedContents"]);if(Se!=null){let Ee=Se;Array.isArray(Ee)&&(Ee=Ee.map(Pe=>Pe)),setValueByPath(e,["cachedContents"],Ee)}return e}function listCachedContentsResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["nextPageToken"]);xe!=null&&setValueByPath(e,["nextPageToken"],xe);const Se=getValueByPath(t,["cachedContents"]);if(Se!=null){let Ee=Se;Array.isArray(Ee)&&(Ee=Ee.map(Pe=>Pe)),setValueByPath(e,["cachedContents"],Ee)}return e}function partToMldev$3(t){const e={},r=getValueByPath(t,["mediaResolution"]);r!=null&&setValueByPath(e,["mediaResolution"],r);const xe=getValueByPath(t,["codeExecutionResult"]);xe!=null&&setValueByPath(e,["codeExecutionResult"],xe);const Se=getValueByPath(t,["executableCode"]);Se!=null&&setValueByPath(e,["executableCode"],Se);const Ee=getValueByPath(t,["fileData"]);Ee!=null&&setValueByPath(e,["fileData"],fileDataToMldev$3(Ee));const Pe=getValueByPath(t,["functionCall"]);Pe!=null&&setValueByPath(e,["functionCall"],functionCallToMldev$3(Pe));const Ce=getValueByPath(t,["functionResponse"]);Ce!=null&&setValueByPath(e,["functionResponse"],Ce);const Re=getValueByPath(t,["inlineData"]);Re!=null&&setValueByPath(e,["inlineData"],blobToMldev$3(Re));const Be=getValueByPath(t,["text"]);Be!=null&&setValueByPath(e,["text"],Be);const Me=getValueByPath(t,["thought"]);Me!=null&&setValueByPath(e,["thought"],Me);const Ve=getValueByPath(t,["thoughtSignature"]);Ve!=null&&setValueByPath(e,["thoughtSignature"],Ve);const Fe=getValueByPath(t,["videoMetadata"]);return Fe!=null&&setValueByPath(e,["videoMetadata"],Fe),e}function toolConfigToMldev$1(t){const e={},r=getValueByPath(t,["functionCallingConfig"]);r!=null&&setValueByPath(e,["functionCallingConfig"],functionCallingConfigToMldev$1(r));const xe=getValueByPath(t,["retrievalConfig"]);return xe!=null&&setValueByPath(e,["retrievalConfig"],xe),e}function toolToMldev$3(t){const e={},r=getValueByPath(t,["functionDeclarations"]);if(r!=null){let Me=r;Array.isArray(Me)&&(Me=Me.map(Ve=>Ve)),setValueByPath(e,["functionDeclarations"],Me)}if(getValueByPath(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const xe=getValueByPath(t,["googleSearchRetrieval"]);xe!=null&&setValueByPath(e,["googleSearchRetrieval"],xe);const Se=getValueByPath(t,["computerUse"]);Se!=null&&setValueByPath(e,["computerUse"],Se);const Ee=getValueByPath(t,["fileSearch"]);Ee!=null&&setValueByPath(e,["fileSearch"],Ee);const Pe=getValueByPath(t,["codeExecution"]);if(Pe!=null&&setValueByPath(e,["codeExecution"],Pe),getValueByPath(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const Ce=getValueByPath(t,["googleMaps"]);Ce!=null&&setValueByPath(e,["googleMaps"],googleMapsToMldev$3(Ce));const Re=getValueByPath(t,["googleSearch"]);Re!=null&&setValueByPath(e,["googleSearch"],googleSearchToMldev$3(Re));const Be=getValueByPath(t,["urlContext"]);return Be!=null&&setValueByPath(e,["urlContext"],Be),e}function toolToVertex$2(t){const e={},r=getValueByPath(t,["functionDeclarations"]);if(r!=null){let Ve=r;Array.isArray(Ve)&&(Ve=Ve.map(Fe=>functionDeclarationToVertex$2(Fe))),setValueByPath(e,["functionDeclarations"],Ve)}const xe=getValueByPath(t,["retrieval"]);xe!=null&&setValueByPath(e,["retrieval"],xe);const Se=getValueByPath(t,["googleSearchRetrieval"]);Se!=null&&setValueByPath(e,["googleSearchRetrieval"],Se);const Ee=getValueByPath(t,["computerUse"]);if(Ee!=null&&setValueByPath(e,["computerUse"],Ee),getValueByPath(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const Pe=getValueByPath(t,["codeExecution"]);Pe!=null&&setValueByPath(e,["codeExecution"],Pe);const Ce=getValueByPath(t,["enterpriseWebSearch"]);Ce!=null&&setValueByPath(e,["enterpriseWebSearch"],Ce);const Re=getValueByPath(t,["googleMaps"]);Re!=null&&setValueByPath(e,["googleMaps"],Re);const Be=getValueByPath(t,["googleSearch"]);Be!=null&&setValueByPath(e,["googleSearch"],Be);const Me=getValueByPath(t,["urlContext"]);return Me!=null&&setValueByPath(e,["urlContext"],Me),e}function updateCachedContentConfigToMldev(t,e){const r={},xe=getValueByPath(t,["ttl"]);e!==void 0&&xe!=null&&setValueByPath(e,["ttl"],xe);const Se=getValueByPath(t,["expireTime"]);return e!==void 0&&Se!=null&&setValueByPath(e,["expireTime"],Se),r}function updateCachedContentConfigToVertex(t,e){const r={},xe=getValueByPath(t,["ttl"]);e!==void 0&&xe!=null&&setValueByPath(e,["ttl"],xe);const Se=getValueByPath(t,["expireTime"]);return e!==void 0&&Se!=null&&setValueByPath(e,["expireTime"],Se),r}function updateCachedContentParametersToMldev(t,e){const r={},xe=getValueByPath(e,["name"]);xe!=null&&setValueByPath(r,["_url","name"],tCachedContentName(t,xe));const Se=getValueByPath(e,["config"]);return Se!=null&&updateCachedContentConfigToMldev(Se,r),r}function updateCachedContentParametersToVertex(t,e){const r={},xe=getValueByPath(e,["name"]);xe!=null&&setValueByPath(r,["_url","name"],tCachedContentName(t,xe));const Se=getValueByPath(e,["config"]);return Se!=null&&updateCachedContentConfigToVertex(Se,r),r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Caches extends BaseModule{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Pager(PagedItem.PAGED_ITEM_CACHED_CONTENTS,xe=>this.listInternal(xe),await this.listInternal(r),r)}async create(e){var r,xe,Se,Ee;let Pe,Ce="",Re={};if(this.apiClient.isVertexAI()){const Be=createCachedContentParametersToVertex(this.apiClient,e);return Ce=formatMap("cachedContents",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Me=>Me.json()),Pe.then(Me=>Me)}else{const Be=createCachedContentParametersToMldev(this.apiClient,e);return Ce=formatMap("cachedContents",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(Se=e.config)===null||Se===void 0?void 0:Se.httpOptions,abortSignal:(Ee=e.config)===null||Ee===void 0?void 0:Ee.abortSignal}).then(Me=>Me.json()),Pe.then(Me=>Me)}}async get(e){var r,xe,Se,Ee;let Pe,Ce="",Re={};if(this.apiClient.isVertexAI()){const Be=getCachedContentParametersToVertex(this.apiClient,e);return Ce=formatMap("{name}",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Me=>Me.json()),Pe.then(Me=>Me)}else{const Be=getCachedContentParametersToMldev(this.apiClient,e);return Ce=formatMap("{name}",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(Se=e.config)===null||Se===void 0?void 0:Se.httpOptions,abortSignal:(Ee=e.config)===null||Ee===void 0?void 0:Ee.abortSignal}).then(Me=>Me.json()),Pe.then(Me=>Me)}}async delete(e){var r,xe,Se,Ee;let Pe,Ce="",Re={};if(this.apiClient.isVertexAI()){const Be=deleteCachedContentParametersToVertex(this.apiClient,e);return Ce=formatMap("{name}",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Me=>Me.json().then(Ve=>{const Fe=Ve;return Fe.sdkHttpResponse={headers:Me.headers},Fe})),Pe.then(Me=>{const Ve=deleteCachedContentResponseFromVertex(Me),Fe=new DeleteCachedContentResponse;return Object.assign(Fe,Ve),Fe})}else{const Be=deleteCachedContentParametersToMldev(this.apiClient,e);return Ce=formatMap("{name}",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"DELETE",httpOptions:(Se=e.config)===null||Se===void 0?void 0:Se.httpOptions,abortSignal:(Ee=e.config)===null||Ee===void 0?void 0:Ee.abortSignal}).then(Me=>Me.json().then(Ve=>{const Fe=Ve;return Fe.sdkHttpResponse={headers:Me.headers},Fe})),Pe.then(Me=>{const Ve=deleteCachedContentResponseFromMldev(Me),Fe=new DeleteCachedContentResponse;return Object.assign(Fe,Ve),Fe})}}async update(e){var r,xe,Se,Ee;let Pe,Ce="",Re={};if(this.apiClient.isVertexAI()){const Be=updateCachedContentParametersToVertex(this.apiClient,e);return Ce=formatMap("{name}",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Me=>Me.json()),Pe.then(Me=>Me)}else{const Be=updateCachedContentParametersToMldev(this.apiClient,e);return Ce=formatMap("{name}",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"PATCH",httpOptions:(Se=e.config)===null||Se===void 0?void 0:Se.httpOptions,abortSignal:(Ee=e.config)===null||Ee===void 0?void 0:Ee.abortSignal}).then(Me=>Me.json()),Pe.then(Me=>Me)}}async listInternal(e){var r,xe,Se,Ee;let Pe,Ce="",Re={};if(this.apiClient.isVertexAI()){const Be=listCachedContentsParametersToVertex(e);return Ce=formatMap("cachedContents",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Me=>Me.json().then(Ve=>{const Fe=Ve;return Fe.sdkHttpResponse={headers:Me.headers},Fe})),Pe.then(Me=>{const Ve=listCachedContentsResponseFromVertex(Me),Fe=new ListCachedContentsResponse;return Object.assign(Fe,Ve),Fe})}else{const Be=listCachedContentsParametersToMldev(e);return Ce=formatMap("cachedContents",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(Se=e.config)===null||Se===void 0?void 0:Se.httpOptions,abortSignal:(Ee=e.config)===null||Ee===void 0?void 0:Ee.abortSignal}).then(Me=>Me.json().then(Ve=>{const Fe=Ve;return Fe.sdkHttpResponse={headers:Me.headers},Fe})),Pe.then(Me=>{const Ve=listCachedContentsResponseFromMldev(Me),Fe=new ListCachedContentsResponse;return Object.assign(Fe,Ve),Fe})}}}function __rest(t,e){var r={};for(var xe in t)Object.prototype.hasOwnProperty.call(t,xe)&&e.indexOf(xe)<0&&(r[xe]=t[xe]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Se=0,xe=Object.getOwnPropertySymbols(t);Se<xe.length;Se++)e.indexOf(xe[Se])<0&&Object.prototype.propertyIsEnumerable.call(t,xe[Se])&&(r[xe[Se]]=t[xe[Se]]);return r}function __values(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],xe=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&xe>=t.length&&(t=void 0),{value:t&&t[xe++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function __await(t){return this instanceof __await?(this.v=t,this):new __await(t)}function __asyncGenerator(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xe=r.apply(t,e||[]),Se,Ee=[];return Se=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),Ce("next"),Ce("throw"),Ce("return",Pe),Se[Symbol.asyncIterator]=function(){return this},Se;function Pe(Ie){return function(qe){return Promise.resolve(qe).then(Ie,Ve)}}function Ce(Ie,qe){xe[Ie]&&(Se[Ie]=function(Ye){return new Promise(function(Xe,je){Ee.push([Ie,Ye,Xe,je])>1||Re(Ie,Ye)})},qe&&(Se[Ie]=qe(Se[Ie])))}function Re(Ie,qe){try{Be(xe[Ie](qe))}catch(Ye){Fe(Ee[0][3],Ye)}}function Be(Ie){Ie.value instanceof __await?Promise.resolve(Ie.value.v).then(Me,Ve):Fe(Ee[0][2],Ie)}function Me(Ie){Re("next",Ie)}function Ve(Ie){Re("throw",Ie)}function Fe(Ie,qe){Ie(qe),Ee.shift(),Ee.length&&Re(Ee[0][0],Ee[0][1])}}function __asyncValues(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},xe("next"),xe("throw"),xe("return"),r[Symbol.asyncIterator]=function(){return this},r);function xe(Ee){r[Ee]=t[Ee]&&function(Pe){return new Promise(function(Ce,Re){Pe=t[Ee](Pe),Se(Ce,Re,Pe.done,Pe.value)})}}function Se(Ee,Pe,Ce,Re){Promise.resolve(Re).then(function(Be){Ee({value:Be,done:Ce})},Pe)}}typeof SuppressedError=="function"&&SuppressedError;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function isValidResponse(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const r=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return r===void 0?!1:isValidContent(r)}function isValidContent(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function validateHistory(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function extractCuratedHistory(t){if(t===void 0||t.length===0)return[];const e=[],r=t.length;let xe=0;for(;xe<r;)if(t[xe].role==="user")e.push(t[xe]),xe++;else{const Se=[];let Ee=!0;for(;xe<r&&t[xe].role==="model";)Se.push(t[xe]),Ee&&!isValidContent(t[xe])&&(Ee=!1),xe++;Ee?e.push(...Se):e.pop()}return e}class Chats{constructor(e,r){this.modelsModule=e,this.apiClient=r}create(e){return new Chat(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Chat{constructor(e,r,xe,Se={},Ee=[]){this.apiClient=e,this.modelsModule=r,this.model=xe,this.config=Se,this.history=Ee,this.sendPromise=Promise.resolve(),validateHistory(Ee)}async sendMessage(e){var r;await this.sendPromise;const xe=tContent(e.message),Se=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(xe),config:(r=e.config)!==null&&r!==void 0?r:this.config});return this.sendPromise=(async()=>{var Ee,Pe,Ce;const Re=await Se,Be=(Pe=(Ee=Re.candidates)===null||Ee===void 0?void 0:Ee[0])===null||Pe===void 0?void 0:Pe.content,Me=Re.automaticFunctionCallingHistory,Ve=this.getHistory(!0).length;let Fe=[];Me!=null&&(Fe=(Ce=Me.slice(Ve))!==null&&Ce!==void 0?Ce:[]);const Ie=Be?[Be]:[];this.recordHistory(xe,Ie,Fe)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),Se}async sendMessageStream(e){var r;await this.sendPromise;const xe=tContent(e.message),Se=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(xe),config:(r=e.config)!==null&&r!==void 0?r:this.config});this.sendPromise=Se.then(()=>{}).catch(()=>{});const Ee=await Se;return this.processStreamResponse(Ee,xe)}getHistory(e=!1){const r=e?extractCuratedHistory(this.history):this.history;return structuredClone(r)}processStreamResponse(e,r){return __asyncGenerator(this,arguments,function*(){var Se,Ee,Pe,Ce,Re,Be;const Me=[];try{for(var Ve=!0,Fe=__asyncValues(e),Ie;Ie=yield __await(Fe.next()),Se=Ie.done,!Se;Ve=!0){Ce=Ie.value,Ve=!1;const qe=Ce;if(isValidResponse(qe)){const Ye=(Be=(Re=qe.candidates)===null||Re===void 0?void 0:Re[0])===null||Be===void 0?void 0:Be.content;Ye!==void 0&&Me.push(Ye)}yield yield __await(qe)}}catch(qe){Ee={error:qe}}finally{try{!Ve&&!Se&&(Pe=Fe.return)&&(yield __await(Pe.call(Fe)))}finally{if(Ee)throw Ee.error}}this.recordHistory(r,Me)})}recordHistory(e,r,xe){let Se=[];r.length>0&&r.every(Ee=>Ee.role!==void 0)?Se=r:Se.push({role:"model",parts:[]}),xe&&xe.length>0?this.history.push(...extractCuratedHistory(xe)):this.history.push(e),this.history.push(...Se)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ApiError extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ApiError.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function createFileParametersToMldev(t){const e={},r=getValueByPath(t,["file"]);return r!=null&&setValueByPath(e,["file"],r),e}function createFileResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);return r!=null&&setValueByPath(e,["sdkHttpResponse"],r),e}function deleteFileParametersToMldev(t){const e={},r=getValueByPath(t,["name"]);return r!=null&&setValueByPath(e,["_url","file"],tFileName(r)),e}function deleteFileResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);return r!=null&&setValueByPath(e,["sdkHttpResponse"],r),e}function getFileParametersToMldev(t){const e={},r=getValueByPath(t,["name"]);return r!=null&&setValueByPath(e,["_url","file"],tFileName(r)),e}function listFilesConfigToMldev(t,e){const r={},xe=getValueByPath(t,["pageSize"]);e!==void 0&&xe!=null&&setValueByPath(e,["_query","pageSize"],xe);const Se=getValueByPath(t,["pageToken"]);return e!==void 0&&Se!=null&&setValueByPath(e,["_query","pageToken"],Se),r}function listFilesParametersToMldev(t){const e={},r=getValueByPath(t,["config"]);return r!=null&&listFilesConfigToMldev(r,e),e}function listFilesResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["nextPageToken"]);xe!=null&&setValueByPath(e,["nextPageToken"],xe);const Se=getValueByPath(t,["files"]);if(Se!=null){let Ee=Se;Array.isArray(Ee)&&(Ee=Ee.map(Pe=>Pe)),setValueByPath(e,["files"],Ee)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Files extends BaseModule{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Pager(PagedItem.PAGED_ITEM_FILES,xe=>this.listInternal(xe),await this.listInternal(r),r)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(r=>r)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var r,xe;let Se,Ee="",Pe={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const Ce=listFilesParametersToMldev(e);return Ee=formatMap("files",Ce._url),Pe=Ce._query,delete Ce._url,delete Ce._query,Se=this.apiClient.request({path:Ee,queryParams:Pe,body:JSON.stringify(Ce),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Re=>Re.json().then(Be=>{const Me=Be;return Me.sdkHttpResponse={headers:Re.headers},Me})),Se.then(Re=>{const Be=listFilesResponseFromMldev(Re),Me=new ListFilesResponse;return Object.assign(Me,Be),Me})}}async createInternal(e){var r,xe;let Se,Ee="",Pe={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const Ce=createFileParametersToMldev(e);return Ee=formatMap("upload/v1beta/files",Ce._url),Pe=Ce._query,delete Ce._url,delete Ce._query,Se=this.apiClient.request({path:Ee,queryParams:Pe,body:JSON.stringify(Ce),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Re=>Re.json()),Se.then(Re=>{const Be=createFileResponseFromMldev(Re),Me=new CreateFileResponse;return Object.assign(Me,Be),Me})}}async get(e){var r,xe;let Se,Ee="",Pe={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const Ce=getFileParametersToMldev(e);return Ee=formatMap("files/{file}",Ce._url),Pe=Ce._query,delete Ce._url,delete Ce._query,Se=this.apiClient.request({path:Ee,queryParams:Pe,body:JSON.stringify(Ce),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Re=>Re.json()),Se.then(Re=>Re)}}async delete(e){var r,xe;let Se,Ee="",Pe={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const Ce=deleteFileParametersToMldev(e);return Ee=formatMap("files/{file}",Ce._url),Pe=Ce._query,delete Ce._url,delete Ce._query,Se=this.apiClient.request({path:Ee,queryParams:Pe,body:JSON.stringify(Ce),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Re=>Re.json().then(Be=>{const Me=Be;return Me.sdkHttpResponse={headers:Re.headers},Me})),Se.then(Re=>{const Be=deleteFileResponseFromMldev(Re),Me=new DeleteFileResponse;return Object.assign(Me,Be),Me})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function blobToMldev$2(t){const e={},r=getValueByPath(t,["data"]);if(r!=null&&setValueByPath(e,["data"],r),getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const xe=getValueByPath(t,["mimeType"]);return xe!=null&&setValueByPath(e,["mimeType"],xe),e}function contentToMldev$2(t){const e={},r=getValueByPath(t,["parts"]);if(r!=null){let Se=r;Array.isArray(Se)&&(Se=Se.map(Ee=>partToMldev$2(Ee))),setValueByPath(e,["parts"],Se)}const xe=getValueByPath(t,["role"]);return xe!=null&&setValueByPath(e,["role"],xe),e}function fileDataToMldev$2(t){const e={};if(getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=getValueByPath(t,["fileUri"]);r!=null&&setValueByPath(e,["fileUri"],r);const xe=getValueByPath(t,["mimeType"]);return xe!=null&&setValueByPath(e,["mimeType"],xe),e}function functionCallToMldev$2(t){const e={},r=getValueByPath(t,["id"]);r!=null&&setValueByPath(e,["id"],r);const xe=getValueByPath(t,["args"]);xe!=null&&setValueByPath(e,["args"],xe);const Se=getValueByPath(t,["name"]);if(Se!=null&&setValueByPath(e,["name"],Se),getValueByPath(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(getValueByPath(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function functionDeclarationToVertex$1(t){const e={};if(getValueByPath(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=getValueByPath(t,["description"]);r!=null&&setValueByPath(e,["description"],r);const xe=getValueByPath(t,["name"]);xe!=null&&setValueByPath(e,["name"],xe);const Se=getValueByPath(t,["parameters"]);Se!=null&&setValueByPath(e,["parameters"],Se);const Ee=getValueByPath(t,["parametersJsonSchema"]);Ee!=null&&setValueByPath(e,["parametersJsonSchema"],Ee);const Pe=getValueByPath(t,["response"]);Pe!=null&&setValueByPath(e,["response"],Pe);const Ce=getValueByPath(t,["responseJsonSchema"]);return Ce!=null&&setValueByPath(e,["responseJsonSchema"],Ce),e}function generationConfigToVertex$1(t){const e={},r=getValueByPath(t,["modelSelectionConfig"]);r!=null&&setValueByPath(e,["modelConfig"],r);const xe=getValueByPath(t,["responseJsonSchema"]);xe!=null&&setValueByPath(e,["responseJsonSchema"],xe);const Se=getValueByPath(t,["audioTimestamp"]);Se!=null&&setValueByPath(e,["audioTimestamp"],Se);const Ee=getValueByPath(t,["candidateCount"]);Ee!=null&&setValueByPath(e,["candidateCount"],Ee);const Pe=getValueByPath(t,["enableAffectiveDialog"]);Pe!=null&&setValueByPath(e,["enableAffectiveDialog"],Pe);const Ce=getValueByPath(t,["frequencyPenalty"]);Ce!=null&&setValueByPath(e,["frequencyPenalty"],Ce);const Re=getValueByPath(t,["logprobs"]);Re!=null&&setValueByPath(e,["logprobs"],Re);const Be=getValueByPath(t,["maxOutputTokens"]);Be!=null&&setValueByPath(e,["maxOutputTokens"],Be);const Me=getValueByPath(t,["mediaResolution"]);Me!=null&&setValueByPath(e,["mediaResolution"],Me);const Ve=getValueByPath(t,["presencePenalty"]);Ve!=null&&setValueByPath(e,["presencePenalty"],Ve);const Fe=getValueByPath(t,["responseLogprobs"]);Fe!=null&&setValueByPath(e,["responseLogprobs"],Fe);const Ie=getValueByPath(t,["responseMimeType"]);Ie!=null&&setValueByPath(e,["responseMimeType"],Ie);const qe=getValueByPath(t,["responseModalities"]);qe!=null&&setValueByPath(e,["responseModalities"],qe);const Ye=getValueByPath(t,["responseSchema"]);Ye!=null&&setValueByPath(e,["responseSchema"],Ye);const Xe=getValueByPath(t,["routingConfig"]);Xe!=null&&setValueByPath(e,["routingConfig"],Xe);const je=getValueByPath(t,["seed"]);je!=null&&setValueByPath(e,["seed"],je);const Qe=getValueByPath(t,["speechConfig"]);Qe!=null&&setValueByPath(e,["speechConfig"],Qe);const sn=getValueByPath(t,["stopSequences"]);sn!=null&&setValueByPath(e,["stopSequences"],sn);const cn=getValueByPath(t,["temperature"]);cn!=null&&setValueByPath(e,["temperature"],cn);const nn=getValueByPath(t,["thinkingConfig"]);nn!=null&&setValueByPath(e,["thinkingConfig"],nn);const an=getValueByPath(t,["topK"]);an!=null&&setValueByPath(e,["topK"],an);const Ze=getValueByPath(t,["topP"]);if(Ze!=null&&setValueByPath(e,["topP"],Ze),getValueByPath(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function googleMapsToMldev$2(t){const e={};if(getValueByPath(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=getValueByPath(t,["enableWidget"]);return r!=null&&setValueByPath(e,["enableWidget"],r),e}function googleSearchToMldev$2(t){const e={};if(getValueByPath(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(getValueByPath(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=getValueByPath(t,["timeRangeFilter"]);return r!=null&&setValueByPath(e,["timeRangeFilter"],r),e}function liveConnectConfigToMldev$1(t,e){const r={},xe=getValueByPath(t,["generationConfig"]);e!==void 0&&xe!=null&&setValueByPath(e,["setup","generationConfig"],xe);const Se=getValueByPath(t,["responseModalities"]);e!==void 0&&Se!=null&&setValueByPath(e,["setup","generationConfig","responseModalities"],Se);const Ee=getValueByPath(t,["temperature"]);e!==void 0&&Ee!=null&&setValueByPath(e,["setup","generationConfig","temperature"],Ee);const Pe=getValueByPath(t,["topP"]);e!==void 0&&Pe!=null&&setValueByPath(e,["setup","generationConfig","topP"],Pe);const Ce=getValueByPath(t,["topK"]);e!==void 0&&Ce!=null&&setValueByPath(e,["setup","generationConfig","topK"],Ce);const Re=getValueByPath(t,["maxOutputTokens"]);e!==void 0&&Re!=null&&setValueByPath(e,["setup","generationConfig","maxOutputTokens"],Re);const Be=getValueByPath(t,["mediaResolution"]);e!==void 0&&Be!=null&&setValueByPath(e,["setup","generationConfig","mediaResolution"],Be);const Me=getValueByPath(t,["seed"]);e!==void 0&&Me!=null&&setValueByPath(e,["setup","generationConfig","seed"],Me);const Ve=getValueByPath(t,["speechConfig"]);e!==void 0&&Ve!=null&&setValueByPath(e,["setup","generationConfig","speechConfig"],tLiveSpeechConfig(Ve));const Fe=getValueByPath(t,["thinkingConfig"]);e!==void 0&&Fe!=null&&setValueByPath(e,["setup","generationConfig","thinkingConfig"],Fe);const Ie=getValueByPath(t,["enableAffectiveDialog"]);e!==void 0&&Ie!=null&&setValueByPath(e,["setup","generationConfig","enableAffectiveDialog"],Ie);const qe=getValueByPath(t,["systemInstruction"]);e!==void 0&&qe!=null&&setValueByPath(e,["setup","systemInstruction"],contentToMldev$2(tContent(qe)));const Ye=getValueByPath(t,["tools"]);if(e!==void 0&&Ye!=null){let an=tTools(Ye);Array.isArray(an)&&(an=an.map(Ze=>toolToMldev$2(tTool(Ze)))),setValueByPath(e,["setup","tools"],an)}const Xe=getValueByPath(t,["sessionResumption"]);e!==void 0&&Xe!=null&&setValueByPath(e,["setup","sessionResumption"],sessionResumptionConfigToMldev$1(Xe));const je=getValueByPath(t,["inputAudioTranscription"]);e!==void 0&&je!=null&&setValueByPath(e,["setup","inputAudioTranscription"],je);const Qe=getValueByPath(t,["outputAudioTranscription"]);e!==void 0&&Qe!=null&&setValueByPath(e,["setup","outputAudioTranscription"],Qe);const sn=getValueByPath(t,["realtimeInputConfig"]);e!==void 0&&sn!=null&&setValueByPath(e,["setup","realtimeInputConfig"],sn);const cn=getValueByPath(t,["contextWindowCompression"]);e!==void 0&&cn!=null&&setValueByPath(e,["setup","contextWindowCompression"],cn);const nn=getValueByPath(t,["proactivity"]);if(e!==void 0&&nn!=null&&setValueByPath(e,["setup","proactivity"],nn),getValueByPath(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return r}function liveConnectConfigToVertex(t,e){const r={},xe=getValueByPath(t,["generationConfig"]);e!==void 0&&xe!=null&&setValueByPath(e,["setup","generationConfig"],generationConfigToVertex$1(xe));const Se=getValueByPath(t,["responseModalities"]);e!==void 0&&Se!=null&&setValueByPath(e,["setup","generationConfig","responseModalities"],Se);const Ee=getValueByPath(t,["temperature"]);e!==void 0&&Ee!=null&&setValueByPath(e,["setup","generationConfig","temperature"],Ee);const Pe=getValueByPath(t,["topP"]);e!==void 0&&Pe!=null&&setValueByPath(e,["setup","generationConfig","topP"],Pe);const Ce=getValueByPath(t,["topK"]);e!==void 0&&Ce!=null&&setValueByPath(e,["setup","generationConfig","topK"],Ce);const Re=getValueByPath(t,["maxOutputTokens"]);e!==void 0&&Re!=null&&setValueByPath(e,["setup","generationConfig","maxOutputTokens"],Re);const Be=getValueByPath(t,["mediaResolution"]);e!==void 0&&Be!=null&&setValueByPath(e,["setup","generationConfig","mediaResolution"],Be);const Me=getValueByPath(t,["seed"]);e!==void 0&&Me!=null&&setValueByPath(e,["setup","generationConfig","seed"],Me);const Ve=getValueByPath(t,["speechConfig"]);e!==void 0&&Ve!=null&&setValueByPath(e,["setup","generationConfig","speechConfig"],tLiveSpeechConfig(Ve));const Fe=getValueByPath(t,["thinkingConfig"]);e!==void 0&&Fe!=null&&setValueByPath(e,["setup","generationConfig","thinkingConfig"],Fe);const Ie=getValueByPath(t,["enableAffectiveDialog"]);e!==void 0&&Ie!=null&&setValueByPath(e,["setup","generationConfig","enableAffectiveDialog"],Ie);const qe=getValueByPath(t,["systemInstruction"]);e!==void 0&&qe!=null&&setValueByPath(e,["setup","systemInstruction"],tContent(qe));const Ye=getValueByPath(t,["tools"]);if(e!==void 0&&Ye!=null){let Ze=tTools(Ye);Array.isArray(Ze)&&(Ze=Ze.map(tn=>toolToVertex$1(tTool(tn)))),setValueByPath(e,["setup","tools"],Ze)}const Xe=getValueByPath(t,["sessionResumption"]);e!==void 0&&Xe!=null&&setValueByPath(e,["setup","sessionResumption"],Xe);const je=getValueByPath(t,["inputAudioTranscription"]);e!==void 0&&je!=null&&setValueByPath(e,["setup","inputAudioTranscription"],je);const Qe=getValueByPath(t,["outputAudioTranscription"]);e!==void 0&&Qe!=null&&setValueByPath(e,["setup","outputAudioTranscription"],Qe);const sn=getValueByPath(t,["realtimeInputConfig"]);e!==void 0&&sn!=null&&setValueByPath(e,["setup","realtimeInputConfig"],sn);const cn=getValueByPath(t,["contextWindowCompression"]);e!==void 0&&cn!=null&&setValueByPath(e,["setup","contextWindowCompression"],cn);const nn=getValueByPath(t,["proactivity"]);e!==void 0&&nn!=null&&setValueByPath(e,["setup","proactivity"],nn);const an=getValueByPath(t,["explicitVadSignal"]);return e!==void 0&&an!=null&&setValueByPath(e,["setup","explicitVadSignal"],an),r}function liveConnectParametersToMldev(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["setup","model"],tModel(t,xe));const Se=getValueByPath(e,["config"]);return Se!=null&&setValueByPath(r,["config"],liveConnectConfigToMldev$1(Se,r)),r}function liveConnectParametersToVertex(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["setup","model"],tModel(t,xe));const Se=getValueByPath(e,["config"]);return Se!=null&&setValueByPath(r,["config"],liveConnectConfigToVertex(Se,r)),r}function liveMusicSetConfigParametersToMldev(t){const e={},r=getValueByPath(t,["musicGenerationConfig"]);return r!=null&&setValueByPath(e,["musicGenerationConfig"],r),e}function liveMusicSetWeightedPromptsParametersToMldev(t){const e={},r=getValueByPath(t,["weightedPrompts"]);if(r!=null){let xe=r;Array.isArray(xe)&&(xe=xe.map(Se=>Se)),setValueByPath(e,["weightedPrompts"],xe)}return e}function liveSendRealtimeInputParametersToMldev(t){const e={},r=getValueByPath(t,["media"]);if(r!=null){let Be=tBlobs(r);Array.isArray(Be)&&(Be=Be.map(Me=>blobToMldev$2(Me))),setValueByPath(e,["mediaChunks"],Be)}const xe=getValueByPath(t,["audio"]);xe!=null&&setValueByPath(e,["audio"],blobToMldev$2(tAudioBlob(xe)));const Se=getValueByPath(t,["audioStreamEnd"]);Se!=null&&setValueByPath(e,["audioStreamEnd"],Se);const Ee=getValueByPath(t,["video"]);Ee!=null&&setValueByPath(e,["video"],blobToMldev$2(tImageBlob(Ee)));const Pe=getValueByPath(t,["text"]);Pe!=null&&setValueByPath(e,["text"],Pe);const Ce=getValueByPath(t,["activityStart"]);Ce!=null&&setValueByPath(e,["activityStart"],Ce);const Re=getValueByPath(t,["activityEnd"]);return Re!=null&&setValueByPath(e,["activityEnd"],Re),e}function liveSendRealtimeInputParametersToVertex(t){const e={},r=getValueByPath(t,["media"]);if(r!=null){let Be=tBlobs(r);Array.isArray(Be)&&(Be=Be.map(Me=>Me)),setValueByPath(e,["mediaChunks"],Be)}const xe=getValueByPath(t,["audio"]);xe!=null&&setValueByPath(e,["audio"],tAudioBlob(xe));const Se=getValueByPath(t,["audioStreamEnd"]);Se!=null&&setValueByPath(e,["audioStreamEnd"],Se);const Ee=getValueByPath(t,["video"]);Ee!=null&&setValueByPath(e,["video"],tImageBlob(Ee));const Pe=getValueByPath(t,["text"]);Pe!=null&&setValueByPath(e,["text"],Pe);const Ce=getValueByPath(t,["activityStart"]);Ce!=null&&setValueByPath(e,["activityStart"],Ce);const Re=getValueByPath(t,["activityEnd"]);return Re!=null&&setValueByPath(e,["activityEnd"],Re),e}function liveServerMessageFromVertex(t){const e={},r=getValueByPath(t,["setupComplete"]);r!=null&&setValueByPath(e,["setupComplete"],r);const xe=getValueByPath(t,["serverContent"]);xe!=null&&setValueByPath(e,["serverContent"],xe);const Se=getValueByPath(t,["toolCall"]);Se!=null&&setValueByPath(e,["toolCall"],Se);const Ee=getValueByPath(t,["toolCallCancellation"]);Ee!=null&&setValueByPath(e,["toolCallCancellation"],Ee);const Pe=getValueByPath(t,["usageMetadata"]);Pe!=null&&setValueByPath(e,["usageMetadata"],usageMetadataFromVertex(Pe));const Ce=getValueByPath(t,["goAway"]);Ce!=null&&setValueByPath(e,["goAway"],Ce);const Re=getValueByPath(t,["sessionResumptionUpdate"]);Re!=null&&setValueByPath(e,["sessionResumptionUpdate"],Re);const Be=getValueByPath(t,["voiceActivityDetectionSignal"]);return Be!=null&&setValueByPath(e,["voiceActivityDetectionSignal"],Be),e}function partToMldev$2(t){const e={},r=getValueByPath(t,["mediaResolution"]);r!=null&&setValueByPath(e,["mediaResolution"],r);const xe=getValueByPath(t,["codeExecutionResult"]);xe!=null&&setValueByPath(e,["codeExecutionResult"],xe);const Se=getValueByPath(t,["executableCode"]);Se!=null&&setValueByPath(e,["executableCode"],Se);const Ee=getValueByPath(t,["fileData"]);Ee!=null&&setValueByPath(e,["fileData"],fileDataToMldev$2(Ee));const Pe=getValueByPath(t,["functionCall"]);Pe!=null&&setValueByPath(e,["functionCall"],functionCallToMldev$2(Pe));const Ce=getValueByPath(t,["functionResponse"]);Ce!=null&&setValueByPath(e,["functionResponse"],Ce);const Re=getValueByPath(t,["inlineData"]);Re!=null&&setValueByPath(e,["inlineData"],blobToMldev$2(Re));const Be=getValueByPath(t,["text"]);Be!=null&&setValueByPath(e,["text"],Be);const Me=getValueByPath(t,["thought"]);Me!=null&&setValueByPath(e,["thought"],Me);const Ve=getValueByPath(t,["thoughtSignature"]);Ve!=null&&setValueByPath(e,["thoughtSignature"],Ve);const Fe=getValueByPath(t,["videoMetadata"]);return Fe!=null&&setValueByPath(e,["videoMetadata"],Fe),e}function sessionResumptionConfigToMldev$1(t){const e={},r=getValueByPath(t,["handle"]);if(r!=null&&setValueByPath(e,["handle"],r),getValueByPath(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function toolToMldev$2(t){const e={},r=getValueByPath(t,["functionDeclarations"]);if(r!=null){let Me=r;Array.isArray(Me)&&(Me=Me.map(Ve=>Ve)),setValueByPath(e,["functionDeclarations"],Me)}if(getValueByPath(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const xe=getValueByPath(t,["googleSearchRetrieval"]);xe!=null&&setValueByPath(e,["googleSearchRetrieval"],xe);const Se=getValueByPath(t,["computerUse"]);Se!=null&&setValueByPath(e,["computerUse"],Se);const Ee=getValueByPath(t,["fileSearch"]);Ee!=null&&setValueByPath(e,["fileSearch"],Ee);const Pe=getValueByPath(t,["codeExecution"]);if(Pe!=null&&setValueByPath(e,["codeExecution"],Pe),getValueByPath(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const Ce=getValueByPath(t,["googleMaps"]);Ce!=null&&setValueByPath(e,["googleMaps"],googleMapsToMldev$2(Ce));const Re=getValueByPath(t,["googleSearch"]);Re!=null&&setValueByPath(e,["googleSearch"],googleSearchToMldev$2(Re));const Be=getValueByPath(t,["urlContext"]);return Be!=null&&setValueByPath(e,["urlContext"],Be),e}function toolToVertex$1(t){const e={},r=getValueByPath(t,["functionDeclarations"]);if(r!=null){let Ve=r;Array.isArray(Ve)&&(Ve=Ve.map(Fe=>functionDeclarationToVertex$1(Fe))),setValueByPath(e,["functionDeclarations"],Ve)}const xe=getValueByPath(t,["retrieval"]);xe!=null&&setValueByPath(e,["retrieval"],xe);const Se=getValueByPath(t,["googleSearchRetrieval"]);Se!=null&&setValueByPath(e,["googleSearchRetrieval"],Se);const Ee=getValueByPath(t,["computerUse"]);if(Ee!=null&&setValueByPath(e,["computerUse"],Ee),getValueByPath(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const Pe=getValueByPath(t,["codeExecution"]);Pe!=null&&setValueByPath(e,["codeExecution"],Pe);const Ce=getValueByPath(t,["enterpriseWebSearch"]);Ce!=null&&setValueByPath(e,["enterpriseWebSearch"],Ce);const Re=getValueByPath(t,["googleMaps"]);Re!=null&&setValueByPath(e,["googleMaps"],Re);const Be=getValueByPath(t,["googleSearch"]);Be!=null&&setValueByPath(e,["googleSearch"],Be);const Me=getValueByPath(t,["urlContext"]);return Me!=null&&setValueByPath(e,["urlContext"],Me),e}function usageMetadataFromVertex(t){const e={},r=getValueByPath(t,["promptTokenCount"]);r!=null&&setValueByPath(e,["promptTokenCount"],r);const xe=getValueByPath(t,["cachedContentTokenCount"]);xe!=null&&setValueByPath(e,["cachedContentTokenCount"],xe);const Se=getValueByPath(t,["candidatesTokenCount"]);Se!=null&&setValueByPath(e,["responseTokenCount"],Se);const Ee=getValueByPath(t,["toolUsePromptTokenCount"]);Ee!=null&&setValueByPath(e,["toolUsePromptTokenCount"],Ee);const Pe=getValueByPath(t,["thoughtsTokenCount"]);Pe!=null&&setValueByPath(e,["thoughtsTokenCount"],Pe);const Ce=getValueByPath(t,["totalTokenCount"]);Ce!=null&&setValueByPath(e,["totalTokenCount"],Ce);const Re=getValueByPath(t,["promptTokensDetails"]);if(Re!=null){let Ie=Re;Array.isArray(Ie)&&(Ie=Ie.map(qe=>qe)),setValueByPath(e,["promptTokensDetails"],Ie)}const Be=getValueByPath(t,["cacheTokensDetails"]);if(Be!=null){let Ie=Be;Array.isArray(Ie)&&(Ie=Ie.map(qe=>qe)),setValueByPath(e,["cacheTokensDetails"],Ie)}const Me=getValueByPath(t,["candidatesTokensDetails"]);if(Me!=null){let Ie=Me;Array.isArray(Ie)&&(Ie=Ie.map(qe=>qe)),setValueByPath(e,["responseTokensDetails"],Ie)}const Ve=getValueByPath(t,["toolUsePromptTokensDetails"]);if(Ve!=null){let Ie=Ve;Array.isArray(Ie)&&(Ie=Ie.map(qe=>qe)),setValueByPath(e,["toolUsePromptTokensDetails"],Ie)}const Fe=getValueByPath(t,["trafficType"]);return Fe!=null&&setValueByPath(e,["trafficType"],Fe),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function blobToMldev$1(t){const e={},r=getValueByPath(t,["data"]);if(r!=null&&setValueByPath(e,["data"],r),getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const xe=getValueByPath(t,["mimeType"]);return xe!=null&&setValueByPath(e,["mimeType"],xe),e}function candidateFromMldev(t){const e={},r=getValueByPath(t,["content"]);r!=null&&setValueByPath(e,["content"],r);const xe=getValueByPath(t,["citationMetadata"]);xe!=null&&setValueByPath(e,["citationMetadata"],citationMetadataFromMldev(xe));const Se=getValueByPath(t,["tokenCount"]);Se!=null&&setValueByPath(e,["tokenCount"],Se);const Ee=getValueByPath(t,["finishReason"]);Ee!=null&&setValueByPath(e,["finishReason"],Ee);const Pe=getValueByPath(t,["avgLogprobs"]);Pe!=null&&setValueByPath(e,["avgLogprobs"],Pe);const Ce=getValueByPath(t,["groundingMetadata"]);Ce!=null&&setValueByPath(e,["groundingMetadata"],Ce);const Re=getValueByPath(t,["index"]);Re!=null&&setValueByPath(e,["index"],Re);const Be=getValueByPath(t,["logprobsResult"]);Be!=null&&setValueByPath(e,["logprobsResult"],Be);const Me=getValueByPath(t,["safetyRatings"]);if(Me!=null){let Fe=Me;Array.isArray(Fe)&&(Fe=Fe.map(Ie=>Ie)),setValueByPath(e,["safetyRatings"],Fe)}const Ve=getValueByPath(t,["urlContextMetadata"]);return Ve!=null&&setValueByPath(e,["urlContextMetadata"],Ve),e}function citationMetadataFromMldev(t){const e={},r=getValueByPath(t,["citationSources"]);if(r!=null){let xe=r;Array.isArray(xe)&&(xe=xe.map(Se=>Se)),setValueByPath(e,["citations"],xe)}return e}function computeTokensParametersToVertex(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Se=getValueByPath(e,["contents"]);if(Se!=null){let Ee=tContents(Se);Array.isArray(Ee)&&(Ee=Ee.map(Pe=>Pe)),setValueByPath(r,["contents"],Ee)}return r}function computeTokensResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["tokensInfo"]);if(xe!=null){let Se=xe;Array.isArray(Se)&&(Se=Se.map(Ee=>Ee)),setValueByPath(e,["tokensInfo"],Se)}return e}function contentEmbeddingFromVertex(t){const e={},r=getValueByPath(t,["values"]);r!=null&&setValueByPath(e,["values"],r);const xe=getValueByPath(t,["statistics"]);return xe!=null&&setValueByPath(e,["statistics"],contentEmbeddingStatisticsFromVertex(xe)),e}function contentEmbeddingStatisticsFromVertex(t){const e={},r=getValueByPath(t,["truncated"]);r!=null&&setValueByPath(e,["truncated"],r);const xe=getValueByPath(t,["token_count"]);return xe!=null&&setValueByPath(e,["tokenCount"],xe),e}function contentToMldev$1(t){const e={},r=getValueByPath(t,["parts"]);if(r!=null){let Se=r;Array.isArray(Se)&&(Se=Se.map(Ee=>partToMldev$1(Ee))),setValueByPath(e,["parts"],Se)}const xe=getValueByPath(t,["role"]);return xe!=null&&setValueByPath(e,["role"],xe),e}function controlReferenceConfigToVertex(t){const e={},r=getValueByPath(t,["controlType"]);r!=null&&setValueByPath(e,["controlType"],r);const xe=getValueByPath(t,["enableControlImageComputation"]);return xe!=null&&setValueByPath(e,["computeControl"],xe),e}function countTokensConfigToMldev(t){const e={};if(getValueByPath(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(getValueByPath(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(getValueByPath(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function countTokensConfigToVertex(t,e){const r={},xe=getValueByPath(t,["systemInstruction"]);e!==void 0&&xe!=null&&setValueByPath(e,["systemInstruction"],tContent(xe));const Se=getValueByPath(t,["tools"]);if(e!==void 0&&Se!=null){let Pe=Se;Array.isArray(Pe)&&(Pe=Pe.map(Ce=>toolToVertex(Ce))),setValueByPath(e,["tools"],Pe)}const Ee=getValueByPath(t,["generationConfig"]);return e!==void 0&&Ee!=null&&setValueByPath(e,["generationConfig"],generationConfigToVertex(Ee)),r}function countTokensParametersToMldev(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Se=getValueByPath(e,["contents"]);if(Se!=null){let Pe=tContents(Se);Array.isArray(Pe)&&(Pe=Pe.map(Ce=>contentToMldev$1(Ce))),setValueByPath(r,["contents"],Pe)}const Ee=getValueByPath(e,["config"]);return Ee!=null&&countTokensConfigToMldev(Ee),r}function countTokensParametersToVertex(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Se=getValueByPath(e,["contents"]);if(Se!=null){let Pe=tContents(Se);Array.isArray(Pe)&&(Pe=Pe.map(Ce=>Ce)),setValueByPath(r,["contents"],Pe)}const Ee=getValueByPath(e,["config"]);return Ee!=null&&countTokensConfigToVertex(Ee,r),r}function countTokensResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["totalTokens"]);xe!=null&&setValueByPath(e,["totalTokens"],xe);const Se=getValueByPath(t,["cachedContentTokenCount"]);return Se!=null&&setValueByPath(e,["cachedContentTokenCount"],Se),e}function countTokensResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["totalTokens"]);return xe!=null&&setValueByPath(e,["totalTokens"],xe),e}function deleteModelParametersToMldev(t,e){const r={},xe=getValueByPath(e,["model"]);return xe!=null&&setValueByPath(r,["_url","name"],tModel(t,xe)),r}function deleteModelParametersToVertex(t,e){const r={},xe=getValueByPath(e,["model"]);return xe!=null&&setValueByPath(r,["_url","name"],tModel(t,xe)),r}function deleteModelResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);return r!=null&&setValueByPath(e,["sdkHttpResponse"],r),e}function deleteModelResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);return r!=null&&setValueByPath(e,["sdkHttpResponse"],r),e}function editImageConfigToVertex(t,e){const r={},xe=getValueByPath(t,["outputGcsUri"]);e!==void 0&&xe!=null&&setValueByPath(e,["parameters","storageUri"],xe);const Se=getValueByPath(t,["negativePrompt"]);e!==void 0&&Se!=null&&setValueByPath(e,["parameters","negativePrompt"],Se);const Ee=getValueByPath(t,["numberOfImages"]);e!==void 0&&Ee!=null&&setValueByPath(e,["parameters","sampleCount"],Ee);const Pe=getValueByPath(t,["aspectRatio"]);e!==void 0&&Pe!=null&&setValueByPath(e,["parameters","aspectRatio"],Pe);const Ce=getValueByPath(t,["guidanceScale"]);e!==void 0&&Ce!=null&&setValueByPath(e,["parameters","guidanceScale"],Ce);const Re=getValueByPath(t,["seed"]);e!==void 0&&Re!=null&&setValueByPath(e,["parameters","seed"],Re);const Be=getValueByPath(t,["safetyFilterLevel"]);e!==void 0&&Be!=null&&setValueByPath(e,["parameters","safetySetting"],Be);const Me=getValueByPath(t,["personGeneration"]);e!==void 0&&Me!=null&&setValueByPath(e,["parameters","personGeneration"],Me);const Ve=getValueByPath(t,["includeSafetyAttributes"]);e!==void 0&&Ve!=null&&setValueByPath(e,["parameters","includeSafetyAttributes"],Ve);const Fe=getValueByPath(t,["includeRaiReason"]);e!==void 0&&Fe!=null&&setValueByPath(e,["parameters","includeRaiReason"],Fe);const Ie=getValueByPath(t,["language"]);e!==void 0&&Ie!=null&&setValueByPath(e,["parameters","language"],Ie);const qe=getValueByPath(t,["outputMimeType"]);e!==void 0&&qe!=null&&setValueByPath(e,["parameters","outputOptions","mimeType"],qe);const Ye=getValueByPath(t,["outputCompressionQuality"]);e!==void 0&&Ye!=null&&setValueByPath(e,["parameters","outputOptions","compressionQuality"],Ye);const Xe=getValueByPath(t,["addWatermark"]);e!==void 0&&Xe!=null&&setValueByPath(e,["parameters","addWatermark"],Xe);const je=getValueByPath(t,["labels"]);e!==void 0&&je!=null&&setValueByPath(e,["labels"],je);const Qe=getValueByPath(t,["editMode"]);e!==void 0&&Qe!=null&&setValueByPath(e,["parameters","editMode"],Qe);const sn=getValueByPath(t,["baseSteps"]);return e!==void 0&&sn!=null&&setValueByPath(e,["parameters","editConfig","baseSteps"],sn),r}function editImageParametersInternalToVertex(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Se=getValueByPath(e,["prompt"]);Se!=null&&setValueByPath(r,["instances[0]","prompt"],Se);const Ee=getValueByPath(e,["referenceImages"]);if(Ee!=null){let Ce=Ee;Array.isArray(Ce)&&(Ce=Ce.map(Re=>referenceImageAPIInternalToVertex(Re))),setValueByPath(r,["instances[0]","referenceImages"],Ce)}const Pe=getValueByPath(e,["config"]);return Pe!=null&&editImageConfigToVertex(Pe,r),r}function editImageResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["predictions"]);if(xe!=null){let Se=xe;Array.isArray(Se)&&(Se=Se.map(Ee=>generatedImageFromVertex(Ee))),setValueByPath(e,["generatedImages"],Se)}return e}function embedContentConfigToMldev(t,e){const r={},xe=getValueByPath(t,["taskType"]);e!==void 0&&xe!=null&&setValueByPath(e,["requests[]","taskType"],xe);const Se=getValueByPath(t,["title"]);e!==void 0&&Se!=null&&setValueByPath(e,["requests[]","title"],Se);const Ee=getValueByPath(t,["outputDimensionality"]);if(e!==void 0&&Ee!=null&&setValueByPath(e,["requests[]","outputDimensionality"],Ee),getValueByPath(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(getValueByPath(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function embedContentConfigToVertex(t,e){const r={},xe=getValueByPath(t,["taskType"]);e!==void 0&&xe!=null&&setValueByPath(e,["instances[]","task_type"],xe);const Se=getValueByPath(t,["title"]);e!==void 0&&Se!=null&&setValueByPath(e,["instances[]","title"],Se);const Ee=getValueByPath(t,["outputDimensionality"]);e!==void 0&&Ee!=null&&setValueByPath(e,["parameters","outputDimensionality"],Ee);const Pe=getValueByPath(t,["mimeType"]);e!==void 0&&Pe!=null&&setValueByPath(e,["instances[]","mimeType"],Pe);const Ce=getValueByPath(t,["autoTruncate"]);return e!==void 0&&Ce!=null&&setValueByPath(e,["parameters","autoTruncate"],Ce),r}function embedContentParametersToMldev(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Se=getValueByPath(e,["contents"]);if(Se!=null){let Ce=tContentsForEmbed(t,Se);Array.isArray(Ce)&&(Ce=Ce.map(Re=>Re)),setValueByPath(r,["requests[]","content"],Ce)}const Ee=getValueByPath(e,["config"]);Ee!=null&&embedContentConfigToMldev(Ee,r);const Pe=getValueByPath(e,["model"]);return Pe!==void 0&&setValueByPath(r,["requests[]","model"],tModel(t,Pe)),r}function embedContentParametersToVertex(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Se=getValueByPath(e,["contents"]);if(Se!=null){let Pe=tContentsForEmbed(t,Se);Array.isArray(Pe)&&(Pe=Pe.map(Ce=>Ce)),setValueByPath(r,["instances[]","content"],Pe)}const Ee=getValueByPath(e,["config"]);return Ee!=null&&embedContentConfigToVertex(Ee,r),r}function embedContentResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["embeddings"]);if(xe!=null){let Ee=xe;Array.isArray(Ee)&&(Ee=Ee.map(Pe=>Pe)),setValueByPath(e,["embeddings"],Ee)}const Se=getValueByPath(t,["metadata"]);return Se!=null&&setValueByPath(e,["metadata"],Se),e}function embedContentResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["predictions[]","embeddings"]);if(xe!=null){let Ee=xe;Array.isArray(Ee)&&(Ee=Ee.map(Pe=>contentEmbeddingFromVertex(Pe))),setValueByPath(e,["embeddings"],Ee)}const Se=getValueByPath(t,["metadata"]);return Se!=null&&setValueByPath(e,["metadata"],Se),e}function endpointFromVertex(t){const e={},r=getValueByPath(t,["endpoint"]);r!=null&&setValueByPath(e,["name"],r);const xe=getValueByPath(t,["deployedModelId"]);return xe!=null&&setValueByPath(e,["deployedModelId"],xe),e}function fileDataToMldev$1(t){const e={};if(getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=getValueByPath(t,["fileUri"]);r!=null&&setValueByPath(e,["fileUri"],r);const xe=getValueByPath(t,["mimeType"]);return xe!=null&&setValueByPath(e,["mimeType"],xe),e}function functionCallToMldev$1(t){const e={},r=getValueByPath(t,["id"]);r!=null&&setValueByPath(e,["id"],r);const xe=getValueByPath(t,["args"]);xe!=null&&setValueByPath(e,["args"],xe);const Se=getValueByPath(t,["name"]);if(Se!=null&&setValueByPath(e,["name"],Se),getValueByPath(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(getValueByPath(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function functionCallingConfigToMldev(t){const e={},r=getValueByPath(t,["mode"]);r!=null&&setValueByPath(e,["mode"],r);const xe=getValueByPath(t,["allowedFunctionNames"]);if(xe!=null&&setValueByPath(e,["allowedFunctionNames"],xe),getValueByPath(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function functionDeclarationToVertex(t){const e={};if(getValueByPath(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=getValueByPath(t,["description"]);r!=null&&setValueByPath(e,["description"],r);const xe=getValueByPath(t,["name"]);xe!=null&&setValueByPath(e,["name"],xe);const Se=getValueByPath(t,["parameters"]);Se!=null&&setValueByPath(e,["parameters"],Se);const Ee=getValueByPath(t,["parametersJsonSchema"]);Ee!=null&&setValueByPath(e,["parametersJsonSchema"],Ee);const Pe=getValueByPath(t,["response"]);Pe!=null&&setValueByPath(e,["response"],Pe);const Ce=getValueByPath(t,["responseJsonSchema"]);return Ce!=null&&setValueByPath(e,["responseJsonSchema"],Ce),e}function generateContentConfigToMldev(t,e,r){const xe={},Se=getValueByPath(e,["systemInstruction"]);r!==void 0&&Se!=null&&setValueByPath(r,["systemInstruction"],contentToMldev$1(tContent(Se)));const Ee=getValueByPath(e,["temperature"]);Ee!=null&&setValueByPath(xe,["temperature"],Ee);const Pe=getValueByPath(e,["topP"]);Pe!=null&&setValueByPath(xe,["topP"],Pe);const Ce=getValueByPath(e,["topK"]);Ce!=null&&setValueByPath(xe,["topK"],Ce);const Re=getValueByPath(e,["candidateCount"]);Re!=null&&setValueByPath(xe,["candidateCount"],Re);const Be=getValueByPath(e,["maxOutputTokens"]);Be!=null&&setValueByPath(xe,["maxOutputTokens"],Be);const Me=getValueByPath(e,["stopSequences"]);Me!=null&&setValueByPath(xe,["stopSequences"],Me);const Ve=getValueByPath(e,["responseLogprobs"]);Ve!=null&&setValueByPath(xe,["responseLogprobs"],Ve);const Fe=getValueByPath(e,["logprobs"]);Fe!=null&&setValueByPath(xe,["logprobs"],Fe);const Ie=getValueByPath(e,["presencePenalty"]);Ie!=null&&setValueByPath(xe,["presencePenalty"],Ie);const qe=getValueByPath(e,["frequencyPenalty"]);qe!=null&&setValueByPath(xe,["frequencyPenalty"],qe);const Ye=getValueByPath(e,["seed"]);Ye!=null&&setValueByPath(xe,["seed"],Ye);const Xe=getValueByPath(e,["responseMimeType"]);Xe!=null&&setValueByPath(xe,["responseMimeType"],Xe);const je=getValueByPath(e,["responseSchema"]);je!=null&&setValueByPath(xe,["responseSchema"],tSchema(je));const Qe=getValueByPath(e,["responseJsonSchema"]);if(Qe!=null&&setValueByPath(xe,["responseJsonSchema"],Qe),getValueByPath(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(getValueByPath(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const sn=getValueByPath(e,["safetySettings"]);if(r!==void 0&&sn!=null){let hn=sn;Array.isArray(hn)&&(hn=hn.map(_n=>safetySettingToMldev(_n))),setValueByPath(r,["safetySettings"],hn)}const cn=getValueByPath(e,["tools"]);if(r!==void 0&&cn!=null){let hn=tTools(cn);Array.isArray(hn)&&(hn=hn.map(_n=>toolToMldev$1(tTool(_n)))),setValueByPath(r,["tools"],hn)}const nn=getValueByPath(e,["toolConfig"]);if(r!==void 0&&nn!=null&&setValueByPath(r,["toolConfig"],toolConfigToMldev(nn)),getValueByPath(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const an=getValueByPath(e,["cachedContent"]);r!==void 0&&an!=null&&setValueByPath(r,["cachedContent"],tCachedContentName(t,an));const Ze=getValueByPath(e,["responseModalities"]);Ze!=null&&setValueByPath(xe,["responseModalities"],Ze);const tn=getValueByPath(e,["mediaResolution"]);tn!=null&&setValueByPath(xe,["mediaResolution"],tn);const We=getValueByPath(e,["speechConfig"]);if(We!=null&&setValueByPath(xe,["speechConfig"],tSpeechConfig(We)),getValueByPath(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const An=getValueByPath(e,["thinkingConfig"]);An!=null&&setValueByPath(xe,["thinkingConfig"],An);const Je=getValueByPath(e,["imageConfig"]);Je!=null&&setValueByPath(xe,["imageConfig"],imageConfigToMldev(Je));const St=getValueByPath(e,["enableEnhancedCivicAnswers"]);return St!=null&&setValueByPath(xe,["enableEnhancedCivicAnswers"],St),xe}function generateContentConfigToVertex(t,e,r){const xe={},Se=getValueByPath(e,["systemInstruction"]);r!==void 0&&Se!=null&&setValueByPath(r,["systemInstruction"],tContent(Se));const Ee=getValueByPath(e,["temperature"]);Ee!=null&&setValueByPath(xe,["temperature"],Ee);const Pe=getValueByPath(e,["topP"]);Pe!=null&&setValueByPath(xe,["topP"],Pe);const Ce=getValueByPath(e,["topK"]);Ce!=null&&setValueByPath(xe,["topK"],Ce);const Re=getValueByPath(e,["candidateCount"]);Re!=null&&setValueByPath(xe,["candidateCount"],Re);const Be=getValueByPath(e,["maxOutputTokens"]);Be!=null&&setValueByPath(xe,["maxOutputTokens"],Be);const Me=getValueByPath(e,["stopSequences"]);Me!=null&&setValueByPath(xe,["stopSequences"],Me);const Ve=getValueByPath(e,["responseLogprobs"]);Ve!=null&&setValueByPath(xe,["responseLogprobs"],Ve);const Fe=getValueByPath(e,["logprobs"]);Fe!=null&&setValueByPath(xe,["logprobs"],Fe);const Ie=getValueByPath(e,["presencePenalty"]);Ie!=null&&setValueByPath(xe,["presencePenalty"],Ie);const qe=getValueByPath(e,["frequencyPenalty"]);qe!=null&&setValueByPath(xe,["frequencyPenalty"],qe);const Ye=getValueByPath(e,["seed"]);Ye!=null&&setValueByPath(xe,["seed"],Ye);const Xe=getValueByPath(e,["responseMimeType"]);Xe!=null&&setValueByPath(xe,["responseMimeType"],Xe);const je=getValueByPath(e,["responseSchema"]);je!=null&&setValueByPath(xe,["responseSchema"],tSchema(je));const Qe=getValueByPath(e,["responseJsonSchema"]);Qe!=null&&setValueByPath(xe,["responseJsonSchema"],Qe);const sn=getValueByPath(e,["routingConfig"]);sn!=null&&setValueByPath(xe,["routingConfig"],sn);const cn=getValueByPath(e,["modelSelectionConfig"]);cn!=null&&setValueByPath(xe,["modelConfig"],cn);const nn=getValueByPath(e,["safetySettings"]);if(r!==void 0&&nn!=null){let mn=nn;Array.isArray(mn)&&(mn=mn.map(Sn=>Sn)),setValueByPath(r,["safetySettings"],mn)}const an=getValueByPath(e,["tools"]);if(r!==void 0&&an!=null){let mn=tTools(an);Array.isArray(mn)&&(mn=mn.map(Sn=>toolToVertex(tTool(Sn)))),setValueByPath(r,["tools"],mn)}const Ze=getValueByPath(e,["toolConfig"]);r!==void 0&&Ze!=null&&setValueByPath(r,["toolConfig"],Ze);const tn=getValueByPath(e,["labels"]);r!==void 0&&tn!=null&&setValueByPath(r,["labels"],tn);const We=getValueByPath(e,["cachedContent"]);r!==void 0&&We!=null&&setValueByPath(r,["cachedContent"],tCachedContentName(t,We));const An=getValueByPath(e,["responseModalities"]);An!=null&&setValueByPath(xe,["responseModalities"],An);const Je=getValueByPath(e,["mediaResolution"]);Je!=null&&setValueByPath(xe,["mediaResolution"],Je);const St=getValueByPath(e,["speechConfig"]);St!=null&&setValueByPath(xe,["speechConfig"],tSpeechConfig(St));const hn=getValueByPath(e,["audioTimestamp"]);hn!=null&&setValueByPath(xe,["audioTimestamp"],hn);const _n=getValueByPath(e,["thinkingConfig"]);_n!=null&&setValueByPath(xe,["thinkingConfig"],_n);const yn=getValueByPath(e,["imageConfig"]);if(yn!=null&&setValueByPath(xe,["imageConfig"],imageConfigToVertex(yn)),getValueByPath(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return xe}function generateContentParametersToMldev(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Se=getValueByPath(e,["contents"]);if(Se!=null){let Pe=tContents(Se);Array.isArray(Pe)&&(Pe=Pe.map(Ce=>contentToMldev$1(Ce))),setValueByPath(r,["contents"],Pe)}const Ee=getValueByPath(e,["config"]);return Ee!=null&&setValueByPath(r,["generationConfig"],generateContentConfigToMldev(t,Ee,r)),r}function generateContentParametersToVertex(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Se=getValueByPath(e,["contents"]);if(Se!=null){let Pe=tContents(Se);Array.isArray(Pe)&&(Pe=Pe.map(Ce=>Ce)),setValueByPath(r,["contents"],Pe)}const Ee=getValueByPath(e,["config"]);return Ee!=null&&setValueByPath(r,["generationConfig"],generateContentConfigToVertex(t,Ee,r)),r}function generateContentResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["candidates"]);if(xe!=null){let Re=xe;Array.isArray(Re)&&(Re=Re.map(Be=>candidateFromMldev(Be))),setValueByPath(e,["candidates"],Re)}const Se=getValueByPath(t,["modelVersion"]);Se!=null&&setValueByPath(e,["modelVersion"],Se);const Ee=getValueByPath(t,["promptFeedback"]);Ee!=null&&setValueByPath(e,["promptFeedback"],Ee);const Pe=getValueByPath(t,["responseId"]);Pe!=null&&setValueByPath(e,["responseId"],Pe);const Ce=getValueByPath(t,["usageMetadata"]);return Ce!=null&&setValueByPath(e,["usageMetadata"],Ce),e}function generateContentResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["candidates"]);if(xe!=null){let Be=xe;Array.isArray(Be)&&(Be=Be.map(Me=>Me)),setValueByPath(e,["candidates"],Be)}const Se=getValueByPath(t,["createTime"]);Se!=null&&setValueByPath(e,["createTime"],Se);const Ee=getValueByPath(t,["modelVersion"]);Ee!=null&&setValueByPath(e,["modelVersion"],Ee);const Pe=getValueByPath(t,["promptFeedback"]);Pe!=null&&setValueByPath(e,["promptFeedback"],Pe);const Ce=getValueByPath(t,["responseId"]);Ce!=null&&setValueByPath(e,["responseId"],Ce);const Re=getValueByPath(t,["usageMetadata"]);return Re!=null&&setValueByPath(e,["usageMetadata"],Re),e}function generateImagesConfigToMldev(t,e){const r={};if(getValueByPath(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(getValueByPath(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const xe=getValueByPath(t,["numberOfImages"]);e!==void 0&&xe!=null&&setValueByPath(e,["parameters","sampleCount"],xe);const Se=getValueByPath(t,["aspectRatio"]);e!==void 0&&Se!=null&&setValueByPath(e,["parameters","aspectRatio"],Se);const Ee=getValueByPath(t,["guidanceScale"]);if(e!==void 0&&Ee!=null&&setValueByPath(e,["parameters","guidanceScale"],Ee),getValueByPath(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const Pe=getValueByPath(t,["safetyFilterLevel"]);e!==void 0&&Pe!=null&&setValueByPath(e,["parameters","safetySetting"],Pe);const Ce=getValueByPath(t,["personGeneration"]);e!==void 0&&Ce!=null&&setValueByPath(e,["parameters","personGeneration"],Ce);const Re=getValueByPath(t,["includeSafetyAttributes"]);e!==void 0&&Re!=null&&setValueByPath(e,["parameters","includeSafetyAttributes"],Re);const Be=getValueByPath(t,["includeRaiReason"]);e!==void 0&&Be!=null&&setValueByPath(e,["parameters","includeRaiReason"],Be);const Me=getValueByPath(t,["language"]);e!==void 0&&Me!=null&&setValueByPath(e,["parameters","language"],Me);const Ve=getValueByPath(t,["outputMimeType"]);e!==void 0&&Ve!=null&&setValueByPath(e,["parameters","outputOptions","mimeType"],Ve);const Fe=getValueByPath(t,["outputCompressionQuality"]);if(e!==void 0&&Fe!=null&&setValueByPath(e,["parameters","outputOptions","compressionQuality"],Fe),getValueByPath(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(getValueByPath(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Ie=getValueByPath(t,["imageSize"]);if(e!==void 0&&Ie!=null&&setValueByPath(e,["parameters","sampleImageSize"],Ie),getValueByPath(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function generateImagesConfigToVertex(t,e){const r={},xe=getValueByPath(t,["outputGcsUri"]);e!==void 0&&xe!=null&&setValueByPath(e,["parameters","storageUri"],xe);const Se=getValueByPath(t,["negativePrompt"]);e!==void 0&&Se!=null&&setValueByPath(e,["parameters","negativePrompt"],Se);const Ee=getValueByPath(t,["numberOfImages"]);e!==void 0&&Ee!=null&&setValueByPath(e,["parameters","sampleCount"],Ee);const Pe=getValueByPath(t,["aspectRatio"]);e!==void 0&&Pe!=null&&setValueByPath(e,["parameters","aspectRatio"],Pe);const Ce=getValueByPath(t,["guidanceScale"]);e!==void 0&&Ce!=null&&setValueByPath(e,["parameters","guidanceScale"],Ce);const Re=getValueByPath(t,["seed"]);e!==void 0&&Re!=null&&setValueByPath(e,["parameters","seed"],Re);const Be=getValueByPath(t,["safetyFilterLevel"]);e!==void 0&&Be!=null&&setValueByPath(e,["parameters","safetySetting"],Be);const Me=getValueByPath(t,["personGeneration"]);e!==void 0&&Me!=null&&setValueByPath(e,["parameters","personGeneration"],Me);const Ve=getValueByPath(t,["includeSafetyAttributes"]);e!==void 0&&Ve!=null&&setValueByPath(e,["parameters","includeSafetyAttributes"],Ve);const Fe=getValueByPath(t,["includeRaiReason"]);e!==void 0&&Fe!=null&&setValueByPath(e,["parameters","includeRaiReason"],Fe);const Ie=getValueByPath(t,["language"]);e!==void 0&&Ie!=null&&setValueByPath(e,["parameters","language"],Ie);const qe=getValueByPath(t,["outputMimeType"]);e!==void 0&&qe!=null&&setValueByPath(e,["parameters","outputOptions","mimeType"],qe);const Ye=getValueByPath(t,["outputCompressionQuality"]);e!==void 0&&Ye!=null&&setValueByPath(e,["parameters","outputOptions","compressionQuality"],Ye);const Xe=getValueByPath(t,["addWatermark"]);e!==void 0&&Xe!=null&&setValueByPath(e,["parameters","addWatermark"],Xe);const je=getValueByPath(t,["labels"]);e!==void 0&&je!=null&&setValueByPath(e,["labels"],je);const Qe=getValueByPath(t,["imageSize"]);e!==void 0&&Qe!=null&&setValueByPath(e,["parameters","sampleImageSize"],Qe);const sn=getValueByPath(t,["enhancePrompt"]);return e!==void 0&&sn!=null&&setValueByPath(e,["parameters","enhancePrompt"],sn),r}function generateImagesParametersToMldev(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Se=getValueByPath(e,["prompt"]);Se!=null&&setValueByPath(r,["instances[0]","prompt"],Se);const Ee=getValueByPath(e,["config"]);return Ee!=null&&generateImagesConfigToMldev(Ee,r),r}function generateImagesParametersToVertex(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Se=getValueByPath(e,["prompt"]);Se!=null&&setValueByPath(r,["instances[0]","prompt"],Se);const Ee=getValueByPath(e,["config"]);return Ee!=null&&generateImagesConfigToVertex(Ee,r),r}function generateImagesResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["predictions"]);if(xe!=null){let Ee=xe;Array.isArray(Ee)&&(Ee=Ee.map(Pe=>generatedImageFromMldev(Pe))),setValueByPath(e,["generatedImages"],Ee)}const Se=getValueByPath(t,["positivePromptSafetyAttributes"]);return Se!=null&&setValueByPath(e,["positivePromptSafetyAttributes"],safetyAttributesFromMldev(Se)),e}function generateImagesResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["predictions"]);if(xe!=null){let Ee=xe;Array.isArray(Ee)&&(Ee=Ee.map(Pe=>generatedImageFromVertex(Pe))),setValueByPath(e,["generatedImages"],Ee)}const Se=getValueByPath(t,["positivePromptSafetyAttributes"]);return Se!=null&&setValueByPath(e,["positivePromptSafetyAttributes"],safetyAttributesFromVertex(Se)),e}function generateVideosConfigToMldev(t,e){const r={},xe=getValueByPath(t,["numberOfVideos"]);if(e!==void 0&&xe!=null&&setValueByPath(e,["parameters","sampleCount"],xe),getValueByPath(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(getValueByPath(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const Se=getValueByPath(t,["durationSeconds"]);if(e!==void 0&&Se!=null&&setValueByPath(e,["parameters","durationSeconds"],Se),getValueByPath(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const Ee=getValueByPath(t,["aspectRatio"]);e!==void 0&&Ee!=null&&setValueByPath(e,["parameters","aspectRatio"],Ee);const Pe=getValueByPath(t,["resolution"]);e!==void 0&&Pe!=null&&setValueByPath(e,["parameters","resolution"],Pe);const Ce=getValueByPath(t,["personGeneration"]);if(e!==void 0&&Ce!=null&&setValueByPath(e,["parameters","personGeneration"],Ce),getValueByPath(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const Re=getValueByPath(t,["negativePrompt"]);e!==void 0&&Re!=null&&setValueByPath(e,["parameters","negativePrompt"],Re);const Be=getValueByPath(t,["enhancePrompt"]);if(e!==void 0&&Be!=null&&setValueByPath(e,["parameters","enhancePrompt"],Be),getValueByPath(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const Me=getValueByPath(t,["lastFrame"]);e!==void 0&&Me!=null&&setValueByPath(e,["instances[0]","lastFrame"],imageToMldev(Me));const Ve=getValueByPath(t,["referenceImages"]);if(e!==void 0&&Ve!=null){let Fe=Ve;Array.isArray(Fe)&&(Fe=Fe.map(Ie=>videoGenerationReferenceImageToMldev(Ie))),setValueByPath(e,["instances[0]","referenceImages"],Fe)}if(getValueByPath(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(getValueByPath(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return r}function generateVideosConfigToVertex(t,e){const r={},xe=getValueByPath(t,["numberOfVideos"]);e!==void 0&&xe!=null&&setValueByPath(e,["parameters","sampleCount"],xe);const Se=getValueByPath(t,["outputGcsUri"]);e!==void 0&&Se!=null&&setValueByPath(e,["parameters","storageUri"],Se);const Ee=getValueByPath(t,["fps"]);e!==void 0&&Ee!=null&&setValueByPath(e,["parameters","fps"],Ee);const Pe=getValueByPath(t,["durationSeconds"]);e!==void 0&&Pe!=null&&setValueByPath(e,["parameters","durationSeconds"],Pe);const Ce=getValueByPath(t,["seed"]);e!==void 0&&Ce!=null&&setValueByPath(e,["parameters","seed"],Ce);const Re=getValueByPath(t,["aspectRatio"]);e!==void 0&&Re!=null&&setValueByPath(e,["parameters","aspectRatio"],Re);const Be=getValueByPath(t,["resolution"]);e!==void 0&&Be!=null&&setValueByPath(e,["parameters","resolution"],Be);const Me=getValueByPath(t,["personGeneration"]);e!==void 0&&Me!=null&&setValueByPath(e,["parameters","personGeneration"],Me);const Ve=getValueByPath(t,["pubsubTopic"]);e!==void 0&&Ve!=null&&setValueByPath(e,["parameters","pubsubTopic"],Ve);const Fe=getValueByPath(t,["negativePrompt"]);e!==void 0&&Fe!=null&&setValueByPath(e,["parameters","negativePrompt"],Fe);const Ie=getValueByPath(t,["enhancePrompt"]);e!==void 0&&Ie!=null&&setValueByPath(e,["parameters","enhancePrompt"],Ie);const qe=getValueByPath(t,["generateAudio"]);e!==void 0&&qe!=null&&setValueByPath(e,["parameters","generateAudio"],qe);const Ye=getValueByPath(t,["lastFrame"]);e!==void 0&&Ye!=null&&setValueByPath(e,["instances[0]","lastFrame"],imageToVertex(Ye));const Xe=getValueByPath(t,["referenceImages"]);if(e!==void 0&&Xe!=null){let sn=Xe;Array.isArray(sn)&&(sn=sn.map(cn=>videoGenerationReferenceImageToVertex(cn))),setValueByPath(e,["instances[0]","referenceImages"],sn)}const je=getValueByPath(t,["mask"]);e!==void 0&&je!=null&&setValueByPath(e,["instances[0]","mask"],videoGenerationMaskToVertex(je));const Qe=getValueByPath(t,["compressionQuality"]);return e!==void 0&&Qe!=null&&setValueByPath(e,["parameters","compressionQuality"],Qe),r}function generateVideosOperationFromMldev(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const xe=getValueByPath(t,["metadata"]);xe!=null&&setValueByPath(e,["metadata"],xe);const Se=getValueByPath(t,["done"]);Se!=null&&setValueByPath(e,["done"],Se);const Ee=getValueByPath(t,["error"]);Ee!=null&&setValueByPath(e,["error"],Ee);const Pe=getValueByPath(t,["response","generateVideoResponse"]);return Pe!=null&&setValueByPath(e,["response"],generateVideosResponseFromMldev(Pe)),e}function generateVideosOperationFromVertex(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const xe=getValueByPath(t,["metadata"]);xe!=null&&setValueByPath(e,["metadata"],xe);const Se=getValueByPath(t,["done"]);Se!=null&&setValueByPath(e,["done"],Se);const Ee=getValueByPath(t,["error"]);Ee!=null&&setValueByPath(e,["error"],Ee);const Pe=getValueByPath(t,["response"]);return Pe!=null&&setValueByPath(e,["response"],generateVideosResponseFromVertex(Pe)),e}function generateVideosParametersToMldev(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Se=getValueByPath(e,["prompt"]);Se!=null&&setValueByPath(r,["instances[0]","prompt"],Se);const Ee=getValueByPath(e,["image"]);Ee!=null&&setValueByPath(r,["instances[0]","image"],imageToMldev(Ee));const Pe=getValueByPath(e,["video"]);Pe!=null&&setValueByPath(r,["instances[0]","video"],videoToMldev(Pe));const Ce=getValueByPath(e,["source"]);Ce!=null&&generateVideosSourceToMldev(Ce,r);const Re=getValueByPath(e,["config"]);return Re!=null&&generateVideosConfigToMldev(Re,r),r}function generateVideosParametersToVertex(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Se=getValueByPath(e,["prompt"]);Se!=null&&setValueByPath(r,["instances[0]","prompt"],Se);const Ee=getValueByPath(e,["image"]);Ee!=null&&setValueByPath(r,["instances[0]","image"],imageToVertex(Ee));const Pe=getValueByPath(e,["video"]);Pe!=null&&setValueByPath(r,["instances[0]","video"],videoToVertex(Pe));const Ce=getValueByPath(e,["source"]);Ce!=null&&generateVideosSourceToVertex(Ce,r);const Re=getValueByPath(e,["config"]);return Re!=null&&generateVideosConfigToVertex(Re,r),r}function generateVideosResponseFromMldev(t){const e={},r=getValueByPath(t,["generatedSamples"]);if(r!=null){let Ee=r;Array.isArray(Ee)&&(Ee=Ee.map(Pe=>generatedVideoFromMldev(Pe))),setValueByPath(e,["generatedVideos"],Ee)}const xe=getValueByPath(t,["raiMediaFilteredCount"]);xe!=null&&setValueByPath(e,["raiMediaFilteredCount"],xe);const Se=getValueByPath(t,["raiMediaFilteredReasons"]);return Se!=null&&setValueByPath(e,["raiMediaFilteredReasons"],Se),e}function generateVideosResponseFromVertex(t){const e={},r=getValueByPath(t,["videos"]);if(r!=null){let Ee=r;Array.isArray(Ee)&&(Ee=Ee.map(Pe=>generatedVideoFromVertex(Pe))),setValueByPath(e,["generatedVideos"],Ee)}const xe=getValueByPath(t,["raiMediaFilteredCount"]);xe!=null&&setValueByPath(e,["raiMediaFilteredCount"],xe);const Se=getValueByPath(t,["raiMediaFilteredReasons"]);return Se!=null&&setValueByPath(e,["raiMediaFilteredReasons"],Se),e}function generateVideosSourceToMldev(t,e){const r={},xe=getValueByPath(t,["prompt"]);e!==void 0&&xe!=null&&setValueByPath(e,["instances[0]","prompt"],xe);const Se=getValueByPath(t,["image"]);e!==void 0&&Se!=null&&setValueByPath(e,["instances[0]","image"],imageToMldev(Se));const Ee=getValueByPath(t,["video"]);return e!==void 0&&Ee!=null&&setValueByPath(e,["instances[0]","video"],videoToMldev(Ee)),r}function generateVideosSourceToVertex(t,e){const r={},xe=getValueByPath(t,["prompt"]);e!==void 0&&xe!=null&&setValueByPath(e,["instances[0]","prompt"],xe);const Se=getValueByPath(t,["image"]);e!==void 0&&Se!=null&&setValueByPath(e,["instances[0]","image"],imageToVertex(Se));const Ee=getValueByPath(t,["video"]);return e!==void 0&&Ee!=null&&setValueByPath(e,["instances[0]","video"],videoToVertex(Ee)),r}function generatedImageFromMldev(t){const e={},r=getValueByPath(t,["_self"]);r!=null&&setValueByPath(e,["image"],imageFromMldev(r));const xe=getValueByPath(t,["raiFilteredReason"]);xe!=null&&setValueByPath(e,["raiFilteredReason"],xe);const Se=getValueByPath(t,["_self"]);return Se!=null&&setValueByPath(e,["safetyAttributes"],safetyAttributesFromMldev(Se)),e}function generatedImageFromVertex(t){const e={},r=getValueByPath(t,["_self"]);r!=null&&setValueByPath(e,["image"],imageFromVertex(r));const xe=getValueByPath(t,["raiFilteredReason"]);xe!=null&&setValueByPath(e,["raiFilteredReason"],xe);const Se=getValueByPath(t,["_self"]);Se!=null&&setValueByPath(e,["safetyAttributes"],safetyAttributesFromVertex(Se));const Ee=getValueByPath(t,["prompt"]);return Ee!=null&&setValueByPath(e,["enhancedPrompt"],Ee),e}function generatedImageMaskFromVertex(t){const e={},r=getValueByPath(t,["_self"]);r!=null&&setValueByPath(e,["mask"],imageFromVertex(r));const xe=getValueByPath(t,["labels"]);if(xe!=null){let Se=xe;Array.isArray(Se)&&(Se=Se.map(Ee=>Ee)),setValueByPath(e,["labels"],Se)}return e}function generatedVideoFromMldev(t){const e={},r=getValueByPath(t,["video"]);return r!=null&&setValueByPath(e,["video"],videoFromMldev(r)),e}function generatedVideoFromVertex(t){const e={},r=getValueByPath(t,["_self"]);return r!=null&&setValueByPath(e,["video"],videoFromVertex(r)),e}function generationConfigToVertex(t){const e={},r=getValueByPath(t,["modelSelectionConfig"]);r!=null&&setValueByPath(e,["modelConfig"],r);const xe=getValueByPath(t,["responseJsonSchema"]);xe!=null&&setValueByPath(e,["responseJsonSchema"],xe);const Se=getValueByPath(t,["audioTimestamp"]);Se!=null&&setValueByPath(e,["audioTimestamp"],Se);const Ee=getValueByPath(t,["candidateCount"]);Ee!=null&&setValueByPath(e,["candidateCount"],Ee);const Pe=getValueByPath(t,["enableAffectiveDialog"]);Pe!=null&&setValueByPath(e,["enableAffectiveDialog"],Pe);const Ce=getValueByPath(t,["frequencyPenalty"]);Ce!=null&&setValueByPath(e,["frequencyPenalty"],Ce);const Re=getValueByPath(t,["logprobs"]);Re!=null&&setValueByPath(e,["logprobs"],Re);const Be=getValueByPath(t,["maxOutputTokens"]);Be!=null&&setValueByPath(e,["maxOutputTokens"],Be);const Me=getValueByPath(t,["mediaResolution"]);Me!=null&&setValueByPath(e,["mediaResolution"],Me);const Ve=getValueByPath(t,["presencePenalty"]);Ve!=null&&setValueByPath(e,["presencePenalty"],Ve);const Fe=getValueByPath(t,["responseLogprobs"]);Fe!=null&&setValueByPath(e,["responseLogprobs"],Fe);const Ie=getValueByPath(t,["responseMimeType"]);Ie!=null&&setValueByPath(e,["responseMimeType"],Ie);const qe=getValueByPath(t,["responseModalities"]);qe!=null&&setValueByPath(e,["responseModalities"],qe);const Ye=getValueByPath(t,["responseSchema"]);Ye!=null&&setValueByPath(e,["responseSchema"],Ye);const Xe=getValueByPath(t,["routingConfig"]);Xe!=null&&setValueByPath(e,["routingConfig"],Xe);const je=getValueByPath(t,["seed"]);je!=null&&setValueByPath(e,["seed"],je);const Qe=getValueByPath(t,["speechConfig"]);Qe!=null&&setValueByPath(e,["speechConfig"],Qe);const sn=getValueByPath(t,["stopSequences"]);sn!=null&&setValueByPath(e,["stopSequences"],sn);const cn=getValueByPath(t,["temperature"]);cn!=null&&setValueByPath(e,["temperature"],cn);const nn=getValueByPath(t,["thinkingConfig"]);nn!=null&&setValueByPath(e,["thinkingConfig"],nn);const an=getValueByPath(t,["topK"]);an!=null&&setValueByPath(e,["topK"],an);const Ze=getValueByPath(t,["topP"]);if(Ze!=null&&setValueByPath(e,["topP"],Ze),getValueByPath(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function getModelParametersToMldev(t,e){const r={},xe=getValueByPath(e,["model"]);return xe!=null&&setValueByPath(r,["_url","name"],tModel(t,xe)),r}function getModelParametersToVertex(t,e){const r={},xe=getValueByPath(e,["model"]);return xe!=null&&setValueByPath(r,["_url","name"],tModel(t,xe)),r}function googleMapsToMldev$1(t){const e={};if(getValueByPath(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=getValueByPath(t,["enableWidget"]);return r!=null&&setValueByPath(e,["enableWidget"],r),e}function googleSearchToMldev$1(t){const e={};if(getValueByPath(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(getValueByPath(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=getValueByPath(t,["timeRangeFilter"]);return r!=null&&setValueByPath(e,["timeRangeFilter"],r),e}function imageConfigToMldev(t){const e={},r=getValueByPath(t,["aspectRatio"]);r!=null&&setValueByPath(e,["aspectRatio"],r);const xe=getValueByPath(t,["imageSize"]);if(xe!=null&&setValueByPath(e,["imageSize"],xe),getValueByPath(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(getValueByPath(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function imageConfigToVertex(t){const e={},r=getValueByPath(t,["aspectRatio"]);r!=null&&setValueByPath(e,["aspectRatio"],r);const xe=getValueByPath(t,["imageSize"]);xe!=null&&setValueByPath(e,["imageSize"],xe);const Se=getValueByPath(t,["outputMimeType"]);Se!=null&&setValueByPath(e,["imageOutputOptions","mimeType"],Se);const Ee=getValueByPath(t,["outputCompressionQuality"]);return Ee!=null&&setValueByPath(e,["imageOutputOptions","compressionQuality"],Ee),e}function imageFromMldev(t){const e={},r=getValueByPath(t,["bytesBase64Encoded"]);r!=null&&setValueByPath(e,["imageBytes"],tBytes(r));const xe=getValueByPath(t,["mimeType"]);return xe!=null&&setValueByPath(e,["mimeType"],xe),e}function imageFromVertex(t){const e={},r=getValueByPath(t,["gcsUri"]);r!=null&&setValueByPath(e,["gcsUri"],r);const xe=getValueByPath(t,["bytesBase64Encoded"]);xe!=null&&setValueByPath(e,["imageBytes"],tBytes(xe));const Se=getValueByPath(t,["mimeType"]);return Se!=null&&setValueByPath(e,["mimeType"],Se),e}function imageToMldev(t){const e={};if(getValueByPath(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=getValueByPath(t,["imageBytes"]);r!=null&&setValueByPath(e,["bytesBase64Encoded"],tBytes(r));const xe=getValueByPath(t,["mimeType"]);return xe!=null&&setValueByPath(e,["mimeType"],xe),e}function imageToVertex(t){const e={},r=getValueByPath(t,["gcsUri"]);r!=null&&setValueByPath(e,["gcsUri"],r);const xe=getValueByPath(t,["imageBytes"]);xe!=null&&setValueByPath(e,["bytesBase64Encoded"],tBytes(xe));const Se=getValueByPath(t,["mimeType"]);return Se!=null&&setValueByPath(e,["mimeType"],Se),e}function listModelsConfigToMldev(t,e,r){const xe={},Se=getValueByPath(e,["pageSize"]);r!==void 0&&Se!=null&&setValueByPath(r,["_query","pageSize"],Se);const Ee=getValueByPath(e,["pageToken"]);r!==void 0&&Ee!=null&&setValueByPath(r,["_query","pageToken"],Ee);const Pe=getValueByPath(e,["filter"]);r!==void 0&&Pe!=null&&setValueByPath(r,["_query","filter"],Pe);const Ce=getValueByPath(e,["queryBase"]);return r!==void 0&&Ce!=null&&setValueByPath(r,["_url","models_url"],tModelsUrl(t,Ce)),xe}function listModelsConfigToVertex(t,e,r){const xe={},Se=getValueByPath(e,["pageSize"]);r!==void 0&&Se!=null&&setValueByPath(r,["_query","pageSize"],Se);const Ee=getValueByPath(e,["pageToken"]);r!==void 0&&Ee!=null&&setValueByPath(r,["_query","pageToken"],Ee);const Pe=getValueByPath(e,["filter"]);r!==void 0&&Pe!=null&&setValueByPath(r,["_query","filter"],Pe);const Ce=getValueByPath(e,["queryBase"]);return r!==void 0&&Ce!=null&&setValueByPath(r,["_url","models_url"],tModelsUrl(t,Ce)),xe}function listModelsParametersToMldev(t,e){const r={},xe=getValueByPath(e,["config"]);return xe!=null&&listModelsConfigToMldev(t,xe,r),r}function listModelsParametersToVertex(t,e){const r={},xe=getValueByPath(e,["config"]);return xe!=null&&listModelsConfigToVertex(t,xe,r),r}function listModelsResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["nextPageToken"]);xe!=null&&setValueByPath(e,["nextPageToken"],xe);const Se=getValueByPath(t,["_self"]);if(Se!=null){let Ee=tExtractModels(Se);Array.isArray(Ee)&&(Ee=Ee.map(Pe=>modelFromMldev(Pe))),setValueByPath(e,["models"],Ee)}return e}function listModelsResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["nextPageToken"]);xe!=null&&setValueByPath(e,["nextPageToken"],xe);const Se=getValueByPath(t,["_self"]);if(Se!=null){let Ee=tExtractModels(Se);Array.isArray(Ee)&&(Ee=Ee.map(Pe=>modelFromVertex(Pe))),setValueByPath(e,["models"],Ee)}return e}function maskReferenceConfigToVertex(t){const e={},r=getValueByPath(t,["maskMode"]);r!=null&&setValueByPath(e,["maskMode"],r);const xe=getValueByPath(t,["segmentationClasses"]);xe!=null&&setValueByPath(e,["maskClasses"],xe);const Se=getValueByPath(t,["maskDilation"]);return Se!=null&&setValueByPath(e,["dilation"],Se),e}function modelFromMldev(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const xe=getValueByPath(t,["displayName"]);xe!=null&&setValueByPath(e,["displayName"],xe);const Se=getValueByPath(t,["description"]);Se!=null&&setValueByPath(e,["description"],Se);const Ee=getValueByPath(t,["version"]);Ee!=null&&setValueByPath(e,["version"],Ee);const Pe=getValueByPath(t,["_self"]);Pe!=null&&setValueByPath(e,["tunedModelInfo"],tunedModelInfoFromMldev(Pe));const Ce=getValueByPath(t,["inputTokenLimit"]);Ce!=null&&setValueByPath(e,["inputTokenLimit"],Ce);const Re=getValueByPath(t,["outputTokenLimit"]);Re!=null&&setValueByPath(e,["outputTokenLimit"],Re);const Be=getValueByPath(t,["supportedGenerationMethods"]);Be!=null&&setValueByPath(e,["supportedActions"],Be);const Me=getValueByPath(t,["temperature"]);Me!=null&&setValueByPath(e,["temperature"],Me);const Ve=getValueByPath(t,["maxTemperature"]);Ve!=null&&setValueByPath(e,["maxTemperature"],Ve);const Fe=getValueByPath(t,["topP"]);Fe!=null&&setValueByPath(e,["topP"],Fe);const Ie=getValueByPath(t,["topK"]);Ie!=null&&setValueByPath(e,["topK"],Ie);const qe=getValueByPath(t,["thinking"]);return qe!=null&&setValueByPath(e,["thinking"],qe),e}function modelFromVertex(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const xe=getValueByPath(t,["displayName"]);xe!=null&&setValueByPath(e,["displayName"],xe);const Se=getValueByPath(t,["description"]);Se!=null&&setValueByPath(e,["description"],Se);const Ee=getValueByPath(t,["versionId"]);Ee!=null&&setValueByPath(e,["version"],Ee);const Pe=getValueByPath(t,["deployedModels"]);if(Pe!=null){let Ve=Pe;Array.isArray(Ve)&&(Ve=Ve.map(Fe=>endpointFromVertex(Fe))),setValueByPath(e,["endpoints"],Ve)}const Ce=getValueByPath(t,["labels"]);Ce!=null&&setValueByPath(e,["labels"],Ce);const Re=getValueByPath(t,["_self"]);Re!=null&&setValueByPath(e,["tunedModelInfo"],tunedModelInfoFromVertex(Re));const Be=getValueByPath(t,["defaultCheckpointId"]);Be!=null&&setValueByPath(e,["defaultCheckpointId"],Be);const Me=getValueByPath(t,["checkpoints"]);if(Me!=null){let Ve=Me;Array.isArray(Ve)&&(Ve=Ve.map(Fe=>Fe)),setValueByPath(e,["checkpoints"],Ve)}return e}function partToMldev$1(t){const e={},r=getValueByPath(t,["mediaResolution"]);r!=null&&setValueByPath(e,["mediaResolution"],r);const xe=getValueByPath(t,["codeExecutionResult"]);xe!=null&&setValueByPath(e,["codeExecutionResult"],xe);const Se=getValueByPath(t,["executableCode"]);Se!=null&&setValueByPath(e,["executableCode"],Se);const Ee=getValueByPath(t,["fileData"]);Ee!=null&&setValueByPath(e,["fileData"],fileDataToMldev$1(Ee));const Pe=getValueByPath(t,["functionCall"]);Pe!=null&&setValueByPath(e,["functionCall"],functionCallToMldev$1(Pe));const Ce=getValueByPath(t,["functionResponse"]);Ce!=null&&setValueByPath(e,["functionResponse"],Ce);const Re=getValueByPath(t,["inlineData"]);Re!=null&&setValueByPath(e,["inlineData"],blobToMldev$1(Re));const Be=getValueByPath(t,["text"]);Be!=null&&setValueByPath(e,["text"],Be);const Me=getValueByPath(t,["thought"]);Me!=null&&setValueByPath(e,["thought"],Me);const Ve=getValueByPath(t,["thoughtSignature"]);Ve!=null&&setValueByPath(e,["thoughtSignature"],Ve);const Fe=getValueByPath(t,["videoMetadata"]);return Fe!=null&&setValueByPath(e,["videoMetadata"],Fe),e}function productImageToVertex(t){const e={},r=getValueByPath(t,["productImage"]);return r!=null&&setValueByPath(e,["image"],imageToVertex(r)),e}function recontextImageConfigToVertex(t,e){const r={},xe=getValueByPath(t,["numberOfImages"]);e!==void 0&&xe!=null&&setValueByPath(e,["parameters","sampleCount"],xe);const Se=getValueByPath(t,["baseSteps"]);e!==void 0&&Se!=null&&setValueByPath(e,["parameters","baseSteps"],Se);const Ee=getValueByPath(t,["outputGcsUri"]);e!==void 0&&Ee!=null&&setValueByPath(e,["parameters","storageUri"],Ee);const Pe=getValueByPath(t,["seed"]);e!==void 0&&Pe!=null&&setValueByPath(e,["parameters","seed"],Pe);const Ce=getValueByPath(t,["safetyFilterLevel"]);e!==void 0&&Ce!=null&&setValueByPath(e,["parameters","safetySetting"],Ce);const Re=getValueByPath(t,["personGeneration"]);e!==void 0&&Re!=null&&setValueByPath(e,["parameters","personGeneration"],Re);const Be=getValueByPath(t,["addWatermark"]);e!==void 0&&Be!=null&&setValueByPath(e,["parameters","addWatermark"],Be);const Me=getValueByPath(t,["outputMimeType"]);e!==void 0&&Me!=null&&setValueByPath(e,["parameters","outputOptions","mimeType"],Me);const Ve=getValueByPath(t,["outputCompressionQuality"]);e!==void 0&&Ve!=null&&setValueByPath(e,["parameters","outputOptions","compressionQuality"],Ve);const Fe=getValueByPath(t,["enhancePrompt"]);e!==void 0&&Fe!=null&&setValueByPath(e,["parameters","enhancePrompt"],Fe);const Ie=getValueByPath(t,["labels"]);return e!==void 0&&Ie!=null&&setValueByPath(e,["labels"],Ie),r}function recontextImageParametersToVertex(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Se=getValueByPath(e,["source"]);Se!=null&&recontextImageSourceToVertex(Se,r);const Ee=getValueByPath(e,["config"]);return Ee!=null&&recontextImageConfigToVertex(Ee,r),r}function recontextImageResponseFromVertex(t){const e={},r=getValueByPath(t,["predictions"]);if(r!=null){let xe=r;Array.isArray(xe)&&(xe=xe.map(Se=>generatedImageFromVertex(Se))),setValueByPath(e,["generatedImages"],xe)}return e}function recontextImageSourceToVertex(t,e){const r={},xe=getValueByPath(t,["prompt"]);e!==void 0&&xe!=null&&setValueByPath(e,["instances[0]","prompt"],xe);const Se=getValueByPath(t,["personImage"]);e!==void 0&&Se!=null&&setValueByPath(e,["instances[0]","personImage","image"],imageToVertex(Se));const Ee=getValueByPath(t,["productImages"]);if(e!==void 0&&Ee!=null){let Pe=Ee;Array.isArray(Pe)&&(Pe=Pe.map(Ce=>productImageToVertex(Ce))),setValueByPath(e,["instances[0]","productImages"],Pe)}return r}function referenceImageAPIInternalToVertex(t){const e={},r=getValueByPath(t,["referenceImage"]);r!=null&&setValueByPath(e,["referenceImage"],imageToVertex(r));const xe=getValueByPath(t,["referenceId"]);xe!=null&&setValueByPath(e,["referenceId"],xe);const Se=getValueByPath(t,["referenceType"]);Se!=null&&setValueByPath(e,["referenceType"],Se);const Ee=getValueByPath(t,["maskImageConfig"]);Ee!=null&&setValueByPath(e,["maskImageConfig"],maskReferenceConfigToVertex(Ee));const Pe=getValueByPath(t,["controlImageConfig"]);Pe!=null&&setValueByPath(e,["controlImageConfig"],controlReferenceConfigToVertex(Pe));const Ce=getValueByPath(t,["styleImageConfig"]);Ce!=null&&setValueByPath(e,["styleImageConfig"],Ce);const Re=getValueByPath(t,["subjectImageConfig"]);return Re!=null&&setValueByPath(e,["subjectImageConfig"],Re),e}function safetyAttributesFromMldev(t){const e={},r=getValueByPath(t,["safetyAttributes","categories"]);r!=null&&setValueByPath(e,["categories"],r);const xe=getValueByPath(t,["safetyAttributes","scores"]);xe!=null&&setValueByPath(e,["scores"],xe);const Se=getValueByPath(t,["contentType"]);return Se!=null&&setValueByPath(e,["contentType"],Se),e}function safetyAttributesFromVertex(t){const e={},r=getValueByPath(t,["safetyAttributes","categories"]);r!=null&&setValueByPath(e,["categories"],r);const xe=getValueByPath(t,["safetyAttributes","scores"]);xe!=null&&setValueByPath(e,["scores"],xe);const Se=getValueByPath(t,["contentType"]);return Se!=null&&setValueByPath(e,["contentType"],Se),e}function safetySettingToMldev(t){const e={},r=getValueByPath(t,["category"]);if(r!=null&&setValueByPath(e,["category"],r),getValueByPath(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const xe=getValueByPath(t,["threshold"]);return xe!=null&&setValueByPath(e,["threshold"],xe),e}function scribbleImageToVertex(t){const e={},r=getValueByPath(t,["image"]);return r!=null&&setValueByPath(e,["image"],imageToVertex(r)),e}function segmentImageConfigToVertex(t,e){const r={},xe=getValueByPath(t,["mode"]);e!==void 0&&xe!=null&&setValueByPath(e,["parameters","mode"],xe);const Se=getValueByPath(t,["maxPredictions"]);e!==void 0&&Se!=null&&setValueByPath(e,["parameters","maxPredictions"],Se);const Ee=getValueByPath(t,["confidenceThreshold"]);e!==void 0&&Ee!=null&&setValueByPath(e,["parameters","confidenceThreshold"],Ee);const Pe=getValueByPath(t,["maskDilation"]);e!==void 0&&Pe!=null&&setValueByPath(e,["parameters","maskDilation"],Pe);const Ce=getValueByPath(t,["binaryColorThreshold"]);e!==void 0&&Ce!=null&&setValueByPath(e,["parameters","binaryColorThreshold"],Ce);const Re=getValueByPath(t,["labels"]);return e!==void 0&&Re!=null&&setValueByPath(e,["labels"],Re),r}function segmentImageParametersToVertex(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Se=getValueByPath(e,["source"]);Se!=null&&segmentImageSourceToVertex(Se,r);const Ee=getValueByPath(e,["config"]);return Ee!=null&&segmentImageConfigToVertex(Ee,r),r}function segmentImageResponseFromVertex(t){const e={},r=getValueByPath(t,["predictions"]);if(r!=null){let xe=r;Array.isArray(xe)&&(xe=xe.map(Se=>generatedImageMaskFromVertex(Se))),setValueByPath(e,["generatedMasks"],xe)}return e}function segmentImageSourceToVertex(t,e){const r={},xe=getValueByPath(t,["prompt"]);e!==void 0&&xe!=null&&setValueByPath(e,["instances[0]","prompt"],xe);const Se=getValueByPath(t,["image"]);e!==void 0&&Se!=null&&setValueByPath(e,["instances[0]","image"],imageToVertex(Se));const Ee=getValueByPath(t,["scribbleImage"]);return e!==void 0&&Ee!=null&&setValueByPath(e,["instances[0]","scribble"],scribbleImageToVertex(Ee)),r}function toolConfigToMldev(t){const e={},r=getValueByPath(t,["functionCallingConfig"]);r!=null&&setValueByPath(e,["functionCallingConfig"],functionCallingConfigToMldev(r));const xe=getValueByPath(t,["retrievalConfig"]);return xe!=null&&setValueByPath(e,["retrievalConfig"],xe),e}function toolToMldev$1(t){const e={},r=getValueByPath(t,["functionDeclarations"]);if(r!=null){let Me=r;Array.isArray(Me)&&(Me=Me.map(Ve=>Ve)),setValueByPath(e,["functionDeclarations"],Me)}if(getValueByPath(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const xe=getValueByPath(t,["googleSearchRetrieval"]);xe!=null&&setValueByPath(e,["googleSearchRetrieval"],xe);const Se=getValueByPath(t,["computerUse"]);Se!=null&&setValueByPath(e,["computerUse"],Se);const Ee=getValueByPath(t,["fileSearch"]);Ee!=null&&setValueByPath(e,["fileSearch"],Ee);const Pe=getValueByPath(t,["codeExecution"]);if(Pe!=null&&setValueByPath(e,["codeExecution"],Pe),getValueByPath(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const Ce=getValueByPath(t,["googleMaps"]);Ce!=null&&setValueByPath(e,["googleMaps"],googleMapsToMldev$1(Ce));const Re=getValueByPath(t,["googleSearch"]);Re!=null&&setValueByPath(e,["googleSearch"],googleSearchToMldev$1(Re));const Be=getValueByPath(t,["urlContext"]);return Be!=null&&setValueByPath(e,["urlContext"],Be),e}function toolToVertex(t){const e={},r=getValueByPath(t,["functionDeclarations"]);if(r!=null){let Ve=r;Array.isArray(Ve)&&(Ve=Ve.map(Fe=>functionDeclarationToVertex(Fe))),setValueByPath(e,["functionDeclarations"],Ve)}const xe=getValueByPath(t,["retrieval"]);xe!=null&&setValueByPath(e,["retrieval"],xe);const Se=getValueByPath(t,["googleSearchRetrieval"]);Se!=null&&setValueByPath(e,["googleSearchRetrieval"],Se);const Ee=getValueByPath(t,["computerUse"]);if(Ee!=null&&setValueByPath(e,["computerUse"],Ee),getValueByPath(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const Pe=getValueByPath(t,["codeExecution"]);Pe!=null&&setValueByPath(e,["codeExecution"],Pe);const Ce=getValueByPath(t,["enterpriseWebSearch"]);Ce!=null&&setValueByPath(e,["enterpriseWebSearch"],Ce);const Re=getValueByPath(t,["googleMaps"]);Re!=null&&setValueByPath(e,["googleMaps"],Re);const Be=getValueByPath(t,["googleSearch"]);Be!=null&&setValueByPath(e,["googleSearch"],Be);const Me=getValueByPath(t,["urlContext"]);return Me!=null&&setValueByPath(e,["urlContext"],Me),e}function tunedModelInfoFromMldev(t){const e={},r=getValueByPath(t,["baseModel"]);r!=null&&setValueByPath(e,["baseModel"],r);const xe=getValueByPath(t,["createTime"]);xe!=null&&setValueByPath(e,["createTime"],xe);const Se=getValueByPath(t,["updateTime"]);return Se!=null&&setValueByPath(e,["updateTime"],Se),e}function tunedModelInfoFromVertex(t){const e={},r=getValueByPath(t,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&setValueByPath(e,["baseModel"],r);const xe=getValueByPath(t,["createTime"]);xe!=null&&setValueByPath(e,["createTime"],xe);const Se=getValueByPath(t,["updateTime"]);return Se!=null&&setValueByPath(e,["updateTime"],Se),e}function updateModelConfigToMldev(t,e){const r={},xe=getValueByPath(t,["displayName"]);e!==void 0&&xe!=null&&setValueByPath(e,["displayName"],xe);const Se=getValueByPath(t,["description"]);e!==void 0&&Se!=null&&setValueByPath(e,["description"],Se);const Ee=getValueByPath(t,["defaultCheckpointId"]);return e!==void 0&&Ee!=null&&setValueByPath(e,["defaultCheckpointId"],Ee),r}function updateModelConfigToVertex(t,e){const r={},xe=getValueByPath(t,["displayName"]);e!==void 0&&xe!=null&&setValueByPath(e,["displayName"],xe);const Se=getValueByPath(t,["description"]);e!==void 0&&Se!=null&&setValueByPath(e,["description"],Se);const Ee=getValueByPath(t,["defaultCheckpointId"]);return e!==void 0&&Ee!=null&&setValueByPath(e,["defaultCheckpointId"],Ee),r}function updateModelParametersToMldev(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","name"],tModel(t,xe));const Se=getValueByPath(e,["config"]);return Se!=null&&updateModelConfigToMldev(Se,r),r}function updateModelParametersToVertex(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Se=getValueByPath(e,["config"]);return Se!=null&&updateModelConfigToVertex(Se,r),r}function upscaleImageAPIConfigInternalToVertex(t,e){const r={},xe=getValueByPath(t,["outputGcsUri"]);e!==void 0&&xe!=null&&setValueByPath(e,["parameters","storageUri"],xe);const Se=getValueByPath(t,["safetyFilterLevel"]);e!==void 0&&Se!=null&&setValueByPath(e,["parameters","safetySetting"],Se);const Ee=getValueByPath(t,["personGeneration"]);e!==void 0&&Ee!=null&&setValueByPath(e,["parameters","personGeneration"],Ee);const Pe=getValueByPath(t,["includeRaiReason"]);e!==void 0&&Pe!=null&&setValueByPath(e,["parameters","includeRaiReason"],Pe);const Ce=getValueByPath(t,["outputMimeType"]);e!==void 0&&Ce!=null&&setValueByPath(e,["parameters","outputOptions","mimeType"],Ce);const Re=getValueByPath(t,["outputCompressionQuality"]);e!==void 0&&Re!=null&&setValueByPath(e,["parameters","outputOptions","compressionQuality"],Re);const Be=getValueByPath(t,["enhanceInputImage"]);e!==void 0&&Be!=null&&setValueByPath(e,["parameters","upscaleConfig","enhanceInputImage"],Be);const Me=getValueByPath(t,["imagePreservationFactor"]);e!==void 0&&Me!=null&&setValueByPath(e,["parameters","upscaleConfig","imagePreservationFactor"],Me);const Ve=getValueByPath(t,["labels"]);e!==void 0&&Ve!=null&&setValueByPath(e,["labels"],Ve);const Fe=getValueByPath(t,["numberOfImages"]);e!==void 0&&Fe!=null&&setValueByPath(e,["parameters","sampleCount"],Fe);const Ie=getValueByPath(t,["mode"]);return e!==void 0&&Ie!=null&&setValueByPath(e,["parameters","mode"],Ie),r}function upscaleImageAPIParametersInternalToVertex(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["_url","model"],tModel(t,xe));const Se=getValueByPath(e,["image"]);Se!=null&&setValueByPath(r,["instances[0]","image"],imageToVertex(Se));const Ee=getValueByPath(e,["upscaleFactor"]);Ee!=null&&setValueByPath(r,["parameters","upscaleConfig","upscaleFactor"],Ee);const Pe=getValueByPath(e,["config"]);return Pe!=null&&upscaleImageAPIConfigInternalToVertex(Pe,r),r}function upscaleImageResponseFromVertex(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["predictions"]);if(xe!=null){let Se=xe;Array.isArray(Se)&&(Se=Se.map(Ee=>generatedImageFromVertex(Ee))),setValueByPath(e,["generatedImages"],Se)}return e}function videoFromMldev(t){const e={},r=getValueByPath(t,["uri"]);r!=null&&setValueByPath(e,["uri"],r);const xe=getValueByPath(t,["encodedVideo"]);xe!=null&&setValueByPath(e,["videoBytes"],tBytes(xe));const Se=getValueByPath(t,["encoding"]);return Se!=null&&setValueByPath(e,["mimeType"],Se),e}function videoFromVertex(t){const e={},r=getValueByPath(t,["gcsUri"]);r!=null&&setValueByPath(e,["uri"],r);const xe=getValueByPath(t,["bytesBase64Encoded"]);xe!=null&&setValueByPath(e,["videoBytes"],tBytes(xe));const Se=getValueByPath(t,["mimeType"]);return Se!=null&&setValueByPath(e,["mimeType"],Se),e}function videoGenerationMaskToVertex(t){const e={},r=getValueByPath(t,["image"]);r!=null&&setValueByPath(e,["_self"],imageToVertex(r));const xe=getValueByPath(t,["maskMode"]);return xe!=null&&setValueByPath(e,["maskMode"],xe),e}function videoGenerationReferenceImageToMldev(t){const e={},r=getValueByPath(t,["image"]);r!=null&&setValueByPath(e,["image"],imageToMldev(r));const xe=getValueByPath(t,["referenceType"]);return xe!=null&&setValueByPath(e,["referenceType"],xe),e}function videoGenerationReferenceImageToVertex(t){const e={},r=getValueByPath(t,["image"]);r!=null&&setValueByPath(e,["image"],imageToVertex(r));const xe=getValueByPath(t,["referenceType"]);return xe!=null&&setValueByPath(e,["referenceType"],xe),e}function videoToMldev(t){const e={},r=getValueByPath(t,["uri"]);r!=null&&setValueByPath(e,["uri"],r);const xe=getValueByPath(t,["videoBytes"]);xe!=null&&setValueByPath(e,["encodedVideo"],tBytes(xe));const Se=getValueByPath(t,["mimeType"]);return Se!=null&&setValueByPath(e,["encoding"],Se),e}function videoToVertex(t){const e={},r=getValueByPath(t,["uri"]);r!=null&&setValueByPath(e,["gcsUri"],r);const xe=getValueByPath(t,["videoBytes"]);xe!=null&&setValueByPath(e,["bytesBase64Encoded"],tBytes(xe));const Se=getValueByPath(t,["mimeType"]);return Se!=null&&setValueByPath(e,["mimeType"],Se),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function createFileSearchStoreConfigToMldev(t,e){const r={},xe=getValueByPath(t,["displayName"]);return e!==void 0&&xe!=null&&setValueByPath(e,["displayName"],xe),r}function createFileSearchStoreParametersToMldev(t){const e={},r=getValueByPath(t,["config"]);return r!=null&&createFileSearchStoreConfigToMldev(r,e),e}function deleteFileSearchStoreConfigToMldev(t,e){const r={},xe=getValueByPath(t,["force"]);return e!==void 0&&xe!=null&&setValueByPath(e,["_query","force"],xe),r}function deleteFileSearchStoreParametersToMldev(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["_url","name"],r);const xe=getValueByPath(t,["config"]);return xe!=null&&deleteFileSearchStoreConfigToMldev(xe,e),e}function getFileSearchStoreParametersToMldev(t){const e={},r=getValueByPath(t,["name"]);return r!=null&&setValueByPath(e,["_url","name"],r),e}function importFileConfigToMldev(t,e){const r={},xe=getValueByPath(t,["customMetadata"]);if(e!==void 0&&xe!=null){let Ee=xe;Array.isArray(Ee)&&(Ee=Ee.map(Pe=>Pe)),setValueByPath(e,["customMetadata"],Ee)}const Se=getValueByPath(t,["chunkingConfig"]);return e!==void 0&&Se!=null&&setValueByPath(e,["chunkingConfig"],Se),r}function importFileOperationFromMldev(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["name"],r);const xe=getValueByPath(t,["metadata"]);xe!=null&&setValueByPath(e,["metadata"],xe);const Se=getValueByPath(t,["done"]);Se!=null&&setValueByPath(e,["done"],Se);const Ee=getValueByPath(t,["error"]);Ee!=null&&setValueByPath(e,["error"],Ee);const Pe=getValueByPath(t,["response"]);return Pe!=null&&setValueByPath(e,["response"],importFileResponseFromMldev(Pe)),e}function importFileParametersToMldev(t){const e={},r=getValueByPath(t,["fileSearchStoreName"]);r!=null&&setValueByPath(e,["_url","file_search_store_name"],r);const xe=getValueByPath(t,["fileName"]);xe!=null&&setValueByPath(e,["fileName"],xe);const Se=getValueByPath(t,["config"]);return Se!=null&&importFileConfigToMldev(Se,e),e}function importFileResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["parent"]);xe!=null&&setValueByPath(e,["parent"],xe);const Se=getValueByPath(t,["documentName"]);return Se!=null&&setValueByPath(e,["documentName"],Se),e}function listFileSearchStoresConfigToMldev(t,e){const r={},xe=getValueByPath(t,["pageSize"]);e!==void 0&&xe!=null&&setValueByPath(e,["_query","pageSize"],xe);const Se=getValueByPath(t,["pageToken"]);return e!==void 0&&Se!=null&&setValueByPath(e,["_query","pageToken"],Se),r}function listFileSearchStoresParametersToMldev(t){const e={},r=getValueByPath(t,["config"]);return r!=null&&listFileSearchStoresConfigToMldev(r,e),e}function listFileSearchStoresResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["nextPageToken"]);xe!=null&&setValueByPath(e,["nextPageToken"],xe);const Se=getValueByPath(t,["fileSearchStores"]);if(Se!=null){let Ee=Se;Array.isArray(Ee)&&(Ee=Ee.map(Pe=>Pe)),setValueByPath(e,["fileSearchStores"],Ee)}return e}function uploadToFileSearchStoreConfigToMldev(t,e){const r={},xe=getValueByPath(t,["mimeType"]);e!==void 0&&xe!=null&&setValueByPath(e,["mimeType"],xe);const Se=getValueByPath(t,["displayName"]);e!==void 0&&Se!=null&&setValueByPath(e,["displayName"],Se);const Ee=getValueByPath(t,["customMetadata"]);if(e!==void 0&&Ee!=null){let Ce=Ee;Array.isArray(Ce)&&(Ce=Ce.map(Re=>Re)),setValueByPath(e,["customMetadata"],Ce)}const Pe=getValueByPath(t,["chunkingConfig"]);return e!==void 0&&Pe!=null&&setValueByPath(e,["chunkingConfig"],Pe),r}function uploadToFileSearchStoreParametersToMldev(t){const e={},r=getValueByPath(t,["fileSearchStoreName"]);r!=null&&setValueByPath(e,["_url","file_search_store_name"],r);const xe=getValueByPath(t,["config"]);return xe!=null&&uploadToFileSearchStoreConfigToMldev(xe,e),e}function uploadToFileSearchStoreResumableResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);return r!=null&&setValueByPath(e,["sdkHttpResponse"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CONTENT_TYPE_HEADER="Content-Type",SERVER_TIMEOUT_HEADER="X-Server-Timeout",USER_AGENT_HEADER="User-Agent",GOOGLE_API_CLIENT_HEADER="x-goog-api-client",SDK_VERSION="1.34.0",LIBRARY_LABEL=`google-genai-sdk/${SDK_VERSION}`,VERTEX_AI_API_DEFAULT_VERSION="v1beta1",GOOGLE_AI_API_DEFAULT_VERSION="v1beta";class ApiClient{constructor(e){var r,xe;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const Se={};this.clientOptions.vertexai?(Se.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:VERTEX_AI_API_DEFAULT_VERSION,Se.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(Se.apiVersion=(xe=this.clientOptions.apiVersion)!==null&&xe!==void 0?xe:GOOGLE_AI_API_DEFAULT_VERSION,Se.baseUrl="https://generativelanguage.googleapis.com/"),Se.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=Se,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(Se,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const xe=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&xe.push(e.apiVersion),xe.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),r=new URL(e);return r.protocol=r.protocol=="http:"?"ws":"wss",r.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,r,xe){const Se=[this.getRequestUrlInternal(r)];return xe&&Se.push(this.getBaseResourcePath()),e!==""&&Se.push(e),new URL(`${Se.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const xe=this.shouldPrependVertexProjectPath(e),Se=this.constructUrl(e.path,r,xe);if(e.queryParams)for(const[Pe,Ce]of Object.entries(e.queryParams))Se.searchParams.append(Pe,String(Ce));let Ee={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else Ee.body=e.body;return Ee=await this.includeExtraHttpOptionsToRequestInit(Ee,r,Se.toString(),e.abortSignal),this.unaryApiCall(Se,Ee,e.httpMethod)}patchHttpOptions(e,r){const xe=JSON.parse(JSON.stringify(e));for(const[Se,Ee]of Object.entries(r))typeof Ee=="object"?xe[Se]=Object.assign(Object.assign({},xe[Se]),Ee):Ee!==void 0&&(xe[Se]=Ee);return xe}async requestStream(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const xe=this.shouldPrependVertexProjectPath(e),Se=this.constructUrl(e.path,r,xe);(!Se.searchParams.has("alt")||Se.searchParams.get("alt")!=="sse")&&Se.searchParams.set("alt","sse");let Ee={};return Ee.body=e.body,Ee=await this.includeExtraHttpOptionsToRequestInit(Ee,r,Se.toString(),e.abortSignal),this.streamApiCall(Se,Ee,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,r,xe,Se){if(r&&r.timeout||Se){const Ee=new AbortController,Pe=Ee.signal;if(r.timeout&&(r==null?void 0:r.timeout)>0){const Ce=setTimeout(()=>Ee.abort(),r.timeout);Ce&&typeof Ce.unref=="function"&&Ce.unref()}Se&&Se.addEventListener("abort",()=>{Ee.abort()}),e.signal=Pe}return r&&r.extraBody!==null&&includeExtraBodyToRequestInit(e,r.extraBody),e.headers=await this.getHeadersInternal(r,xe),e}async unaryApiCall(e,r,xe){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:xe})).then(async Se=>(await throwErrorIfNotOK(Se),new HttpResponse(Se))).catch(Se=>{throw Se instanceof Error?Se:new Error(JSON.stringify(Se))})}async streamApiCall(e,r,xe){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:xe})).then(async Se=>(await throwErrorIfNotOK(Se),this.processStreamResponse(Se))).catch(Se=>{throw Se instanceof Error?Se:new Error(JSON.stringify(Se))})}processStreamResponse(e){return __asyncGenerator(this,arguments,function*(){var xe;const Se=(xe=e==null?void 0:e.body)===null||xe===void 0?void 0:xe.getReader(),Ee=new TextDecoder("utf-8");if(!Se)throw new Error("Response body is empty");try{let Pe="";const Ce="data:",Re=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:Be,value:Me}=yield __await(Se.read());if(Be){if(Pe.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const Ve=Ee.decode(Me,{stream:!0});try{const qe=JSON.parse(Ve);if("error"in qe){const Ye=JSON.parse(JSON.stringify(qe.error)),Xe=Ye.status,je=Ye.code,Qe=`got status: ${Xe}. ${JSON.stringify(qe)}`;if(je>=400&&je<600)throw new ApiError({message:Qe,status:je})}}catch(qe){if(qe.name==="ApiError")throw qe}Pe+=Ve;let Fe=-1,Ie=0;for(;;){Fe=-1,Ie=0;for(const Xe of Re){const je=Pe.indexOf(Xe);je!==-1&&(Fe===-1||je<Fe)&&(Fe=je,Ie=Xe.length)}if(Fe===-1)break;const qe=Pe.substring(0,Fe);Pe=Pe.substring(Fe+Ie);const Ye=qe.trim();if(Ye.startsWith(Ce)){const Xe=Ye.substring(Ce.length).trim();try{const je=new Response(Xe,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield __await(new HttpResponse(je))}catch(je){throw new Error(`exception parsing stream chunk ${Xe}. ${je}`)}}}}}finally{Se.releaseLock()}})}async apiCall(e,r){return fetch(e,r).catch(xe=>{throw new Error(`exception ${xe} sending request`)})}getDefaultHeaders(){const e={},r=LIBRARY_LABEL+" "+this.clientOptions.userAgentExtra;return e[USER_AGENT_HEADER]=r,e[GOOGLE_API_CLIENT_HEADER]=r,e[CONTENT_TYPE_HEADER]="application/json",e}async getHeadersInternal(e,r){const xe=new Headers;if(e&&e.headers){for(const[Se,Ee]of Object.entries(e.headers))xe.append(Se,Ee);e.timeout&&e.timeout>0&&xe.append(SERVER_TIMEOUT_HEADER,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(xe,r),xe}getFileName(e){var r;let xe="";return typeof e=="string"&&(xe=e.replace(/[/\\]+$/,""),xe=(r=xe.split(/[/\\]/).pop())!==null&&r!==void 0?r:""),xe}async uploadFile(e,r){var xe;const Se={};r!=null&&(Se.mimeType=r.mimeType,Se.name=r.name,Se.displayName=r.displayName),Se.name&&!Se.name.startsWith("files/")&&(Se.name=`files/${Se.name}`);const Ee=this.clientOptions.uploader,Pe=await Ee.stat(e);Se.sizeBytes=String(Pe.size);const Ce=(xe=r==null?void 0:r.mimeType)!==null&&xe!==void 0?xe:Pe.type;if(Ce===void 0||Ce==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");Se.mimeType=Ce;const Re={file:Se},Be=this.getFileName(e),Me=formatMap("upload/v1beta/files",Re._url),Ve=await this.fetchUploadUrl(Me,Se.sizeBytes,Se.mimeType,Be,Re,r==null?void 0:r.httpOptions);return Ee.upload(e,Ve,this)}async uploadFileToFileSearchStore(e,r,xe){var Se;const Ee=this.clientOptions.uploader,Pe=await Ee.stat(r),Ce=String(Pe.size),Re=(Se=xe==null?void 0:xe.mimeType)!==null&&Se!==void 0?Se:Pe.type;if(Re===void 0||Re==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const Be=`upload/v1beta/${e}:uploadToFileSearchStore`,Me=this.getFileName(r),Ve={};xe!=null&&uploadToFileSearchStoreConfigToMldev(xe,Ve);const Fe=await this.fetchUploadUrl(Be,Ce,Re,Me,Ve,xe==null?void 0:xe.httpOptions);return Ee.uploadToFileSearchStore(r,Fe,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,r,xe,Se,Ee,Pe){var Ce;let Re={};Pe?Re=Pe:Re={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r}`,"X-Goog-Upload-Header-Content-Type":`${xe}`},Se?{"X-Goog-Upload-File-Name":Se}:{})};const Be=await this.request({path:e,body:JSON.stringify(Ee),httpMethod:"POST",httpOptions:Re});if(!Be||!(Be!=null&&Be.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const Me=(Ce=Be==null?void 0:Be.headers)===null||Ce===void 0?void 0:Ce["x-goog-upload-url"];if(Me===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return Me}}async function throwErrorIfNotOK(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const r=t.status;let xe;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?xe=await t.json():xe={error:{message:await t.text(),code:t.status,status:t.statusText}};const Se=JSON.stringify(xe);throw r>=400&&r<600?new ApiError({message:Se,status:r}):new Error(Se)}}function includeExtraBodyToRequestInit(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let r={};if(typeof t.body=="string"&&t.body.length>0)try{const Ee=JSON.parse(t.body);if(typeof Ee=="object"&&Ee!==null&&!Array.isArray(Ee))r=Ee;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function xe(Ee,Pe){const Ce=Object.assign({},Ee);for(const Re in Pe)if(Object.prototype.hasOwnProperty.call(Pe,Re)){const Be=Pe[Re],Me=Ce[Re];Be&&typeof Be=="object"&&!Array.isArray(Be)&&Me&&typeof Me=="object"&&!Array.isArray(Me)?Ce[Re]=xe(Me,Be):(Me&&Be&&typeof Me!=typeof Be&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${Re}". Original type: ${typeof Me}, New type: ${typeof Be}. Overwriting.`),Ce[Re]=Be)}return Ce}const Se=xe(r,e);t.body=JSON.stringify(Se)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MCP_LABEL="mcp_used/unknown";let hasMcpToolUsageFromMcpToTool=!1;function hasMcpToolUsage(t){for(const e of t)if(isMcpCallableTool(e)||typeof e=="object"&&"inputSchema"in e)return!0;return hasMcpToolUsageFromMcpToTool}function setMcpUsageHeader(t){var e;const r=(e=t[GOOGLE_API_CLIENT_HEADER])!==null&&e!==void 0?e:"";t[GOOGLE_API_CLIENT_HEADER]=(r+` ${MCP_LABEL}`).trimStart()}function isMcpCallableTool(t){return t!==null&&typeof t=="object"&&t instanceof McpCallableTool}function listAllTools(t){return __asyncGenerator(this,arguments,function*(r,xe=100){let Se,Ee=0;for(;Ee<xe;){const Pe=yield __await(r.listTools({cursor:Se}));for(const Ce of Pe.tools)yield yield __await(Ce),Ee++;if(!Pe.nextCursor)break;Se=Pe.nextCursor}})}class McpCallableTool{constructor(e=[],r){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=r}static create(e,r){return new McpCallableTool(e,r)}async initialize(){var e,r,xe,Se;if(this.mcpTools.length>0)return;const Ee={},Pe=[];for(const Me of this.mcpClients)try{for(var Ce=!0,Re=(r=void 0,__asyncValues(listAllTools(Me))),Be;Be=await Re.next(),e=Be.done,!e;Ce=!0){Se=Be.value,Ce=!1;const Ve=Se;Pe.push(Ve);const Fe=Ve.name;if(Ee[Fe])throw new Error(`Duplicate function name ${Fe} found in MCP tools. Please ensure function names are unique.`);Ee[Fe]=Me}}catch(Ve){r={error:Ve}}finally{try{!Ce&&!e&&(xe=Re.return)&&await xe.call(Re)}finally{if(r)throw r.error}}this.mcpTools=Pe,this.functionNameToMcpClient=Ee}async tool(){return await this.initialize(),mcpToolsToGeminiTool(this.mcpTools,this.config)}async callTool(e){await this.initialize();const r=[];for(const xe of e)if(xe.name in this.functionNameToMcpClient){const Se=this.functionNameToMcpClient[xe.name];let Ee;this.config.timeout&&(Ee={timeout:this.config.timeout});const Pe=await Se.callTool({name:xe.name,arguments:xe.args},void 0,Ee);r.push({functionResponse:{name:xe.name,response:Pe.isError?{error:Pe}:Pe}})}return r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function handleWebSocketMessage$1(t,e,r){const xe=new LiveMusicServerMessage;let Se;r.data instanceof Blob?Se=JSON.parse(await r.data.text()):Se=JSON.parse(r.data),Object.assign(xe,Se),e(xe)}class LiveMusic{constructor(e,r,xe){this.apiClient=e,this.auth=r,this.webSocketFactory=xe}async connect(e){var r,xe;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const Se=this.apiClient.getWebsocketBaseUrl(),Ee=this.apiClient.getApiVersion(),Pe=mapToHeaders$1(this.apiClient.getDefaultHeaders()),Ce=this.apiClient.getApiKey(),Re=`${Se}/ws/google.ai.generativelanguage.${Ee}.GenerativeService.BidiGenerateMusic?key=${Ce}`;let Be=()=>{};const Me=new Promise(sn=>{Be=sn}),Ve=e.callbacks,Fe=function(){Be({})},Ie=this.apiClient,qe={onopen:Fe,onmessage:sn=>{handleWebSocketMessage$1(Ie,Ve.onmessage,sn)},onerror:(r=Ve==null?void 0:Ve.onerror)!==null&&r!==void 0?r:function(sn){},onclose:(xe=Ve==null?void 0:Ve.onclose)!==null&&xe!==void 0?xe:function(sn){}},Ye=this.webSocketFactory.create(Re,headersToMap$1(Pe),qe);Ye.connect(),await Me;const Qe={setup:{model:tModel(this.apiClient,e.model)}};return Ye.send(JSON.stringify(Qe)),new LiveMusicSession(Ye,this.apiClient)}}class LiveMusicSession{constructor(e,r){this.conn=e,this.apiClient=r}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const r=liveMusicSetWeightedPromptsParametersToMldev(e);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const r=liveMusicSetConfigParametersToMldev(e);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){const r={playbackControl:e};this.conn.send(JSON.stringify(r))}play(){this.sendPlaybackControl(LiveMusicPlaybackControl.PLAY)}pause(){this.sendPlaybackControl(LiveMusicPlaybackControl.PAUSE)}stop(){this.sendPlaybackControl(LiveMusicPlaybackControl.STOP)}resetContext(){this.sendPlaybackControl(LiveMusicPlaybackControl.RESET_CONTEXT)}close(){this.conn.close()}}function headersToMap$1(t){const e={};return t.forEach((r,xe)=>{e[xe]=r}),e}function mapToHeaders$1(t){const e=new Headers;for(const[r,xe]of Object.entries(t))e.append(r,xe);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FUNCTION_RESPONSE_REQUIRES_ID="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function handleWebSocketMessage(t,e,r){const xe=new LiveServerMessage;let Se;r.data instanceof Blob?Se=await r.data.text():r.data instanceof ArrayBuffer?Se=new TextDecoder().decode(r.data):Se=r.data;const Ee=JSON.parse(Se);if(t.isVertexAI()){const Pe=liveServerMessageFromVertex(Ee);Object.assign(xe,Pe)}else Object.assign(xe,Ee);e(xe)}class Live{constructor(e,r,xe){this.apiClient=e,this.auth=r,this.webSocketFactory=xe,this.music=new LiveMusic(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var r,xe,Se,Ee,Pe,Ce;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const Re=this.apiClient.getWebsocketBaseUrl(),Be=this.apiClient.getApiVersion();let Me;const Ve=this.apiClient.getHeaders();e.config&&e.config.tools&&hasMcpToolUsage(e.config.tools)&&setMcpUsageHeader(Ve);const Fe=mapToHeaders(Ve);if(this.apiClient.isVertexAI())Me=`${Re}/ws/google.cloud.aiplatform.${Be}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(Fe,Me);else{const We=this.apiClient.getApiKey();let An="BidiGenerateContent",Je="key";We!=null&&We.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),Be!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),An="BidiGenerateContentConstrained",Je="access_token"),Me=`${Re}/ws/google.ai.generativelanguage.${Be}.GenerativeService.${An}?${Je}=${We}`}let Ie=()=>{};const qe=new Promise(We=>{Ie=We}),Ye=e.callbacks,Xe=function(){var We;(We=Ye==null?void 0:Ye.onopen)===null||We===void 0||We.call(Ye),Ie({})},je=this.apiClient,Qe={onopen:Xe,onmessage:We=>{handleWebSocketMessage(je,Ye.onmessage,We)},onerror:(r=Ye==null?void 0:Ye.onerror)!==null&&r!==void 0?r:function(We){},onclose:(xe=Ye==null?void 0:Ye.onclose)!==null&&xe!==void 0?xe:function(We){}},sn=this.webSocketFactory.create(Me,headersToMap(Fe),Qe);sn.connect(),await qe;let cn=tModel(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&cn.startsWith("publishers/")){const We=this.apiClient.getProject(),An=this.apiClient.getLocation();cn=`projects/${We}/locations/${An}/`+cn}let nn={};this.apiClient.isVertexAI()&&((Se=e.config)===null||Se===void 0?void 0:Se.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Modality.AUDIO]}:e.config.responseModalities=[Modality.AUDIO]),!((Ee=e.config)===null||Ee===void 0)&&Ee.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const an=(Ce=(Pe=e.config)===null||Pe===void 0?void 0:Pe.tools)!==null&&Ce!==void 0?Ce:[],Ze=[];for(const We of an)if(this.isCallableTool(We)){const An=We;Ze.push(await An.tool())}else Ze.push(We);Ze.length>0&&(e.config.tools=Ze);const tn={model:cn,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?nn=liveConnectParametersToVertex(this.apiClient,tn):nn=liveConnectParametersToMldev(this.apiClient,tn),delete nn.config,sn.send(JSON.stringify(nn)),new Session(sn,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const defaultLiveSendClientContentParamerters={turnComplete:!0};class Session{constructor(e,r){this.conn=e,this.apiClient=r}tLiveClientContent(e,r){if(r.turns!==null&&r.turns!==void 0){let xe=[];try{xe=tContents(r.turns),e.isVertexAI()||(xe=xe.map(Se=>contentToMldev$1(Se)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof r.turns}'`)}return{clientContent:{turns:xe,turnComplete:r.turnComplete}}}return{clientContent:{turnComplete:r.turnComplete}}}tLiveClienttToolResponse(e,r){let xe=[];if(r.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(r.functionResponses)?xe=r.functionResponses:xe=[r.functionResponses],xe.length===0)throw new Error("functionResponses is required.");for(const Ee of xe){if(typeof Ee!="object"||Ee===null||!("name"in Ee)||!("response"in Ee))throw new Error(`Could not parse function response, type '${typeof Ee}'.`);if(!e.isVertexAI()&&!("id"in Ee))throw new Error(FUNCTION_RESPONSE_REQUIRES_ID)}return{toolResponse:{functionResponses:xe}}}sendClientContent(e){e=Object.assign(Object.assign({},defaultLiveSendClientContentParamerters),e);const r=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(r))}sendRealtimeInput(e){let r={};this.apiClient.isVertexAI()?r={realtimeInput:liveSendRealtimeInputParametersToVertex(e)}:r={realtimeInput:liveSendRealtimeInputParametersToMldev(e)},this.conn.send(JSON.stringify(r))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const r=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(r))}close(){this.conn.close()}}function headersToMap(t){const e={};return t.forEach((r,xe)=>{e[xe]=r}),e}function mapToHeaders(t){const e=new Headers;for(const[r,xe]of Object.entries(t))e.append(r,xe);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DEFAULT_MAX_REMOTE_CALLS=10;function shouldDisableAfc(t){var e,r,xe;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let Se=!1;for(const Pe of(r=t==null?void 0:t.tools)!==null&&r!==void 0?r:[])if(isCallableTool(Pe)){Se=!0;break}if(!Se)return!0;const Ee=(xe=t==null?void 0:t.automaticFunctionCalling)===null||xe===void 0?void 0:xe.maximumRemoteCalls;return Ee&&(Ee<0||!Number.isInteger(Ee))||Ee==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",Ee),!0):!1}function isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}function hasCallableTools(t){var e,r,xe;return(xe=(r=(e=t.config)===null||e===void 0?void 0:e.tools)===null||r===void 0?void 0:r.some(Se=>isCallableTool(Se)))!==null&&xe!==void 0?xe:!1}function findAfcIncompatibleToolIndexes(t){var e;const r=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((xe,Se)=>{if(isCallableTool(xe))return;const Ee=xe;Ee.functionDeclarations&&Ee.functionDeclarations.length>0&&r.push(Se)}),r}function shouldAppendAfcHistory(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Models extends BaseModule{constructor(e){super(),this.apiClient=e,this.generateContent=async r=>{var xe,Se,Ee,Pe,Ce;const Re=await this.processParamsMaybeAddMcpUsage(r);if(this.maybeMoveToResponseJsonSchem(r),!hasCallableTools(r)||shouldDisableAfc(r.config))return await this.generateContentInternal(Re);const Be=findAfcIncompatibleToolIndexes(r);if(Be.length>0){const Ye=Be.map(Xe=>`tools[${Xe}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${Ye}.`)}let Me,Ve;const Fe=tContents(Re.contents),Ie=(Ee=(Se=(xe=Re.config)===null||xe===void 0?void 0:xe.automaticFunctionCalling)===null||Se===void 0?void 0:Se.maximumRemoteCalls)!==null&&Ee!==void 0?Ee:DEFAULT_MAX_REMOTE_CALLS;let qe=0;for(;qe<Ie&&(Me=await this.generateContentInternal(Re),!(!Me.functionCalls||Me.functionCalls.length===0));){const Ye=Me.candidates[0].content,Xe=[];for(const je of(Ce=(Pe=r.config)===null||Pe===void 0?void 0:Pe.tools)!==null&&Ce!==void 0?Ce:[])if(isCallableTool(je)){const sn=await je.callTool(Me.functionCalls);Xe.push(...sn)}qe++,Ve={role:"user",parts:Xe},Re.contents=tContents(Re.contents),Re.contents.push(Ye),Re.contents.push(Ve),shouldAppendAfcHistory(Re.config)&&(Fe.push(Ye),Fe.push(Ve))}return shouldAppendAfcHistory(Re.config)&&(Me.automaticFunctionCallingHistory=Fe),Me},this.generateContentStream=async r=>{var xe,Se,Ee,Pe,Ce;if(this.maybeMoveToResponseJsonSchem(r),shouldDisableAfc(r.config)){const Ve=await this.processParamsMaybeAddMcpUsage(r);return await this.generateContentStreamInternal(Ve)}const Re=findAfcIncompatibleToolIndexes(r);if(Re.length>0){const Ve=Re.map(Fe=>`tools[${Fe}]`).join(", ");throw new Error(`Incompatible tools found at ${Ve}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const Be=(Ee=(Se=(xe=r==null?void 0:r.config)===null||xe===void 0?void 0:xe.toolConfig)===null||Se===void 0?void 0:Se.functionCallingConfig)===null||Ee===void 0?void 0:Ee.streamFunctionCallArguments,Me=(Ce=(Pe=r==null?void 0:r.config)===null||Pe===void 0?void 0:Pe.automaticFunctionCalling)===null||Ce===void 0?void 0:Ce.disable;if(Be&&!Me)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(r)},this.generateImages=async r=>await this.generateImagesInternal(r).then(xe=>{var Se;let Ee;const Pe=[];if(xe!=null&&xe.generatedImages)for(const Re of xe.generatedImages)Re&&(Re!=null&&Re.safetyAttributes)&&((Se=Re==null?void 0:Re.safetyAttributes)===null||Se===void 0?void 0:Se.contentType)==="Positive Prompt"?Ee=Re==null?void 0:Re.safetyAttributes:Pe.push(Re);let Ce;return Ee?Ce={generatedImages:Pe,positivePromptSafetyAttributes:Ee,sdkHttpResponse:xe.sdkHttpResponse}:Ce={generatedImages:Pe,sdkHttpResponse:xe.sdkHttpResponse},Ce}),this.list=async r=>{var xe;const Pe={config:Object.assign(Object.assign({},{queryBase:!0}),r==null?void 0:r.config)};if(this.apiClient.isVertexAI()&&!Pe.config.queryBase){if(!((xe=Pe.config)===null||xe===void 0)&&xe.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");Pe.config.filter="labels.tune-type:*"}return new Pager(PagedItem.PAGED_ITEM_MODELS,Ce=>this.listInternal(Ce),await this.listInternal(Pe),Pe)},this.editImage=async r=>{const xe={model:r.model,prompt:r.prompt,referenceImages:[],config:r.config};return r.referenceImages&&r.referenceImages&&(xe.referenceImages=r.referenceImages.map(Se=>Se.toReferenceImageAPI())),await this.editImageInternal(xe)},this.upscaleImage=async r=>{let xe={numberOfImages:1,mode:"upscale"};r.config&&(xe=Object.assign(Object.assign({},xe),r.config));const Se={model:r.model,image:r.image,upscaleFactor:r.upscaleFactor,config:xe};return await this.upscaleImageInternal(Se)},this.generateVideos=async r=>{var xe,Se,Ee,Pe,Ce,Re;if((r.prompt||r.image||r.video)&&r.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((xe=r.video)===null||xe===void 0)&&xe.uri&&(!((Se=r.video)===null||Se===void 0)&&Se.videoBytes)?r.video={uri:r.video.uri,mimeType:r.video.mimeType}:!((Pe=(Ee=r.source)===null||Ee===void 0?void 0:Ee.video)===null||Pe===void 0)&&Pe.uri&&(!((Re=(Ce=r.source)===null||Ce===void 0?void 0:Ce.video)===null||Re===void 0)&&Re.videoBytes)&&(r.source.video={uri:r.source.video.uri,mimeType:r.source.video.mimeType})),await this.generateVideosInternal(r)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var r,xe,Se;const Ee=(r=e.config)===null||r===void 0?void 0:r.tools;if(!Ee)return e;const Pe=await Promise.all(Ee.map(async Re=>isCallableTool(Re)?await Re.tool():Re)),Ce={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:Pe})};if(Ce.config.tools=Pe,e.config&&e.config.tools&&hasMcpToolUsage(e.config.tools)){const Re=(Se=(xe=e.config.httpOptions)===null||xe===void 0?void 0:xe.headers)!==null&&Se!==void 0?Se:{};let Be=Object.assign({},Re);Object.keys(Be).length===0&&(Be=this.apiClient.getDefaultHeaders()),setMcpUsageHeader(Be),Ce.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:Be})}return Ce}async initAfcToolsMap(e){var r,xe,Se;const Ee=new Map;for(const Pe of(xe=(r=e.config)===null||r===void 0?void 0:r.tools)!==null&&xe!==void 0?xe:[])if(isCallableTool(Pe)){const Ce=Pe,Re=await Ce.tool();for(const Be of(Se=Re.functionDeclarations)!==null&&Se!==void 0?Se:[]){if(!Be.name)throw new Error("Function declaration name is required.");if(Ee.has(Be.name))throw new Error(`Duplicate tool declaration name: ${Be.name}`);Ee.set(Be.name,Ce)}}return Ee}async processAfcStream(e){var r,xe,Se;const Ee=(Se=(xe=(r=e.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||xe===void 0?void 0:xe.maximumRemoteCalls)!==null&&Se!==void 0?Se:DEFAULT_MAX_REMOTE_CALLS;let Pe=!1,Ce=0;const Re=await this.initAfcToolsMap(e);return(function(Be,Me,Ve){return __asyncGenerator(this,arguments,function*(){for(var Fe,Ie,qe,Ye,Xe,je;Ce<Ee;){Pe&&(Ce++,Pe=!1);const nn=yield __await(Be.processParamsMaybeAddMcpUsage(Ve)),an=yield __await(Be.generateContentStreamInternal(nn)),Ze=[],tn=[];try{for(var Qe=!0,sn=(Ie=void 0,__asyncValues(an)),cn;cn=yield __await(sn.next()),Fe=cn.done,!Fe;Qe=!0){Ye=cn.value,Qe=!1;const We=Ye;if(yield yield __await(We),We.candidates&&(!((Xe=We.candidates[0])===null||Xe===void 0)&&Xe.content)){tn.push(We.candidates[0].content);for(const An of(je=We.candidates[0].content.parts)!==null&&je!==void 0?je:[])if(Ce<Ee&&An.functionCall){if(!An.functionCall.name)throw new Error("Function call name was not returned by the model.");if(Me.has(An.functionCall.name)){const Je=yield __await(Me.get(An.functionCall.name).callTool([An.functionCall]));Ze.push(...Je)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${Me.keys()}, mising tool: ${An.functionCall.name}`)}}}}catch(We){Ie={error:We}}finally{try{!Qe&&!Fe&&(qe=sn.return)&&(yield __await(qe.call(sn)))}finally{if(Ie)throw Ie.error}}if(Ze.length>0){Pe=!0;const We=new GenerateContentResponse;We.candidates=[{content:{role:"user",parts:Ze}}],yield yield __await(We);const An=[];An.push(...tn),An.push({role:"user",parts:Ze});const Je=tContents(Ve.contents).concat(An);Ve.contents=Je}else break}})})(this,Re,e)}async generateContentInternal(e){var r,xe,Se,Ee;let Pe,Ce="",Re={};if(this.apiClient.isVertexAI()){const Be=generateContentParametersToVertex(this.apiClient,e);return Ce=formatMap("{model}:generateContent",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Me=>Me.json().then(Ve=>{const Fe=Ve;return Fe.sdkHttpResponse={headers:Me.headers},Fe})),Pe.then(Me=>{const Ve=generateContentResponseFromVertex(Me),Fe=new GenerateContentResponse;return Object.assign(Fe,Ve),Fe})}else{const Be=generateContentParametersToMldev(this.apiClient,e);return Ce=formatMap("{model}:generateContent",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(Se=e.config)===null||Se===void 0?void 0:Se.httpOptions,abortSignal:(Ee=e.config)===null||Ee===void 0?void 0:Ee.abortSignal}).then(Me=>Me.json().then(Ve=>{const Fe=Ve;return Fe.sdkHttpResponse={headers:Me.headers},Fe})),Pe.then(Me=>{const Ve=generateContentResponseFromMldev(Me),Fe=new GenerateContentResponse;return Object.assign(Fe,Ve),Fe})}}async generateContentStreamInternal(e){var r,xe,Se,Ee;let Pe,Ce="",Re={};if(this.apiClient.isVertexAI()){const Be=generateContentParametersToVertex(this.apiClient,e);return Ce=formatMap("{model}:streamGenerateContent?alt=sse",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.requestStream({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}),Pe.then(function(Ve){return __asyncGenerator(this,arguments,function*(){var Fe,Ie,qe,Ye;try{for(var Xe=!0,je=__asyncValues(Ve),Qe;Qe=yield __await(je.next()),Fe=Qe.done,!Fe;Xe=!0){Ye=Qe.value,Xe=!1;const sn=Ye,cn=generateContentResponseFromVertex(yield __await(sn.json()));cn.sdkHttpResponse={headers:sn.headers};const nn=new GenerateContentResponse;Object.assign(nn,cn),yield yield __await(nn)}}catch(sn){Ie={error:sn}}finally{try{!Xe&&!Fe&&(qe=je.return)&&(yield __await(qe.call(je)))}finally{if(Ie)throw Ie.error}}})})}else{const Be=generateContentParametersToMldev(this.apiClient,e);return Ce=formatMap("{model}:streamGenerateContent?alt=sse",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.requestStream({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(Se=e.config)===null||Se===void 0?void 0:Se.httpOptions,abortSignal:(Ee=e.config)===null||Ee===void 0?void 0:Ee.abortSignal}),Pe.then(function(Ve){return __asyncGenerator(this,arguments,function*(){var Fe,Ie,qe,Ye;try{for(var Xe=!0,je=__asyncValues(Ve),Qe;Qe=yield __await(je.next()),Fe=Qe.done,!Fe;Xe=!0){Ye=Qe.value,Xe=!1;const sn=Ye,cn=generateContentResponseFromMldev(yield __await(sn.json()));cn.sdkHttpResponse={headers:sn.headers};const nn=new GenerateContentResponse;Object.assign(nn,cn),yield yield __await(nn)}}catch(sn){Ie={error:sn}}finally{try{!Xe&&!Fe&&(qe=je.return)&&(yield __await(qe.call(je)))}finally{if(Ie)throw Ie.error}}})})}}async embedContent(e){var r,xe,Se,Ee;let Pe,Ce="",Re={};if(this.apiClient.isVertexAI()){const Be=embedContentParametersToVertex(this.apiClient,e);return Ce=formatMap("{model}:predict",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Me=>Me.json().then(Ve=>{const Fe=Ve;return Fe.sdkHttpResponse={headers:Me.headers},Fe})),Pe.then(Me=>{const Ve=embedContentResponseFromVertex(Me),Fe=new EmbedContentResponse;return Object.assign(Fe,Ve),Fe})}else{const Be=embedContentParametersToMldev(this.apiClient,e);return Ce=formatMap("{model}:batchEmbedContents",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(Se=e.config)===null||Se===void 0?void 0:Se.httpOptions,abortSignal:(Ee=e.config)===null||Ee===void 0?void 0:Ee.abortSignal}).then(Me=>Me.json().then(Ve=>{const Fe=Ve;return Fe.sdkHttpResponse={headers:Me.headers},Fe})),Pe.then(Me=>{const Ve=embedContentResponseFromMldev(Me),Fe=new EmbedContentResponse;return Object.assign(Fe,Ve),Fe})}}async generateImagesInternal(e){var r,xe,Se,Ee;let Pe,Ce="",Re={};if(this.apiClient.isVertexAI()){const Be=generateImagesParametersToVertex(this.apiClient,e);return Ce=formatMap("{model}:predict",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Me=>Me.json().then(Ve=>{const Fe=Ve;return Fe.sdkHttpResponse={headers:Me.headers},Fe})),Pe.then(Me=>{const Ve=generateImagesResponseFromVertex(Me),Fe=new GenerateImagesResponse;return Object.assign(Fe,Ve),Fe})}else{const Be=generateImagesParametersToMldev(this.apiClient,e);return Ce=formatMap("{model}:predict",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(Se=e.config)===null||Se===void 0?void 0:Se.httpOptions,abortSignal:(Ee=e.config)===null||Ee===void 0?void 0:Ee.abortSignal}).then(Me=>Me.json().then(Ve=>{const Fe=Ve;return Fe.sdkHttpResponse={headers:Me.headers},Fe})),Pe.then(Me=>{const Ve=generateImagesResponseFromMldev(Me),Fe=new GenerateImagesResponse;return Object.assign(Fe,Ve),Fe})}}async editImageInternal(e){var r,xe;let Se,Ee="",Pe={};if(this.apiClient.isVertexAI()){const Ce=editImageParametersInternalToVertex(this.apiClient,e);return Ee=formatMap("{model}:predict",Ce._url),Pe=Ce._query,delete Ce._url,delete Ce._query,Se=this.apiClient.request({path:Ee,queryParams:Pe,body:JSON.stringify(Ce),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Re=>Re.json().then(Be=>{const Me=Be;return Me.sdkHttpResponse={headers:Re.headers},Me})),Se.then(Re=>{const Be=editImageResponseFromVertex(Re),Me=new EditImageResponse;return Object.assign(Me,Be),Me})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var r,xe;let Se,Ee="",Pe={};if(this.apiClient.isVertexAI()){const Ce=upscaleImageAPIParametersInternalToVertex(this.apiClient,e);return Ee=formatMap("{model}:predict",Ce._url),Pe=Ce._query,delete Ce._url,delete Ce._query,Se=this.apiClient.request({path:Ee,queryParams:Pe,body:JSON.stringify(Ce),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Re=>Re.json().then(Be=>{const Me=Be;return Me.sdkHttpResponse={headers:Re.headers},Me})),Se.then(Re=>{const Be=upscaleImageResponseFromVertex(Re),Me=new UpscaleImageResponse;return Object.assign(Me,Be),Me})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var r,xe;let Se,Ee="",Pe={};if(this.apiClient.isVertexAI()){const Ce=recontextImageParametersToVertex(this.apiClient,e);return Ee=formatMap("{model}:predict",Ce._url),Pe=Ce._query,delete Ce._url,delete Ce._query,Se=this.apiClient.request({path:Ee,queryParams:Pe,body:JSON.stringify(Ce),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Re=>Re.json()),Se.then(Re=>{const Be=recontextImageResponseFromVertex(Re),Me=new RecontextImageResponse;return Object.assign(Me,Be),Me})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var r,xe;let Se,Ee="",Pe={};if(this.apiClient.isVertexAI()){const Ce=segmentImageParametersToVertex(this.apiClient,e);return Ee=formatMap("{model}:predict",Ce._url),Pe=Ce._query,delete Ce._url,delete Ce._query,Se=this.apiClient.request({path:Ee,queryParams:Pe,body:JSON.stringify(Ce),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Re=>Re.json()),Se.then(Re=>{const Be=segmentImageResponseFromVertex(Re),Me=new SegmentImageResponse;return Object.assign(Me,Be),Me})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var r,xe,Se,Ee;let Pe,Ce="",Re={};if(this.apiClient.isVertexAI()){const Be=getModelParametersToVertex(this.apiClient,e);return Ce=formatMap("{name}",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Me=>Me.json()),Pe.then(Me=>modelFromVertex(Me))}else{const Be=getModelParametersToMldev(this.apiClient,e);return Ce=formatMap("{name}",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(Se=e.config)===null||Se===void 0?void 0:Se.httpOptions,abortSignal:(Ee=e.config)===null||Ee===void 0?void 0:Ee.abortSignal}).then(Me=>Me.json()),Pe.then(Me=>modelFromMldev(Me))}}async listInternal(e){var r,xe,Se,Ee;let Pe,Ce="",Re={};if(this.apiClient.isVertexAI()){const Be=listModelsParametersToVertex(this.apiClient,e);return Ce=formatMap("{models_url}",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Me=>Me.json().then(Ve=>{const Fe=Ve;return Fe.sdkHttpResponse={headers:Me.headers},Fe})),Pe.then(Me=>{const Ve=listModelsResponseFromVertex(Me),Fe=new ListModelsResponse;return Object.assign(Fe,Ve),Fe})}else{const Be=listModelsParametersToMldev(this.apiClient,e);return Ce=formatMap("{models_url}",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(Se=e.config)===null||Se===void 0?void 0:Se.httpOptions,abortSignal:(Ee=e.config)===null||Ee===void 0?void 0:Ee.abortSignal}).then(Me=>Me.json().then(Ve=>{const Fe=Ve;return Fe.sdkHttpResponse={headers:Me.headers},Fe})),Pe.then(Me=>{const Ve=listModelsResponseFromMldev(Me),Fe=new ListModelsResponse;return Object.assign(Fe,Ve),Fe})}}async update(e){var r,xe,Se,Ee;let Pe,Ce="",Re={};if(this.apiClient.isVertexAI()){const Be=updateModelParametersToVertex(this.apiClient,e);return Ce=formatMap("{model}",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Me=>Me.json()),Pe.then(Me=>modelFromVertex(Me))}else{const Be=updateModelParametersToMldev(this.apiClient,e);return Ce=formatMap("{name}",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"PATCH",httpOptions:(Se=e.config)===null||Se===void 0?void 0:Se.httpOptions,abortSignal:(Ee=e.config)===null||Ee===void 0?void 0:Ee.abortSignal}).then(Me=>Me.json()),Pe.then(Me=>modelFromMldev(Me))}}async delete(e){var r,xe,Se,Ee;let Pe,Ce="",Re={};if(this.apiClient.isVertexAI()){const Be=deleteModelParametersToVertex(this.apiClient,e);return Ce=formatMap("{name}",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Me=>Me.json().then(Ve=>{const Fe=Ve;return Fe.sdkHttpResponse={headers:Me.headers},Fe})),Pe.then(Me=>{const Ve=deleteModelResponseFromVertex(Me),Fe=new DeleteModelResponse;return Object.assign(Fe,Ve),Fe})}else{const Be=deleteModelParametersToMldev(this.apiClient,e);return Ce=formatMap("{name}",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"DELETE",httpOptions:(Se=e.config)===null||Se===void 0?void 0:Se.httpOptions,abortSignal:(Ee=e.config)===null||Ee===void 0?void 0:Ee.abortSignal}).then(Me=>Me.json().then(Ve=>{const Fe=Ve;return Fe.sdkHttpResponse={headers:Me.headers},Fe})),Pe.then(Me=>{const Ve=deleteModelResponseFromMldev(Me),Fe=new DeleteModelResponse;return Object.assign(Fe,Ve),Fe})}}async countTokens(e){var r,xe,Se,Ee;let Pe,Ce="",Re={};if(this.apiClient.isVertexAI()){const Be=countTokensParametersToVertex(this.apiClient,e);return Ce=formatMap("{model}:countTokens",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Me=>Me.json().then(Ve=>{const Fe=Ve;return Fe.sdkHttpResponse={headers:Me.headers},Fe})),Pe.then(Me=>{const Ve=countTokensResponseFromVertex(Me),Fe=new CountTokensResponse;return Object.assign(Fe,Ve),Fe})}else{const Be=countTokensParametersToMldev(this.apiClient,e);return Ce=formatMap("{model}:countTokens",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(Se=e.config)===null||Se===void 0?void 0:Se.httpOptions,abortSignal:(Ee=e.config)===null||Ee===void 0?void 0:Ee.abortSignal}).then(Me=>Me.json().then(Ve=>{const Fe=Ve;return Fe.sdkHttpResponse={headers:Me.headers},Fe})),Pe.then(Me=>{const Ve=countTokensResponseFromMldev(Me),Fe=new CountTokensResponse;return Object.assign(Fe,Ve),Fe})}}async computeTokens(e){var r,xe;let Se,Ee="",Pe={};if(this.apiClient.isVertexAI()){const Ce=computeTokensParametersToVertex(this.apiClient,e);return Ee=formatMap("{model}:computeTokens",Ce._url),Pe=Ce._query,delete Ce._url,delete Ce._query,Se=this.apiClient.request({path:Ee,queryParams:Pe,body:JSON.stringify(Ce),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Re=>Re.json().then(Be=>{const Me=Be;return Me.sdkHttpResponse={headers:Re.headers},Me})),Se.then(Re=>{const Be=computeTokensResponseFromVertex(Re),Me=new ComputeTokensResponse;return Object.assign(Me,Be),Me})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var r,xe,Se,Ee;let Pe,Ce="",Re={};if(this.apiClient.isVertexAI()){const Be=generateVideosParametersToVertex(this.apiClient,e);return Ce=formatMap("{model}:predictLongRunning",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Me=>Me.json()),Pe.then(Me=>{const Ve=generateVideosOperationFromVertex(Me),Fe=new GenerateVideosOperation;return Object.assign(Fe,Ve),Fe})}else{const Be=generateVideosParametersToMldev(this.apiClient,e);return Ce=formatMap("{model}:predictLongRunning",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(Se=e.config)===null||Se===void 0?void 0:Se.httpOptions,abortSignal:(Ee=e.config)===null||Ee===void 0?void 0:Ee.abortSignal}).then(Me=>Me.json()),Pe.then(Me=>{const Ve=generateVideosOperationFromMldev(Me),Fe=new GenerateVideosOperation;return Object.assign(Fe,Ve),Fe})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Operations extends BaseModule{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const r=e.operation,xe=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const Se=r.name.split("/operations/")[0];let Ee;xe&&"httpOptions"in xe&&(Ee=xe.httpOptions);const Pe=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:Se,config:{httpOptions:Ee}});return r._fromAPIResponse({apiResponse:Pe,_isVertexAI:!0})}else{const Se=await this.getVideosOperationInternal({operationName:r.name,config:xe});return r._fromAPIResponse({apiResponse:Se,_isVertexAI:!1})}}async get(e){const r=e.operation,xe=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const Se=r.name.split("/operations/")[0];let Ee;xe&&"httpOptions"in xe&&(Ee=xe.httpOptions);const Pe=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:Se,config:{httpOptions:Ee}});return r._fromAPIResponse({apiResponse:Pe,_isVertexAI:!0})}else{const Se=await this.getVideosOperationInternal({operationName:r.name,config:xe});return r._fromAPIResponse({apiResponse:Se,_isVertexAI:!1})}}async getVideosOperationInternal(e){var r,xe,Se,Ee;let Pe,Ce="",Re={};if(this.apiClient.isVertexAI()){const Be=getOperationParametersToVertex(e);return Ce=formatMap("{operationName}",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Me=>Me.json()),Pe}else{const Be=getOperationParametersToMldev(e);return Ce=formatMap("{operationName}",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(Se=e.config)===null||Se===void 0?void 0:Se.httpOptions,abortSignal:(Ee=e.config)===null||Ee===void 0?void 0:Ee.abortSignal}).then(Me=>Me.json()),Pe}}async fetchPredictVideosOperationInternal(e){var r,xe;let Se,Ee="",Pe={};if(this.apiClient.isVertexAI()){const Ce=fetchPredictOperationParametersToVertex(e);return Ee=formatMap("{resourceName}:fetchPredictOperation",Ce._url),Pe=Ce._query,delete Ce._url,delete Ce._query,Se=this.apiClient.request({path:Ee,queryParams:Pe,body:JSON.stringify(Ce),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Re=>Re.json()),Se}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function blobToMldev(t){const e={},r=getValueByPath(t,["data"]);if(r!=null&&setValueByPath(e,["data"],r),getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const xe=getValueByPath(t,["mimeType"]);return xe!=null&&setValueByPath(e,["mimeType"],xe),e}function contentToMldev(t){const e={},r=getValueByPath(t,["parts"]);if(r!=null){let Se=r;Array.isArray(Se)&&(Se=Se.map(Ee=>partToMldev(Ee))),setValueByPath(e,["parts"],Se)}const xe=getValueByPath(t,["role"]);return xe!=null&&setValueByPath(e,["role"],xe),e}function createAuthTokenConfigToMldev(t,e,r){const xe={},Se=getValueByPath(e,["expireTime"]);r!==void 0&&Se!=null&&setValueByPath(r,["expireTime"],Se);const Ee=getValueByPath(e,["newSessionExpireTime"]);r!==void 0&&Ee!=null&&setValueByPath(r,["newSessionExpireTime"],Ee);const Pe=getValueByPath(e,["uses"]);r!==void 0&&Pe!=null&&setValueByPath(r,["uses"],Pe);const Ce=getValueByPath(e,["liveConnectConstraints"]);r!==void 0&&Ce!=null&&setValueByPath(r,["bidiGenerateContentSetup"],liveConnectConstraintsToMldev(t,Ce));const Re=getValueByPath(e,["lockAdditionalFields"]);return r!==void 0&&Re!=null&&setValueByPath(r,["fieldMask"],Re),xe}function createAuthTokenParametersToMldev(t,e){const r={},xe=getValueByPath(e,["config"]);return xe!=null&&setValueByPath(r,["config"],createAuthTokenConfigToMldev(t,xe,r)),r}function fileDataToMldev(t){const e={};if(getValueByPath(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=getValueByPath(t,["fileUri"]);r!=null&&setValueByPath(e,["fileUri"],r);const xe=getValueByPath(t,["mimeType"]);return xe!=null&&setValueByPath(e,["mimeType"],xe),e}function functionCallToMldev(t){const e={},r=getValueByPath(t,["id"]);r!=null&&setValueByPath(e,["id"],r);const xe=getValueByPath(t,["args"]);xe!=null&&setValueByPath(e,["args"],xe);const Se=getValueByPath(t,["name"]);if(Se!=null&&setValueByPath(e,["name"],Se),getValueByPath(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(getValueByPath(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function googleMapsToMldev(t){const e={};if(getValueByPath(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=getValueByPath(t,["enableWidget"]);return r!=null&&setValueByPath(e,["enableWidget"],r),e}function googleSearchToMldev(t){const e={};if(getValueByPath(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(getValueByPath(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=getValueByPath(t,["timeRangeFilter"]);return r!=null&&setValueByPath(e,["timeRangeFilter"],r),e}function liveConnectConfigToMldev(t,e){const r={},xe=getValueByPath(t,["generationConfig"]);e!==void 0&&xe!=null&&setValueByPath(e,["setup","generationConfig"],xe);const Se=getValueByPath(t,["responseModalities"]);e!==void 0&&Se!=null&&setValueByPath(e,["setup","generationConfig","responseModalities"],Se);const Ee=getValueByPath(t,["temperature"]);e!==void 0&&Ee!=null&&setValueByPath(e,["setup","generationConfig","temperature"],Ee);const Pe=getValueByPath(t,["topP"]);e!==void 0&&Pe!=null&&setValueByPath(e,["setup","generationConfig","topP"],Pe);const Ce=getValueByPath(t,["topK"]);e!==void 0&&Ce!=null&&setValueByPath(e,["setup","generationConfig","topK"],Ce);const Re=getValueByPath(t,["maxOutputTokens"]);e!==void 0&&Re!=null&&setValueByPath(e,["setup","generationConfig","maxOutputTokens"],Re);const Be=getValueByPath(t,["mediaResolution"]);e!==void 0&&Be!=null&&setValueByPath(e,["setup","generationConfig","mediaResolution"],Be);const Me=getValueByPath(t,["seed"]);e!==void 0&&Me!=null&&setValueByPath(e,["setup","generationConfig","seed"],Me);const Ve=getValueByPath(t,["speechConfig"]);e!==void 0&&Ve!=null&&setValueByPath(e,["setup","generationConfig","speechConfig"],tLiveSpeechConfig(Ve));const Fe=getValueByPath(t,["thinkingConfig"]);e!==void 0&&Fe!=null&&setValueByPath(e,["setup","generationConfig","thinkingConfig"],Fe);const Ie=getValueByPath(t,["enableAffectiveDialog"]);e!==void 0&&Ie!=null&&setValueByPath(e,["setup","generationConfig","enableAffectiveDialog"],Ie);const qe=getValueByPath(t,["systemInstruction"]);e!==void 0&&qe!=null&&setValueByPath(e,["setup","systemInstruction"],contentToMldev(tContent(qe)));const Ye=getValueByPath(t,["tools"]);if(e!==void 0&&Ye!=null){let an=tTools(Ye);Array.isArray(an)&&(an=an.map(Ze=>toolToMldev(tTool(Ze)))),setValueByPath(e,["setup","tools"],an)}const Xe=getValueByPath(t,["sessionResumption"]);e!==void 0&&Xe!=null&&setValueByPath(e,["setup","sessionResumption"],sessionResumptionConfigToMldev(Xe));const je=getValueByPath(t,["inputAudioTranscription"]);e!==void 0&&je!=null&&setValueByPath(e,["setup","inputAudioTranscription"],je);const Qe=getValueByPath(t,["outputAudioTranscription"]);e!==void 0&&Qe!=null&&setValueByPath(e,["setup","outputAudioTranscription"],Qe);const sn=getValueByPath(t,["realtimeInputConfig"]);e!==void 0&&sn!=null&&setValueByPath(e,["setup","realtimeInputConfig"],sn);const cn=getValueByPath(t,["contextWindowCompression"]);e!==void 0&&cn!=null&&setValueByPath(e,["setup","contextWindowCompression"],cn);const nn=getValueByPath(t,["proactivity"]);if(e!==void 0&&nn!=null&&setValueByPath(e,["setup","proactivity"],nn),getValueByPath(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return r}function liveConnectConstraintsToMldev(t,e){const r={},xe=getValueByPath(e,["model"]);xe!=null&&setValueByPath(r,["setup","model"],tModel(t,xe));const Se=getValueByPath(e,["config"]);return Se!=null&&setValueByPath(r,["config"],liveConnectConfigToMldev(Se,r)),r}function partToMldev(t){const e={},r=getValueByPath(t,["mediaResolution"]);r!=null&&setValueByPath(e,["mediaResolution"],r);const xe=getValueByPath(t,["codeExecutionResult"]);xe!=null&&setValueByPath(e,["codeExecutionResult"],xe);const Se=getValueByPath(t,["executableCode"]);Se!=null&&setValueByPath(e,["executableCode"],Se);const Ee=getValueByPath(t,["fileData"]);Ee!=null&&setValueByPath(e,["fileData"],fileDataToMldev(Ee));const Pe=getValueByPath(t,["functionCall"]);Pe!=null&&setValueByPath(e,["functionCall"],functionCallToMldev(Pe));const Ce=getValueByPath(t,["functionResponse"]);Ce!=null&&setValueByPath(e,["functionResponse"],Ce);const Re=getValueByPath(t,["inlineData"]);Re!=null&&setValueByPath(e,["inlineData"],blobToMldev(Re));const Be=getValueByPath(t,["text"]);Be!=null&&setValueByPath(e,["text"],Be);const Me=getValueByPath(t,["thought"]);Me!=null&&setValueByPath(e,["thought"],Me);const Ve=getValueByPath(t,["thoughtSignature"]);Ve!=null&&setValueByPath(e,["thoughtSignature"],Ve);const Fe=getValueByPath(t,["videoMetadata"]);return Fe!=null&&setValueByPath(e,["videoMetadata"],Fe),e}function sessionResumptionConfigToMldev(t){const e={},r=getValueByPath(t,["handle"]);if(r!=null&&setValueByPath(e,["handle"],r),getValueByPath(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function toolToMldev(t){const e={},r=getValueByPath(t,["functionDeclarations"]);if(r!=null){let Me=r;Array.isArray(Me)&&(Me=Me.map(Ve=>Ve)),setValueByPath(e,["functionDeclarations"],Me)}if(getValueByPath(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const xe=getValueByPath(t,["googleSearchRetrieval"]);xe!=null&&setValueByPath(e,["googleSearchRetrieval"],xe);const Se=getValueByPath(t,["computerUse"]);Se!=null&&setValueByPath(e,["computerUse"],Se);const Ee=getValueByPath(t,["fileSearch"]);Ee!=null&&setValueByPath(e,["fileSearch"],Ee);const Pe=getValueByPath(t,["codeExecution"]);if(Pe!=null&&setValueByPath(e,["codeExecution"],Pe),getValueByPath(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const Ce=getValueByPath(t,["googleMaps"]);Ce!=null&&setValueByPath(e,["googleMaps"],googleMapsToMldev(Ce));const Re=getValueByPath(t,["googleSearch"]);Re!=null&&setValueByPath(e,["googleSearch"],googleSearchToMldev(Re));const Be=getValueByPath(t,["urlContext"]);return Be!=null&&setValueByPath(e,["urlContext"],Be),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function getFieldMasks(t){const e=[];for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const xe=t[r];if(typeof xe=="object"&&xe!=null&&Object.keys(xe).length>0){const Se=Object.keys(xe).map(Ee=>`${r}.${Ee}`);e.push(...Se)}else e.push(r)}return e.join(",")}function convertBidiSetupToTokenSetup(t,e){let r=null;const xe=t.bidiGenerateContentSetup;if(typeof xe=="object"&&xe!==null&&"setup"in xe){const Ee=xe.setup;typeof Ee=="object"&&Ee!==null?(t.bidiGenerateContentSetup=Ee,r=Ee):delete t.bidiGenerateContentSetup}else xe!==void 0&&delete t.bidiGenerateContentSetup;const Se=t.fieldMask;if(r){const Ee=getFieldMasks(r);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)Ee?t.fieldMask=Ee:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&Se!==null&&Array.isArray(Se)&&Se.length>0){const Pe=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let Ce=[];Se.length>0&&(Ce=Se.map(Be=>Pe.includes(Be)?`generationConfig.${Be}`:Be));const Re=[];Ee&&Re.push(Ee),Ce.length>0&&Re.push(...Ce),Re.length>0?t.fieldMask=Re.join(","):delete t.fieldMask}else delete t.fieldMask}else Se!==null&&Array.isArray(Se)&&Se.length>0?t.fieldMask=Se.join(","):delete t.fieldMask;return t}class Tokens extends BaseModule{constructor(e){super(),this.apiClient=e}async create(e){var r,xe;let Se,Ee="",Pe={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const Ce=createAuthTokenParametersToMldev(this.apiClient,e);Ee=formatMap("auth_tokens",Ce._url),Pe=Ce._query,delete Ce.config,delete Ce._url,delete Ce._query;const Re=convertBidiSetupToTokenSetup(Ce,e.config);return Se=this.apiClient.request({path:Ee,queryParams:Pe,body:JSON.stringify(Re),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Be=>Be.json()),Se.then(Be=>Be)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function deleteDocumentConfigToMldev(t,e){const r={},xe=getValueByPath(t,["force"]);return e!==void 0&&xe!=null&&setValueByPath(e,["_query","force"],xe),r}function deleteDocumentParametersToMldev(t){const e={},r=getValueByPath(t,["name"]);r!=null&&setValueByPath(e,["_url","name"],r);const xe=getValueByPath(t,["config"]);return xe!=null&&deleteDocumentConfigToMldev(xe,e),e}function getDocumentParametersToMldev(t){const e={},r=getValueByPath(t,["name"]);return r!=null&&setValueByPath(e,["_url","name"],r),e}function listDocumentsConfigToMldev(t,e){const r={},xe=getValueByPath(t,["pageSize"]);e!==void 0&&xe!=null&&setValueByPath(e,["_query","pageSize"],xe);const Se=getValueByPath(t,["pageToken"]);return e!==void 0&&Se!=null&&setValueByPath(e,["_query","pageToken"],Se),r}function listDocumentsParametersToMldev(t){const e={},r=getValueByPath(t,["parent"]);r!=null&&setValueByPath(e,["_url","parent"],r);const xe=getValueByPath(t,["config"]);return xe!=null&&listDocumentsConfigToMldev(xe,e),e}function listDocumentsResponseFromMldev(t){const e={},r=getValueByPath(t,["sdkHttpResponse"]);r!=null&&setValueByPath(e,["sdkHttpResponse"],r);const xe=getValueByPath(t,["nextPageToken"]);xe!=null&&setValueByPath(e,["nextPageToken"],xe);const Se=getValueByPath(t,["documents"]);if(Se!=null){let Ee=Se;Array.isArray(Ee)&&(Ee=Ee.map(Pe=>Pe)),setValueByPath(e,["documents"],Ee)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Documents extends BaseModule{constructor(e){super(),this.apiClient=e,this.list=async r=>new Pager(PagedItem.PAGED_ITEM_DOCUMENTS,xe=>this.listInternal({parent:r.parent,config:xe.config}),await this.listInternal(r),r)}async get(e){var r,xe;let Se,Ee="",Pe={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const Ce=getDocumentParametersToMldev(e);return Ee=formatMap("{name}",Ce._url),Pe=Ce._query,delete Ce._url,delete Ce._query,Se=this.apiClient.request({path:Ee,queryParams:Pe,body:JSON.stringify(Ce),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Re=>Re.json()),Se.then(Re=>Re)}}async delete(e){var r,xe;let Se="",Ee={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const Pe=deleteDocumentParametersToMldev(e);Se=formatMap("{name}",Pe._url),Ee=Pe._query,delete Pe._url,delete Pe._query,await this.apiClient.request({path:Se,queryParams:Ee,body:JSON.stringify(Pe),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal})}}async listInternal(e){var r,xe;let Se,Ee="",Pe={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const Ce=listDocumentsParametersToMldev(e);return Ee=formatMap("{parent}/documents",Ce._url),Pe=Ce._query,delete Ce._url,delete Ce._query,Se=this.apiClient.request({path:Ee,queryParams:Pe,body:JSON.stringify(Ce),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Re=>Re.json()),Se.then(Re=>{const Be=listDocumentsResponseFromMldev(Re),Me=new ListDocumentsResponse;return Object.assign(Me,Be),Me})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FileSearchStores extends BaseModule{constructor(e,r=new Documents(e)){super(),this.apiClient=e,this.documents=r,this.list=async(xe={})=>new Pager(PagedItem.PAGED_ITEM_FILE_SEARCH_STORES,Se=>this.listInternal(Se),await this.listInternal(xe),xe)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var r,xe;let Se,Ee="",Pe={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const Ce=createFileSearchStoreParametersToMldev(e);return Ee=formatMap("fileSearchStores",Ce._url),Pe=Ce._query,delete Ce._url,delete Ce._query,Se=this.apiClient.request({path:Ee,queryParams:Pe,body:JSON.stringify(Ce),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Re=>Re.json()),Se.then(Re=>Re)}}async get(e){var r,xe;let Se,Ee="",Pe={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const Ce=getFileSearchStoreParametersToMldev(e);return Ee=formatMap("{name}",Ce._url),Pe=Ce._query,delete Ce._url,delete Ce._query,Se=this.apiClient.request({path:Ee,queryParams:Pe,body:JSON.stringify(Ce),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Re=>Re.json()),Se.then(Re=>Re)}}async delete(e){var r,xe;let Se="",Ee={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const Pe=deleteFileSearchStoreParametersToMldev(e);Se=formatMap("{name}",Pe._url),Ee=Pe._query,delete Pe._url,delete Pe._query,await this.apiClient.request({path:Se,queryParams:Ee,body:JSON.stringify(Pe),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal})}}async listInternal(e){var r,xe;let Se,Ee="",Pe={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const Ce=listFileSearchStoresParametersToMldev(e);return Ee=formatMap("fileSearchStores",Ce._url),Pe=Ce._query,delete Ce._url,delete Ce._query,Se=this.apiClient.request({path:Ee,queryParams:Pe,body:JSON.stringify(Ce),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Re=>Re.json()),Se.then(Re=>{const Be=listFileSearchStoresResponseFromMldev(Re),Me=new ListFileSearchStoresResponse;return Object.assign(Me,Be),Me})}}async uploadToFileSearchStoreInternal(e){var r,xe;let Se,Ee="",Pe={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const Ce=uploadToFileSearchStoreParametersToMldev(e);return Ee=formatMap("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",Ce._url),Pe=Ce._query,delete Ce._url,delete Ce._query,Se=this.apiClient.request({path:Ee,queryParams:Pe,body:JSON.stringify(Ce),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Re=>Re.json()),Se.then(Re=>{const Be=uploadToFileSearchStoreResumableResponseFromMldev(Re),Me=new UploadToFileSearchStoreResumableResponse;return Object.assign(Me,Be),Me})}}async importFile(e){var r,xe;let Se,Ee="",Pe={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const Ce=importFileParametersToMldev(e);return Ee=formatMap("{file_search_store_name}:importFile",Ce._url),Pe=Ce._query,delete Ce._url,delete Ce._query,Se=this.apiClient.request({path:Ee,queryParams:Pe,body:JSON.stringify(Ce),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Re=>Re.json()),Se.then(Re=>{const Be=importFileOperationFromMldev(Re),Me=new ImportFileOperation;return Object.assign(Me,Be),Me})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let uuid4Internal=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return uuid4Internal=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),r=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,xe=>(+xe^r()&15>>+xe/4).toString(16))};const uuid4=()=>uuid4Internal();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function isAbortError(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const castToError=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GeminiNextGenAPIClientError extends Error{}class APIError extends GeminiNextGenAPIClientError{constructor(e,r,xe,Se){super(`${APIError.makeMessage(e,r,xe)}`),this.status=e,this.headers=Se,this.error=r}static makeMessage(e,r,xe){const Se=r!=null&&r.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):xe;return e&&Se?`${e} ${Se}`:e?`${e} status code (no body)`:Se||"(no status code or body)"}static generate(e,r,xe,Se){if(!e||!Se)return new APIConnectionError({message:xe,cause:castToError(r)});const Ee=r;return e===400?new BadRequestError(e,Ee,xe,Se):e===401?new AuthenticationError(e,Ee,xe,Se):e===403?new PermissionDeniedError(e,Ee,xe,Se):e===404?new NotFoundError(e,Ee,xe,Se):e===409?new ConflictError(e,Ee,xe,Se):e===422?new UnprocessableEntityError(e,Ee,xe,Se):e===429?new RateLimitError(e,Ee,xe,Se):e>=500?new InternalServerError(e,Ee,xe,Se):new APIError(e,Ee,xe,Se)}}class APIUserAbortError extends APIError{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class APIConnectionError extends APIError{constructor({message:e,cause:r}){super(void 0,void 0,e||"Connection error.",void 0),r&&(this.cause=r)}}class APIConnectionTimeoutError extends APIConnectionError{constructor({message:e}={}){super({message:e??"Request timed out."})}}class BadRequestError extends APIError{}class AuthenticationError extends APIError{}class PermissionDeniedError extends APIError{}class NotFoundError extends APIError{}class ConflictError extends APIError{}class UnprocessableEntityError extends APIError{}class RateLimitError extends APIError{}class InternalServerError extends APIError{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const startsWithSchemeRegexp=/^[a-z][a-z0-9+.-]*:/i,isAbsoluteURL=t=>startsWithSchemeRegexp.test(t);let isArrayInternal=t=>(isArrayInternal=Array.isArray,isArrayInternal(t));const isArray=isArrayInternal;let isReadonlyArrayInternal=isArray;const isReadonlyArray=isReadonlyArrayInternal;function isEmptyObj(t){if(!t)return!0;for(const e in t)return!1;return!0}function hasOwn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const validatePositiveInteger=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new GeminiNextGenAPIClientError(`${t} must be an integer`);if(e<0)throw new GeminiNextGenAPIClientError(`${t} must be a positive integer`);return e},safeJSON=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sleep$1=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VERSION="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function getDetectedPlatform(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const getPlatformProperties=()=>{var t,e,r,xe,Se;const Ee=getDetectedPlatform();if(Ee==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":normalizePlatform(Deno.build.os),"X-Stainless-Arch":normalizeArch(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(Ee==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":normalizePlatform((r=globalThis.process.platform)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Arch":normalizeArch((xe=globalThis.process.arch)!==null&&xe!==void 0?xe:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(Se=globalThis.process.version)!==null&&Se!==void 0?Se:"unknown"};const Pe=getBrowserInfo();return Pe?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${Pe.browser}`,"X-Stainless-Runtime-Version":Pe.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function getBrowserInfo(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:r}of t){const xe=r.exec(navigator.userAgent);if(xe){const Se=xe[1]||0,Ee=xe[2]||0,Pe=xe[3]||0;return{browser:e,version:`${Se}.${Ee}.${Pe}`}}}return null}const normalizeArch=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",normalizePlatform=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let _platformHeaders;const getPlatformHeaders=()=>_platformHeaders??(_platformHeaders=getPlatformProperties());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function getDefaultFetch(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function makeReadableStream(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function ReadableStreamFrom(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return makeReadableStream({start(){},async pull(r){const{done:xe,value:Se}=await e.next();xe?r.close():r.enqueue(Se)},async cancel(){var r;await((r=e.return)===null||r===void 0?void 0:r.call(e))}})}function ReadableStreamToAsyncIterable(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const r=await e.read();return r!=null&&r.done&&e.releaseLock(),r}catch(r){throw e.releaseLock(),r}},async return(){const r=e.cancel();return e.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function CancelReadableStream(t){var e,r;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((r=(e=t[Symbol.asyncIterator]()).return)===null||r===void 0?void 0:r.call(e));return}const xe=t.getReader(),Se=xe.cancel();xe.releaseLock(),await Se}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FallbackEncoder=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const checkFileSupport=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,r=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(r?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function makeFile(t,e,r){return checkFileSupport(),new File(t,e??"unknown_file",r)}function getName(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const isAsyncIterable=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const isBlobLike=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",isFileLike=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&isBlobLike(t),isResponseLike=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function toFile(t,e,r){if(checkFileSupport(),t=await t,isFileLike(t))return t instanceof File?t:makeFile([await t.arrayBuffer()],t.name);if(isResponseLike(t)){const Se=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),makeFile(await getBytes(Se),e,r)}const xe=await getBytes(t);if(e||(e=getName(t)),!(r!=null&&r.type)){const Se=xe.find(Ee=>typeof Ee=="object"&&"type"in Ee&&Ee.type);typeof Se=="string"&&(r=Object.assign(Object.assign({},r),{type:Se}))}return makeFile(xe,e,r)}async function getBytes(t){var e,r,xe,Se,Ee;let Pe=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)Pe.push(t);else if(isBlobLike(t))Pe.push(t instanceof Blob?t:await t.arrayBuffer());else if(isAsyncIterable(t))try{for(var Ce=!0,Re=__asyncValues(t),Be;Be=await Re.next(),e=Be.done,!e;Ce=!0){Se=Be.value,Ce=!1;const Me=Se;Pe.push(...await getBytes(Me))}}catch(Me){r={error:Me}}finally{try{!Ce&&!e&&(xe=Re.return)&&await xe.call(Re)}finally{if(r)throw r.error}}else{const Me=(Ee=t==null?void 0:t.constructor)===null||Ee===void 0?void 0:Ee.name;throw new Error(`Unexpected data type: ${typeof t}${Me?`; constructor: ${Me}`:""}${propsForError(t)}`)}return Pe}function propsForError(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(r=>`"${r}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class APIResource{constructor(e){this._client=e}}APIResource._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function encodeURIPath(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const EMPTY$1=Object.freeze(Object.create(null)),createPathTagFunction=(t=encodeURIPath)=>(function(r,...xe){if(r.length===1)return r[0];let Se=!1;const Ee=[],Pe=r.reduce((Me,Ve,Fe)=>{var Ie,qe,Ye;/[?#]/.test(Ve)&&(Se=!0);const Xe=xe[Fe];let je=(Se?encodeURIComponent:t)(""+Xe);return Fe!==xe.length&&(Xe==null||typeof Xe=="object"&&Xe.toString===((Ye=Object.getPrototypeOf((qe=Object.getPrototypeOf((Ie=Xe.hasOwnProperty)!==null&&Ie!==void 0?Ie:EMPTY$1))!==null&&qe!==void 0?qe:EMPTY$1))===null||Ye===void 0?void 0:Ye.toString))&&(je=Xe+"",Ee.push({start:Me.length+Ve.length,length:je.length,error:`Value of type ${Object.prototype.toString.call(Xe).slice(8,-1)} is not a valid path parameter`})),Me+Ve+(Fe===xe.length?"":je)},""),Ce=Pe.split(/[?#]/,1)[0],Re=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let Be;for(;(Be=Re.exec(Ce))!==null;)Ee.push({start:Be.index,length:Be[0].length,error:`Value "${Be[0]}" can't be safely passed as a path parameter`});if(Ee.sort((Me,Ve)=>Me.start-Ve.start),Ee.length>0){let Me=0;const Ve=Ee.reduce((Fe,Ie)=>{const qe=" ".repeat(Ie.start-Me),Ye="^".repeat(Ie.length);return Me=Ie.start+Ie.length,Fe+qe+Ye},"");throw new GeminiNextGenAPIClientError(`Path parameters result in path with invalid segments:
${Ee.map(Fe=>Fe.error).join(`
`)}
${Pe}
${Ve}`)}return Pe}),path=createPathTagFunction(encodeURIPath);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BaseInteractions extends APIResource{create(e,r){var xe;const{api_version:Se=this._client.apiVersion}=e,Ee=__rest(e,["api_version"]);if("model"in Ee&&"agent_config"in Ee)throw new GeminiNextGenAPIClientError("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in Ee&&"generation_config"in Ee)throw new GeminiNextGenAPIClientError("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(path`/${Se}/interactions`,Object.assign(Object.assign({body:Ee},r),{stream:(xe=e.stream)!==null&&xe!==void 0?xe:!1}))}delete(e,r={},xe){const{api_version:Se=this._client.apiVersion}=r??{};return this._client.delete(path`/${Se}/interactions/${e}`,xe)}cancel(e,r={},xe){const{api_version:Se=this._client.apiVersion}=r??{};return this._client.post(path`/${Se}/interactions/${e}/cancel`,xe)}get(e,r={},xe){var Se;const Ee=r??{},{api_version:Pe=this._client.apiVersion}=Ee,Ce=__rest(Ee,["api_version"]);return this._client.get(path`/${Pe}/interactions/${e}`,Object.assign(Object.assign({query:Ce},xe),{stream:(Se=r==null?void 0:r.stream)!==null&&Se!==void 0?Se:!1}))}}BaseInteractions._key=Object.freeze(["interactions"]);class Interactions extends BaseInteractions{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function concatBytes(t){let e=0;for(const Se of t)e+=Se.length;const r=new Uint8Array(e);let xe=0;for(const Se of t)r.set(Se,xe),xe+=Se.length;return r}let encodeUTF8_;function encodeUTF8(t){let e;return(encodeUTF8_??(e=new globalThis.TextEncoder,encodeUTF8_=e.encode.bind(e)))(t)}let decodeUTF8_;function decodeUTF8(t){let e;return(decodeUTF8_??(e=new globalThis.TextDecoder,decodeUTF8_=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LineDecoder{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const r=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?encodeUTF8(e):e;this.buffer=concatBytes([this.buffer,r]);const xe=[];let Se;for(;(Se=findNewlineIndex(this.buffer,this.carriageReturnIndex))!=null;){if(Se.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=Se.index;continue}if(this.carriageReturnIndex!=null&&(Se.index!==this.carriageReturnIndex+1||Se.carriage)){xe.push(decodeUTF8(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const Ee=this.carriageReturnIndex!==null?Se.preceding-1:Se.preceding,Pe=decodeUTF8(this.buffer.subarray(0,Ee));xe.push(Pe),this.buffer=this.buffer.subarray(Se.index),this.carriageReturnIndex=null}return xe}flush(){return this.buffer.length?this.decode(`
`):[]}}LineDecoder.NEWLINE_CHARS=new Set([`
`,"\r"]);LineDecoder.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function findNewlineIndex(t,e){for(let Se=e??0;Se<t.length;Se++){if(t[Se]===10)return{preceding:Se,index:Se+1,carriage:!1};if(t[Se]===13)return{preceding:Se,index:Se+1,carriage:!0}}return null}function findDoubleNewlineIndex(t){for(let xe=0;xe<t.length-1;xe++){if(t[xe]===10&&t[xe+1]===10||t[xe]===13&&t[xe+1]===13)return xe+2;if(t[xe]===13&&t[xe+1]===10&&xe+3<t.length&&t[xe+2]===13&&t[xe+3]===10)return xe+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const levelNumbers={off:0,error:200,warn:300,info:400,debug:500},parseLogLevel=(t,e,r)=>{if(t){if(hasOwn(levelNumbers,t))return t;loggerFor(r).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(levelNumbers))}`)}};function noop(){}function makeLogFn(t,e,r){return!e||levelNumbers[t]>levelNumbers[r]?noop:e[t].bind(e)}const noopLogger={error:noop,warn:noop,info:noop,debug:noop};let cachedLoggers=new WeakMap;function loggerFor(t){var e;const r=t.logger,xe=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!r)return noopLogger;const Se=cachedLoggers.get(r);if(Se&&Se[0]===xe)return Se[1];const Ee={error:makeLogFn("error",r,xe),warn:makeLogFn("warn",r,xe),info:makeLogFn("info",r,xe),debug:makeLogFn("debug",r,xe)};return cachedLoggers.set(r,[xe,Ee]),Ee}const formatRequestDetails=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,r])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":r]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Stream{constructor(e,r,xe){this.iterator=e,this.controller=r,this.client=xe}static fromSSEResponse(e,r,xe){let Se=!1;const Ee=xe?loggerFor(xe):console;function Pe(){return __asyncGenerator(this,arguments,function*(){var Re,Be,Me,Ve;if(Se)throw new GeminiNextGenAPIClientError("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");Se=!0;let Fe=!1;try{try{for(var Ie=!0,qe=__asyncValues(_iterSSEMessages(e,r)),Ye;Ye=yield __await(qe.next()),Re=Ye.done,!Re;Ie=!0){Ve=Ye.value,Ie=!1;const Xe=Ve;if(!Fe)if(Xe.data.startsWith("[DONE]")){Fe=!0;continue}else try{yield yield __await(JSON.parse(Xe.data))}catch(je){throw Ee.error("Could not parse message into JSON:",Xe.data),Ee.error("From chunk:",Xe.raw),je}}}catch(Xe){Be={error:Xe}}finally{try{!Ie&&!Re&&(Me=qe.return)&&(yield __await(Me.call(qe)))}finally{if(Be)throw Be.error}}Fe=!0}catch(Xe){if(isAbortError(Xe))return yield __await(void 0);throw Xe}finally{Fe||r.abort()}})}return new Stream(Pe,r,xe)}static fromReadableStream(e,r,xe){let Se=!1;function Ee(){return __asyncGenerator(this,arguments,function*(){var Re,Be,Me,Ve;const Fe=new LineDecoder,Ie=ReadableStreamToAsyncIterable(e);try{for(var qe=!0,Ye=__asyncValues(Ie),Xe;Xe=yield __await(Ye.next()),Re=Xe.done,!Re;qe=!0){Ve=Xe.value,qe=!1;const je=Ve;for(const Qe of Fe.decode(je))yield yield __await(Qe)}}catch(je){Be={error:je}}finally{try{!qe&&!Re&&(Me=Ye.return)&&(yield __await(Me.call(Ye)))}finally{if(Be)throw Be.error}}for(const je of Fe.flush())yield yield __await(je)})}function Pe(){return __asyncGenerator(this,arguments,function*(){var Re,Be,Me,Ve;if(Se)throw new GeminiNextGenAPIClientError("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");Se=!0;let Fe=!1;try{try{for(var Ie=!0,qe=__asyncValues(Ee()),Ye;Ye=yield __await(qe.next()),Re=Ye.done,!Re;Ie=!0){Ve=Ye.value,Ie=!1;const Xe=Ve;Fe||Xe&&(yield yield __await(JSON.parse(Xe)))}}catch(Xe){Be={error:Xe}}finally{try{!Ie&&!Re&&(Me=qe.return)&&(yield __await(Me.call(qe)))}finally{if(Be)throw Be.error}}Fe=!0}catch(Xe){if(isAbortError(Xe))return yield __await(void 0);throw Xe}finally{Fe||r.abort()}})}return new Stream(Pe,r,xe)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],r=[],xe=this.iterator(),Se=Ee=>({next:()=>{if(Ee.length===0){const Pe=xe.next();e.push(Pe),r.push(Pe)}return Ee.shift()}});return[new Stream(()=>Se(e),this.controller,this.client),new Stream(()=>Se(r),this.controller,this.client)]}toReadableStream(){const e=this;let r;return makeReadableStream({async start(){r=e[Symbol.asyncIterator]()},async pull(xe){try{const{value:Se,done:Ee}=await r.next();if(Ee)return xe.close();const Pe=encodeUTF8(JSON.stringify(Se)+`
`);xe.enqueue(Pe)}catch(Se){xe.error(Se)}},async cancel(){var xe;await((xe=r.return)===null||xe===void 0?void 0:xe.call(r))}})}}function _iterSSEMessages(t,e){return __asyncGenerator(this,arguments,function*(){var xe,Se,Ee,Pe;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new GeminiNextGenAPIClientError("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new GeminiNextGenAPIClientError("Attempted to iterate over a response with no body");const Ce=new SSEDecoder,Re=new LineDecoder,Be=ReadableStreamToAsyncIterable(t.body);try{for(var Me=!0,Ve=__asyncValues(iterSSEChunks(Be)),Fe;Fe=yield __await(Ve.next()),xe=Fe.done,!xe;Me=!0){Pe=Fe.value,Me=!1;const Ie=Pe;for(const qe of Re.decode(Ie)){const Ye=Ce.decode(qe);Ye&&(yield yield __await(Ye))}}}catch(Ie){Se={error:Ie}}finally{try{!Me&&!xe&&(Ee=Ve.return)&&(yield __await(Ee.call(Ve)))}finally{if(Se)throw Se.error}}for(const Ie of Re.flush()){const qe=Ce.decode(Ie);qe&&(yield yield __await(qe))}})}function iterSSEChunks(t){return __asyncGenerator(this,arguments,function*(){var r,xe,Se,Ee;let Pe=new Uint8Array;try{for(var Ce=!0,Re=__asyncValues(t),Be;Be=yield __await(Re.next()),r=Be.done,!r;Ce=!0){Ee=Be.value,Ce=!1;const Me=Ee;if(Me==null)continue;const Ve=Me instanceof ArrayBuffer?new Uint8Array(Me):typeof Me=="string"?encodeUTF8(Me):Me;let Fe=new Uint8Array(Pe.length+Ve.length);Fe.set(Pe),Fe.set(Ve,Pe.length),Pe=Fe;let Ie;for(;(Ie=findDoubleNewlineIndex(Pe))!==-1;)yield yield __await(Pe.slice(0,Ie)),Pe=Pe.slice(Ie)}}catch(Me){xe={error:Me}}finally{try{!Ce&&!r&&(Se=Re.return)&&(yield __await(Se.call(Re)))}finally{if(xe)throw xe.error}}Pe.length>0&&(yield yield __await(Pe))})}class SSEDecoder{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const Ee={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],Ee}if(this.chunks.push(e),e.startsWith(":"))return null;let[r,xe,Se]=partition(e,":");return Se.startsWith(" ")&&(Se=Se.substring(1)),r==="event"?this.event=Se:r==="data"&&this.data.push(Se),null}}function partition(t,e){const r=t.indexOf(e);return r!==-1?[t.substring(0,r),e,t.substring(r+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function defaultParseResponse(t,e){const{response:r,requestLogID:xe,retryOfRequestLogID:Se,startTime:Ee}=e,Pe=await(async()=>{var Ce;if(e.options.stream)return loggerFor(t).debug("response",r.status,r.url,r.headers,r.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(r,e.controller,t):Stream.fromSSEResponse(r,e.controller,t);if(r.status===204)return null;if(e.options.__binaryResponse)return r;const Re=r.headers.get("content-type"),Be=(Ce=Re==null?void 0:Re.split(";")[0])===null||Ce===void 0?void 0:Ce.trim();return(Be==null?void 0:Be.includes("application/json"))||(Be==null?void 0:Be.endsWith("+json"))?await r.json():await r.text()})();return loggerFor(t).debug(`[${xe}] response parsed`,formatRequestDetails({retryOfRequestLogID:Se,url:r.url,status:r.status,body:Pe,durationMs:Date.now()-Ee})),Pe}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class APIPromise extends Promise{constructor(e,r,xe=defaultParseResponse){super(Se=>{Se(null)}),this.responsePromise=r,this.parseResponse=xe,this.client=e}_thenUnwrap(e){return new APIPromise(this.client,this.responsePromise,async(r,xe)=>e(await this.parseResponse(r,xe),xe))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:r}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,r){return this.parse().then(e,r)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const brand_privateNullableHeaders=Symbol("brand.privateNullableHeaders");function*iterateHeaders(t){if(!t)return;if(brand_privateNullableHeaders in t){const{values:xe,nulls:Se}=t;yield*xe.entries();for(const Ee of Se)yield[Ee,null];return}let e=!1,r;t instanceof Headers?r=t.entries():isReadonlyArray(t)?r=t:(e=!0,r=Object.entries(t??{}));for(let xe of r){const Se=xe[0];if(typeof Se!="string")throw new TypeError("expected header name to be a string");const Ee=isReadonlyArray(xe[1])?xe[1]:[xe[1]];let Pe=!1;for(const Ce of Ee)Ce!==void 0&&(e&&!Pe&&(Pe=!0,yield[Se,null]),yield[Se,Ce])}}const buildHeaders=t=>{const e=new Headers,r=new Set;for(const xe of t){const Se=new Set;for(const[Ee,Pe]of iterateHeaders(xe)){const Ce=Ee.toLowerCase();Se.has(Ce)||(e.delete(Ee),Se.add(Ce)),Pe===null?(e.delete(Ee),r.add(Ce)):(e.append(Ee,Pe),r.delete(Ce))}}return{[brand_privateNullableHeaders]:!0,values:e,nulls:r}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const readEnv=t=>{var e,r,xe,Se,Ee,Pe;if(typeof globalThis.process<"u")return(xe=(r=(e=define_globalThis_process_env_default)===null||e===void 0?void 0:e[t])===null||r===void 0?void 0:r.trim())!==null&&xe!==void 0?xe:void 0;if(typeof globalThis.Deno<"u")return(Pe=(Ee=(Se=globalThis.Deno.env)===null||Se===void 0?void 0:Se.get)===null||Ee===void 0?void 0:Ee.call(Se,t))===null||Pe===void 0?void 0:Pe.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var _a$1;class BaseGeminiNextGenAPIClient{constructor(e){var r,xe,Se,Ee,Pe,Ce,Re,{baseURL:Be=readEnv("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:Me=(r=readEnv("GEMINI_API_KEY"))!==null&&r!==void 0?r:null,apiVersion:Ve="v1beta"}=e,Fe=__rest(e,["baseURL","apiKey","apiVersion"]);const Ie=Object.assign(Object.assign({apiKey:Me,apiVersion:Ve},Fe),{baseURL:Be||"https://generativelanguage.googleapis.com"});this.baseURL=Ie.baseURL,this.timeout=(xe=Ie.timeout)!==null&&xe!==void 0?xe:BaseGeminiNextGenAPIClient.DEFAULT_TIMEOUT,this.logger=(Se=Ie.logger)!==null&&Se!==void 0?Se:console;const qe="warn";this.logLevel=qe,this.logLevel=(Pe=(Ee=parseLogLevel(Ie.logLevel,"ClientOptions.logLevel",this))!==null&&Ee!==void 0?Ee:parseLogLevel(readEnv("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&Pe!==void 0?Pe:qe,this.fetchOptions=Ie.fetchOptions,this.maxRetries=(Ce=Ie.maxRetries)!==null&&Ce!==void 0?Ce:2,this.fetch=(Re=Ie.fetch)!==null&&Re!==void 0?Re:getDefaultFetch(),this.encoder=FallbackEncoder,this._options=Ie,this.apiKey=Me,this.apiVersion=Ve,this.clientAdapter=Ie.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:r}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!r.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const r=buildHeaders([e.headers]);if(!(r.values.has("authorization")||r.values.has("x-goog-api-key"))){if(this.apiKey)return buildHeaders([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return buildHeaders([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([r,xe])=>typeof xe<"u").map(([r,xe])=>{if(typeof xe=="string"||typeof xe=="number"||typeof xe=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(xe)}`;if(xe===null)return`${encodeURIComponent(r)}=`;throw new GeminiNextGenAPIClientError(`Cannot stringify type ${typeof xe}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${VERSION}`}defaultIdempotencyKey(){return`stainless-node-retry-${uuid4()}`}makeStatusError(e,r,xe,Se){return APIError.generate(e,r,xe,Se)}buildURL(e,r,xe){const Se=!this.baseURLOverridden()&&xe||this.baseURL,Ee=isAbsoluteURL(e)?new URL(e):new URL(Se+(Se.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),Pe=this.defaultQuery();return isEmptyObj(Pe)||(r=Object.assign(Object.assign({},Pe),r)),typeof r=="object"&&r&&!Array.isArray(r)&&(Ee.search=this.stringifyQuery(r)),Ee.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const r=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${r}`}}async prepareRequest(e,{url:r,options:xe}){}get(e,r){return this.methodRequest("get",e,r)}post(e,r){return this.methodRequest("post",e,r)}patch(e,r){return this.methodRequest("patch",e,r)}put(e,r){return this.methodRequest("put",e,r)}delete(e,r){return this.methodRequest("delete",e,r)}methodRequest(e,r,xe){return this.request(Promise.resolve(xe).then(Se=>Object.assign({method:e,path:r},Se)))}request(e,r=null){return new APIPromise(this,this.makeRequest(e,r,void 0))}async makeRequest(e,r,xe){var Se,Ee,Pe;const Ce=await e,Re=(Se=Ce.maxRetries)!==null&&Se!==void 0?Se:this.maxRetries;r==null&&(r=Re),await this.prepareOptions(Ce);const{req:Be,url:Me,timeout:Ve}=await this.buildRequest(Ce,{retryCount:Re-r});await this.prepareRequest(Be,{url:Me,options:Ce});const Fe="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),Ie=xe===void 0?"":`, retryOf: ${xe}`,qe=Date.now();if(loggerFor(this).debug(`[${Fe}] sending request`,formatRequestDetails({retryOfRequestLogID:xe,method:Ce.method,url:Me,options:Ce,headers:Be.headers})),!((Ee=Ce.signal)===null||Ee===void 0)&&Ee.aborted)throw new APIUserAbortError;const Ye=new AbortController,Xe=await this.fetchWithTimeout(Me,Be,Ve,Ye).catch(castToError),je=Date.now();if(Xe instanceof globalThis.Error){const sn=`retrying, ${r} attempts remaining`;if(!((Pe=Ce.signal)===null||Pe===void 0)&&Pe.aborted)throw new APIUserAbortError;const cn=isAbortError(Xe)||/timed? ?out/i.test(String(Xe)+("cause"in Xe?String(Xe.cause):""));if(r)return loggerFor(this).info(`[${Fe}] connection ${cn?"timed out":"failed"} - ${sn}`),loggerFor(this).debug(`[${Fe}] connection ${cn?"timed out":"failed"} (${sn})`,formatRequestDetails({retryOfRequestLogID:xe,url:Me,durationMs:je-qe,message:Xe.message})),this.retryRequest(Ce,r,xe??Fe);throw loggerFor(this).info(`[${Fe}] connection ${cn?"timed out":"failed"} - error; no more retries left`),loggerFor(this).debug(`[${Fe}] connection ${cn?"timed out":"failed"} (error; no more retries left)`,formatRequestDetails({retryOfRequestLogID:xe,url:Me,durationMs:je-qe,message:Xe.message})),cn?new APIConnectionTimeoutError:new APIConnectionError({cause:Xe})}const Qe=`[${Fe}${Ie}] ${Be.method} ${Me} ${Xe.ok?"succeeded":"failed"} with status ${Xe.status} in ${je-qe}ms`;if(!Xe.ok){const sn=await this.shouldRetry(Xe);if(r&&sn){const We=`retrying, ${r} attempts remaining`;return await CancelReadableStream(Xe.body),loggerFor(this).info(`${Qe} - ${We}`),loggerFor(this).debug(`[${Fe}] response error (${We})`,formatRequestDetails({retryOfRequestLogID:xe,url:Xe.url,status:Xe.status,headers:Xe.headers,durationMs:je-qe})),this.retryRequest(Ce,r,xe??Fe,Xe.headers)}const cn=sn?"error; no more retries left":"error; not retryable";loggerFor(this).info(`${Qe} - ${cn}`);const nn=await Xe.text().catch(We=>castToError(We).message),an=safeJSON(nn),Ze=an?void 0:nn;throw loggerFor(this).debug(`[${Fe}] response error (${cn})`,formatRequestDetails({retryOfRequestLogID:xe,url:Xe.url,status:Xe.status,headers:Xe.headers,message:Ze,durationMs:Date.now()-qe})),this.makeStatusError(Xe.status,an,Ze,Xe.headers)}return loggerFor(this).info(Qe),loggerFor(this).debug(`[${Fe}] response start`,formatRequestDetails({retryOfRequestLogID:xe,url:Xe.url,status:Xe.status,headers:Xe.headers,durationMs:je-qe})),{response:Xe,options:Ce,controller:Ye,requestLogID:Fe,retryOfRequestLogID:xe,startTime:qe}}async fetchWithTimeout(e,r,xe,Se){const Ee=r||{},{signal:Pe,method:Ce}=Ee,Re=__rest(Ee,["signal","method"]);Pe&&Pe.addEventListener("abort",()=>Se.abort());const Be=setTimeout(()=>Se.abort(),xe),Me=globalThis.ReadableStream&&Re.body instanceof globalThis.ReadableStream||typeof Re.body=="object"&&Re.body!==null&&Symbol.asyncIterator in Re.body,Ve=Object.assign(Object.assign(Object.assign({signal:Se.signal},Me?{duplex:"half"}:{}),{method:"GET"}),Re);Ce&&(Ve.method=Ce.toUpperCase());try{return await this.fetch.call(void 0,e,Ve)}finally{clearTimeout(Be)}}async shouldRetry(e){const r=e.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,r,xe,Se){var Ee;let Pe;const Ce=Se==null?void 0:Se.get("retry-after-ms");if(Ce){const Be=parseFloat(Ce);Number.isNaN(Be)||(Pe=Be)}const Re=Se==null?void 0:Se.get("retry-after");if(Re&&!Pe){const Be=parseFloat(Re);Number.isNaN(Be)?Pe=Date.parse(Re)-Date.now():Pe=Be*1e3}if(!(Pe&&0<=Pe&&Pe<60*1e3)){const Be=(Ee=e.maxRetries)!==null&&Ee!==void 0?Ee:this.maxRetries;Pe=this.calculateDefaultRetryTimeoutMillis(r,Be)}return await sleep$1(Pe),this.makeRequest(e,r-1,xe)}calculateDefaultRetryTimeoutMillis(e,r){const Ee=r-e,Pe=Math.min(.5*Math.pow(2,Ee),8),Ce=1-Math.random()*.25;return Pe*Ce*1e3}async buildRequest(e,{retryCount:r=0}={}){var xe,Se,Ee;const Pe=Object.assign({},e),{method:Ce,path:Re,query:Be,defaultBaseURL:Me}=Pe,Ve=this.buildURL(Re,Be,Me);"timeout"in Pe&&validatePositiveInteger("timeout",Pe.timeout),Pe.timeout=(xe=Pe.timeout)!==null&&xe!==void 0?xe:this.timeout;const{bodyHeaders:Fe,body:Ie}=this.buildBody({options:Pe}),qe=await this.buildHeaders({options:e,method:Ce,bodyHeaders:Fe,retryCount:r});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:Ce,headers:qe},Pe.signal&&{signal:Pe.signal}),globalThis.ReadableStream&&Ie instanceof globalThis.ReadableStream&&{duplex:"half"}),Ie&&{body:Ie}),(Se=this.fetchOptions)!==null&&Se!==void 0?Se:{}),(Ee=Pe.fetchOptions)!==null&&Ee!==void 0?Ee:{}),url:Ve,timeout:Pe.timeout}}async buildHeaders({options:e,method:r,bodyHeaders:xe,retryCount:Se}){let Ee={};this.idempotencyHeader&&r!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),Ee[this.idempotencyHeader]=e.idempotencyKey);const Pe=await this.authHeaders(e);let Ce=buildHeaders([Ee,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(Se)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),getPlatformHeaders()),this._options.defaultHeaders,xe,e.headers,Pe]);return this.validateHeaders(Ce),Ce.values}buildBody({options:{body:e,headers:r}}){if(!e)return{bodyHeaders:void 0,body:void 0};const xe=buildHeaders([r]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&xe.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:ReadableStreamFrom(e)}:this.encoder({body:e,headers:xe})}}BaseGeminiNextGenAPIClient.DEFAULT_TIMEOUT=6e4;class GeminiNextGenAPIClient extends BaseGeminiNextGenAPIClient{constructor(){super(...arguments),this.interactions=new Interactions(this)}}_a$1=GeminiNextGenAPIClient;GeminiNextGenAPIClient.GeminiNextGenAPIClient=_a$1;GeminiNextGenAPIClient.GeminiNextGenAPIClientError=GeminiNextGenAPIClientError;GeminiNextGenAPIClient.APIError=APIError;GeminiNextGenAPIClient.APIConnectionError=APIConnectionError;GeminiNextGenAPIClient.APIConnectionTimeoutError=APIConnectionTimeoutError;GeminiNextGenAPIClient.APIUserAbortError=APIUserAbortError;GeminiNextGenAPIClient.NotFoundError=NotFoundError;GeminiNextGenAPIClient.ConflictError=ConflictError;GeminiNextGenAPIClient.RateLimitError=RateLimitError;GeminiNextGenAPIClient.BadRequestError=BadRequestError;GeminiNextGenAPIClient.AuthenticationError=AuthenticationError;GeminiNextGenAPIClient.InternalServerError=InternalServerError;GeminiNextGenAPIClient.PermissionDeniedError=PermissionDeniedError;GeminiNextGenAPIClient.UnprocessableEntityError=UnprocessableEntityError;GeminiNextGenAPIClient.toFile=toFile;GeminiNextGenAPIClient.Interactions=Interactions;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cancelTuningJobParametersToMldev(t,e){const r={},xe=getValueByPath(t,["name"]);return xe!=null&&setValueByPath(r,["_url","name"],xe),r}function cancelTuningJobParametersToVertex(t,e){const r={},xe=getValueByPath(t,["name"]);return xe!=null&&setValueByPath(r,["_url","name"],xe),r}function cancelTuningJobResponseFromMldev(t,e){const r={},xe=getValueByPath(t,["sdkHttpResponse"]);return xe!=null&&setValueByPath(r,["sdkHttpResponse"],xe),r}function cancelTuningJobResponseFromVertex(t,e){const r={},xe=getValueByPath(t,["sdkHttpResponse"]);return xe!=null&&setValueByPath(r,["sdkHttpResponse"],xe),r}function createTuningJobConfigToMldev(t,e,r){const xe={};if(getValueByPath(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const Se=getValueByPath(t,["tunedModelDisplayName"]);if(e!==void 0&&Se!=null&&setValueByPath(e,["displayName"],Se),getValueByPath(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const Ee=getValueByPath(t,["epochCount"]);e!==void 0&&Ee!=null&&setValueByPath(e,["tuningTask","hyperparameters","epochCount"],Ee);const Pe=getValueByPath(t,["learningRateMultiplier"]);if(Pe!=null&&setValueByPath(xe,["tuningTask","hyperparameters","learningRateMultiplier"],Pe),getValueByPath(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(getValueByPath(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(getValueByPath(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const Ce=getValueByPath(t,["batchSize"]);e!==void 0&&Ce!=null&&setValueByPath(e,["tuningTask","hyperparameters","batchSize"],Ce);const Re=getValueByPath(t,["learningRate"]);if(e!==void 0&&Re!=null&&setValueByPath(e,["tuningTask","hyperparameters","learningRate"],Re),getValueByPath(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(getValueByPath(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return xe}function createTuningJobConfigToVertex(t,e,r){const xe={};let Se=getValueByPath(r,["config","method"]);if(Se===void 0&&(Se="SUPERVISED_FINE_TUNING"),Se==="SUPERVISED_FINE_TUNING"){const Ie=getValueByPath(t,["validationDataset"]);e!==void 0&&Ie!=null&&setValueByPath(e,["supervisedTuningSpec"],tuningValidationDatasetToVertex(Ie))}else if(Se==="PREFERENCE_TUNING"){const Ie=getValueByPath(t,["validationDataset"]);e!==void 0&&Ie!=null&&setValueByPath(e,["preferenceOptimizationSpec"],tuningValidationDatasetToVertex(Ie))}const Ee=getValueByPath(t,["tunedModelDisplayName"]);e!==void 0&&Ee!=null&&setValueByPath(e,["tunedModelDisplayName"],Ee);const Pe=getValueByPath(t,["description"]);e!==void 0&&Pe!=null&&setValueByPath(e,["description"],Pe);let Ce=getValueByPath(r,["config","method"]);if(Ce===void 0&&(Ce="SUPERVISED_FINE_TUNING"),Ce==="SUPERVISED_FINE_TUNING"){const Ie=getValueByPath(t,["epochCount"]);e!==void 0&&Ie!=null&&setValueByPath(e,["supervisedTuningSpec","hyperParameters","epochCount"],Ie)}else if(Ce==="PREFERENCE_TUNING"){const Ie=getValueByPath(t,["epochCount"]);e!==void 0&&Ie!=null&&setValueByPath(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],Ie)}let Re=getValueByPath(r,["config","method"]);if(Re===void 0&&(Re="SUPERVISED_FINE_TUNING"),Re==="SUPERVISED_FINE_TUNING"){const Ie=getValueByPath(t,["learningRateMultiplier"]);e!==void 0&&Ie!=null&&setValueByPath(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],Ie)}else if(Re==="PREFERENCE_TUNING"){const Ie=getValueByPath(t,["learningRateMultiplier"]);e!==void 0&&Ie!=null&&setValueByPath(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],Ie)}let Be=getValueByPath(r,["config","method"]);if(Be===void 0&&(Be="SUPERVISED_FINE_TUNING"),Be==="SUPERVISED_FINE_TUNING"){const Ie=getValueByPath(t,["exportLastCheckpointOnly"]);e!==void 0&&Ie!=null&&setValueByPath(e,["supervisedTuningSpec","exportLastCheckpointOnly"],Ie)}else if(Be==="PREFERENCE_TUNING"){const Ie=getValueByPath(t,["exportLastCheckpointOnly"]);e!==void 0&&Ie!=null&&setValueByPath(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],Ie)}let Me=getValueByPath(r,["config","method"]);if(Me===void 0&&(Me="SUPERVISED_FINE_TUNING"),Me==="SUPERVISED_FINE_TUNING"){const Ie=getValueByPath(t,["adapterSize"]);e!==void 0&&Ie!=null&&setValueByPath(e,["supervisedTuningSpec","hyperParameters","adapterSize"],Ie)}else if(Me==="PREFERENCE_TUNING"){const Ie=getValueByPath(t,["adapterSize"]);e!==void 0&&Ie!=null&&setValueByPath(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],Ie)}if(getValueByPath(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(getValueByPath(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const Ve=getValueByPath(t,["labels"]);e!==void 0&&Ve!=null&&setValueByPath(e,["labels"],Ve);const Fe=getValueByPath(t,["beta"]);return e!==void 0&&Fe!=null&&setValueByPath(e,["preferenceOptimizationSpec","hyperParameters","beta"],Fe),xe}function createTuningJobParametersPrivateToMldev(t,e){const r={},xe=getValueByPath(t,["baseModel"]);xe!=null&&setValueByPath(r,["baseModel"],xe);const Se=getValueByPath(t,["preTunedModel"]);Se!=null&&setValueByPath(r,["preTunedModel"],Se);const Ee=getValueByPath(t,["trainingDataset"]);Ee!=null&&tuningDatasetToMldev(Ee);const Pe=getValueByPath(t,["config"]);return Pe!=null&&createTuningJobConfigToMldev(Pe,r),r}function createTuningJobParametersPrivateToVertex(t,e){const r={},xe=getValueByPath(t,["baseModel"]);xe!=null&&setValueByPath(r,["baseModel"],xe);const Se=getValueByPath(t,["preTunedModel"]);Se!=null&&setValueByPath(r,["preTunedModel"],Se);const Ee=getValueByPath(t,["trainingDataset"]);Ee!=null&&tuningDatasetToVertex(Ee,r,e);const Pe=getValueByPath(t,["config"]);return Pe!=null&&createTuningJobConfigToVertex(Pe,r,e),r}function getTuningJobParametersToMldev(t,e){const r={},xe=getValueByPath(t,["name"]);return xe!=null&&setValueByPath(r,["_url","name"],xe),r}function getTuningJobParametersToVertex(t,e){const r={},xe=getValueByPath(t,["name"]);return xe!=null&&setValueByPath(r,["_url","name"],xe),r}function listTuningJobsConfigToMldev(t,e,r){const xe={},Se=getValueByPath(t,["pageSize"]);e!==void 0&&Se!=null&&setValueByPath(e,["_query","pageSize"],Se);const Ee=getValueByPath(t,["pageToken"]);e!==void 0&&Ee!=null&&setValueByPath(e,["_query","pageToken"],Ee);const Pe=getValueByPath(t,["filter"]);return e!==void 0&&Pe!=null&&setValueByPath(e,["_query","filter"],Pe),xe}function listTuningJobsConfigToVertex(t,e,r){const xe={},Se=getValueByPath(t,["pageSize"]);e!==void 0&&Se!=null&&setValueByPath(e,["_query","pageSize"],Se);const Ee=getValueByPath(t,["pageToken"]);e!==void 0&&Ee!=null&&setValueByPath(e,["_query","pageToken"],Ee);const Pe=getValueByPath(t,["filter"]);return e!==void 0&&Pe!=null&&setValueByPath(e,["_query","filter"],Pe),xe}function listTuningJobsParametersToMldev(t,e){const r={},xe=getValueByPath(t,["config"]);return xe!=null&&listTuningJobsConfigToMldev(xe,r),r}function listTuningJobsParametersToVertex(t,e){const r={},xe=getValueByPath(t,["config"]);return xe!=null&&listTuningJobsConfigToVertex(xe,r),r}function listTuningJobsResponseFromMldev(t,e){const r={},xe=getValueByPath(t,["sdkHttpResponse"]);xe!=null&&setValueByPath(r,["sdkHttpResponse"],xe);const Se=getValueByPath(t,["nextPageToken"]);Se!=null&&setValueByPath(r,["nextPageToken"],Se);const Ee=getValueByPath(t,["tunedModels"]);if(Ee!=null){let Pe=Ee;Array.isArray(Pe)&&(Pe=Pe.map(Ce=>tuningJobFromMldev(Ce))),setValueByPath(r,["tuningJobs"],Pe)}return r}function listTuningJobsResponseFromVertex(t,e){const r={},xe=getValueByPath(t,["sdkHttpResponse"]);xe!=null&&setValueByPath(r,["sdkHttpResponse"],xe);const Se=getValueByPath(t,["nextPageToken"]);Se!=null&&setValueByPath(r,["nextPageToken"],Se);const Ee=getValueByPath(t,["tuningJobs"]);if(Ee!=null){let Pe=Ee;Array.isArray(Pe)&&(Pe=Pe.map(Ce=>tuningJobFromVertex(Ce))),setValueByPath(r,["tuningJobs"],Pe)}return r}function tunedModelFromMldev(t,e){const r={},xe=getValueByPath(t,["name"]);xe!=null&&setValueByPath(r,["model"],xe);const Se=getValueByPath(t,["name"]);return Se!=null&&setValueByPath(r,["endpoint"],Se),r}function tuningDatasetToMldev(t,e){const r={};if(getValueByPath(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(getValueByPath(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const xe=getValueByPath(t,["examples"]);if(xe!=null){let Se=xe;Array.isArray(Se)&&(Se=Se.map(Ee=>Ee)),setValueByPath(r,["examples","examples"],Se)}return r}function tuningDatasetToVertex(t,e,r){const xe={};let Se=getValueByPath(r,["config","method"]);if(Se===void 0&&(Se="SUPERVISED_FINE_TUNING"),Se==="SUPERVISED_FINE_TUNING"){const Pe=getValueByPath(t,["gcsUri"]);e!==void 0&&Pe!=null&&setValueByPath(e,["supervisedTuningSpec","trainingDatasetUri"],Pe)}else if(Se==="PREFERENCE_TUNING"){const Pe=getValueByPath(t,["gcsUri"]);e!==void 0&&Pe!=null&&setValueByPath(e,["preferenceOptimizationSpec","trainingDatasetUri"],Pe)}let Ee=getValueByPath(r,["config","method"]);if(Ee===void 0&&(Ee="SUPERVISED_FINE_TUNING"),Ee==="SUPERVISED_FINE_TUNING"){const Pe=getValueByPath(t,["vertexDatasetResource"]);e!==void 0&&Pe!=null&&setValueByPath(e,["supervisedTuningSpec","trainingDatasetUri"],Pe)}else if(Ee==="PREFERENCE_TUNING"){const Pe=getValueByPath(t,["vertexDatasetResource"]);e!==void 0&&Pe!=null&&setValueByPath(e,["preferenceOptimizationSpec","trainingDatasetUri"],Pe)}if(getValueByPath(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return xe}function tuningJobFromMldev(t,e){const r={},xe=getValueByPath(t,["sdkHttpResponse"]);xe!=null&&setValueByPath(r,["sdkHttpResponse"],xe);const Se=getValueByPath(t,["name"]);Se!=null&&setValueByPath(r,["name"],Se);const Ee=getValueByPath(t,["state"]);Ee!=null&&setValueByPath(r,["state"],tTuningJobStatus(Ee));const Pe=getValueByPath(t,["createTime"]);Pe!=null&&setValueByPath(r,["createTime"],Pe);const Ce=getValueByPath(t,["tuningTask","startTime"]);Ce!=null&&setValueByPath(r,["startTime"],Ce);const Re=getValueByPath(t,["tuningTask","completeTime"]);Re!=null&&setValueByPath(r,["endTime"],Re);const Be=getValueByPath(t,["updateTime"]);Be!=null&&setValueByPath(r,["updateTime"],Be);const Me=getValueByPath(t,["description"]);Me!=null&&setValueByPath(r,["description"],Me);const Ve=getValueByPath(t,["baseModel"]);Ve!=null&&setValueByPath(r,["baseModel"],Ve);const Fe=getValueByPath(t,["_self"]);return Fe!=null&&setValueByPath(r,["tunedModel"],tunedModelFromMldev(Fe)),r}function tuningJobFromVertex(t,e){const r={},xe=getValueByPath(t,["sdkHttpResponse"]);xe!=null&&setValueByPath(r,["sdkHttpResponse"],xe);const Se=getValueByPath(t,["name"]);Se!=null&&setValueByPath(r,["name"],Se);const Ee=getValueByPath(t,["state"]);Ee!=null&&setValueByPath(r,["state"],tTuningJobStatus(Ee));const Pe=getValueByPath(t,["createTime"]);Pe!=null&&setValueByPath(r,["createTime"],Pe);const Ce=getValueByPath(t,["startTime"]);Ce!=null&&setValueByPath(r,["startTime"],Ce);const Re=getValueByPath(t,["endTime"]);Re!=null&&setValueByPath(r,["endTime"],Re);const Be=getValueByPath(t,["updateTime"]);Be!=null&&setValueByPath(r,["updateTime"],Be);const Me=getValueByPath(t,["error"]);Me!=null&&setValueByPath(r,["error"],Me);const Ve=getValueByPath(t,["description"]);Ve!=null&&setValueByPath(r,["description"],Ve);const Fe=getValueByPath(t,["baseModel"]);Fe!=null&&setValueByPath(r,["baseModel"],Fe);const Ie=getValueByPath(t,["tunedModel"]);Ie!=null&&setValueByPath(r,["tunedModel"],Ie);const qe=getValueByPath(t,["preTunedModel"]);qe!=null&&setValueByPath(r,["preTunedModel"],qe);const Ye=getValueByPath(t,["supervisedTuningSpec"]);Ye!=null&&setValueByPath(r,["supervisedTuningSpec"],Ye);const Xe=getValueByPath(t,["preferenceOptimizationSpec"]);Xe!=null&&setValueByPath(r,["preferenceOptimizationSpec"],Xe);const je=getValueByPath(t,["tuningDataStats"]);je!=null&&setValueByPath(r,["tuningDataStats"],je);const Qe=getValueByPath(t,["encryptionSpec"]);Qe!=null&&setValueByPath(r,["encryptionSpec"],Qe);const sn=getValueByPath(t,["partnerModelTuningSpec"]);sn!=null&&setValueByPath(r,["partnerModelTuningSpec"],sn);const cn=getValueByPath(t,["customBaseModel"]);cn!=null&&setValueByPath(r,["customBaseModel"],cn);const nn=getValueByPath(t,["experiment"]);nn!=null&&setValueByPath(r,["experiment"],nn);const an=getValueByPath(t,["labels"]);an!=null&&setValueByPath(r,["labels"],an);const Ze=getValueByPath(t,["outputUri"]);Ze!=null&&setValueByPath(r,["outputUri"],Ze);const tn=getValueByPath(t,["pipelineJob"]);tn!=null&&setValueByPath(r,["pipelineJob"],tn);const We=getValueByPath(t,["serviceAccount"]);We!=null&&setValueByPath(r,["serviceAccount"],We);const An=getValueByPath(t,["tunedModelDisplayName"]);An!=null&&setValueByPath(r,["tunedModelDisplayName"],An);const Je=getValueByPath(t,["veoTuningSpec"]);return Je!=null&&setValueByPath(r,["veoTuningSpec"],Je),r}function tuningOperationFromMldev(t,e){const r={},xe=getValueByPath(t,["sdkHttpResponse"]);xe!=null&&setValueByPath(r,["sdkHttpResponse"],xe);const Se=getValueByPath(t,["name"]);Se!=null&&setValueByPath(r,["name"],Se);const Ee=getValueByPath(t,["metadata"]);Ee!=null&&setValueByPath(r,["metadata"],Ee);const Pe=getValueByPath(t,["done"]);Pe!=null&&setValueByPath(r,["done"],Pe);const Ce=getValueByPath(t,["error"]);return Ce!=null&&setValueByPath(r,["error"],Ce),r}function tuningValidationDatasetToVertex(t,e){const r={},xe=getValueByPath(t,["gcsUri"]);xe!=null&&setValueByPath(r,["validationDatasetUri"],xe);const Se=getValueByPath(t,["vertexDatasetResource"]);return Se!=null&&setValueByPath(r,["validationDatasetUri"],Se),r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tunings extends BaseModule{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Pager(PagedItem.PAGED_ITEM_TUNING_JOBS,xe=>this.listInternal(xe),await this.listInternal(r),r),this.get=async r=>await this.getInternal(r),this.tune=async r=>{var xe;if(this.apiClient.isVertexAI())if(r.baseModel.startsWith("projects/")){const Se={tunedModelName:r.baseModel};!((xe=r.config)===null||xe===void 0)&&xe.preTunedModelCheckpointId&&(Se.checkpointId=r.config.preTunedModelCheckpointId);const Ee=Object.assign(Object.assign({},r),{preTunedModel:Se});return Ee.baseModel=void 0,await this.tuneInternal(Ee)}else{const Se=Object.assign({},r);return await this.tuneInternal(Se)}else{const Se=Object.assign({},r),Ee=await this.tuneMldevInternal(Se);let Pe="";return Ee.metadata!==void 0&&Ee.metadata.tunedModel!==void 0?Pe=Ee.metadata.tunedModel:Ee.name!==void 0&&Ee.name.includes("/operations/")&&(Pe=Ee.name.split("/operations/")[0]),{name:Pe,state:JobState.JOB_STATE_QUEUED}}}}async getInternal(e){var r,xe,Se,Ee;let Pe,Ce="",Re={};if(this.apiClient.isVertexAI()){const Be=getTuningJobParametersToVertex(e);return Ce=formatMap("{name}",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Me=>Me.json().then(Ve=>{const Fe=Ve;return Fe.sdkHttpResponse={headers:Me.headers},Fe})),Pe.then(Me=>tuningJobFromVertex(Me))}else{const Be=getTuningJobParametersToMldev(e);return Ce=formatMap("{name}",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(Se=e.config)===null||Se===void 0?void 0:Se.httpOptions,abortSignal:(Ee=e.config)===null||Ee===void 0?void 0:Ee.abortSignal}).then(Me=>Me.json().then(Ve=>{const Fe=Ve;return Fe.sdkHttpResponse={headers:Me.headers},Fe})),Pe.then(Me=>tuningJobFromMldev(Me))}}async listInternal(e){var r,xe,Se,Ee;let Pe,Ce="",Re={};if(this.apiClient.isVertexAI()){const Be=listTuningJobsParametersToVertex(e);return Ce=formatMap("tuningJobs",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Me=>Me.json().then(Ve=>{const Fe=Ve;return Fe.sdkHttpResponse={headers:Me.headers},Fe})),Pe.then(Me=>{const Ve=listTuningJobsResponseFromVertex(Me),Fe=new ListTuningJobsResponse;return Object.assign(Fe,Ve),Fe})}else{const Be=listTuningJobsParametersToMldev(e);return Ce=formatMap("tunedModels",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"GET",httpOptions:(Se=e.config)===null||Se===void 0?void 0:Se.httpOptions,abortSignal:(Ee=e.config)===null||Ee===void 0?void 0:Ee.abortSignal}).then(Me=>Me.json().then(Ve=>{const Fe=Ve;return Fe.sdkHttpResponse={headers:Me.headers},Fe})),Pe.then(Me=>{const Ve=listTuningJobsResponseFromMldev(Me),Fe=new ListTuningJobsResponse;return Object.assign(Fe,Ve),Fe})}}async cancel(e){var r,xe,Se,Ee;let Pe,Ce="",Re={};if(this.apiClient.isVertexAI()){const Be=cancelTuningJobParametersToVertex(e);return Ce=formatMap("{name}:cancel",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Me=>Me.json().then(Ve=>{const Fe=Ve;return Fe.sdkHttpResponse={headers:Me.headers},Fe})),Pe.then(Me=>{const Ve=cancelTuningJobResponseFromVertex(Me),Fe=new CancelTuningJobResponse;return Object.assign(Fe,Ve),Fe})}else{const Be=cancelTuningJobParametersToMldev(e);return Ce=formatMap("{name}:cancel",Be._url),Re=Be._query,delete Be._url,delete Be._query,Pe=this.apiClient.request({path:Ce,queryParams:Re,body:JSON.stringify(Be),httpMethod:"POST",httpOptions:(Se=e.config)===null||Se===void 0?void 0:Se.httpOptions,abortSignal:(Ee=e.config)===null||Ee===void 0?void 0:Ee.abortSignal}).then(Me=>Me.json().then(Ve=>{const Fe=Ve;return Fe.sdkHttpResponse={headers:Me.headers},Fe})),Pe.then(Me=>{const Ve=cancelTuningJobResponseFromMldev(Me),Fe=new CancelTuningJobResponse;return Object.assign(Fe,Ve),Fe})}}async tuneInternal(e){var r,xe;let Se,Ee="",Pe={};if(this.apiClient.isVertexAI()){const Ce=createTuningJobParametersPrivateToVertex(e,e);return Ee=formatMap("tuningJobs",Ce._url),Pe=Ce._query,delete Ce._url,delete Ce._query,Se=this.apiClient.request({path:Ee,queryParams:Pe,body:JSON.stringify(Ce),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Re=>Re.json().then(Be=>{const Me=Be;return Me.sdkHttpResponse={headers:Re.headers},Me})),Se.then(Re=>tuningJobFromVertex(Re))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var r,xe;let Se,Ee="",Pe={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const Ce=createTuningJobParametersPrivateToMldev(e);return Ee=formatMap("tunedModels",Ce._url),Pe=Ce._query,delete Ce._url,delete Ce._query,Se=this.apiClient.request({path:Ee,queryParams:Pe,body:JSON.stringify(Ce),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(xe=e.config)===null||xe===void 0?void 0:xe.abortSignal}).then(Re=>Re.json().then(Be=>{const Me=Be;return Me.sdkHttpResponse={headers:Re.headers},Me})),Se.then(Re=>tuningOperationFromMldev(Re))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BrowserDownloader{async download(e,r){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const MAX_CHUNK_SIZE=1024*1024*8,MAX_RETRY_COUNT=3,INITIAL_RETRY_DELAY_MS=1e3,DELAY_MULTIPLIER=2,X_GOOG_UPLOAD_STATUS_HEADER_FIELD="x-goog-upload-status";async function uploadBlob(t,e,r){var xe;const Se=await uploadBlobInternal(t,e,r),Ee=await(Se==null?void 0:Se.json());if(((xe=Se==null?void 0:Se.headers)===null||xe===void 0?void 0:xe[X_GOOG_UPLOAD_STATUS_HEADER_FIELD])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return Ee.file}async function uploadBlobToFileSearchStore(t,e,r){var xe;const Se=await uploadBlobInternal(t,e,r),Ee=await(Se==null?void 0:Se.json());if(((xe=Se==null?void 0:Se.headers)===null||xe===void 0?void 0:xe[X_GOOG_UPLOAD_STATUS_HEADER_FIELD])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const Pe=uploadToFileSearchStoreOperationFromMldev(Ee),Ce=new UploadToFileSearchStoreOperation;return Object.assign(Ce,Pe),Ce}async function uploadBlobInternal(t,e,r){var xe,Se;let Ee=0,Pe=0,Ce=new HttpResponse(new Response),Re="upload";for(Ee=t.size;Pe<Ee;){const Be=Math.min(MAX_CHUNK_SIZE,Ee-Pe),Me=t.slice(Pe,Pe+Be);Pe+Be>=Ee&&(Re+=", finalize");let Ve=0,Fe=INITIAL_RETRY_DELAY_MS;for(;Ve<MAX_RETRY_COUNT&&(Ce=await r.request({path:"",body:Me,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":Re,"X-Goog-Upload-Offset":String(Pe),"Content-Length":String(Be)}}}),!(!((xe=Ce==null?void 0:Ce.headers)===null||xe===void 0)&&xe[X_GOOG_UPLOAD_STATUS_HEADER_FIELD]));)Ve++,await sleep(Fe),Fe=Fe*DELAY_MULTIPLIER;if(Pe+=Be,((Se=Ce==null?void 0:Ce.headers)===null||Se===void 0?void 0:Se[X_GOOG_UPLOAD_STATUS_HEADER_FIELD])!=="active")break;if(Ee<=Pe)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return Ce}async function getBlobStat(t){return{size:t.size,type:t.type}}function sleep(t){return new Promise(e=>setTimeout(e,t))}class BrowserUploader{async upload(e,r,xe){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await uploadBlob(e,r,xe)}async uploadToFileSearchStore(e,r,xe){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await uploadBlobToFileSearchStore(e,r,xe)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await getBlobStat(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BrowserWebSocketFactory{create(e,r,xe){return new BrowserWebSocket(e,r,xe)}}class BrowserWebSocket{constructor(e,r,xe){this.url=e,this.headers=r,this.callbacks=xe}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GOOGLE_API_KEY_HEADER="x-goog-api-key";class WebAuth{constructor(e){this.apiKey=e}async addAuthHeaders(e,r){if(e.get(GOOGLE_API_KEY_HEADER)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(GOOGLE_API_KEY_HEADER,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LANGUAGE_LABEL_PREFIX="gl-node/";class GoogleGenAI{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const r=new GeminiNextGenAPIClient({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=r.interactions,this._interactions}constructor(e){var r;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(r=e.vertexai)!==null&&r!==void 0?r:!1,this.apiKey=e.apiKey;const xe=getBaseUrl(e.httpOptions,e.vertexai,void 0,void 0);xe&&(e.httpOptions?e.httpOptions.baseUrl=xe:e.httpOptions={baseUrl:xe}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const Se=new WebAuth(this.apiKey);this.apiClient=new ApiClient({auth:Se,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:LANGUAGE_LABEL_PREFIX+"web",uploader:new BrowserUploader,downloader:new BrowserDownloader}),this.models=new Models(this.apiClient),this.live=new Live(this.apiClient,Se,new BrowserWebSocketFactory),this.batches=new Batches(this.apiClient),this.chats=new Chats(this.models,this.apiClient),this.caches=new Caches(this.apiClient),this.files=new Files(this.apiClient),this.operations=new Operations(this.apiClient),this.authTokens=new Tokens(this.apiClient),this.tunings=new Tunings(this.apiClient),this.fileSearchStores=new FileSearchStores(this.apiClient)}}var define_process_env_default={};const getClient=()=>{const t=define_process_env_default.API_KEY;if(!t)throw new Error("API Key not found");return new GoogleGenAI({apiKey:t})},transcribeTaskImage=async t=>{try{const e=getClient(),r=t.split(",")[1]||t;return(await e.models.generateContent({model:"gemini-3-flash-preview",contents:{parts:[{inlineData:{mimeType:"image/jpeg",data:r}},{text:"Transcribe the essay task instructions from this image into clean Markdown format. Focus on the question, requirements, and any bullet points provided in the prompt."}]}})).text||"Could not transcribe task."}catch(e){return console.error("Transcription error",e),"Error transcribing task. Please type manually."}};function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,(function(module,exports$1){(function(e,r){module.exports=e.pdfjsLib=r()})(globalThis,()=>(()=>{var __webpack_modules__=[,((t,e)=>{var Ki;Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=pn,e.bytesToString=jn,e.createValidAbsoluteUrl=xn,e.getModificationDate=ai,e.getUuid=na,e.getVerbosityLevel=yn,e.info=mn,e.isArrayBuffer=$n,e.isArrayEqual=Yn,e.isNodeJS=void 0,e.normalizeUnicode=Pi,e.objectFromMap=qn,e.objectSize=si,e.setVerbosityLevel=_n,e.shadow=Ge,e.string32=ti,e.stringToBytes=Wn,e.stringToPDFString=ni,e.stringToUTF8String=yi,e.unreachable=Pn,e.utf8StringToString=pi,e.warn=Sn;const r=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=r;const xe=[1,0,0,1,0,0];e.IDENTITY_MATRIX=xe;const Se=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=Se;const Ee=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=Ee;const Pe=1.35;e.LINE_FACTOR=Pe;const Ce=.35;e.LINE_DESCENT_FACTOR=Ce;const Re=Ce/Pe;e.BASELINE_FACTOR=Re;const Be={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=Be;const Me={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=Me;const Ve="pdfjs_internal_editor_";e.AnnotationEditorPrefix=Ve;const Fe={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=Fe;const Ie={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=Ie;const qe={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=qe;const Ye={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=Ye;const Xe={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=Xe;const je={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=je;const Qe={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=Qe;const sn={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=sn;const cn={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=cn;const nn={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=nn;const an={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=an;const Ze={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=Ze;const tn={O:"PageOpen",C:"PageClose"};e.PageActionEventType=tn;const We={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=We;const An={NONE:0,BINARY:1};e.CMapCompressionType=An;const Je={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=Je;const St={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=St;let hn=We.WARNINGS;function _n(oi){Number.isInteger(oi)&&(hn=oi)}function yn(){return hn}function mn(oi){hn>=We.INFOS&&console.log(`Info: ${oi}`)}function Sn(oi){hn>=We.WARNINGS&&console.log(`Warning: ${oi}`)}function Pn(oi){throw new Error(oi)}function pn(oi,Kn){oi||Pn(Kn)}function on(oi){switch(oi==null?void 0:oi.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function xn(oi,Kn=null,di=null){if(!oi)return null;try{if(di&&typeof oi=="string"){if(di.addDefaultProtocol&&oi.startsWith("www.")){const wi=oi.match(/\./g);(wi==null?void 0:wi.length)>=2&&(oi=`http://${oi}`)}if(di.tryConvertEncoding)try{oi=yi(oi)}catch{}}const Ui=Kn?new URL(oi,Kn):new URL(oi);if(on(Ui))return Ui}catch{}return null}function Ge(oi,Kn,di,Ui=!1){return Object.defineProperty(oi,Kn,{value:di,enumerable:!Ui,configurable:!0,writable:!1}),di}const Oe=(function(){function Kn(di,Ui){this.constructor===Kn&&Pn("Cannot initialize BaseException."),this.message=di,this.name=Ui}return Kn.prototype=new Error,Kn.constructor=Kn,Kn})();e.BaseException=Oe;class $e extends Oe{constructor(Kn,di){super(Kn,"PasswordException"),this.code=di}}e.PasswordException=$e;class rn extends Oe{constructor(Kn,di){super(Kn,"UnknownErrorException"),this.details=di}}e.UnknownErrorException=rn;class fn extends Oe{constructor(Kn){super(Kn,"InvalidPDFException")}}e.InvalidPDFException=fn;class gn extends Oe{constructor(Kn){super(Kn,"MissingPDFException")}}e.MissingPDFException=gn;class vn extends Oe{constructor(Kn,di){super(Kn,"UnexpectedResponseException"),this.status=di}}e.UnexpectedResponseException=vn;class wn extends Oe{constructor(Kn){super(Kn,"FormatError")}}e.FormatError=wn;class On extends Oe{constructor(Kn){super(Kn,"AbortException")}}e.AbortException=On;function jn(oi){(typeof oi!="object"||(oi==null?void 0:oi.length)===void 0)&&Pn("Invalid argument for bytesToString");const Kn=oi.length,di=8192;if(Kn<di)return String.fromCharCode.apply(null,oi);const Ui=[];for(let wi=0;wi<Kn;wi+=di){const Ai=Math.min(wi+di,Kn),Rn=oi.subarray(wi,Ai);Ui.push(String.fromCharCode.apply(null,Rn))}return Ui.join("")}function Wn(oi){typeof oi!="string"&&Pn("Invalid argument for stringToBytes");const Kn=oi.length,di=new Uint8Array(Kn);for(let Ui=0;Ui<Kn;++Ui)di[Ui]=oi.charCodeAt(Ui)&255;return di}function ti(oi){return String.fromCharCode(oi>>24&255,oi>>16&255,oi>>8&255,oi&255)}function si(oi){return Object.keys(oi).length}function qn(oi){const Kn=Object.create(null);for(const[di,Ui]of oi)Kn[di]=Ui;return Kn}function En(){const oi=new Uint8Array(4);return oi[0]=1,new Uint32Array(oi.buffer,0,1)[0]===1}function Qn(){try{return new Function(""),!0}catch{return!1}}class Cn{static get isLittleEndian(){return Ge(this,"isLittleEndian",En())}static get isEvalSupported(){return Ge(this,"isEvalSupported",Qn())}static get isOffscreenCanvasSupported(){return Ge(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?Ge(this,"platform",{isWin:!1,isMac:!1}):Ge(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var Kn,di;return Ge(this,"isCSSRoundSupported",(di=(Kn=globalThis.CSS)==null?void 0:Kn.supports)==null?void 0:di.call(Kn,"width: round(1.5px, 1px)"))}}e.FeatureTest=Cn;const Mn=[...Array(256).keys()].map(oi=>oi.toString(16).padStart(2,"0"));class Un{static makeHexColor(Kn,di,Ui){return`#${Mn[Kn]}${Mn[di]}${Mn[Ui]}`}static scaleMinMax(Kn,di){let Ui;Kn[0]?(Kn[0]<0&&(Ui=di[0],di[0]=di[1],di[1]=Ui),di[0]*=Kn[0],di[1]*=Kn[0],Kn[3]<0&&(Ui=di[2],di[2]=di[3],di[3]=Ui),di[2]*=Kn[3],di[3]*=Kn[3]):(Ui=di[0],di[0]=di[2],di[2]=Ui,Ui=di[1],di[1]=di[3],di[3]=Ui,Kn[1]<0&&(Ui=di[2],di[2]=di[3],di[3]=Ui),di[2]*=Kn[1],di[3]*=Kn[1],Kn[2]<0&&(Ui=di[0],di[0]=di[1],di[1]=Ui),di[0]*=Kn[2],di[1]*=Kn[2]),di[0]+=Kn[4],di[1]+=Kn[4],di[2]+=Kn[5],di[3]+=Kn[5]}static transform(Kn,di){return[Kn[0]*di[0]+Kn[2]*di[1],Kn[1]*di[0]+Kn[3]*di[1],Kn[0]*di[2]+Kn[2]*di[3],Kn[1]*di[2]+Kn[3]*di[3],Kn[0]*di[4]+Kn[2]*di[5]+Kn[4],Kn[1]*di[4]+Kn[3]*di[5]+Kn[5]]}static applyTransform(Kn,di){const Ui=Kn[0]*di[0]+Kn[1]*di[2]+di[4],wi=Kn[0]*di[1]+Kn[1]*di[3]+di[5];return[Ui,wi]}static applyInverseTransform(Kn,di){const Ui=di[0]*di[3]-di[1]*di[2],wi=(Kn[0]*di[3]-Kn[1]*di[2]+di[2]*di[5]-di[4]*di[3])/Ui,Ai=(-Kn[0]*di[1]+Kn[1]*di[0]+di[4]*di[1]-di[5]*di[0])/Ui;return[wi,Ai]}static getAxialAlignedBoundingBox(Kn,di){const Ui=this.applyTransform(Kn,di),wi=this.applyTransform(Kn.slice(2,4),di),Ai=this.applyTransform([Kn[0],Kn[3]],di),Rn=this.applyTransform([Kn[2],Kn[1]],di);return[Math.min(Ui[0],wi[0],Ai[0],Rn[0]),Math.min(Ui[1],wi[1],Ai[1],Rn[1]),Math.max(Ui[0],wi[0],Ai[0],Rn[0]),Math.max(Ui[1],wi[1],Ai[1],Rn[1])]}static inverseTransform(Kn){const di=Kn[0]*Kn[3]-Kn[1]*Kn[2];return[Kn[3]/di,-Kn[1]/di,-Kn[2]/di,Kn[0]/di,(Kn[2]*Kn[5]-Kn[4]*Kn[3])/di,(Kn[4]*Kn[1]-Kn[5]*Kn[0])/di]}static singularValueDecompose2dScale(Kn){const di=[Kn[0],Kn[2],Kn[1],Kn[3]],Ui=Kn[0]*di[0]+Kn[1]*di[2],wi=Kn[0]*di[1]+Kn[1]*di[3],Ai=Kn[2]*di[0]+Kn[3]*di[2],Rn=Kn[2]*di[1]+Kn[3]*di[3],Zn=(Ui+Rn)/2,Xn=Math.sqrt((Ui+Rn)**2-4*(Ui*Rn-Ai*wi))/2,Si=Zn+Xn||1,Ci=Zn-Xn||1;return[Math.sqrt(Si),Math.sqrt(Ci)]}static normalizeRect(Kn){const di=Kn.slice(0);return Kn[0]>Kn[2]&&(di[0]=Kn[2],di[2]=Kn[0]),Kn[1]>Kn[3]&&(di[1]=Kn[3],di[3]=Kn[1]),di}static intersect(Kn,di){const Ui=Math.max(Math.min(Kn[0],Kn[2]),Math.min(di[0],di[2])),wi=Math.min(Math.max(Kn[0],Kn[2]),Math.max(di[0],di[2]));if(Ui>wi)return null;const Ai=Math.max(Math.min(Kn[1],Kn[3]),Math.min(di[1],di[3])),Rn=Math.min(Math.max(Kn[1],Kn[3]),Math.max(di[1],di[3]));return Ai>Rn?null:[Ui,Ai,wi,Rn]}static bezierBoundingBox(Kn,di,Ui,wi,Ai,Rn,Zn,Xn){const Si=[],Ci=[[],[]];let Oi,Fn,Nn,Gn,ei,ii,gi,Ti;for(let la=0;la<2;++la){if(la===0?(Fn=6*Kn-12*Ui+6*Ai,Oi=-3*Kn+9*Ui-9*Ai+3*Zn,Nn=3*Ui-3*Kn):(Fn=6*di-12*wi+6*Rn,Oi=-3*di+9*wi-9*Rn+3*Xn,Nn=3*wi-3*di),Math.abs(Oi)<1e-12){if(Math.abs(Fn)<1e-12)continue;Gn=-Nn/Fn,0<Gn&&Gn<1&&Si.push(Gn);continue}gi=Fn*Fn-4*Nn*Oi,Ti=Math.sqrt(gi),!(gi<0)&&(ei=(-Fn+Ti)/(2*Oi),0<ei&&ei<1&&Si.push(ei),ii=(-Fn-Ti)/(2*Oi),0<ii&&ii<1&&Si.push(ii))}let Wi=Si.length,qi;const ji=Wi;for(;Wi--;)Gn=Si[Wi],qi=1-Gn,Ci[0][Wi]=qi*qi*qi*Kn+3*qi*qi*Gn*Ui+3*qi*Gn*Gn*Ai+Gn*Gn*Gn*Zn,Ci[1][Wi]=qi*qi*qi*di+3*qi*qi*Gn*wi+3*qi*Gn*Gn*Rn+Gn*Gn*Gn*Xn;return Ci[0][ji]=Kn,Ci[1][ji]=di,Ci[0][ji+1]=Zn,Ci[1][ji+1]=Xn,Ci[0].length=Ci[1].length=ji+2,[Math.min(...Ci[0]),Math.min(...Ci[1]),Math.max(...Ci[0]),Math.max(...Ci[1])]}}e.Util=Un;const zn=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ni(oi){if(oi[0]>=""){let di;if(oi[0]===""&&oi[1]===""?di="utf-16be":oi[0]===""&&oi[1]===""?di="utf-16le":oi[0]===""&&oi[1]===""&&oi[2]===""&&(di="utf-8"),di)try{const Ui=new TextDecoder(di,{fatal:!0}),wi=Wn(oi);return Ui.decode(wi)}catch(Ui){Sn(`stringToPDFString: "${Ui}".`)}}const Kn=[];for(let di=0,Ui=oi.length;di<Ui;di++){const wi=zn[oi.charCodeAt(di)];Kn.push(wi?String.fromCharCode(wi):oi.charAt(di))}return Kn.join("")}function yi(oi){return decodeURIComponent(escape(oi))}function pi(oi){return unescape(encodeURIComponent(oi))}function $n(oi){return typeof oi=="object"&&(oi==null?void 0:oi.byteLength)!==void 0}function Yn(oi,Kn){if(oi.length!==Kn.length)return!1;for(let di=0,Ui=oi.length;di<Ui;di++)if(oi[di]!==Kn[di])return!1;return!0}function ai(oi=new Date){return[oi.getUTCFullYear().toString(),(oi.getUTCMonth()+1).toString().padStart(2,"0"),oi.getUTCDate().toString().padStart(2,"0"),oi.getUTCHours().toString().padStart(2,"0"),oi.getUTCMinutes().toString().padStart(2,"0"),oi.getUTCSeconds().toString().padStart(2,"0")].join("")}class Di{constructor(){bi(this,Ki,!1);this.promise=new Promise((Kn,di)=>{this.resolve=Ui=>{xi(this,Ki,!0),Kn(Ui)},this.reject=Ui=>{xi(this,Ki,!0),di(Ui)}})}get settled(){return un(this,Ki)}}Ki=new WeakMap,e.PromiseCapability=Di;let ki=null,Ji=null;function Pi(oi){return ki||(ki=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Ji=new Map([["","t"]])),oi.replaceAll(ki,(Kn,di,Ui)=>di?di.normalize("NFKC"):Ji.get(Ui))}function na(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const oi=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(oi);else for(let Kn=0;Kn<32;Kn++)oi[Kn]=Math.floor(Math.random()*255);return jn(oi)}const ea="pdfjs_internal_id_";e.AnnotationPrefix=ea}),((__unused_webpack_module,exports$1,__w_pdfjs_require__)=>{var t,r,xe,Se,Kc,Dd,Ce,Re,Be,Me,Ve,Fe,Ie,qe,Ye,Fd,je,Qe,cp,cn,nn;Object.defineProperty(exports$1,"__esModule",{value:!0}),exports$1.RenderTask=exports$1.PDFWorkerUtil=exports$1.PDFWorker=exports$1.PDFPageProxy=exports$1.PDFDocumentProxy=exports$1.PDFDocumentLoadingTask=exports$1.PDFDataRangeTransport=exports$1.LoopbackPort=exports$1.DefaultStandardFontDataFactory=exports$1.DefaultFilterFactory=exports$1.DefaultCanvasFactory=exports$1.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports$1,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports$1.build=void 0,exports$1.getDocument=getDocument,exports$1.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports$1.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports$1.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports$1.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports$1.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(Ze){if(typeof Ze=="string"||Ze instanceof URL?Ze={url:Ze}:(0,_util.isArrayBuffer)(Ze)&&(Ze={data:Ze}),typeof Ze!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!Ze.url&&!Ze.data&&!Ze.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const tn=new PDFDocumentLoadingTask,{docId:We}=tn,An=Ze.url?getUrlProp(Ze.url):null,Je=Ze.data?getDataProp(Ze.data):null,St=Ze.httpHeaders||null,hn=Ze.withCredentials===!0,_n=Ze.password??null,yn=Ze.range instanceof PDFDataRangeTransport?Ze.range:null,mn=Number.isInteger(Ze.rangeChunkSize)&&Ze.rangeChunkSize>0?Ze.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let Sn=Ze.worker instanceof PDFWorker?Ze.worker:null;const Pn=Ze.verbosity,pn=typeof Ze.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(Ze.docBaseUrl)?Ze.docBaseUrl:null,on=typeof Ze.cMapUrl=="string"?Ze.cMapUrl:null,xn=Ze.cMapPacked!==!1,Ge=Ze.CMapReaderFactory||DefaultCMapReaderFactory,Oe=typeof Ze.standardFontDataUrl=="string"?Ze.standardFontDataUrl:null,$e=Ze.StandardFontDataFactory||DefaultStandardFontDataFactory,rn=Ze.stopAtErrors!==!0,fn=Number.isInteger(Ze.maxImageSize)&&Ze.maxImageSize>-1?Ze.maxImageSize:-1,gn=Ze.isEvalSupported!==!1,vn=typeof Ze.isOffscreenCanvasSupported=="boolean"?Ze.isOffscreenCanvasSupported:!_util.isNodeJS,wn=Number.isInteger(Ze.canvasMaxAreaInBytes)?Ze.canvasMaxAreaInBytes:-1,On=typeof Ze.disableFontFace=="boolean"?Ze.disableFontFace:_util.isNodeJS,jn=Ze.fontExtraProperties===!0,Wn=Ze.enableXfa===!0,ti=Ze.ownerDocument||globalThis.document,si=Ze.disableRange===!0,qn=Ze.disableStream===!0,En=Ze.disableAutoFetch===!0,Qn=Ze.pdfBug===!0,Cn=yn?yn.length:Ze.length??NaN,Mn=typeof Ze.useSystemFonts=="boolean"?Ze.useSystemFonts:!_util.isNodeJS&&!On,Un=typeof Ze.useWorkerFetch=="boolean"?Ze.useWorkerFetch:Ge===_display_utils.DOMCMapReaderFactory&&$e===_display_utils.DOMStandardFontDataFactory&&on&&Oe&&(0,_display_utils.isValidFetchUrl)(on,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(Oe,document.baseURI),zn=Ze.canvasFactory||new DefaultCanvasFactory({ownerDocument:ti}),ni=Ze.filterFactory||new DefaultFilterFactory({docId:We,ownerDocument:ti}),yi=null;(0,_util.setVerbosityLevel)(Pn);const pi={canvasFactory:zn,filterFactory:ni};if(Un||(pi.cMapReaderFactory=new Ge({baseUrl:on,isCompressed:xn}),pi.standardFontDataFactory=new $e({baseUrl:Oe})),!Sn){const ai={verbosity:Pn,port:_worker_options.GlobalWorkerOptions.workerPort};Sn=ai.port?PDFWorker.fromPort(ai):new PDFWorker(ai),tn._worker=Sn}const $n={docId:We,apiVersion:"3.11.174",data:Je,password:_n,disableAutoFetch:En,rangeChunkSize:mn,length:Cn,docBaseUrl:pn,enableXfa:Wn,evaluatorOptions:{maxImageSize:fn,disableFontFace:On,ignoreErrors:rn,isEvalSupported:gn,isOffscreenCanvasSupported:vn,canvasMaxAreaInBytes:wn,fontExtraProperties:jn,useSystemFonts:Mn,cMapUrl:Un?on:null,standardFontDataUrl:Un?Oe:null}},Yn={ignoreErrors:rn,isEvalSupported:gn,disableFontFace:On,fontExtraProperties:jn,enableXfa:Wn,ownerDocument:ti,disableAutoFetch:En,pdfBug:Qn,styleElement:yi};return Sn.promise.then(function(){if(tn.destroyed)throw new Error("Loading aborted");const ai=_fetchDocument(Sn,$n),Di=new Promise(function(ki){let Ji;yn?Ji=new _transport_stream.PDFDataTransportStream({length:Cn,initialData:yn.initialData,progressiveDone:yn.progressiveDone,contentDispositionFilename:yn.contentDispositionFilename,disableRange:si,disableStream:qn},yn):Je||(Ji=(na=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(na):(0,_display_utils.isValidFetchUrl)(na.url)?new _displayFetch_stream.PDFFetchStream(na):new _displayNetwork.PDFNetworkStream(na))({url:An,length:Cn,httpHeaders:St,withCredentials:hn,rangeChunkSize:mn,disableRange:si,disableStream:qn})),ki(Ji)});return Promise.all([ai,Di]).then(function([ki,Ji]){if(tn.destroyed)throw new Error("Loading aborted");const Pi=new _message_handler.MessageHandler(We,ki,Sn.port),na=new WorkerTransport(Pi,tn,Ji,Yn,pi);tn._transport=na,Pi.send("Ready",null)})}).catch(tn._capability.reject),tn}async function _fetchDocument(Ze,tn){if(Ze.destroyed)throw new Error("Worker was destroyed");const We=await Ze.messageHandler.sendWithPromise("GetDocRequest",tn,tn.data?[tn.data.buffer]:null);if(Ze.destroyed)throw new Error("Worker was destroyed");return We}function getUrlProp(Ze){if(Ze instanceof URL)return Ze.href;try{return new URL(Ze,window.location).href}catch{if(_util.isNodeJS&&typeof Ze=="string")return Ze}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(Ze){if(_util.isNodeJS&&typeof Buffer<"u"&&Ze instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(Ze instanceof Uint8Array&&Ze.byteLength===Ze.buffer.byteLength)return Ze;if(typeof Ze=="string")return(0,_util.stringToBytes)(Ze);if(typeof Ze=="object"&&!isNaN(Ze==null?void 0:Ze.length)||(0,_util.isArrayBuffer)(Ze))return new Uint8Array(Ze);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const e=class e{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${Fh(e,t)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var tn,We,An;this.destroyed=!0;try{(tn=this._worker)!=null&&tn.port&&(this._worker._pendingDestroy=!0),await((We=this._transport)==null?void 0:We.destroy())}catch(Je){throw(An=this._worker)!=null&&An.port&&delete this._worker._pendingDestroy,Je}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};t=new WeakMap,bi(e,t,0);let PDFDocumentLoadingTask=e;exports$1.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(tn,We,An=!1,Je=null){this.length=tn,this.initialData=We,this.progressiveDone=An,this.contentDispositionFilename=Je,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(tn){this._rangeListeners.push(tn)}addProgressListener(tn){this._progressListeners.push(tn)}addProgressiveReadListener(tn){this._progressiveReadListeners.push(tn)}addProgressiveDoneListener(tn){this._progressiveDoneListeners.push(tn)}onDataRange(tn,We){for(const An of this._rangeListeners)An(tn,We)}onDataProgress(tn,We){this._readyCapability.promise.then(()=>{for(const An of this._progressListeners)An(tn,We)})}onDataProgressiveRead(tn){this._readyCapability.promise.then(()=>{for(const We of this._progressiveReadListeners)We(tn)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const tn of this._progressiveDoneListeners)tn()})}transportReady(){this._readyCapability.resolve()}requestDataRange(tn,We){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports$1.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(tn,We){this._pdfInfo=tn,this._transport=We,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(An=>{if(!An)return An;const Je=[];for(const St in An)Je.push(...An[St]);return Je}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(tn){return this._transport.getPage(tn)}getPageIndex(tn){return this._transport.getPageIndex(tn)}getDestinations(){return this._transport.getDestinations()}getDestination(tn){return this._transport.getDestination(tn)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(tn=!1){return this._transport.startCleanup(tn||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports$1.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(tn,We,An,Je=!1){bi(this,Se);bi(this,r,null);bi(this,xe,!1);this._pageIndex=tn,this._pageInfo=We,this._transport=An,this._stats=Je?new _display_utils.StatTimer:null,this._pdfBug=Je,this.commonObjs=An.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:tn,rotation:We=this.rotate,offsetX:An=0,offsetY:Je=0,dontFlip:St=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:tn,rotation:We,offsetX:An,offsetY:Je,dontFlip:St})}getAnnotations({intent:tn="display"}={}){const We=this._transport.getRenderingIntent(tn);return this._transport.getAnnotations(this._pageIndex,We.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var tn;return((tn=this._transport._htmlForXfa)==null?void 0:tn.children[this._pageIndex])||null}render({canvasContext:tn,viewport:We,intent:An="display",annotationMode:Je=_util.AnnotationMode.ENABLE,transform:St=null,background:hn=null,optionalContentConfigPromise:_n=null,annotationCanvasMap:yn=null,pageColors:mn=null,printAnnotationStorage:Sn=null}){var $e,rn;($e=this._stats)==null||$e.time("Overall");const Pn=this._transport.getRenderingIntent(An,Je,Sn);xi(this,xe,!1),li(this,Se,Dd).call(this),_n||(_n=this._transport.getOptionalContentConfig());let pn=this._intentStates.get(Pn.cacheKey);pn||(pn=Object.create(null),this._intentStates.set(Pn.cacheKey,pn)),pn.streamReaderCancelTimeout&&(clearTimeout(pn.streamReaderCancelTimeout),pn.streamReaderCancelTimeout=null);const on=!!(Pn.renderingIntent&_util.RenderingIntentFlag.PRINT);pn.displayReadyCapability||(pn.displayReadyCapability=new _util.PromiseCapability,pn.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(rn=this._stats)==null||rn.time("Page Request"),this._pumpOperatorList(Pn));const xn=fn=>{var gn,vn;pn.renderTasks.delete(Ge),(this._maybeCleanupAfterRender||on)&&xi(this,xe,!0),li(this,Se,Kc).call(this,!on),fn?(Ge.capability.reject(fn),this._abortOperatorList({intentState:pn,reason:fn instanceof Error?fn:new Error(fn)})):Ge.capability.resolve(),(gn=this._stats)==null||gn.timeEnd("Rendering"),(vn=this._stats)==null||vn.timeEnd("Overall")},Ge=new InternalRenderTask({callback:xn,params:{canvasContext:tn,viewport:We,transform:St,background:hn},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:yn,operatorList:pn.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!on,pdfBug:this._pdfBug,pageColors:mn});(pn.renderTasks||(pn.renderTasks=new Set)).add(Ge);const Oe=Ge.task;return Promise.all([pn.displayReadyCapability.promise,_n]).then(([fn,gn])=>{var vn;if(this.destroyed){xn();return}(vn=this._stats)==null||vn.time("Rendering"),Ge.initializeGraphics({transparency:fn,optionalContentConfig:gn}),Ge.operatorListChanged()}).catch(xn),Oe}getOperatorList({intent:tn="display",annotationMode:We=_util.AnnotationMode.ENABLE,printAnnotationStorage:An=null}={}){var yn;function Je(){hn.operatorList.lastChunk&&(hn.opListReadCapability.resolve(hn.operatorList),hn.renderTasks.delete(_n))}const St=this._transport.getRenderingIntent(tn,We,An,!0);let hn=this._intentStates.get(St.cacheKey);hn||(hn=Object.create(null),this._intentStates.set(St.cacheKey,hn));let _n;return hn.opListReadCapability||(_n=Object.create(null),_n.operatorListChanged=Je,hn.opListReadCapability=new _util.PromiseCapability,(hn.renderTasks||(hn.renderTasks=new Set)).add(_n),hn.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(yn=this._stats)==null||yn.time("Page Request"),this._pumpOperatorList(St)),hn.opListReadCapability.promise}streamTextContent({includeMarkedContent:tn=!1,disableNormalization:We=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:tn===!0,disableNormalization:We===!0},{highWaterMark:100,size(Je){return Je.items.length}})}getTextContent(tn={}){if(this._transport._htmlForXfa)return this.getXfa().then(An=>_xfa_text.XfaText.textContent(An));const We=this.streamTextContent(tn);return new Promise(function(An,Je){function St(){hn.read().then(function({value:yn,done:mn}){if(mn){An(_n);return}Object.assign(_n.styles,yn.styles),_n.items.push(...yn.items),St()},Je)}const hn=We.getReader(),_n={items:[],styles:Object.create(null)};St()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const tn=[];for(const We of this._intentStates.values())if(this._abortOperatorList({intentState:We,reason:new Error("Page was destroyed."),force:!0}),!We.opListReadCapability)for(const An of We.renderTasks)tn.push(An.completed),An.cancel();return this.objs.clear(),xi(this,xe,!1),li(this,Se,Dd).call(this),Promise.all(tn)}cleanup(tn=!1){xi(this,xe,!0);const We=li(this,Se,Kc).call(this,!1);return tn&&We&&this._stats&&(this._stats=new _display_utils.StatTimer),We}_startRenderPage(tn,We){var Je,St;const An=this._intentStates.get(We);An&&((Je=this._stats)==null||Je.timeEnd("Page Request"),(St=An.displayReadyCapability)==null||St.resolve(tn))}_renderPageChunk(tn,We){for(let An=0,Je=tn.length;An<Je;An++)We.operatorList.fnArray.push(tn.fnArray[An]),We.operatorList.argsArray.push(tn.argsArray[An]);We.operatorList.lastChunk=tn.lastChunk,We.operatorList.separateAnnots=tn.separateAnnots;for(const An of We.renderTasks)An.operatorListChanged();tn.lastChunk&&li(this,Se,Kc).call(this,!0)}_pumpOperatorList({renderingIntent:tn,cacheKey:We,annotationStorageSerializable:An}){const{map:Je,transfers:St}=An,_n=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:tn,cacheKey:We,annotationStorage:Je},St).getReader(),yn=this._intentStates.get(We);yn.streamReader=_n;const mn=()=>{_n.read().then(({value:Sn,done:Pn})=>{if(Pn){yn.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Sn,yn),mn())},Sn=>{if(yn.streamReader=null,!this._transport.destroyed){if(yn.operatorList){yn.operatorList.lastChunk=!0;for(const Pn of yn.renderTasks)Pn.operatorListChanged();li(this,Se,Kc).call(this,!0)}if(yn.displayReadyCapability)yn.displayReadyCapability.reject(Sn);else if(yn.opListReadCapability)yn.opListReadCapability.reject(Sn);else throw Sn}})};mn()}_abortOperatorList({intentState:tn,reason:We,force:An=!1}){if(tn.streamReader){if(tn.streamReaderCancelTimeout&&(clearTimeout(tn.streamReaderCancelTimeout),tn.streamReaderCancelTimeout=null),!An){if(tn.renderTasks.size>0)return;if(We instanceof _display_utils.RenderingCancelledException){let Je=RENDERING_CANCELLED_TIMEOUT;We.extraDelay>0&&We.extraDelay<1e3&&(Je+=We.extraDelay),tn.streamReaderCancelTimeout=setTimeout(()=>{tn.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:tn,reason:We,force:!0})},Je);return}}if(tn.streamReader.cancel(new _util.AbortException(We.message)).catch(()=>{}),tn.streamReader=null,!this._transport.destroyed){for(const[Je,St]of this._intentStates)if(St===tn){this._intentStates.delete(Je);break}this.cleanup()}}}get stats(){return this._stats}}r=new WeakMap,xe=new WeakMap,Se=new WeakSet,Kc=function(tn=!1){if(li(this,Se,Dd).call(this),!un(this,xe)||this.destroyed)return!1;if(tn)return xi(this,r,setTimeout(()=>{xi(this,r,null),li(this,Se,Kc).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:We,operatorList:An}of this._intentStates.values())if(We.size>0||!An.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),xi(this,xe,!1),!0},Dd=function(){un(this,r)&&(clearTimeout(un(this,r)),xi(this,r,null))},exports$1.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){bi(this,Ce,new Set);bi(this,Re,Promise.resolve())}postMessage(tn,We){const An={data:structuredClone(tn,We?{transfer:We}:null)};un(this,Re).then(()=>{for(const Je of un(this,Ce))Je.call(this,An)})}addEventListener(tn,We){un(this,Ce).add(We)}removeEventListener(tn,We){un(this,Ce).delete(We)}terminate(){un(this,Ce).clear()}}Ce=new WeakMap,Re=new WeakMap,exports$1.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports$1.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const Ze=(Be=document==null?void 0:document.currentScript)==null?void 0:Be.src;Ze&&(PDFWorkerUtil.fallbackWorkerSrc=Ze.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(Ze,tn){let We;try{if(We=new URL(Ze),!We.origin||We.origin==="null")return!1}catch{return!1}const An=new URL(tn,We);return We.origin===An.origin},PDFWorkerUtil.createCDNWrapper=function(Ze){const tn=`importScripts("${Ze}");`;return URL.createObjectURL(new Blob([tn]))}}const _PDFWorker=class _PDFWorker{constructor({name:Ze=null,port:tn=null,verbosity:We=(0,_util.getVerbosityLevel)()}={}){var An;if(this.name=Ze,this.destroyed=!1,this.verbosity=We,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,tn){if((An=un(_PDFWorker,Me))!=null&&An.has(tn))throw new Error("Cannot use more than one PDFWorker per port.");(un(_PDFWorker,Me)||xi(_PDFWorker,Me,new WeakMap)).set(tn,this),this._initializeFromPort(tn);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(Ze){this._port=Ze,this._messageHandler=new _message_handler.MessageHandler("main","worker",Ze),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:Ze}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,Ze)||(Ze=PDFWorkerUtil.createCDNWrapper(new URL(Ze,window.location).href));const tn=new Worker(Ze),We=new _message_handler.MessageHandler("main","worker",tn),An=()=>{tn.removeEventListener("error",Je),We.destroy(),tn.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},Je=()=>{this._webWorker||An()};tn.addEventListener("error",Je),We.on("test",hn=>{if(tn.removeEventListener("error",Je),this.destroyed){An();return}hn?(this._messageHandler=We,this._port=tn,this._webWorker=tn,this._readyCapability.resolve(),We.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),We.destroy(),tn.terminate())}),We.on("ready",hn=>{if(tn.removeEventListener("error",Je),this.destroyed){An();return}try{St()}catch{this._setupFakeWorker()}});const St=()=>{const hn=new Uint8Array;We.send("test",hn,[hn.buffer])};St();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(Ze=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const tn=new LoopbackPort;this._port=tn;const We=`fake${PDFWorkerUtil.fakeWorkerId++}`,An=new _message_handler.MessageHandler(We+"_worker",We,tn);Ze.setup(An,tn);const Je=new _message_handler.MessageHandler(We,We+"_worker",tn);this._messageHandler=Je,this._readyCapability.resolve(),Je.send("configure",{verbosity:this.verbosity})}).catch(Ze=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${Ze.message}".`))})}destroy(){var Ze;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(Ze=un(_PDFWorker,Me))==null||Ze.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(Ze){var We;if(!(Ze!=null&&Ze.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const tn=(We=un(this,Me))==null?void 0:We.get(Ze.port);if(tn){if(tn._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return tn}return new _PDFWorker(Ze)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var Ze;try{return((Ze=globalThis.pdfjsWorker)==null?void 0:Ze.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};Me=new WeakMap,bi(_PDFWorker,Me);let PDFWorker=_PDFWorker;exports$1.PDFWorker=PDFWorker;class WorkerTransport{constructor(tn,We,An,Je,St){bi(this,Ye);bi(this,Ve,new Map);bi(this,Fe,new Map);bi(this,Ie,new Map);bi(this,qe,null);this.messageHandler=tn,this.loadingTask=We,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:Je.ownerDocument,styleElement:Je.styleElement}),this._params=Je,this.canvasFactory=St.canvasFactory,this.filterFactory=St.filterFactory,this.cMapReaderFactory=St.cMapReaderFactory,this.standardFontDataFactory=St.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=An,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(tn,We=_util.AnnotationMode.ENABLE,An=null,Je=!1){let St=_util.RenderingIntentFlag.DISPLAY,hn=_annotation_storage.SerializableEmpty;switch(tn){case"any":St=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":St=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${tn}`)}switch(We){case _util.AnnotationMode.DISABLE:St+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:St+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:St+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,hn=(St&_util.RenderingIntentFlag.PRINT&&An instanceof _annotation_storage.PrintAnnotationStorage?An:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${We}`)}return Je&&(St+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:St,cacheKey:`${St}_${hn.hash}`,annotationStorageSerializable:hn}}destroy(){var An;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(An=un(this,qe))==null||An.reject(new Error("Worker was destroyed during onPassword callback"));const tn=[];for(const Je of un(this,Fe).values())tn.push(Je._destroy());un(this,Fe).clear(),un(this,Ie).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const We=this.messageHandler.sendWithPromise("Terminate",null);return tn.push(We),Promise.all(tn).then(()=>{var Je;this.commonObjs.clear(),this.fontLoader.clear(),un(this,Ve).clear(),this.filterFactory.destroy(),(Je=this._networkStream)==null||Je.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:tn,loadingTask:We}=this;tn.on("GetReader",(An,Je)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=St=>{this._lastProgress={loaded:St.loaded,total:St.total}},Je.onPull=()=>{this._fullReader.read().then(function({value:St,done:hn}){if(hn){Je.close();return}(0,_util.assert)(St instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),Je.enqueue(new Uint8Array(St),1,[St])}).catch(St=>{Je.error(St)})},Je.onCancel=St=>{this._fullReader.cancel(St),Je.ready.catch(hn=>{if(!this.destroyed)throw hn})}}),tn.on("ReaderHeadersReady",An=>{const Je=new _util.PromiseCapability,St=this._fullReader;return St.headersReady.then(()=>{var hn;(!St.isStreamingSupported||!St.isRangeSupported)&&(this._lastProgress&&((hn=We.onProgress)==null||hn.call(We,this._lastProgress)),St.onProgress=_n=>{var yn;(yn=We.onProgress)==null||yn.call(We,{loaded:_n.loaded,total:_n.total})}),Je.resolve({isStreamingSupported:St.isStreamingSupported,isRangeSupported:St.isRangeSupported,contentLength:St.contentLength})},Je.reject),Je.promise}),tn.on("GetRangeReader",(An,Je)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const St=this._networkStream.getRangeReader(An.begin,An.end);if(!St){Je.close();return}Je.onPull=()=>{St.read().then(function({value:hn,done:_n}){if(_n){Je.close();return}(0,_util.assert)(hn instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),Je.enqueue(new Uint8Array(hn),1,[hn])}).catch(hn=>{Je.error(hn)})},Je.onCancel=hn=>{St.cancel(hn),Je.ready.catch(_n=>{if(!this.destroyed)throw _n})}}),tn.on("GetDoc",({pdfInfo:An})=>{this._numPages=An.numPages,this._htmlForXfa=An.htmlForXfa,delete An.htmlForXfa,We._capability.resolve(new PDFDocumentProxy(An,this))}),tn.on("DocException",function(An){let Je;switch(An.name){case"PasswordException":Je=new _util.PasswordException(An.message,An.code);break;case"InvalidPDFException":Je=new _util.InvalidPDFException(An.message);break;case"MissingPDFException":Je=new _util.MissingPDFException(An.message);break;case"UnexpectedResponseException":Je=new _util.UnexpectedResponseException(An.message,An.status);break;case"UnknownErrorException":Je=new _util.UnknownErrorException(An.message,An.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}We._capability.reject(Je)}),tn.on("PasswordRequest",An=>{if(xi(this,qe,new _util.PromiseCapability),We.onPassword){const Je=St=>{St instanceof Error?un(this,qe).reject(St):un(this,qe).resolve({password:St})};try{We.onPassword(Je,An.code)}catch(St){un(this,qe).reject(St)}}else un(this,qe).reject(new _util.PasswordException(An.message,An.code));return un(this,qe).promise}),tn.on("DataLoaded",An=>{var Je;(Je=We.onProgress)==null||Je.call(We,{loaded:An.length,total:An.length}),this.downloadInfoCapability.resolve(An)}),tn.on("StartRenderPage",An=>{if(this.destroyed)return;un(this,Fe).get(An.pageIndex)._startRenderPage(An.transparency,An.cacheKey)}),tn.on("commonobj",([An,Je,St])=>{var hn;if(!this.destroyed&&!this.commonObjs.has(An))switch(Je){case"Font":const _n=this._params;if("error"in St){const Sn=St.error;(0,_util.warn)(`Error during font loading: ${Sn}`),this.commonObjs.resolve(An,Sn);break}const yn=_n.pdfBug&&((hn=globalThis.FontInspector)!=null&&hn.enabled)?(Sn,Pn)=>globalThis.FontInspector.fontAdded(Sn,Pn):null,mn=new _font_loader.FontFaceObject(St,{isEvalSupported:_n.isEvalSupported,disableFontFace:_n.disableFontFace,ignoreErrors:_n.ignoreErrors,inspectFont:yn});this.fontLoader.bind(mn).catch(Sn=>tn.sendWithPromise("FontFallback",{id:An})).finally(()=>{!_n.fontExtraProperties&&mn.data&&(mn.data=null),this.commonObjs.resolve(An,mn)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(An,St);break;default:throw new Error(`Got unknown common object type ${Je}`)}}),tn.on("obj",([An,Je,St,hn])=>{var yn;if(this.destroyed)return;const _n=un(this,Fe).get(Je);if(!_n.objs.has(An))switch(St){case"Image":if(_n.objs.resolve(An,hn),hn){let mn;if(hn.bitmap){const{width:Sn,height:Pn}=hn;mn=Sn*Pn*4}else mn=((yn=hn.data)==null?void 0:yn.length)||0;mn>_util.MAX_IMAGE_SIZE_TO_CACHE&&(_n._maybeCleanupAfterRender=!0)}break;case"Pattern":_n.objs.resolve(An,hn);break;default:throw new Error(`Got unknown object type ${St}`)}}),tn.on("DocProgress",An=>{var Je;this.destroyed||(Je=We.onProgress)==null||Je.call(We,{loaded:An.loaded,total:An.total})}),tn.on("FetchBuiltInCMap",An=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(An):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),tn.on("FetchStandardFontData",An=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(An):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var An;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:tn,transfers:We}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:tn,filename:((An=this._fullReader)==null?void 0:An.filename)??null},We).finally(()=>{this.annotationStorage.resetModified()})}getPage(tn){if(!Number.isInteger(tn)||tn<=0||tn>this._numPages)return Promise.reject(new Error("Invalid page request."));const We=tn-1,An=un(this,Ie).get(We);if(An)return An;const Je=this.messageHandler.sendWithPromise("GetPage",{pageIndex:We}).then(St=>{if(this.destroyed)throw new Error("Transport destroyed");const hn=new PDFPageProxy(We,St,this,this._params.pdfBug);return un(this,Fe).set(We,hn),hn});return un(this,Ie).set(We,Je),Je}getPageIndex(tn){return typeof tn!="object"||tn===null||!Number.isInteger(tn.num)||tn.num<0||!Number.isInteger(tn.gen)||tn.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:tn.num,gen:tn.gen})}getAnnotations(tn,We){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:tn,intent:We})}getFieldObjects(){return li(this,Ye,Fd).call(this,"GetFieldObjects")}hasJSActions(){return li(this,Ye,Fd).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(tn){return typeof tn!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:tn})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return li(this,Ye,Fd).call(this,"GetDocJSActions")}getPageJSActions(tn){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:tn})}getStructTree(tn){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:tn})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(tn=>new _optional_content_config.OptionalContentConfig(tn))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const tn="GetMetadata",We=un(this,Ve).get(tn);if(We)return We;const An=this.messageHandler.sendWithPromise(tn,null).then(Je=>{var St,hn;return{info:Je[0],metadata:Je[1]?new _metadata.Metadata(Je[1]):null,contentDispositionFilename:((St=this._fullReader)==null?void 0:St.filename)??null,contentLength:((hn=this._fullReader)==null?void 0:hn.contentLength)??null}});return un(this,Ve).set(tn,An),An}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(tn=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const We of un(this,Fe).values())if(!We.cleanup())throw new Error(`startCleanup: Page ${We.pageNumber} is currently rendering.`);this.commonObjs.clear(),tn||this.fontLoader.clear(),un(this,Ve).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:tn,enableXfa:We}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:tn,enableXfa:We})}}Ve=new WeakMap,Fe=new WeakMap,Ie=new WeakMap,qe=new WeakMap,Ye=new WeakSet,Fd=function(tn,We=null){const An=un(this,Ve).get(tn);if(An)return An;const Je=this.messageHandler.sendWithPromise(tn,We);return un(this,Ve).set(tn,Je),Je};class PDFObjects{constructor(){bi(this,Qe);bi(this,je,Object.create(null))}get(tn,We=null){if(We){const Je=li(this,Qe,cp).call(this,tn);return Je.capability.promise.then(()=>We(Je.data)),null}const An=un(this,je)[tn];if(!(An!=null&&An.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${tn}.`);return An.data}has(tn){const We=un(this,je)[tn];return(We==null?void 0:We.capability.settled)||!1}resolve(tn,We=null){const An=li(this,Qe,cp).call(this,tn);An.data=We,An.capability.resolve()}clear(){var tn;for(const We in un(this,je)){const{data:An}=un(this,je)[We];(tn=An==null?void 0:An.bitmap)==null||tn.close()}xi(this,je,Object.create(null))}}je=new WeakMap,Qe=new WeakSet,cp=function(tn){var We;return(We=un(this,je))[tn]||(We[tn]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(tn){bi(this,cn,null);xi(this,cn,tn),this.onContinue=null}get promise(){return un(this,cn).capability.promise}cancel(tn=0){un(this,cn).cancel(null,tn)}get separateAnnots(){const{separateAnnots:tn}=un(this,cn).operatorList;if(!tn)return!1;const{annotationCanvasMap:We}=un(this,cn);return tn.form||tn.canvas&&(We==null?void 0:We.size)>0}}cn=new WeakMap,exports$1.RenderTask=RenderTask;const an=class an{constructor({callback:tn,params:We,objs:An,commonObjs:Je,annotationCanvasMap:St,operatorList:hn,pageIndex:_n,canvasFactory:yn,filterFactory:mn,useRequestAnimationFrame:Sn=!1,pdfBug:Pn=!1,pageColors:pn=null}){this.callback=tn,this.params=We,this.objs=An,this.commonObjs=Je,this.annotationCanvasMap=St,this.operatorListIdx=null,this.operatorList=hn,this._pageIndex=_n,this.canvasFactory=yn,this.filterFactory=mn,this._pdfBug=Pn,this.pageColors=pn,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Sn===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=We.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:tn=!1,optionalContentConfig:We}){var _n,yn;if(this.cancelled)return;if(this._canvas){if(un(an,nn).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");un(an,nn).add(this._canvas)}this._pdfBug&&((_n=globalThis.StepperManager)!=null&&_n.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:An,viewport:Je,transform:St,background:hn}=this.params;this.gfx=new _canvas.CanvasGraphics(An,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:We},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:St,viewport:Je,transparency:tn,background:hn}),this.operatorListIdx=0,this.graphicsReady=!0,(yn=this.graphicsReadyCallback)==null||yn.call(this)}cancel(tn=null,We=0){var An;this.running=!1,this.cancelled=!0,(An=this.gfx)==null||An.endDrawing(),un(an,nn).delete(this._canvas),this.callback(tn||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,We))}operatorListChanged(){var tn;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(tn=this.stepper)==null||tn.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),un(an,nn).delete(this._canvas),this.callback())))}};nn=new WeakMap,bi(an,nn,new WeakSet);let InternalRenderTask=an;const version="3.11.174";exports$1.version=version;const build="ce8716743";exports$1.build=build}),((t,e,r)=>{var Be,Me,Ve,s0,Ie;Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var xe=r(1),Se=r(4),Ee=r(8);const Pe=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=Pe;class Ce{constructor(){bi(this,Ve);bi(this,Be,!1);bi(this,Me,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(Ye,Xe){const je=un(this,Me).get(Ye);return je===void 0?Xe:Object.assign(Xe,je)}getRawValue(Ye){return un(this,Me).get(Ye)}remove(Ye){if(un(this,Me).delete(Ye),un(this,Me).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const Xe of un(this,Me).values())if(Xe instanceof Se.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(Ye,Xe){const je=un(this,Me).get(Ye);let Qe=!1;if(je!==void 0)for(const[sn,cn]of Object.entries(Xe))je[sn]!==cn&&(Qe=!0,je[sn]=cn);else Qe=!0,un(this,Me).set(Ye,Xe);Qe&&li(this,Ve,s0).call(this),Xe instanceof Se.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(Xe.constructor._type)}has(Ye){return un(this,Me).has(Ye)}getAll(){return un(this,Me).size>0?(0,xe.objectFromMap)(un(this,Me)):null}setAll(Ye){for(const[Xe,je]of Object.entries(Ye))this.setValue(Xe,je)}get size(){return un(this,Me).size}resetModified(){un(this,Be)&&(xi(this,Be,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Re(this)}get serializable(){if(un(this,Me).size===0)return Pe;const Ye=new Map,Xe=new Ee.MurmurHash3_64,je=[],Qe=Object.create(null);let sn=!1;for(const[cn,nn]of un(this,Me)){const an=nn instanceof Se.AnnotationEditor?nn.serialize(!1,Qe):nn;an&&(Ye.set(cn,an),Xe.update(`${cn}:${JSON.stringify(an)}`),sn||(sn=!!an.bitmap))}if(sn)for(const cn of Ye.values())cn.bitmap&&je.push(cn.bitmap);return Ye.size>0?{map:Ye,hash:Xe.hexdigest(),transfers:je}:Pe}}Be=new WeakMap,Me=new WeakMap,Ve=new WeakSet,s0=function(){un(this,Be)||(xi(this,Be,!0),typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=Ce;class Re extends Ce{constructor(Xe){super();bi(this,Ie);const{map:je,hash:Qe,transfers:sn}=Xe.serializable,cn=structuredClone(je,sn?{transfer:sn}:null);xi(this,Ie,{map:cn,hash:Qe,transfers:sn})}get print(){(0,xe.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return un(this,Ie)}}Ie=new WeakMap,e.PrintAnnotationStorage=Re}),((t,e,r)=>{var Re,Be,Me,Ve,Fe,Ie,qe,Ye,Xe,je,Qe,sn,cn,nn,an,hp,dp,We,fp,pp,o0,l0,u0,mp,c0;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var xe=r(5),Se=r(1),Ee=r(6);const Sn=class Sn{constructor(pn){bi(this,an);bi(this,Re,"");bi(this,Be,!1);bi(this,Me,null);bi(this,Ve,null);bi(this,Fe,null);bi(this,Ie,!1);bi(this,qe,null);bi(this,Ye,this.focusin.bind(this));bi(this,Xe,this.focusout.bind(this));bi(this,je,!1);bi(this,Qe,!1);bi(this,sn,!1);Ka(this,"_initialOptions",Object.create(null));Ka(this,"_uiManager",null);Ka(this,"_focusEventsAllowed",!0);Ka(this,"_l10nPromise",null);bi(this,cn,!1);bi(this,nn,Sn._zIndex++);this.constructor===Sn&&(0,Se.unreachable)("Cannot initialize AnnotationEditor."),this.parent=pn.parent,this.id=pn.id,this.width=this.height=null,this.pageIndex=pn.parent.pageIndex,this.name=pn.name,this.div=null,this._uiManager=pn.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=pn.isCentered,this._structTreeParentId=null;const{rotation:on,rawDims:{pageWidth:xn,pageHeight:Ge,pageX:Oe,pageY:$e}}=this.parent.viewport;this.rotation=on,this.pageRotation=(360+on-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[xn,Ge],this.pageTranslation=[Oe,$e];const[rn,fn]=this.parentDimensions;this.x=pn.x/rn,this.y=pn.y/fn,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,Se.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(pn){const on=new Ce({id:pn.parent.getNextId(),parent:pn.parent,uiManager:pn._uiManager});on.annotationElementId=pn.annotationElementId,on.deleted=!0,on._uiManager.addToAnnotationStorage(on)}static initialize(pn,on=null){if(Sn._l10nPromise||(Sn._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(Ge=>[Ge,pn.get(Ge)]))),on!=null&&on.strings)for(const Ge of on.strings)Sn._l10nPromise.set(Ge,pn.get(Ge));if(Sn._borderLineWidth!==-1)return;const xn=getComputedStyle(document.documentElement);Sn._borderLineWidth=parseFloat(xn.getPropertyValue("--outline-width"))||0}static updateDefaultParams(pn,on){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(pn){return!1}static paste(pn,on){(0,Se.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return un(this,cn)}set _isDraggable(pn){var on;xi(this,cn,pn),(on=this.div)==null||on.classList.toggle("draggable",pn)}center(){const[pn,on]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*on/(pn*2),this.y+=this.width*pn/(on*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*on/(pn*2),this.y-=this.width*pn/(on*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(pn){this._uiManager.addCommands(pn)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=un(this,nn)}setParent(pn){pn!==null&&(this.pageIndex=pn.pageIndex,this.pageDimensions=pn.pageDimensions),this.parent=pn}focusin(pn){this._focusEventsAllowed&&(un(this,je)?xi(this,je,!1):this.parent.setSelected(this))}focusout(pn){var xn;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const on=pn.relatedTarget;on!=null&&on.closest(`#${this.id}`)||(pn.preventDefault(),(xn=this.parent)!=null&&xn.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(pn,on,xn,Ge){const[Oe,$e]=this.parentDimensions;[xn,Ge]=this.screenToPageTranslation(xn,Ge),this.x=(pn+xn)/Oe,this.y=(on+Ge)/$e,this.fixAndSetPosition()}translate(pn,on){li(this,an,hp).call(this,this.parentDimensions,pn,on)}translateInPage(pn,on){li(this,an,hp).call(this,this.pageDimensions,pn,on),this.div.scrollIntoView({block:"nearest"})}drag(pn,on){const[xn,Ge]=this.parentDimensions;if(this.x+=pn/xn,this.y+=on/Ge,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:gn,y:vn}=this.div.getBoundingClientRect();this.parent.findNewParent(this,gn,vn)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:Oe,y:$e}=this;const[rn,fn]=li(this,an,dp).call(this);Oe+=rn,$e+=fn,this.div.style.left=`${(100*Oe).toFixed(2)}%`,this.div.style.top=`${(100*$e).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[pn,on]=this.pageDimensions;let{x:xn,y:Ge,width:Oe,height:$e}=this;switch(Oe*=pn,$e*=on,xn*=pn,Ge*=on,this.rotation){case 0:xn=Math.max(0,Math.min(pn-Oe,xn)),Ge=Math.max(0,Math.min(on-$e,Ge));break;case 90:xn=Math.max(0,Math.min(pn-$e,xn)),Ge=Math.min(on,Math.max(Oe,Ge));break;case 180:xn=Math.min(pn,Math.max(Oe,xn)),Ge=Math.min(on,Math.max($e,Ge));break;case 270:xn=Math.min(pn,Math.max($e,xn)),Ge=Math.max(0,Math.min(on-Oe,Ge));break}this.x=xn/=pn,this.y=Ge/=on;const[rn,fn]=li(this,an,dp).call(this);xn+=rn,Ge+=fn;const{style:gn}=this.div;gn.left=`${(100*xn).toFixed(2)}%`,gn.top=`${(100*Ge).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(pn,on){var xn;return li(xn=Sn,We,fp).call(xn,pn,on,this.parentRotation)}pageTranslationToScreen(pn,on){var xn;return li(xn=Sn,We,fp).call(xn,pn,on,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:pn,pageDimensions:[on,xn]}=this,Ge=on*pn,Oe=xn*pn;return Se.FeatureTest.isCSSRoundSupported?[Math.round(Ge),Math.round(Oe)]:[Ge,Oe]}setDims(pn,on){var Oe;const[xn,Ge]=this.parentDimensions;this.div.style.width=`${(100*pn/xn).toFixed(2)}%`,un(this,Ie)||(this.div.style.height=`${(100*on/Ge).toFixed(2)}%`),(Oe=un(this,Me))==null||Oe.classList.toggle("small",pn<Sn.SMALL_EDITOR_SIZE||on<Sn.SMALL_EDITOR_SIZE)}fixDims(){const{style:pn}=this.div,{height:on,width:xn}=pn,Ge=xn.endsWith("%"),Oe=!un(this,Ie)&&on.endsWith("%");if(Ge&&Oe)return;const[$e,rn]=this.parentDimensions;Ge||(pn.width=`${(100*parseFloat(xn)/$e).toFixed(2)}%`),!un(this,Ie)&&!Oe&&(pn.height=`${(100*parseFloat(on)/rn).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(un(this,Me))return;const pn=xi(this,Me,document.createElement("button"));pn.className="altText";const on=await Sn._l10nPromise.get("editor_alt_text_button_label");pn.textContent=on,pn.setAttribute("aria-label",on),pn.tabIndex="0",pn.addEventListener("contextmenu",Ee.noContextMenu),pn.addEventListener("pointerdown",xn=>xn.stopPropagation()),pn.addEventListener("click",xn=>{xn.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),pn.addEventListener("keydown",xn=>{xn.target===pn&&xn.key==="Enter"&&(xn.preventDefault(),this._uiManager.editAltText(this))}),li(this,an,mp).call(this),this.div.append(pn),Sn.SMALL_EDITOR_SIZE||(Sn.SMALL_EDITOR_SIZE=Math.min(128,Math.round(pn.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:un(this,Re),decorative:un(this,Be)}}set altTextData({altText:pn,decorative:on}){un(this,Re)===pn&&un(this,Be)===on||(xi(this,Re,pn),xi(this,Be,on),li(this,an,mp).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",un(this,Ye)),this.div.addEventListener("focusout",un(this,Xe));const[pn,on]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*on/pn).toFixed(2)}%`,this.div.style.maxHeight=`${(100*pn/on).toFixed(2)}%`);const[xn,Ge]=this.getInitialTranslation();return this.translate(xn,Ge),(0,xe.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(pn){const{isMac:on}=Se.FeatureTest.platform;if(pn.button!==0||pn.ctrlKey&&on){pn.preventDefault();return}xi(this,je,!0),li(this,an,c0).call(this,pn)}moveInDOM(){var pn;(pn=this.parent)==null||pn.moveEditorInDOM(this)}_setParentAndPosition(pn,on,xn){pn.changeParent(this),this.x=on,this.y=xn,this.fixAndSetPosition()}getRect(pn,on){const xn=this.parentScale,[Ge,Oe]=this.pageDimensions,[$e,rn]=this.pageTranslation,fn=pn/xn,gn=on/xn,vn=this.x*Ge,wn=this.y*Oe,On=this.width*Ge,jn=this.height*Oe;switch(this.rotation){case 0:return[vn+fn+$e,Oe-wn-gn-jn+rn,vn+fn+On+$e,Oe-wn-gn+rn];case 90:return[vn+gn+$e,Oe-wn+fn+rn,vn+gn+jn+$e,Oe-wn+fn+On+rn];case 180:return[vn-fn-On+$e,Oe-wn+gn+rn,vn-fn+$e,Oe-wn+gn+jn+rn];case 270:return[vn-gn-jn+$e,Oe-wn-fn-On+rn,vn-gn+$e,Oe-wn-fn+rn];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(pn,on){const[xn,Ge,Oe,$e]=pn,rn=Oe-xn,fn=$e-Ge;switch(this.rotation){case 0:return[xn,on-$e,rn,fn];case 90:return[xn,on-Ge,fn,rn];case 180:return[Oe,on-Ge,rn,fn];case 270:return[Oe,on-$e,fn,rn];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){xi(this,sn,!0)}disableEditMode(){xi(this,sn,!1)}isInEditMode(){return un(this,sn)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var pn,on;(pn=this.div)==null||pn.addEventListener("focusin",un(this,Ye)),(on=this.div)==null||on.addEventListener("focusout",un(this,Xe))}serialize(pn=!1,on=null){(0,Se.unreachable)("An editor must be serializable")}static deserialize(pn,on,xn){const Ge=new this.prototype.constructor({parent:on,id:on.getNextId(),uiManager:xn});Ge.rotation=pn.rotation;const[Oe,$e]=Ge.pageDimensions,[rn,fn,gn,vn]=Ge.getRectInCurrentCoords(pn.rect,$e);return Ge.x=rn/Oe,Ge.y=fn/$e,Ge.width=gn/Oe,Ge.height=vn/$e,Ge}remove(){var pn;this.div.removeEventListener("focusin",un(this,Ye)),this.div.removeEventListener("focusout",un(this,Xe)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(pn=un(this,Me))==null||pn.remove(),xi(this,Me,null),xi(this,Ve,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(li(this,an,o0).call(this),un(this,qe).classList.remove("hidden"))}select(){var pn;this.makeResizable(),(pn=this.div)==null||pn.classList.add("selectedEditor")}unselect(){var pn,on,xn;(pn=un(this,qe))==null||pn.classList.add("hidden"),(on=this.div)==null||on.classList.remove("selectedEditor"),(xn=this.div)!=null&&xn.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(pn,on){}disableEditing(){un(this,Me)&&(un(this,Me).hidden=!0)}enableEditing(){un(this,Me)&&(un(this,Me).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return un(this,Qe)}set isEditing(pn){xi(this,Qe,pn),this.parent&&(pn?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(pn,on){xi(this,Ie,!0);const xn=pn/on,{style:Ge}=this.div;Ge.aspectRatio=xn,Ge.height="auto"}static get MIN_SIZE(){return 16}};Re=new WeakMap,Be=new WeakMap,Me=new WeakMap,Ve=new WeakMap,Fe=new WeakMap,Ie=new WeakMap,qe=new WeakMap,Ye=new WeakMap,Xe=new WeakMap,je=new WeakMap,Qe=new WeakMap,sn=new WeakMap,cn=new WeakMap,nn=new WeakMap,an=new WeakSet,hp=function([pn,on],xn,Ge){[xn,Ge]=this.screenToPageTranslation(xn,Ge),this.x+=xn/pn,this.y+=Ge/on,this.fixAndSetPosition()},dp=function(){const[pn,on]=this.parentDimensions,{_borderLineWidth:xn}=Sn,Ge=xn/pn,Oe=xn/on;switch(this.rotation){case 90:return[-Ge,Oe];case 180:return[Ge,Oe];case 270:return[Ge,-Oe];default:return[-Ge,-Oe]}},We=new WeakSet,fp=function(pn,on,xn){switch(xn){case 90:return[on,-pn];case 180:return[-pn,-on];case 270:return[-on,pn];default:return[pn,on]}},pp=function(pn){switch(pn){case 90:{const[on,xn]=this.pageDimensions;return[0,-on/xn,xn/on,0]}case 180:return[-1,0,0,-1];case 270:{const[on,xn]=this.pageDimensions;return[0,on/xn,-xn/on,0]}default:return[1,0,0,1]}},o0=function(){if(un(this,qe))return;xi(this,qe,document.createElement("div")),un(this,qe).classList.add("resizers");const pn=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||pn.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const on of pn){const xn=document.createElement("div");un(this,qe).append(xn),xn.classList.add("resizer",on),xn.addEventListener("pointerdown",li(this,an,l0).bind(this,on)),xn.addEventListener("contextmenu",Ee.noContextMenu)}this.div.prepend(un(this,qe))},l0=function(pn,on){on.preventDefault();const{isMac:xn}=Se.FeatureTest.platform;if(on.button!==0||on.ctrlKey&&xn)return;const Ge=li(this,an,u0).bind(this,pn),Oe=this._isDraggable;this._isDraggable=!1;const $e={passive:!0,capture:!0};window.addEventListener("pointermove",Ge,$e);const rn=this.x,fn=this.y,gn=this.width,vn=this.height,wn=this.parent.div.style.cursor,On=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(on.target).cursor;const jn=()=>{this._isDraggable=Oe,window.removeEventListener("pointerup",jn),window.removeEventListener("blur",jn),window.removeEventListener("pointermove",Ge,$e),this.parent.div.style.cursor=wn,this.div.style.cursor=On;const Wn=this.x,ti=this.y,si=this.width,qn=this.height;Wn===rn&&ti===fn&&si===gn&&qn===vn||this.addCommands({cmd:()=>{this.width=si,this.height=qn,this.x=Wn,this.y=ti;const[En,Qn]=this.parentDimensions;this.setDims(En*si,Qn*qn),this.fixAndSetPosition()},undo:()=>{this.width=gn,this.height=vn,this.x=rn,this.y=fn;const[En,Qn]=this.parentDimensions;this.setDims(En*gn,Qn*vn),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",jn),window.addEventListener("blur",jn)},u0=function(pn,on){const[xn,Ge]=this.parentDimensions,Oe=this.x,$e=this.y,rn=this.width,fn=this.height,gn=Sn.MIN_SIZE/xn,vn=Sn.MIN_SIZE/Ge,wn=Pi=>Math.round(Pi*1e4)/1e4,On=li(this,an,pp).call(this,this.rotation),jn=(Pi,na)=>[On[0]*Pi+On[2]*na,On[1]*Pi+On[3]*na],Wn=li(this,an,pp).call(this,360-this.rotation),ti=(Pi,na)=>[Wn[0]*Pi+Wn[2]*na,Wn[1]*Pi+Wn[3]*na];let si,qn,En=!1,Qn=!1;switch(pn){case"topLeft":En=!0,si=(Pi,na)=>[0,0],qn=(Pi,na)=>[Pi,na];break;case"topMiddle":si=(Pi,na)=>[Pi/2,0],qn=(Pi,na)=>[Pi/2,na];break;case"topRight":En=!0,si=(Pi,na)=>[Pi,0],qn=(Pi,na)=>[0,na];break;case"middleRight":Qn=!0,si=(Pi,na)=>[Pi,na/2],qn=(Pi,na)=>[0,na/2];break;case"bottomRight":En=!0,si=(Pi,na)=>[Pi,na],qn=(Pi,na)=>[0,0];break;case"bottomMiddle":si=(Pi,na)=>[Pi/2,na],qn=(Pi,na)=>[Pi/2,0];break;case"bottomLeft":En=!0,si=(Pi,na)=>[0,na],qn=(Pi,na)=>[Pi,0];break;case"middleLeft":Qn=!0,si=(Pi,na)=>[0,na/2],qn=(Pi,na)=>[Pi,na/2];break}const Cn=si(rn,fn),Mn=qn(rn,fn);let Un=jn(...Mn);const zn=wn(Oe+Un[0]),ni=wn($e+Un[1]);let yi=1,pi=1,[$n,Yn]=this.screenToPageTranslation(on.movementX,on.movementY);if([$n,Yn]=ti($n/xn,Yn/Ge),En){const Pi=Math.hypot(rn,fn);yi=pi=Math.max(Math.min(Math.hypot(Mn[0]-Cn[0]-$n,Mn[1]-Cn[1]-Yn)/Pi,1/rn,1/fn),gn/rn,vn/fn)}else Qn?yi=Math.max(gn,Math.min(1,Math.abs(Mn[0]-Cn[0]-$n)))/rn:pi=Math.max(vn,Math.min(1,Math.abs(Mn[1]-Cn[1]-Yn)))/fn;const ai=wn(rn*yi),Di=wn(fn*pi);Un=jn(...qn(ai,Di));const ki=zn-Un[0],Ji=ni-Un[1];this.width=ai,this.height=Di,this.x=ki,this.y=Ji,this.setDims(xn*ai,Ge*Di),this.fixAndSetPosition()},mp=async function(){var xn;const pn=un(this,Me);if(!pn)return;if(!un(this,Re)&&!un(this,Be)){pn.classList.remove("done"),(xn=un(this,Ve))==null||xn.remove();return}Sn._l10nPromise.get("editor_alt_text_edit_button_label").then(Ge=>{pn.setAttribute("aria-label",Ge)});let on=un(this,Ve);if(!on){xi(this,Ve,on=document.createElement("span")),on.className="tooltip",on.setAttribute("role","tooltip");const Ge=on.id=`alt-text-tooltip-${this.id}`;pn.setAttribute("aria-describedby",Ge);const Oe=100;pn.addEventListener("mouseenter",()=>{xi(this,Fe,setTimeout(()=>{xi(this,Fe,null),un(this,Ve).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},Oe))}),pn.addEventListener("mouseleave",()=>{var $e;clearTimeout(un(this,Fe)),xi(this,Fe,null),($e=un(this,Ve))==null||$e.classList.remove("show")})}pn.classList.add("done"),on.innerText=un(this,Be)?await Sn._l10nPromise.get("editor_alt_text_decorative_tooltip"):un(this,Re),on.parentNode||pn.append(on)},c0=function(pn){if(!this._isDraggable)return;const on=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let xn,Ge;on&&(xn={passive:!0,capture:!0},Ge=$e=>{const[rn,fn]=this.screenToPageTranslation($e.movementX,$e.movementY);this._uiManager.dragSelectedEditors(rn,fn)},window.addEventListener("pointermove",Ge,xn));const Oe=()=>{if(window.removeEventListener("pointerup",Oe),window.removeEventListener("blur",Oe),on&&window.removeEventListener("pointermove",Ge,xn),xi(this,je,!1),!this._uiManager.endDragSession()){const{isMac:$e}=Se.FeatureTest.platform;pn.ctrlKey&&!$e||pn.shiftKey||pn.metaKey&&$e?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",Oe),window.addEventListener("blur",Oe)},bi(Sn,We),Ka(Sn,"_borderLineWidth",-1),Ka(Sn,"_colorManager",new xe.ColorManager),Ka(Sn,"_zIndex",1),Ka(Sn,"SMALL_EDITOR_SIZE",0);let Pe=Sn;e.AnnotationEditor=Pe;class Ce extends Pe{constructor(pn){super(pn),this.annotationElementId=pn.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}}),((t,e,r)=>{var Ie,qe,Ye,Xe,je,gp,cn,nn,an,Ze,tn,h0,Je,St,hn,_n,yn,mn,Sn,Pn,pn,on,xn,Ge,Oe,$e,rn,fn,gn,vn,wn,On,jn,Wn,ti,si,qn,En,Qn,Cn,Mn,Un,zn,ni,yi,pi,$n,d0,yp,vp,Od,bp,xp,ho,Oh,f0,p0,_p,Uh,Sp;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=Ee,e.opacityToHex=Pe;var xe=r(1),Se=r(6);function Ee(Ai,Rn,Zn){for(const Xn of Zn)Rn.addEventListener(Xn,Ai[Xn].bind(Ai))}function Pe(Ai){return Math.round(Math.min(255,Math.max(1,255*Ai))).toString(16).padStart(2,"0")}class Ce{constructor(){bi(this,Ie,0)}getId(){return`${xe.AnnotationEditorPrefix}${Fh(this,Ie)._++}`}}Ie=new WeakMap;const sn=class sn{constructor(){bi(this,je);bi(this,qe,(0,xe.getUuid)());bi(this,Ye,0);bi(this,Xe,null)}static get _isSVGFittingCanvas(){const Rn='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',Xn=new OffscreenCanvas(1,3).getContext("2d"),Si=new Image;Si.src=Rn;const Ci=Si.decode().then(()=>(Xn.drawImage(Si,0,0,1,1,0,0,1,3),new Uint32Array(Xn.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,xe.shadow)(this,"_isSVGFittingCanvas",Ci)}async getFromFile(Rn){const{lastModified:Zn,name:Xn,size:Si,type:Ci}=Rn;return li(this,je,gp).call(this,`${Zn}_${Xn}_${Si}_${Ci}`,Rn)}async getFromUrl(Rn){return li(this,je,gp).call(this,Rn,Rn)}async getFromId(Rn){un(this,Xe)||xi(this,Xe,new Map);const Zn=un(this,Xe).get(Rn);return Zn?Zn.bitmap?(Zn.refCounter+=1,Zn):Zn.file?this.getFromFile(Zn.file):this.getFromUrl(Zn.url):null}getSvgUrl(Rn){const Zn=un(this,Xe).get(Rn);return Zn!=null&&Zn.isSvg?Zn.svgUrl:null}deleteId(Rn){un(this,Xe)||xi(this,Xe,new Map);const Zn=un(this,Xe).get(Rn);Zn&&(Zn.refCounter-=1,Zn.refCounter===0&&(Zn.bitmap=null))}isValidId(Rn){return Rn.startsWith(`image_${un(this,qe)}_`)}};qe=new WeakMap,Ye=new WeakMap,Xe=new WeakMap,je=new WeakSet,gp=async function(Rn,Zn){un(this,Xe)||xi(this,Xe,new Map);let Xn=un(this,Xe).get(Rn);if(Xn===null)return null;if(Xn!=null&&Xn.bitmap)return Xn.refCounter+=1,Xn;try{Xn||(Xn={bitmap:null,id:`image_${un(this,qe)}_${Fh(this,Ye)._++}`,refCounter:0,isSvg:!1});let Si;if(typeof Zn=="string"){Xn.url=Zn;const Ci=await fetch(Zn);if(!Ci.ok)throw new Error(Ci.statusText);Si=await Ci.blob()}else Si=Xn.file=Zn;if(Si.type==="image/svg+xml"){const Ci=sn._isSVGFittingCanvas,Oi=new FileReader,Fn=new Image,Nn=new Promise((Gn,ei)=>{Fn.onload=()=>{Xn.bitmap=Fn,Xn.isSvg=!0,Gn()},Oi.onload=async()=>{const ii=Xn.svgUrl=Oi.result;Fn.src=await Ci?`${ii}#svgView(preserveAspectRatio(none))`:ii},Fn.onerror=Oi.onerror=ei});Oi.readAsDataURL(Si),await Nn}else Xn.bitmap=await createImageBitmap(Si);Xn.refCounter=1}catch(Si){console.error(Si),Xn=null}return un(this,Xe).set(Rn,Xn),Xn&&un(this,Xe).set(Xn.id,Xn),Xn};let Re=sn;class Be{constructor(Rn=128){bi(this,cn,[]);bi(this,nn,!1);bi(this,an);bi(this,Ze,-1);xi(this,an,Rn)}add({cmd:Rn,undo:Zn,mustExec:Xn,type:Si=NaN,overwriteIfSameType:Ci=!1,keepUndo:Oi=!1}){if(Xn&&Rn(),un(this,nn))return;const Fn={cmd:Rn,undo:Zn,type:Si};if(un(this,Ze)===-1){un(this,cn).length>0&&(un(this,cn).length=0),xi(this,Ze,0),un(this,cn).push(Fn);return}if(Ci&&un(this,cn)[un(this,Ze)].type===Si){Oi&&(Fn.undo=un(this,cn)[un(this,Ze)].undo),un(this,cn)[un(this,Ze)]=Fn;return}const Nn=un(this,Ze)+1;Nn===un(this,an)?un(this,cn).splice(0,1):(xi(this,Ze,Nn),Nn<un(this,cn).length&&un(this,cn).splice(Nn)),un(this,cn).push(Fn)}undo(){un(this,Ze)!==-1&&(xi(this,nn,!0),un(this,cn)[un(this,Ze)].undo(),xi(this,nn,!1),xi(this,Ze,un(this,Ze)-1))}redo(){un(this,Ze)<un(this,cn).length-1&&(xi(this,Ze,un(this,Ze)+1),xi(this,nn,!0),un(this,cn)[un(this,Ze)].cmd(),xi(this,nn,!1))}hasSomethingToUndo(){return un(this,Ze)!==-1}hasSomethingToRedo(){return un(this,Ze)<un(this,cn).length-1}destroy(){xi(this,cn,null)}}cn=new WeakMap,nn=new WeakMap,an=new WeakMap,Ze=new WeakMap,e.CommandManager=Be;class Me{constructor(Rn){bi(this,tn);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:Zn}=xe.FeatureTest.platform;for(const[Xn,Si,Ci={}]of Rn)for(const Oi of Xn){const Fn=Oi.startsWith("mac+");Zn&&Fn?(this.callbacks.set(Oi.slice(4),{callback:Si,options:Ci}),this.allKeys.add(Oi.split("+").at(-1))):!Zn&&!Fn&&(this.callbacks.set(Oi,{callback:Si,options:Ci}),this.allKeys.add(Oi.split("+").at(-1)))}}exec(Rn,Zn){if(!this.allKeys.has(Zn.key))return;const Xn=this.callbacks.get(li(this,tn,h0).call(this,Zn));if(!Xn)return;const{callback:Si,options:{bubbles:Ci=!1,args:Oi=[],checker:Fn=null}}=Xn;Fn&&!Fn(Rn,Zn)||(Si.bind(Rn,...Oi)(),Ci||(Zn.stopPropagation(),Zn.preventDefault()))}}tn=new WeakSet,h0=function(Rn){Rn.altKey&&this.buffer.push("alt"),Rn.ctrlKey&&this.buffer.push("ctrl"),Rn.metaKey&&this.buffer.push("meta"),Rn.shiftKey&&this.buffer.push("shift"),this.buffer.push(Rn.key);const Zn=this.buffer.join("+");return this.buffer.length=0,Zn},e.KeyboardManager=Me;const An=class An{get _colors(){const Rn=new Map([["CanvasText",null],["Canvas",null]]);return(0,Se.getColorValues)(Rn),(0,xe.shadow)(this,"_colors",Rn)}convert(Rn){const Zn=(0,Se.getRGB)(Rn);if(!window.matchMedia("(forced-colors: active)").matches)return Zn;for(const[Xn,Si]of this._colors)if(Si.every((Ci,Oi)=>Ci===Zn[Oi]))return An._colorsMapping.get(Xn);return Zn}getHexCode(Rn){const Zn=this._colors.get(Rn);return Zn?xe.Util.makeHexColor(...Zn):Rn}};Ka(An,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Ve=An;e.ColorManager=Ve;const wi=class wi{constructor(Rn,Zn,Xn,Si,Ci,Oi){bi(this,$n);bi(this,Je,null);bi(this,St,new Map);bi(this,hn,new Map);bi(this,_n,null);bi(this,yn,null);bi(this,mn,new Be);bi(this,Sn,0);bi(this,Pn,new Set);bi(this,pn,null);bi(this,on,null);bi(this,xn,new Set);bi(this,Ge,null);bi(this,Oe,new Ce);bi(this,$e,!1);bi(this,rn,!1);bi(this,fn,null);bi(this,gn,xe.AnnotationEditorType.NONE);bi(this,vn,new Set);bi(this,wn,null);bi(this,On,this.blur.bind(this));bi(this,jn,this.focus.bind(this));bi(this,Wn,this.copy.bind(this));bi(this,ti,this.cut.bind(this));bi(this,si,this.paste.bind(this));bi(this,qn,this.keydown.bind(this));bi(this,En,this.onEditingAction.bind(this));bi(this,Qn,this.onPageChanging.bind(this));bi(this,Cn,this.onScaleChanging.bind(this));bi(this,Mn,this.onRotationChanging.bind(this));bi(this,Un,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});bi(this,zn,[0,0]);bi(this,ni,null);bi(this,yi,null);bi(this,pi,null);xi(this,yi,Rn),xi(this,pi,Zn),xi(this,_n,Xn),this._eventBus=Si,this._eventBus._on("editingaction",un(this,En)),this._eventBus._on("pagechanging",un(this,Qn)),this._eventBus._on("scalechanging",un(this,Cn)),this._eventBus._on("rotationchanging",un(this,Mn)),xi(this,yn,Ci.annotationStorage),xi(this,Ge,Ci.filterFactory),xi(this,wn,Oi),this.viewParameters={realScale:Se.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const Rn=wi.prototype,Zn=Ci=>{const{activeElement:Oi}=document;return Oi&&un(Ci,yi).contains(Oi)&&Ci.hasSomethingToControl()},Xn=this.TRANSLATE_SMALL,Si=this.TRANSLATE_BIG;return(0,xe.shadow)(this,"_keyboardManager",new Me([[["ctrl+a","mac+meta+a"],Rn.selectAll],[["ctrl+z","mac+meta+z"],Rn.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],Rn.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],Rn.delete],[["Escape","mac+Escape"],Rn.unselectAll],[["ArrowLeft","mac+ArrowLeft"],Rn.translateSelectedEditors,{args:[-Xn,0],checker:Zn}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Rn.translateSelectedEditors,{args:[-Si,0],checker:Zn}],[["ArrowRight","mac+ArrowRight"],Rn.translateSelectedEditors,{args:[Xn,0],checker:Zn}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Rn.translateSelectedEditors,{args:[Si,0],checker:Zn}],[["ArrowUp","mac+ArrowUp"],Rn.translateSelectedEditors,{args:[0,-Xn],checker:Zn}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Rn.translateSelectedEditors,{args:[0,-Si],checker:Zn}],[["ArrowDown","mac+ArrowDown"],Rn.translateSelectedEditors,{args:[0,Xn],checker:Zn}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Rn.translateSelectedEditors,{args:[0,Si],checker:Zn}]]))}destroy(){li(this,$n,Od).call(this),li(this,$n,yp).call(this),this._eventBus._off("editingaction",un(this,En)),this._eventBus._off("pagechanging",un(this,Qn)),this._eventBus._off("scalechanging",un(this,Cn)),this._eventBus._off("rotationchanging",un(this,Mn));for(const Rn of un(this,hn).values())Rn.destroy();un(this,hn).clear(),un(this,St).clear(),un(this,xn).clear(),xi(this,Je,null),un(this,vn).clear(),un(this,mn).destroy(),un(this,_n).destroy()}get hcmFilter(){return(0,xe.shadow)(this,"hcmFilter",un(this,wn)?un(this,Ge).addHCMFilter(un(this,wn).foreground,un(this,wn).background):"none")}get direction(){return(0,xe.shadow)(this,"direction",getComputedStyle(un(this,yi)).direction)}editAltText(Rn){var Zn;(Zn=un(this,_n))==null||Zn.editAltText(this,Rn)}onPageChanging({pageNumber:Rn}){xi(this,Sn,Rn-1)}focusMainContainer(){un(this,yi).focus()}findParent(Rn,Zn){for(const Xn of un(this,hn).values()){const{x:Si,y:Ci,width:Oi,height:Fn}=Xn.div.getBoundingClientRect();if(Rn>=Si&&Rn<=Si+Oi&&Zn>=Ci&&Zn<=Ci+Fn)return Xn}return null}disableUserSelect(Rn=!1){un(this,pi).classList.toggle("noUserSelect",Rn)}addShouldRescale(Rn){un(this,xn).add(Rn)}removeShouldRescale(Rn){un(this,xn).delete(Rn)}onScaleChanging({scale:Rn}){this.commitOrRemove(),this.viewParameters.realScale=Rn*Se.PixelsPerInch.PDF_TO_CSS_UNITS;for(const Zn of un(this,xn))Zn.onScaleChanging()}onRotationChanging({pagesRotation:Rn}){this.commitOrRemove(),this.viewParameters.rotation=Rn}addToAnnotationStorage(Rn){!Rn.isEmpty()&&un(this,yn)&&!un(this,yn).has(Rn.id)&&un(this,yn).setValue(Rn.id,Rn)}blur(){if(!this.hasSelection)return;const{activeElement:Rn}=document;for(const Zn of un(this,vn))if(Zn.div.contains(Rn)){xi(this,fn,[Zn,Rn]),Zn._focusEventsAllowed=!1;break}}focus(){if(!un(this,fn))return;const[Rn,Zn]=un(this,fn);xi(this,fn,null),Zn.addEventListener("focusin",()=>{Rn._focusEventsAllowed=!0},{once:!0}),Zn.focus()}addEditListeners(){li(this,$n,vp).call(this),li(this,$n,bp).call(this)}removeEditListeners(){li(this,$n,Od).call(this),li(this,$n,xp).call(this)}copy(Rn){var Xn;if(Rn.preventDefault(),(Xn=un(this,Je))==null||Xn.commitOrRemove(),!this.hasSelection)return;const Zn=[];for(const Si of un(this,vn)){const Ci=Si.serialize(!0);Ci&&Zn.push(Ci)}Zn.length!==0&&Rn.clipboardData.setData("application/pdfjs",JSON.stringify(Zn))}cut(Rn){this.copy(Rn),this.delete()}paste(Rn){Rn.preventDefault();const{clipboardData:Zn}=Rn;for(const Ci of Zn.items)for(const Oi of un(this,on))if(Oi.isHandlingMimeForPasting(Ci.type)){Oi.paste(Ci,this.currentLayer);return}let Xn=Zn.getData("application/pdfjs");if(!Xn)return;try{Xn=JSON.parse(Xn)}catch(Ci){(0,xe.warn)(`paste: "${Ci.message}".`);return}if(!Array.isArray(Xn))return;this.unselectAll();const Si=this.currentLayer;try{const Ci=[];for(const Nn of Xn){const Gn=Si.deserialize(Nn);if(!Gn)return;Ci.push(Gn)}const Oi=()=>{for(const Nn of Ci)li(this,$n,_p).call(this,Nn);li(this,$n,Sp).call(this,Ci)},Fn=()=>{for(const Nn of Ci)Nn.remove()};this.addCommands({cmd:Oi,undo:Fn,mustExec:!0})}catch(Ci){(0,xe.warn)(`paste: "${Ci.message}".`)}}keydown(Rn){var Zn;(Zn=this.getActive())!=null&&Zn.shouldGetKeyboardEvents()||wi._keyboardManager.exec(this,Rn)}onEditingAction(Rn){["undo","redo","delete","selectAll"].includes(Rn.name)&&this[Rn.name]()}setEditingState(Rn){Rn?(li(this,$n,d0).call(this),li(this,$n,vp).call(this),li(this,$n,bp).call(this),li(this,$n,ho).call(this,{isEditing:un(this,gn)!==xe.AnnotationEditorType.NONE,isEmpty:li(this,$n,Uh).call(this),hasSomethingToUndo:un(this,mn).hasSomethingToUndo(),hasSomethingToRedo:un(this,mn).hasSomethingToRedo(),hasSelectedEditor:!1})):(li(this,$n,yp).call(this),li(this,$n,Od).call(this),li(this,$n,xp).call(this),li(this,$n,ho).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(Rn){if(!un(this,on)){xi(this,on,Rn);for(const Zn of un(this,on))li(this,$n,Oh).call(this,Zn.defaultPropertiesToUpdate)}}getId(){return un(this,Oe).getId()}get currentLayer(){return un(this,hn).get(un(this,Sn))}getLayer(Rn){return un(this,hn).get(Rn)}get currentPageIndex(){return un(this,Sn)}addLayer(Rn){un(this,hn).set(Rn.pageIndex,Rn),un(this,$e)?Rn.enable():Rn.disable()}removeLayer(Rn){un(this,hn).delete(Rn.pageIndex)}updateMode(Rn,Zn=null){if(un(this,gn)!==Rn){if(xi(this,gn,Rn),Rn===xe.AnnotationEditorType.NONE){this.setEditingState(!1),li(this,$n,p0).call(this);return}this.setEditingState(!0),li(this,$n,f0).call(this),this.unselectAll();for(const Xn of un(this,hn).values())Xn.updateMode(Rn);if(Zn){for(const Xn of un(this,St).values())if(Xn.annotationElementId===Zn){this.setSelected(Xn),Xn.enterInEditMode();break}}}}updateToolbar(Rn){Rn!==un(this,gn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:Rn})}updateParams(Rn,Zn){if(un(this,on)){if(Rn===xe.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(Rn);return}for(const Xn of un(this,vn))Xn.updateParams(Rn,Zn);for(const Xn of un(this,on))Xn.updateDefaultParams(Rn,Zn)}}enableWaiting(Rn=!1){if(un(this,rn)!==Rn){xi(this,rn,Rn);for(const Zn of un(this,hn).values())Rn?Zn.disableClick():Zn.enableClick(),Zn.div.classList.toggle("waiting",Rn)}}getEditors(Rn){const Zn=[];for(const Xn of un(this,St).values())Xn.pageIndex===Rn&&Zn.push(Xn);return Zn}getEditor(Rn){return un(this,St).get(Rn)}addEditor(Rn){un(this,St).set(Rn.id,Rn)}removeEditor(Rn){var Zn;un(this,St).delete(Rn.id),this.unselect(Rn),(!Rn.annotationElementId||!un(this,Pn).has(Rn.annotationElementId))&&((Zn=un(this,yn))==null||Zn.remove(Rn.id))}addDeletedAnnotationElement(Rn){un(this,Pn).add(Rn.annotationElementId),Rn.deleted=!0}isDeletedAnnotationElement(Rn){return un(this,Pn).has(Rn)}removeDeletedAnnotationElement(Rn){un(this,Pn).delete(Rn.annotationElementId),Rn.deleted=!1}setActiveEditor(Rn){un(this,Je)!==Rn&&(xi(this,Je,Rn),Rn&&li(this,$n,Oh).call(this,Rn.propertiesToUpdate))}toggleSelected(Rn){if(un(this,vn).has(Rn)){un(this,vn).delete(Rn),Rn.unselect(),li(this,$n,ho).call(this,{hasSelectedEditor:this.hasSelection});return}un(this,vn).add(Rn),Rn.select(),li(this,$n,Oh).call(this,Rn.propertiesToUpdate),li(this,$n,ho).call(this,{hasSelectedEditor:!0})}setSelected(Rn){for(const Zn of un(this,vn))Zn!==Rn&&Zn.unselect();un(this,vn).clear(),un(this,vn).add(Rn),Rn.select(),li(this,$n,Oh).call(this,Rn.propertiesToUpdate),li(this,$n,ho).call(this,{hasSelectedEditor:!0})}isSelected(Rn){return un(this,vn).has(Rn)}unselect(Rn){Rn.unselect(),un(this,vn).delete(Rn),li(this,$n,ho).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return un(this,vn).size!==0}undo(){un(this,mn).undo(),li(this,$n,ho).call(this,{hasSomethingToUndo:un(this,mn).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:li(this,$n,Uh).call(this)})}redo(){un(this,mn).redo(),li(this,$n,ho).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:un(this,mn).hasSomethingToRedo(),isEmpty:li(this,$n,Uh).call(this)})}addCommands(Rn){un(this,mn).add(Rn),li(this,$n,ho).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:li(this,$n,Uh).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const Rn=[...un(this,vn)],Zn=()=>{for(const Si of Rn)Si.remove()},Xn=()=>{for(const Si of Rn)li(this,$n,_p).call(this,Si)};this.addCommands({cmd:Zn,undo:Xn,mustExec:!0})}commitOrRemove(){var Rn;(Rn=un(this,Je))==null||Rn.commitOrRemove()}hasSomethingToControl(){return un(this,Je)||this.hasSelection}selectAll(){for(const Rn of un(this,vn))Rn.commit();li(this,$n,Sp).call(this,un(this,St).values())}unselectAll(){if(un(this,Je)){un(this,Je).commitOrRemove();return}if(this.hasSelection){for(const Rn of un(this,vn))Rn.unselect();un(this,vn).clear(),li(this,$n,ho).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(Rn,Zn,Xn=!1){if(Xn||this.commitOrRemove(),!this.hasSelection)return;un(this,zn)[0]+=Rn,un(this,zn)[1]+=Zn;const[Si,Ci]=un(this,zn),Oi=[...un(this,vn)],Fn=1e3;un(this,ni)&&clearTimeout(un(this,ni)),xi(this,ni,setTimeout(()=>{xi(this,ni,null),un(this,zn)[0]=un(this,zn)[1]=0,this.addCommands({cmd:()=>{for(const Nn of Oi)un(this,St).has(Nn.id)&&Nn.translateInPage(Si,Ci)},undo:()=>{for(const Nn of Oi)un(this,St).has(Nn.id)&&Nn.translateInPage(-Si,-Ci)},mustExec:!1})},Fn));for(const Nn of Oi)Nn.translateInPage(Rn,Zn)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),xi(this,pn,new Map);for(const Rn of un(this,vn))un(this,pn).set(Rn,{savedX:Rn.x,savedY:Rn.y,savedPageIndex:Rn.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!un(this,pn))return!1;this.disableUserSelect(!1);const Rn=un(this,pn);xi(this,pn,null);let Zn=!1;for(const[{x:Si,y:Ci,pageIndex:Oi},Fn]of Rn)Fn.newX=Si,Fn.newY=Ci,Fn.newPageIndex=Oi,Zn||(Zn=Si!==Fn.savedX||Ci!==Fn.savedY||Oi!==Fn.savedPageIndex);if(!Zn)return!1;const Xn=(Si,Ci,Oi,Fn)=>{if(un(this,St).has(Si.id)){const Nn=un(this,hn).get(Fn);Nn?Si._setParentAndPosition(Nn,Ci,Oi):(Si.pageIndex=Fn,Si.x=Ci,Si.y=Oi)}};return this.addCommands({cmd:()=>{for(const[Si,{newX:Ci,newY:Oi,newPageIndex:Fn}]of Rn)Xn(Si,Ci,Oi,Fn)},undo:()=>{for(const[Si,{savedX:Ci,savedY:Oi,savedPageIndex:Fn}]of Rn)Xn(Si,Ci,Oi,Fn)},mustExec:!0}),!0}dragSelectedEditors(Rn,Zn){if(un(this,pn))for(const Xn of un(this,pn).keys())Xn.drag(Rn,Zn)}rebuild(Rn){if(Rn.parent===null){const Zn=this.getLayer(Rn.pageIndex);Zn?(Zn.changeParent(Rn),Zn.addOrRebuild(Rn)):(this.addEditor(Rn),this.addToAnnotationStorage(Rn),Rn.rebuild())}else Rn.parent.addOrRebuild(Rn)}isActive(Rn){return un(this,Je)===Rn}getActive(){return un(this,Je)}getMode(){return un(this,gn)}get imageManager(){return(0,xe.shadow)(this,"imageManager",new Re)}};Je=new WeakMap,St=new WeakMap,hn=new WeakMap,_n=new WeakMap,yn=new WeakMap,mn=new WeakMap,Sn=new WeakMap,Pn=new WeakMap,pn=new WeakMap,on=new WeakMap,xn=new WeakMap,Ge=new WeakMap,Oe=new WeakMap,$e=new WeakMap,rn=new WeakMap,fn=new WeakMap,gn=new WeakMap,vn=new WeakMap,wn=new WeakMap,On=new WeakMap,jn=new WeakMap,Wn=new WeakMap,ti=new WeakMap,si=new WeakMap,qn=new WeakMap,En=new WeakMap,Qn=new WeakMap,Cn=new WeakMap,Mn=new WeakMap,Un=new WeakMap,zn=new WeakMap,ni=new WeakMap,yi=new WeakMap,pi=new WeakMap,$n=new WeakSet,d0=function(){window.addEventListener("focus",un(this,jn)),window.addEventListener("blur",un(this,On))},yp=function(){window.removeEventListener("focus",un(this,jn)),window.removeEventListener("blur",un(this,On))},vp=function(){window.addEventListener("keydown",un(this,qn),{capture:!0})},Od=function(){window.removeEventListener("keydown",un(this,qn),{capture:!0})},bp=function(){document.addEventListener("copy",un(this,Wn)),document.addEventListener("cut",un(this,ti)),document.addEventListener("paste",un(this,si))},xp=function(){document.removeEventListener("copy",un(this,Wn)),document.removeEventListener("cut",un(this,ti)),document.removeEventListener("paste",un(this,si))},ho=function(Rn){Object.entries(Rn).some(([Xn,Si])=>un(this,Un)[Xn]!==Si)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(un(this,Un),Rn)})},Oh=function(Rn){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:Rn})},f0=function(){if(!un(this,$e)){xi(this,$e,!0);for(const Rn of un(this,hn).values())Rn.enable()}},p0=function(){if(this.unselectAll(),un(this,$e)){xi(this,$e,!1);for(const Rn of un(this,hn).values())Rn.disable()}},_p=function(Rn){const Zn=un(this,hn).get(Rn.pageIndex);Zn?Zn.addOrRebuild(Rn):this.addEditor(Rn)},Uh=function(){if(un(this,St).size===0)return!0;if(un(this,St).size===1)for(const Rn of un(this,St).values())return Rn.isEmpty();return!1},Sp=function(Rn){un(this,vn).clear();for(const Zn of Rn)Zn.isEmpty()||(un(this,vn).add(Zn),Zn.select());li(this,$n,ho).call(this,{hasSelectedEditor:!0})},Ka(wi,"TRANSLATE_SMALL",1),Ka(wi,"TRANSLATE_BIG",10);let Fe=wi;e.AnnotationEditorUIManager=Fe}),((t,e,r)=>{var Sn,Pn,pn,on,xn,Ge,Oe,$e,rn,fn,gn,vn,Qc,Zc,Ap,Ud,zd,zh,jh;Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=Ze,e.getColorValues=St,e.getCurrentTransform=hn,e.getCurrentTransformInverse=_n,e.getFilenameFromUrl=je,e.getPdfFilenameFromUrl=Qe,e.getRGB=Je,e.getXfaPageViewport=An,e.isDataScheme=Ye,e.isPdfFile=Xe,e.isValidFetchUrl=cn,e.loadScript=an,e.noContextMenu=nn,e.setLayerDimensions=yn;var xe=r(7),Se=r(1);const Ee="http://www.w3.org/2000/svg",mn=class mn{};Ka(mn,"CSS",96),Ka(mn,"PDF",72),Ka(mn,"PDF_TO_CSS_UNITS",mn.CSS/mn.PDF);let Pe=mn;e.PixelsPerInch=Pe;class Ce extends xe.BaseFilterFactory{constructor({docId:Cn,ownerDocument:Mn=globalThis.document}={}){super();bi(this,vn);bi(this,Sn);bi(this,Pn);bi(this,pn);bi(this,on);bi(this,xn);bi(this,Ge);bi(this,Oe);bi(this,$e);bi(this,rn);bi(this,fn);bi(this,gn,0);xi(this,pn,Cn),xi(this,on,Mn)}addFilter(Cn){if(!Cn)return"none";let Mn=un(this,vn,Qc).get(Cn);if(Mn)return Mn;let Un,zn,ni,yi;if(Cn.length===1){const ai=Cn[0],Di=new Array(256);for(let ki=0;ki<256;ki++)Di[ki]=ai[ki]/255;yi=Un=zn=ni=Di.join(",")}else{const[ai,Di,ki]=Cn,Ji=new Array(256),Pi=new Array(256),na=new Array(256);for(let ea=0;ea<256;ea++)Ji[ea]=ai[ea]/255,Pi[ea]=Di[ea]/255,na[ea]=ki[ea]/255;Un=Ji.join(","),zn=Pi.join(","),ni=na.join(","),yi=`${Un}${zn}${ni}`}if(Mn=un(this,vn,Qc).get(yi),Mn)return un(this,vn,Qc).set(Cn,Mn),Mn;const pi=`g_${un(this,pn)}_transfer_map_${Fh(this,gn)._++}`,$n=`url(#${pi})`;un(this,vn,Qc).set(Cn,$n),un(this,vn,Qc).set(yi,$n);const Yn=li(this,vn,Ud).call(this,pi);return li(this,vn,zh).call(this,Un,zn,ni,Yn),$n}addHCMFilter(Cn,Mn){var Di;const Un=`${Cn}-${Mn}`;if(un(this,Ge)===Un)return un(this,Oe);if(xi(this,Ge,Un),xi(this,Oe,"none"),(Di=un(this,xn))==null||Di.remove(),!Cn||!Mn)return un(this,Oe);const zn=li(this,vn,jh).call(this,Cn);Cn=Se.Util.makeHexColor(...zn);const ni=li(this,vn,jh).call(this,Mn);if(Mn=Se.Util.makeHexColor(...ni),un(this,vn,Zc).style.color="",Cn==="#000000"&&Mn==="#ffffff"||Cn===Mn)return un(this,Oe);const yi=new Array(256);for(let ki=0;ki<=255;ki++){const Ji=ki/255;yi[ki]=Ji<=.03928?Ji/12.92:((Ji+.055)/1.055)**2.4}const pi=yi.join(","),$n=`g_${un(this,pn)}_hcm_filter`,Yn=xi(this,$e,li(this,vn,Ud).call(this,$n));li(this,vn,zh).call(this,pi,pi,pi,Yn),li(this,vn,Ap).call(this,Yn);const ai=(ki,Ji)=>{const Pi=zn[ki]/255,na=ni[ki]/255,ea=new Array(Ji+1);for(let Ki=0;Ki<=Ji;Ki++)ea[Ki]=Pi+Ki/Ji*(na-Pi);return ea.join(",")};return li(this,vn,zh).call(this,ai(0,5),ai(1,5),ai(2,5),Yn),xi(this,Oe,`url(#${$n})`),un(this,Oe)}addHighlightHCMFilter(Cn,Mn,Un,zn){var na;const ni=`${Cn}-${Mn}-${Un}-${zn}`;if(un(this,rn)===ni)return un(this,fn);if(xi(this,rn,ni),xi(this,fn,"none"),(na=un(this,$e))==null||na.remove(),!Cn||!Mn)return un(this,fn);const[yi,pi]=[Cn,Mn].map(li(this,vn,jh).bind(this));let $n=Math.round(.2126*yi[0]+.7152*yi[1]+.0722*yi[2]),Yn=Math.round(.2126*pi[0]+.7152*pi[1]+.0722*pi[2]),[ai,Di]=[Un,zn].map(li(this,vn,jh).bind(this));Yn<$n&&([$n,Yn,ai,Di]=[Yn,$n,Di,ai]),un(this,vn,Zc).style.color="";const ki=(ea,Ki,oi)=>{const Kn=new Array(256),di=(Yn-$n)/oi,Ui=ea/255,wi=(Ki-ea)/(255*oi);let Ai=0;for(let Rn=0;Rn<=oi;Rn++){const Zn=Math.round($n+Rn*di),Xn=Ui+Rn*wi;for(let Si=Ai;Si<=Zn;Si++)Kn[Si]=Xn;Ai=Zn+1}for(let Rn=Ai;Rn<256;Rn++)Kn[Rn]=Kn[Ai-1];return Kn.join(",")},Ji=`g_${un(this,pn)}_hcm_highlight_filter`,Pi=xi(this,$e,li(this,vn,Ud).call(this,Ji));return li(this,vn,Ap).call(this,Pi),li(this,vn,zh).call(this,ki(ai[0],Di[0],5),ki(ai[1],Di[1],5),ki(ai[2],Di[2],5),Pi),xi(this,fn,`url(#${Ji})`),un(this,fn)}destroy(Cn=!1){Cn&&(un(this,Oe)||un(this,fn))||(un(this,Pn)&&(un(this,Pn).parentNode.parentNode.remove(),xi(this,Pn,null)),un(this,Sn)&&(un(this,Sn).clear(),xi(this,Sn,null)),xi(this,gn,0))}}Sn=new WeakMap,Pn=new WeakMap,pn=new WeakMap,on=new WeakMap,xn=new WeakMap,Ge=new WeakMap,Oe=new WeakMap,$e=new WeakMap,rn=new WeakMap,fn=new WeakMap,gn=new WeakMap,vn=new WeakSet,Qc=function(){return un(this,Sn)||xi(this,Sn,new Map)},Zc=function(){if(!un(this,Pn)){const Cn=un(this,on).createElement("div"),{style:Mn}=Cn;Mn.visibility="hidden",Mn.contain="strict",Mn.width=Mn.height=0,Mn.position="absolute",Mn.top=Mn.left=0,Mn.zIndex=-1;const Un=un(this,on).createElementNS(Ee,"svg");Un.setAttribute("width",0),Un.setAttribute("height",0),xi(this,Pn,un(this,on).createElementNS(Ee,"defs")),Cn.append(Un),Un.append(un(this,Pn)),un(this,on).body.append(Cn)}return un(this,Pn)},Ap=function(Cn){const Mn=un(this,on).createElementNS(Ee,"feColorMatrix");Mn.setAttribute("type","matrix"),Mn.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),Cn.append(Mn)},Ud=function(Cn){const Mn=un(this,on).createElementNS(Ee,"filter");return Mn.setAttribute("color-interpolation-filters","sRGB"),Mn.setAttribute("id",Cn),un(this,vn,Zc).append(Mn),Mn},zd=function(Cn,Mn,Un){const zn=un(this,on).createElementNS(Ee,Mn);zn.setAttribute("type","discrete"),zn.setAttribute("tableValues",Un),Cn.append(zn)},zh=function(Cn,Mn,Un,zn){const ni=un(this,on).createElementNS(Ee,"feComponentTransfer");zn.append(ni),li(this,vn,zd).call(this,ni,"feFuncR",Cn),li(this,vn,zd).call(this,ni,"feFuncG",Mn),li(this,vn,zd).call(this,ni,"feFuncB",Un)},jh=function(Cn){return un(this,vn,Zc).style.color=Cn,Je(getComputedStyle(un(this,vn,Zc)).getPropertyValue("color"))},e.DOMFilterFactory=Ce;class Re extends xe.BaseCanvasFactory{constructor({ownerDocument:Qn=globalThis.document}={}){super(),this._document=Qn}_createCanvas(Qn,Cn){const Mn=this._document.createElement("canvas");return Mn.width=Qn,Mn.height=Cn,Mn}}e.DOMCanvasFactory=Re;async function Be(En,Qn=!1){if(cn(En,document.baseURI)){const Cn=await fetch(En);if(!Cn.ok)throw new Error(Cn.statusText);return Qn?new Uint8Array(await Cn.arrayBuffer()):(0,Se.stringToBytes)(await Cn.text())}return new Promise((Cn,Mn)=>{const Un=new XMLHttpRequest;Un.open("GET",En,!0),Qn&&(Un.responseType="arraybuffer"),Un.onreadystatechange=()=>{if(Un.readyState===XMLHttpRequest.DONE){if(Un.status===200||Un.status===0){let zn;if(Qn&&Un.response?zn=new Uint8Array(Un.response):!Qn&&Un.responseText&&(zn=(0,Se.stringToBytes)(Un.responseText)),zn){Cn(zn);return}}Mn(new Error(Un.statusText))}},Un.send(null)})}class Me extends xe.BaseCMapReaderFactory{_fetchData(Qn,Cn){return Be(Qn,this.isCompressed).then(Mn=>({cMapData:Mn,compressionType:Cn}))}}e.DOMCMapReaderFactory=Me;class Ve extends xe.BaseStandardFontDataFactory{_fetchData(Qn){return Be(Qn,!0)}}e.DOMStandardFontDataFactory=Ve;class Fe extends xe.BaseSVGFactory{_createSVG(Qn){return document.createElementNS(Ee,Qn)}}e.DOMSVGFactory=Fe;class Ie{constructor({viewBox:Qn,scale:Cn,rotation:Mn,offsetX:Un=0,offsetY:zn=0,dontFlip:ni=!1}){this.viewBox=Qn,this.scale=Cn,this.rotation=Mn,this.offsetX=Un,this.offsetY=zn;const yi=(Qn[2]+Qn[0])/2,pi=(Qn[3]+Qn[1])/2;let $n,Yn,ai,Di;switch(Mn%=360,Mn<0&&(Mn+=360),Mn){case 180:$n=-1,Yn=0,ai=0,Di=1;break;case 90:$n=0,Yn=1,ai=1,Di=0;break;case 270:$n=0,Yn=-1,ai=-1,Di=0;break;case 0:$n=1,Yn=0,ai=0,Di=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}ni&&(ai=-ai,Di=-Di);let ki,Ji,Pi,na;$n===0?(ki=Math.abs(pi-Qn[1])*Cn+Un,Ji=Math.abs(yi-Qn[0])*Cn+zn,Pi=(Qn[3]-Qn[1])*Cn,na=(Qn[2]-Qn[0])*Cn):(ki=Math.abs(yi-Qn[0])*Cn+Un,Ji=Math.abs(pi-Qn[1])*Cn+zn,Pi=(Qn[2]-Qn[0])*Cn,na=(Qn[3]-Qn[1])*Cn),this.transform=[$n*Cn,Yn*Cn,ai*Cn,Di*Cn,ki-$n*Cn*yi-ai*Cn*pi,Ji-Yn*Cn*yi-Di*Cn*pi],this.width=Pi,this.height=na}get rawDims(){const{viewBox:Qn}=this;return(0,Se.shadow)(this,"rawDims",{pageWidth:Qn[2]-Qn[0],pageHeight:Qn[3]-Qn[1],pageX:Qn[0],pageY:Qn[1]})}clone({scale:Qn=this.scale,rotation:Cn=this.rotation,offsetX:Mn=this.offsetX,offsetY:Un=this.offsetY,dontFlip:zn=!1}={}){return new Ie({viewBox:this.viewBox.slice(),scale:Qn,rotation:Cn,offsetX:Mn,offsetY:Un,dontFlip:zn})}convertToViewportPoint(Qn,Cn){return Se.Util.applyTransform([Qn,Cn],this.transform)}convertToViewportRectangle(Qn){const Cn=Se.Util.applyTransform([Qn[0],Qn[1]],this.transform),Mn=Se.Util.applyTransform([Qn[2],Qn[3]],this.transform);return[Cn[0],Cn[1],Mn[0],Mn[1]]}convertToPdfPoint(Qn,Cn){return Se.Util.applyInverseTransform([Qn,Cn],this.transform)}}e.PageViewport=Ie;class qe extends Se.BaseException{constructor(Qn,Cn=0){super(Qn,"RenderingCancelledException"),this.extraDelay=Cn}}e.RenderingCancelledException=qe;function Ye(En){const Qn=En.length;let Cn=0;for(;Cn<Qn&&En[Cn].trim()==="";)Cn++;return En.substring(Cn,Cn+5).toLowerCase()==="data:"}function Xe(En){return typeof En=="string"&&/\.pdf$/i.test(En)}function je(En,Qn=!1){return Qn||([En]=En.split(/[#?]/,1)),En.substring(En.lastIndexOf("/")+1)}function Qe(En,Qn="document.pdf"){if(typeof En!="string")return Qn;if(Ye(En))return(0,Se.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Qn;const Cn=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Mn=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Un=Cn.exec(En);let zn=Mn.exec(Un[1])||Mn.exec(Un[2])||Mn.exec(Un[3]);if(zn&&(zn=zn[0],zn.includes("%")))try{zn=Mn.exec(decodeURIComponent(zn))[0]}catch{}return zn||Qn}class sn{constructor(){Ka(this,"started",Object.create(null));Ka(this,"times",[])}time(Qn){Qn in this.started&&(0,Se.warn)(`Timer is already running for ${Qn}`),this.started[Qn]=Date.now()}timeEnd(Qn){Qn in this.started||(0,Se.warn)(`Timer has not been started for ${Qn}`),this.times.push({name:Qn,start:this.started[Qn],end:Date.now()}),delete this.started[Qn]}toString(){const Qn=[];let Cn=0;for(const{name:Mn}of this.times)Cn=Math.max(Mn.length,Cn);for(const{name:Mn,start:Un,end:zn}of this.times)Qn.push(`${Mn.padEnd(Cn)} ${zn-Un}ms
`);return Qn.join("")}}e.StatTimer=sn;function cn(En,Qn){try{const{protocol:Cn}=Qn?new URL(En,Qn):new URL(En);return Cn==="http:"||Cn==="https:"}catch{return!1}}function nn(En){En.preventDefault()}function an(En,Qn=!1){return new Promise((Cn,Mn)=>{const Un=document.createElement("script");Un.src=En,Un.onload=function(zn){Qn&&Un.remove(),Cn(zn)},Un.onerror=function(){Mn(new Error(`Cannot load script at: ${Un.src}`))},(document.head||document.documentElement).append(Un)})}function Ze(En){console.log("Deprecated API usage: "+En)}let tn;class We{static toDateObject(Qn){if(!Qn||typeof Qn!="string")return null;tn||(tn=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const Cn=tn.exec(Qn);if(!Cn)return null;const Mn=parseInt(Cn[1],10);let Un=parseInt(Cn[2],10);Un=Un>=1&&Un<=12?Un-1:0;let zn=parseInt(Cn[3],10);zn=zn>=1&&zn<=31?zn:1;let ni=parseInt(Cn[4],10);ni=ni>=0&&ni<=23?ni:0;let yi=parseInt(Cn[5],10);yi=yi>=0&&yi<=59?yi:0;let pi=parseInt(Cn[6],10);pi=pi>=0&&pi<=59?pi:0;const $n=Cn[7]||"Z";let Yn=parseInt(Cn[8],10);Yn=Yn>=0&&Yn<=23?Yn:0;let ai=parseInt(Cn[9],10)||0;return ai=ai>=0&&ai<=59?ai:0,$n==="-"?(ni+=Yn,yi+=ai):$n==="+"&&(ni-=Yn,yi-=ai),new Date(Date.UTC(Mn,Un,zn,ni,yi,pi))}}e.PDFDateString=We;function An(En,{scale:Qn=1,rotation:Cn=0}){const{width:Mn,height:Un}=En.attributes.style,zn=[0,0,parseInt(Mn),parseInt(Un)];return new Ie({viewBox:zn,scale:Qn,rotation:Cn})}function Je(En){if(En.startsWith("#")){const Qn=parseInt(En.slice(1),16);return[(Qn&16711680)>>16,(Qn&65280)>>8,Qn&255]}return En.startsWith("rgb(")?En.slice(4,-1).split(",").map(Qn=>parseInt(Qn)):En.startsWith("rgba(")?En.slice(5,-1).split(",").map(Qn=>parseInt(Qn)).slice(0,3):((0,Se.warn)(`Not a valid color format: "${En}"`),[0,0,0])}function St(En){const Qn=document.createElement("span");Qn.style.visibility="hidden",document.body.append(Qn);for(const Cn of En.keys()){Qn.style.color=Cn;const Mn=window.getComputedStyle(Qn).color;En.set(Cn,Je(Mn))}Qn.remove()}function hn(En){const{a:Qn,b:Cn,c:Mn,d:Un,e:zn,f:ni}=En.getTransform();return[Qn,Cn,Mn,Un,zn,ni]}function _n(En){const{a:Qn,b:Cn,c:Mn,d:Un,e:zn,f:ni}=En.getTransform().invertSelf();return[Qn,Cn,Mn,Un,zn,ni]}function yn(En,Qn,Cn=!1,Mn=!0){if(Qn instanceof Ie){const{pageWidth:Un,pageHeight:zn}=Qn.rawDims,{style:ni}=En,yi=Se.FeatureTest.isCSSRoundSupported,pi=`var(--scale-factor) * ${Un}px`,$n=`var(--scale-factor) * ${zn}px`,Yn=yi?`round(${pi}, 1px)`:`calc(${pi})`,ai=yi?`round(${$n}, 1px)`:`calc(${$n})`;!Cn||Qn.rotation%180===0?(ni.width=Yn,ni.height=ai):(ni.width=ai,ni.height=Yn)}Mn&&En.setAttribute("data-main-rotation",Qn.rotation)}}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var xe=r(1);class Se{constructor(){this.constructor===Se&&(0,xe.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(Me){return"none"}addHCMFilter(Me,Ve){return"none"}addHighlightHCMFilter(Me,Ve,Fe,Ie){return"none"}destroy(Me=!1){}}e.BaseFilterFactory=Se;class Ee{constructor(){this.constructor===Ee&&(0,xe.unreachable)("Cannot initialize BaseCanvasFactory.")}create(Me,Ve){if(Me<=0||Ve<=0)throw new Error("Invalid canvas size");const Fe=this._createCanvas(Me,Ve);return{canvas:Fe,context:Fe.getContext("2d")}}reset(Me,Ve,Fe){if(!Me.canvas)throw new Error("Canvas is not specified");if(Ve<=0||Fe<=0)throw new Error("Invalid canvas size");Me.canvas.width=Ve,Me.canvas.height=Fe}destroy(Me){if(!Me.canvas)throw new Error("Canvas is not specified");Me.canvas.width=0,Me.canvas.height=0,Me.canvas=null,Me.context=null}_createCanvas(Me,Ve){(0,xe.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=Ee;class Pe{constructor({baseUrl:Me=null,isCompressed:Ve=!0}){this.constructor===Pe&&(0,xe.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=Me,this.isCompressed=Ve}async fetch({name:Me}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!Me)throw new Error("CMap name must be specified.");const Ve=this.baseUrl+Me+(this.isCompressed?".bcmap":""),Fe=this.isCompressed?xe.CMapCompressionType.BINARY:xe.CMapCompressionType.NONE;return this._fetchData(Ve,Fe).catch(Ie=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${Ve}`)})}_fetchData(Me,Ve){(0,xe.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=Pe;class Ce{constructor({baseUrl:Me=null}){this.constructor===Ce&&(0,xe.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=Me}async fetch({filename:Me}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!Me)throw new Error("Font filename must be specified.");const Ve=`${this.baseUrl}${Me}`;return this._fetchData(Ve).catch(Fe=>{throw new Error(`Unable to load font data at: ${Ve}`)})}_fetchData(Me){(0,xe.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=Ce;class Re{constructor(){this.constructor===Re&&(0,xe.unreachable)("Cannot initialize BaseSVGFactory.")}create(Me,Ve,Fe=!1){if(Me<=0||Ve<=0)throw new Error("Invalid SVG dimensions");const Ie=this._createSVG("svg:svg");return Ie.setAttribute("version","1.1"),Fe||(Ie.setAttribute("width",`${Me}px`),Ie.setAttribute("height",`${Ve}px`)),Ie.setAttribute("preserveAspectRatio","none"),Ie.setAttribute("viewBox",`0 0 ${Me} ${Ve}`),Ie}createElement(Me){if(typeof Me!="string")throw new Error("Invalid SVG element type");return this._createSVG(Me)}_createSVG(Me){(0,xe.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=Re}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var xe=r(1);const Se=3285377520,Ee=4294901760,Pe=65535;class Ce{constructor(Be){this.h1=Be?Be&4294967295:Se,this.h2=Be?Be&4294967295:Se}update(Be){let Me,Ve;if(typeof Be=="string"){Me=new Uint8Array(Be.length*2),Ve=0;for(let Ze=0,tn=Be.length;Ze<tn;Ze++){const We=Be.charCodeAt(Ze);We<=255?Me[Ve++]=We:(Me[Ve++]=We>>>8,Me[Ve++]=We&255)}}else if((0,xe.isArrayBuffer)(Be))Me=Be.slice(),Ve=Me.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const Fe=Ve>>2,Ie=Ve-Fe*4,qe=new Uint32Array(Me.buffer,0,Fe);let Ye=0,Xe=0,je=this.h1,Qe=this.h2;const sn=3432918353,cn=461845907,nn=sn&Pe,an=cn&Pe;for(let Ze=0;Ze<Fe;Ze++)Ze&1?(Ye=qe[Ze],Ye=Ye*sn&Ee|Ye*nn&Pe,Ye=Ye<<15|Ye>>>17,Ye=Ye*cn&Ee|Ye*an&Pe,je^=Ye,je=je<<13|je>>>19,je=je*5+3864292196):(Xe=qe[Ze],Xe=Xe*sn&Ee|Xe*nn&Pe,Xe=Xe<<15|Xe>>>17,Xe=Xe*cn&Ee|Xe*an&Pe,Qe^=Xe,Qe=Qe<<13|Qe>>>19,Qe=Qe*5+3864292196);switch(Ye=0,Ie){case 3:Ye^=Me[Fe*4+2]<<16;case 2:Ye^=Me[Fe*4+1]<<8;case 1:Ye^=Me[Fe*4],Ye=Ye*sn&Ee|Ye*nn&Pe,Ye=Ye<<15|Ye>>>17,Ye=Ye*cn&Ee|Ye*an&Pe,Fe&1?je^=Ye:Qe^=Ye}this.h1=je,this.h2=Qe}hexdigest(){let Be=this.h1,Me=this.h2;return Be^=Me>>>1,Be=Be*3981806797&Ee|Be*36045&Pe,Me=Me*4283543511&Ee|((Me<<16|Be>>>16)*2950163797&Ee)>>>16,Be^=Me>>>1,Be=Be*444984403&Ee|Be*60499&Pe,Me=Me*3301882366&Ee|((Me<<16|Be>>>16)*3120437893&Ee)>>>16,Be^=Me>>>1,(Be>>>0).toString(16).padStart(8,"0")+(Me>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=Ce}),((t,e,r)=>{var Pe;Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var xe=r(1);class Se{constructor({ownerDocument:Re=globalThis.document,styleElement:Be=null}){bi(this,Pe,new Set);this._document=Re,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(Re){this.nativeFontFaces.add(Re),this._document.fonts.add(Re)}removeNativeFontFace(Re){this.nativeFontFaces.delete(Re),this._document.fonts.delete(Re)}insertRule(Re){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const Be=this.styleElement.sheet;Be.insertRule(Re,Be.cssRules.length)}clear(){for(const Re of this.nativeFontFaces)this._document.fonts.delete(Re);this.nativeFontFaces.clear(),un(this,Pe).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(Re){if(!(!Re||un(this,Pe).has(Re.loadedName))){if((0,xe.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:Be,src:Me,style:Ve}=Re,Fe=new FontFace(Be,Me,Ve);this.addNativeFontFace(Fe);try{await Fe.load(),un(this,Pe).add(Be)}catch{(0,xe.warn)(`Cannot load system font: ${Re.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(Fe)}return}(0,xe.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(Re){if(Re.attached||Re.missingFile&&!Re.systemFontInfo)return;if(Re.attached=!0,Re.systemFontInfo){await this.loadSystemFont(Re.systemFontInfo);return}if(this.isFontLoadingAPISupported){const Me=Re.createNativeFontFace();if(Me){this.addNativeFontFace(Me);try{await Me.loaded}catch(Ve){throw(0,xe.warn)(`Failed to load font '${Me.family}': '${Ve}'.`),Re.disableFontFace=!0,Ve}}return}const Be=Re.createFontFaceRule();if(Be){if(this.insertRule(Be),this.isSyncFontLoadingSupported)return;await new Promise(Me=>{const Ve=this._queueLoadingCallback(Me);this._prepareFontLoadEvent(Re,Ve)})}}get isFontLoadingAPISupported(){var Be;const Re=!!((Be=this._document)!=null&&Be.fonts);return(0,xe.shadow)(this,"isFontLoadingAPISupported",Re)}get isSyncFontLoadingSupported(){let Re=!1;return(xe.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(Re=!0),(0,xe.shadow)(this,"isSyncFontLoadingSupported",Re)}_queueLoadingCallback(Re){function Be(){for((0,xe.assert)(!Ve.done,"completeRequest() cannot be called twice."),Ve.done=!0;Me.length>0&&Me[0].done;){const Fe=Me.shift();setTimeout(Fe.callback,0)}}const{loadingRequests:Me}=this,Ve={done:!1,complete:Be,callback:Re};return Me.push(Ve),Ve}get _loadTestFont(){const Re=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,xe.shadow)(this,"_loadTestFont",Re)}_prepareFontLoadEvent(Re,Be){function Me(Je,St){return Je.charCodeAt(St)<<24|Je.charCodeAt(St+1)<<16|Je.charCodeAt(St+2)<<8|Je.charCodeAt(St+3)&255}function Ve(Je,St,hn,_n){const yn=Je.substring(0,St),mn=Je.substring(St+hn);return yn+_n+mn}let Fe,Ie;const qe=this._document.createElement("canvas");qe.width=1,qe.height=1;const Ye=qe.getContext("2d");let Xe=0;function je(Je,St){if(++Xe>30){(0,xe.warn)("Load test font never loaded."),St();return}if(Ye.font="30px "+Je,Ye.fillText(".",0,20),Ye.getImageData(0,0,1,1).data[3]>0){St();return}setTimeout(je.bind(null,Je,St))}const Qe=`lt${Date.now()}${this.loadTestFontId++}`;let sn=this._loadTestFont;sn=Ve(sn,976,Qe.length,Qe);const nn=16,an=1482184792;let Ze=Me(sn,nn);for(Fe=0,Ie=Qe.length-3;Fe<Ie;Fe+=4)Ze=Ze-an+Me(Qe,Fe)|0;Fe<Qe.length&&(Ze=Ze-an+Me(Qe+"XXX",Fe)|0),sn=Ve(sn,nn,4,(0,xe.string32)(Ze));const tn=`url(data:font/opentype;base64,${btoa(sn)});`,We=`@font-face {font-family:"${Qe}";src:${tn}}`;this.insertRule(We);const An=this._document.createElement("div");An.style.visibility="hidden",An.style.width=An.style.height="10px",An.style.position="absolute",An.style.top=An.style.left="0px";for(const Je of[Re.loadedName,Qe]){const St=this._document.createElement("span");St.textContent="Hi",St.style.fontFamily=Je,An.append(St)}this._document.body.append(An),je(Qe,()=>{An.remove(),Be.complete()})}}Pe=new WeakMap,e.FontLoader=Se;class Ee{constructor(Re,{isEvalSupported:Be=!0,disableFontFace:Me=!1,ignoreErrors:Ve=!1,inspectFont:Fe=null}){this.compiledGlyphs=Object.create(null);for(const Ie in Re)this[Ie]=Re[Ie];this.isEvalSupported=Be!==!1,this.disableFontFace=Me===!0,this.ignoreErrors=Ve===!0,this._inspectFont=Fe}createNativeFontFace(){var Be;if(!this.data||this.disableFontFace)return null;let Re;if(!this.cssFontInfo)Re=new FontFace(this.loadedName,this.data,{});else{const Me={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(Me.style=`oblique ${this.cssFontInfo.italicAngle}deg`),Re=new FontFace(this.cssFontInfo.fontFamily,this.data,Me)}return(Be=this._inspectFont)==null||Be.call(this,this),Re}createFontFaceRule(){var Ve;if(!this.data||this.disableFontFace)return null;const Re=(0,xe.bytesToString)(this.data),Be=`url(data:${this.mimetype};base64,${btoa(Re)});`;let Me;if(!this.cssFontInfo)Me=`@font-face {font-family:"${this.loadedName}";src:${Be}}`;else{let Fe=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(Fe+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),Me=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${Fe}src:${Be}}`}return(Ve=this._inspectFont)==null||Ve.call(this,this,Be),Me}getPathGenerator(Re,Be){if(this.compiledGlyphs[Be]!==void 0)return this.compiledGlyphs[Be];let Me;try{Me=Re.get(this.loadedName+"_path_"+Be)}catch(Ve){if(!this.ignoreErrors)throw Ve;return(0,xe.warn)(`getPathGenerator - ignoring character: "${Ve}".`),this.compiledGlyphs[Be]=function(Fe,Ie){}}if(this.isEvalSupported&&xe.FeatureTest.isEvalSupported){const Ve=[];for(const Fe of Me){const Ie=Fe.args!==void 0?Fe.args.join(","):"";Ve.push("c.",Fe.cmd,"(",Ie,`);
`)}return this.compiledGlyphs[Be]=new Function("c","size",Ve.join(""))}return this.compiledGlyphs[Be]=function(Ve,Fe){for(const Ie of Me)Ie.cmd==="scale"&&(Ie.args=[Fe,-Fe]),Ve[Ie.cmd].apply(Ve,Ie.args)}}}e.FontFaceObject=Ee}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var xe=r(7);r(1);const Se=function(Be){return new Promise((Me,Ve)=>{require$$5.readFile(Be,(Ie,qe)=>{if(Ie||!qe){Ve(new Error(Ie));return}Me(new Uint8Array(qe))})})};class Ee extends xe.BaseFilterFactory{}e.NodeFilterFactory=Ee;class Pe extends xe.BaseCanvasFactory{_createCanvas(Me,Ve){return require$$5.createCanvas(Me,Ve)}}e.NodeCanvasFactory=Pe;class Ce extends xe.BaseCMapReaderFactory{_fetchData(Me,Ve){return Se(Me).then(Fe=>({cMapData:Fe,compressionType:Ve}))}}e.NodeCMapReaderFactory=Ce;class Re extends xe.BaseStandardFontDataFactory{_fetchData(Me){return Se(Me)}}e.NodeStandardFontDataFactory=Re}),((t,e,r)=>{var Pn,Ep,Pp;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var xe=r(1),Se=r(6),Ee=r(12),Pe=r(13);const Ce=16,Re=100,Be=4096,Me=15,Ve=10,Fe=1e3,Ie=16;function qe(Ge,Oe){if(Ge._removeMirroring)throw new Error("Context is already forwarding operations.");Ge.__originalSave=Ge.save,Ge.__originalRestore=Ge.restore,Ge.__originalRotate=Ge.rotate,Ge.__originalScale=Ge.scale,Ge.__originalTranslate=Ge.translate,Ge.__originalTransform=Ge.transform,Ge.__originalSetTransform=Ge.setTransform,Ge.__originalResetTransform=Ge.resetTransform,Ge.__originalClip=Ge.clip,Ge.__originalMoveTo=Ge.moveTo,Ge.__originalLineTo=Ge.lineTo,Ge.__originalBezierCurveTo=Ge.bezierCurveTo,Ge.__originalRect=Ge.rect,Ge.__originalClosePath=Ge.closePath,Ge.__originalBeginPath=Ge.beginPath,Ge._removeMirroring=()=>{Ge.save=Ge.__originalSave,Ge.restore=Ge.__originalRestore,Ge.rotate=Ge.__originalRotate,Ge.scale=Ge.__originalScale,Ge.translate=Ge.__originalTranslate,Ge.transform=Ge.__originalTransform,Ge.setTransform=Ge.__originalSetTransform,Ge.resetTransform=Ge.__originalResetTransform,Ge.clip=Ge.__originalClip,Ge.moveTo=Ge.__originalMoveTo,Ge.lineTo=Ge.__originalLineTo,Ge.bezierCurveTo=Ge.__originalBezierCurveTo,Ge.rect=Ge.__originalRect,Ge.closePath=Ge.__originalClosePath,Ge.beginPath=Ge.__originalBeginPath,delete Ge._removeMirroring},Ge.save=function(){Oe.save(),this.__originalSave()},Ge.restore=function(){Oe.restore(),this.__originalRestore()},Ge.translate=function(rn,fn){Oe.translate(rn,fn),this.__originalTranslate(rn,fn)},Ge.scale=function(rn,fn){Oe.scale(rn,fn),this.__originalScale(rn,fn)},Ge.transform=function(rn,fn,gn,vn,wn,On){Oe.transform(rn,fn,gn,vn,wn,On),this.__originalTransform(rn,fn,gn,vn,wn,On)},Ge.setTransform=function(rn,fn,gn,vn,wn,On){Oe.setTransform(rn,fn,gn,vn,wn,On),this.__originalSetTransform(rn,fn,gn,vn,wn,On)},Ge.resetTransform=function(){Oe.resetTransform(),this.__originalResetTransform()},Ge.rotate=function(rn){Oe.rotate(rn),this.__originalRotate(rn)},Ge.clip=function(rn){Oe.clip(rn),this.__originalClip(rn)},Ge.moveTo=function($e,rn){Oe.moveTo($e,rn),this.__originalMoveTo($e,rn)},Ge.lineTo=function($e,rn){Oe.lineTo($e,rn),this.__originalLineTo($e,rn)},Ge.bezierCurveTo=function($e,rn,fn,gn,vn,wn){Oe.bezierCurveTo($e,rn,fn,gn,vn,wn),this.__originalBezierCurveTo($e,rn,fn,gn,vn,wn)},Ge.rect=function($e,rn,fn,gn){Oe.rect($e,rn,fn,gn),this.__originalRect($e,rn,fn,gn)},Ge.closePath=function(){Oe.closePath(),this.__originalClosePath()},Ge.beginPath=function(){Oe.beginPath(),this.__originalBeginPath()}}class Ye{constructor(Oe){this.canvasFactory=Oe,this.cache=Object.create(null)}getCanvas(Oe,$e,rn){let fn;return this.cache[Oe]!==void 0?(fn=this.cache[Oe],this.canvasFactory.reset(fn,$e,rn)):(fn=this.canvasFactory.create($e,rn),this.cache[Oe]=fn),fn}delete(Oe){delete this.cache[Oe]}clear(){for(const Oe in this.cache){const $e=this.cache[Oe];this.canvasFactory.destroy($e),delete this.cache[Oe]}}}function Xe(Ge,Oe,$e,rn,fn,gn,vn,wn,On,jn){const[Wn,ti,si,qn,En,Qn]=(0,Se.getCurrentTransform)(Ge);if(ti===0&&si===0){const Un=vn*Wn+En,zn=Math.round(Un),ni=wn*qn+Qn,yi=Math.round(ni),pi=(vn+On)*Wn+En,$n=Math.abs(Math.round(pi)-zn)||1,Yn=(wn+jn)*qn+Qn,ai=Math.abs(Math.round(Yn)-yi)||1;return Ge.setTransform(Math.sign(Wn),0,0,Math.sign(qn),zn,yi),Ge.drawImage(Oe,$e,rn,fn,gn,0,0,$n,ai),Ge.setTransform(Wn,ti,si,qn,En,Qn),[$n,ai]}if(Wn===0&&qn===0){const Un=wn*si+En,zn=Math.round(Un),ni=vn*ti+Qn,yi=Math.round(ni),pi=(wn+jn)*si+En,$n=Math.abs(Math.round(pi)-zn)||1,Yn=(vn+On)*ti+Qn,ai=Math.abs(Math.round(Yn)-yi)||1;return Ge.setTransform(0,Math.sign(ti),Math.sign(si),0,zn,yi),Ge.drawImage(Oe,$e,rn,fn,gn,0,0,ai,$n),Ge.setTransform(Wn,ti,si,qn,En,Qn),[ai,$n]}Ge.drawImage(Oe,$e,rn,fn,gn,vn,wn,On,jn);const Cn=Math.hypot(Wn,ti),Mn=Math.hypot(si,qn);return[Cn*On,Mn*jn]}function je(Ge){const{width:Oe,height:$e}=Ge;if(Oe>Fe||$e>Fe)return null;const rn=1e3,fn=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),gn=Oe+1;let vn=new Uint8Array(gn*($e+1)),wn,On,jn;const Wn=Oe+7&-8;let ti=new Uint8Array(Wn*$e),si=0;for(const Mn of Ge.data){let Un=128;for(;Un>0;)ti[si++]=Mn&Un?0:255,Un>>=1}let qn=0;for(si=0,ti[si]!==0&&(vn[0]=1,++qn),On=1;On<Oe;On++)ti[si]!==ti[si+1]&&(vn[On]=ti[si]?2:1,++qn),si++;for(ti[si]!==0&&(vn[On]=2,++qn),wn=1;wn<$e;wn++){si=wn*Wn,jn=wn*gn,ti[si-Wn]!==ti[si]&&(vn[jn]=ti[si]?1:8,++qn);let Mn=(ti[si]?4:0)+(ti[si-Wn]?8:0);for(On=1;On<Oe;On++)Mn=(Mn>>2)+(ti[si+1]?4:0)+(ti[si-Wn+1]?8:0),fn[Mn]&&(vn[jn+On]=fn[Mn],++qn),si++;if(ti[si-Wn]!==ti[si]&&(vn[jn+On]=ti[si]?2:4,++qn),qn>rn)return null}for(si=Wn*($e-1),jn=wn*gn,ti[si]!==0&&(vn[jn]=8,++qn),On=1;On<Oe;On++)ti[si]!==ti[si+1]&&(vn[jn+On]=ti[si]?4:8,++qn),si++;if(ti[si]!==0&&(vn[jn+On]=4,++qn),qn>rn)return null;const En=new Int32Array([0,gn,-1,0,-gn,0,0,0,1]),Qn=new Path2D;for(wn=0;qn&&wn<=$e;wn++){let Mn=wn*gn;const Un=Mn+Oe;for(;Mn<Un&&!vn[Mn];)Mn++;if(Mn===Un)continue;Qn.moveTo(Mn%gn,wn);const zn=Mn;let ni=vn[Mn];do{const yi=En[ni];do Mn+=yi;while(!vn[Mn]);const pi=vn[Mn];pi!==5&&pi!==10?(ni=pi,vn[Mn]=0):(ni=pi&51*ni>>4,vn[Mn]&=ni>>2|ni<<2),Qn.lineTo(Mn%gn,Mn/gn|0),vn[Mn]||--qn}while(zn!==Mn);--wn}return ti=null,vn=null,function(Mn){Mn.save(),Mn.scale(1/Oe,-1/$e),Mn.translate(0,-$e),Mn.fill(Qn),Mn.beginPath(),Mn.restore()}}class Qe{constructor(Oe,$e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=xe.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=xe.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=xe.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,Oe,$e])}clone(){const Oe=Object.create(this);return Oe.clipBox=this.clipBox.slice(),Oe}setCurrentPoint(Oe,$e){this.x=Oe,this.y=$e}updatePathMinMax(Oe,$e,rn){[$e,rn]=xe.Util.applyTransform([$e,rn],Oe),this.minX=Math.min(this.minX,$e),this.minY=Math.min(this.minY,rn),this.maxX=Math.max(this.maxX,$e),this.maxY=Math.max(this.maxY,rn)}updateRectMinMax(Oe,$e){const rn=xe.Util.applyTransform($e,Oe),fn=xe.Util.applyTransform($e.slice(2),Oe);this.minX=Math.min(this.minX,rn[0],fn[0]),this.minY=Math.min(this.minY,rn[1],fn[1]),this.maxX=Math.max(this.maxX,rn[0],fn[0]),this.maxY=Math.max(this.maxY,rn[1],fn[1])}updateScalingPathMinMax(Oe,$e){xe.Util.scaleMinMax(Oe,$e),this.minX=Math.min(this.minX,$e[0]),this.maxX=Math.max(this.maxX,$e[1]),this.minY=Math.min(this.minY,$e[2]),this.maxY=Math.max(this.maxY,$e[3])}updateCurvePathMinMax(Oe,$e,rn,fn,gn,vn,wn,On,jn,Wn){const ti=xe.Util.bezierBoundingBox($e,rn,fn,gn,vn,wn,On,jn);if(Wn){Wn[0]=Math.min(Wn[0],ti[0],ti[2]),Wn[1]=Math.max(Wn[1],ti[0],ti[2]),Wn[2]=Math.min(Wn[2],ti[1],ti[3]),Wn[3]=Math.max(Wn[3],ti[1],ti[3]);return}this.updateRectMinMax(Oe,ti)}getPathBoundingBox(Oe=Ee.PathType.FILL,$e=null){const rn=[this.minX,this.minY,this.maxX,this.maxY];if(Oe===Ee.PathType.STROKE){$e||(0,xe.unreachable)("Stroke bounding box must include transform.");const fn=xe.Util.singularValueDecompose2dScale($e),gn=fn[0]*this.lineWidth/2,vn=fn[1]*this.lineWidth/2;rn[0]-=gn,rn[1]-=vn,rn[2]+=gn,rn[3]+=vn}return rn}updateClipFromPath(){const Oe=xe.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(Oe||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(Oe){this.clipBox=Oe,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(Oe=Ee.PathType.FILL,$e=null){return xe.Util.intersect(this.clipBox,this.getPathBoundingBox(Oe,$e))}}function sn(Ge,Oe){if(typeof ImageData<"u"&&Oe instanceof ImageData){Ge.putImageData(Oe,0,0);return}const $e=Oe.height,rn=Oe.width,fn=$e%Ie,gn=($e-fn)/Ie,vn=fn===0?gn:gn+1,wn=Ge.createImageData(rn,Ie);let On=0,jn;const Wn=Oe.data,ti=wn.data;let si,qn,En,Qn;if(Oe.kind===xe.ImageKind.GRAYSCALE_1BPP){const Cn=Wn.byteLength,Mn=new Uint32Array(ti.buffer,0,ti.byteLength>>2),Un=Mn.length,zn=rn+7>>3,ni=4294967295,yi=xe.FeatureTest.isLittleEndian?4278190080:255;for(si=0;si<vn;si++){for(En=si<gn?Ie:fn,jn=0,qn=0;qn<En;qn++){const pi=Cn-On;let $n=0;const Yn=pi>zn?rn:pi*8-7,ai=Yn&-8;let Di=0,ki=0;for(;$n<ai;$n+=8)ki=Wn[On++],Mn[jn++]=ki&128?ni:yi,Mn[jn++]=ki&64?ni:yi,Mn[jn++]=ki&32?ni:yi,Mn[jn++]=ki&16?ni:yi,Mn[jn++]=ki&8?ni:yi,Mn[jn++]=ki&4?ni:yi,Mn[jn++]=ki&2?ni:yi,Mn[jn++]=ki&1?ni:yi;for(;$n<Yn;$n++)Di===0&&(ki=Wn[On++],Di=128),Mn[jn++]=ki&Di?ni:yi,Di>>=1}for(;jn<Un;)Mn[jn++]=0;Ge.putImageData(wn,0,si*Ie)}}else if(Oe.kind===xe.ImageKind.RGBA_32BPP){for(qn=0,Qn=rn*Ie*4,si=0;si<gn;si++)ti.set(Wn.subarray(On,On+Qn)),On+=Qn,Ge.putImageData(wn,0,qn),qn+=Ie;si<vn&&(Qn=rn*fn*4,ti.set(Wn.subarray(On,On+Qn)),Ge.putImageData(wn,0,qn))}else if(Oe.kind===xe.ImageKind.RGB_24BPP)for(En=Ie,Qn=rn*En,si=0;si<vn;si++){for(si>=gn&&(En=fn,Qn=rn*En),jn=0,qn=Qn;qn--;)ti[jn++]=Wn[On++],ti[jn++]=Wn[On++],ti[jn++]=Wn[On++],ti[jn++]=255;Ge.putImageData(wn,0,si*Ie)}else throw new Error(`bad image kind: ${Oe.kind}`)}function cn(Ge,Oe){if(Oe.bitmap){Ge.drawImage(Oe.bitmap,0,0);return}const $e=Oe.height,rn=Oe.width,fn=$e%Ie,gn=($e-fn)/Ie,vn=fn===0?gn:gn+1,wn=Ge.createImageData(rn,Ie);let On=0;const jn=Oe.data,Wn=wn.data;for(let ti=0;ti<vn;ti++){const si=ti<gn?Ie:fn;({srcPos:On}=(0,Pe.convertBlackAndWhiteToRGBA)({src:jn,srcPos:On,dest:Wn,width:rn,height:si,nonBlackColor:0})),Ge.putImageData(wn,0,ti*Ie)}}function nn(Ge,Oe){const $e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const rn of $e)Ge[rn]!==void 0&&(Oe[rn]=Ge[rn]);Ge.setLineDash!==void 0&&(Oe.setLineDash(Ge.getLineDash()),Oe.lineDashOffset=Ge.lineDashOffset)}function an(Ge){if(Ge.strokeStyle=Ge.fillStyle="#000000",Ge.fillRule="nonzero",Ge.globalAlpha=1,Ge.lineWidth=1,Ge.lineCap="butt",Ge.lineJoin="miter",Ge.miterLimit=10,Ge.globalCompositeOperation="source-over",Ge.font="10px sans-serif",Ge.setLineDash!==void 0&&(Ge.setLineDash([]),Ge.lineDashOffset=0),!xe.isNodeJS){const{filter:Oe}=Ge;Oe!=="none"&&Oe!==""&&(Ge.filter="none")}}function Ze(Ge,Oe,$e,rn){const fn=Ge.length;for(let gn=3;gn<fn;gn+=4){const vn=Ge[gn];if(vn===0)Ge[gn-3]=Oe,Ge[gn-2]=$e,Ge[gn-1]=rn;else if(vn<255){const wn=255-vn;Ge[gn-3]=Ge[gn-3]*vn+Oe*wn>>8,Ge[gn-2]=Ge[gn-2]*vn+$e*wn>>8,Ge[gn-1]=Ge[gn-1]*vn+rn*wn>>8}}}function tn(Ge,Oe,$e){const rn=Ge.length,fn=1/255;for(let gn=3;gn<rn;gn+=4){const vn=$e?$e[Ge[gn]]:Ge[gn];Oe[gn]=Oe[gn]*vn*fn|0}}function We(Ge,Oe,$e){const rn=Ge.length;for(let fn=3;fn<rn;fn+=4){const gn=Ge[fn-3]*77+Ge[fn-2]*152+Ge[fn-1]*28;Oe[fn]=$e?Oe[fn]*$e[gn>>8]>>8:Oe[fn]*gn>>16}}function An(Ge,Oe,$e,rn,fn,gn,vn,wn,On,jn,Wn){const ti=!!gn,si=ti?gn[0]:0,qn=ti?gn[1]:0,En=ti?gn[2]:0,Qn=fn==="Luminosity"?We:tn,Mn=Math.min(rn,Math.ceil(1048576/$e));for(let Un=0;Un<rn;Un+=Mn){const zn=Math.min(Mn,rn-Un),ni=Ge.getImageData(wn-jn,Un+(On-Wn),$e,zn),yi=Oe.getImageData(wn,Un+On,$e,zn);ti&&Ze(ni.data,si,qn,En),Qn(ni.data,yi.data,vn),Oe.putImageData(yi,wn,Un+On)}}function Je(Ge,Oe,$e,rn){const fn=rn[0],gn=rn[1],vn=rn[2]-fn,wn=rn[3]-gn;vn===0||wn===0||(An(Oe.context,$e,vn,wn,Oe.subtype,Oe.backdrop,Oe.transferMap,fn,gn,Oe.offsetX,Oe.offsetY),Ge.save(),Ge.globalAlpha=1,Ge.globalCompositeOperation="source-over",Ge.setTransform(1,0,0,1,0,0),Ge.drawImage($e.canvas,0,0),Ge.restore())}function St(Ge,Oe){const $e=xe.Util.singularValueDecompose2dScale(Ge);$e[0]=Math.fround($e[0]),$e[1]=Math.fround($e[1]);const rn=Math.fround((globalThis.devicePixelRatio||1)*Se.PixelsPerInch.PDF_TO_CSS_UNITS);return Oe!==void 0?Oe:$e[0]<=rn||$e[1]<=rn}const hn=["butt","round","square"],_n=["miter","round","bevel"],yn={},mn={},xn=class xn{constructor(Oe,$e,rn,fn,gn,{optionalContentConfig:vn,markedContentStack:wn=null},On,jn){bi(this,Pn);this.ctx=Oe,this.current=new Qe(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=$e,this.objs=rn,this.canvasFactory=fn,this.filterFactory=gn,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=wn||[],this.optionalContentConfig=vn,this.cachedCanvases=new Ye(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=On,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=jn,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(Oe,$e=null){return typeof Oe=="string"?Oe.startsWith("g_")?this.commonObjs.get(Oe):this.objs.get(Oe):$e}beginDrawing({transform:Oe,viewport:$e,transparency:rn=!1,background:fn=null}){const gn=this.ctx.canvas.width,vn=this.ctx.canvas.height,wn=this.ctx.fillStyle;if(this.ctx.fillStyle=fn||"#ffffff",this.ctx.fillRect(0,0,gn,vn),this.ctx.fillStyle=wn,rn){const On=this.cachedCanvases.getCanvas("transparent",gn,vn);this.compositeCtx=this.ctx,this.transparentCanvas=On.canvas,this.ctx=On.context,this.ctx.save(),this.ctx.transform(...(0,Se.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),an(this.ctx),Oe&&(this.ctx.transform(...Oe),this.outputScaleX=Oe[0],this.outputScaleY=Oe[0]),this.ctx.transform(...$e.transform),this.viewportScale=$e.scale,this.baseTransform=(0,Se.getCurrentTransform)(this.ctx)}executeOperatorList(Oe,$e,rn,fn){const gn=Oe.argsArray,vn=Oe.fnArray;let wn=$e||0;const On=gn.length;if(On===wn)return wn;const jn=On-wn>Ve&&typeof rn=="function",Wn=jn?Date.now()+Me:0;let ti=0;const si=this.commonObjs,qn=this.objs;let En;for(;;){if(fn!==void 0&&wn===fn.nextBreakPoint)return fn.breakIt(wn,rn),wn;if(En=vn[wn],En!==xe.OPS.dependency)this[En].apply(this,gn[wn]);else for(const Qn of gn[wn]){const Cn=Qn.startsWith("g_")?si:qn;if(!Cn.has(Qn))return Cn.get(Qn,rn),wn}if(wn++,wn===On)return wn;if(jn&&++ti>Ve){if(Date.now()>Wn)return rn(),wn;ti=0}}}endDrawing(){li(this,Pn,Ep).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const Oe of this._cachedBitmapsMap.values()){for(const $e of Oe.values())typeof HTMLCanvasElement<"u"&&$e instanceof HTMLCanvasElement&&($e.width=$e.height=0);Oe.clear()}this._cachedBitmapsMap.clear(),li(this,Pn,Pp).call(this)}_scaleImage(Oe,$e){const rn=Oe.width,fn=Oe.height;let gn=Math.max(Math.hypot($e[0],$e[1]),1),vn=Math.max(Math.hypot($e[2],$e[3]),1),wn=rn,On=fn,jn="prescale1",Wn,ti;for(;gn>2&&wn>1||vn>2&&On>1;){let si=wn,qn=On;gn>2&&wn>1&&(si=wn>=16384?Math.floor(wn/2)-1||1:Math.ceil(wn/2),gn/=wn/si),vn>2&&On>1&&(qn=On>=16384?Math.floor(On/2)-1||1:Math.ceil(On)/2,vn/=On/qn),Wn=this.cachedCanvases.getCanvas(jn,si,qn),ti=Wn.context,ti.clearRect(0,0,si,qn),ti.drawImage(Oe,0,0,wn,On,0,0,si,qn),Oe=Wn.canvas,wn=si,On=qn,jn=jn==="prescale1"?"prescale2":"prescale1"}return{img:Oe,paintWidth:wn,paintHeight:On}}_createMaskCanvas(Oe){const $e=this.ctx,{width:rn,height:fn}=Oe,gn=this.current.fillColor,vn=this.current.patternFill,wn=(0,Se.getCurrentTransform)($e);let On,jn,Wn,ti;if((Oe.bitmap||Oe.data)&&Oe.count>1){const $n=Oe.bitmap||Oe.data.buffer;jn=JSON.stringify(vn?wn:[wn.slice(0,4),gn]),On=this._cachedBitmapsMap.get($n),On||(On=new Map,this._cachedBitmapsMap.set($n,On));const Yn=On.get(jn);if(Yn&&!vn){const ai=Math.round(Math.min(wn[0],wn[2])+wn[4]),Di=Math.round(Math.min(wn[1],wn[3])+wn[5]);return{canvas:Yn,offsetX:ai,offsetY:Di}}Wn=Yn}Wn||(ti=this.cachedCanvases.getCanvas("maskCanvas",rn,fn),cn(ti.context,Oe));let si=xe.Util.transform(wn,[1/rn,0,0,-1/fn,0,0]);si=xe.Util.transform(si,[1,0,0,1,0,-fn]);const qn=xe.Util.applyTransform([0,0],si),En=xe.Util.applyTransform([rn,fn],si),Qn=xe.Util.normalizeRect([qn[0],qn[1],En[0],En[1]]),Cn=Math.round(Qn[2]-Qn[0])||1,Mn=Math.round(Qn[3]-Qn[1])||1,Un=this.cachedCanvases.getCanvas("fillCanvas",Cn,Mn),zn=Un.context,ni=Math.min(qn[0],En[0]),yi=Math.min(qn[1],En[1]);zn.translate(-ni,-yi),zn.transform(...si),Wn||(Wn=this._scaleImage(ti.canvas,(0,Se.getCurrentTransformInverse)(zn)),Wn=Wn.img,On&&vn&&On.set(jn,Wn)),zn.imageSmoothingEnabled=St((0,Se.getCurrentTransform)(zn),Oe.interpolate),Xe(zn,Wn,0,0,Wn.width,Wn.height,0,0,rn,fn),zn.globalCompositeOperation="source-in";const pi=xe.Util.transform((0,Se.getCurrentTransformInverse)(zn),[1,0,0,1,-ni,-yi]);return zn.fillStyle=vn?gn.getPattern($e,this,pi,Ee.PathType.FILL):gn,zn.fillRect(0,0,rn,fn),On&&!vn&&(this.cachedCanvases.delete("fillCanvas"),On.set(jn,Un.canvas)),{canvas:Un.canvas,offsetX:Math.round(ni),offsetY:Math.round(yi)}}setLineWidth(Oe){Oe!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=Oe,this.ctx.lineWidth=Oe}setLineCap(Oe){this.ctx.lineCap=hn[Oe]}setLineJoin(Oe){this.ctx.lineJoin=_n[Oe]}setMiterLimit(Oe){this.ctx.miterLimit=Oe}setDash(Oe,$e){const rn=this.ctx;rn.setLineDash!==void 0&&(rn.setLineDash(Oe),rn.lineDashOffset=$e)}setRenderingIntent(Oe){}setFlatness(Oe){}setGState(Oe){for(const[$e,rn]of Oe)switch($e){case"LW":this.setLineWidth(rn);break;case"LC":this.setLineCap(rn);break;case"LJ":this.setLineJoin(rn);break;case"ML":this.setMiterLimit(rn);break;case"D":this.setDash(rn[0],rn[1]);break;case"RI":this.setRenderingIntent(rn);break;case"FL":this.setFlatness(rn);break;case"Font":this.setFont(rn[0],rn[1]);break;case"CA":this.current.strokeAlpha=rn;break;case"ca":this.current.fillAlpha=rn,this.ctx.globalAlpha=rn;break;case"BM":this.ctx.globalCompositeOperation=rn;break;case"SMask":this.current.activeSMask=rn?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(rn);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const Oe=this.inSMaskMode;this.current.activeSMask&&!Oe?this.beginSMaskMode():!this.current.activeSMask&&Oe&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const Oe=this.ctx.canvas.width,$e=this.ctx.canvas.height,rn="smaskGroupAt"+this.groupLevel,fn=this.cachedCanvases.getCanvas(rn,Oe,$e);this.suspendedCtx=this.ctx,this.ctx=fn.context;const gn=this.ctx;gn.setTransform(...(0,Se.getCurrentTransform)(this.suspendedCtx)),nn(this.suspendedCtx,gn),qe(gn,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),nn(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(Oe){if(!this.current.activeSMask)return;Oe?(Oe[0]=Math.floor(Oe[0]),Oe[1]=Math.floor(Oe[1]),Oe[2]=Math.ceil(Oe[2]),Oe[3]=Math.ceil(Oe[3])):Oe=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const $e=this.current.activeSMask,rn=this.suspendedCtx;Je(rn,$e,this.ctx,Oe),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(nn(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const Oe=this.current;this.stateStack.push(Oe),this.current=Oe.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),nn(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(Oe,$e,rn,fn,gn,vn){this.ctx.transform(Oe,$e,rn,fn,gn,vn),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(Oe,$e,rn){const fn=this.ctx,gn=this.current;let vn=gn.x,wn=gn.y,On,jn;const Wn=(0,Se.getCurrentTransform)(fn),ti=Wn[0]===0&&Wn[3]===0||Wn[1]===0&&Wn[2]===0,si=ti?rn.slice(0):null;for(let qn=0,En=0,Qn=Oe.length;qn<Qn;qn++)switch(Oe[qn]|0){case xe.OPS.rectangle:vn=$e[En++],wn=$e[En++];const Cn=$e[En++],Mn=$e[En++],Un=vn+Cn,zn=wn+Mn;fn.moveTo(vn,wn),Cn===0||Mn===0?fn.lineTo(Un,zn):(fn.lineTo(Un,wn),fn.lineTo(Un,zn),fn.lineTo(vn,zn)),ti||gn.updateRectMinMax(Wn,[vn,wn,Un,zn]),fn.closePath();break;case xe.OPS.moveTo:vn=$e[En++],wn=$e[En++],fn.moveTo(vn,wn),ti||gn.updatePathMinMax(Wn,vn,wn);break;case xe.OPS.lineTo:vn=$e[En++],wn=$e[En++],fn.lineTo(vn,wn),ti||gn.updatePathMinMax(Wn,vn,wn);break;case xe.OPS.curveTo:On=vn,jn=wn,vn=$e[En+4],wn=$e[En+5],fn.bezierCurveTo($e[En],$e[En+1],$e[En+2],$e[En+3],vn,wn),gn.updateCurvePathMinMax(Wn,On,jn,$e[En],$e[En+1],$e[En+2],$e[En+3],vn,wn,si),En+=6;break;case xe.OPS.curveTo2:On=vn,jn=wn,fn.bezierCurveTo(vn,wn,$e[En],$e[En+1],$e[En+2],$e[En+3]),gn.updateCurvePathMinMax(Wn,On,jn,vn,wn,$e[En],$e[En+1],$e[En+2],$e[En+3],si),vn=$e[En+2],wn=$e[En+3],En+=4;break;case xe.OPS.curveTo3:On=vn,jn=wn,vn=$e[En+2],wn=$e[En+3],fn.bezierCurveTo($e[En],$e[En+1],vn,wn,vn,wn),gn.updateCurvePathMinMax(Wn,On,jn,$e[En],$e[En+1],vn,wn,vn,wn,si),En+=4;break;case xe.OPS.closePath:fn.closePath();break}ti&&gn.updateScalingPathMinMax(Wn,si),gn.setCurrentPoint(vn,wn)}closePath(){this.ctx.closePath()}stroke(Oe=!0){const $e=this.ctx,rn=this.current.strokeColor;$e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof rn=="object"&&(rn!=null&&rn.getPattern)?($e.save(),$e.strokeStyle=rn.getPattern($e,this,(0,Se.getCurrentTransformInverse)($e),Ee.PathType.STROKE),this.rescaleAndStroke(!1),$e.restore()):this.rescaleAndStroke(!0)),Oe&&this.consumePath(this.current.getClippedPathBoundingBox()),$e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(Oe=!0){const $e=this.ctx,rn=this.current.fillColor,fn=this.current.patternFill;let gn=!1;fn&&($e.save(),$e.fillStyle=rn.getPattern($e,this,(0,Se.getCurrentTransformInverse)($e),Ee.PathType.FILL),gn=!0);const vn=this.current.getClippedPathBoundingBox();this.contentVisible&&vn!==null&&(this.pendingEOFill?($e.fill("evenodd"),this.pendingEOFill=!1):$e.fill()),gn&&$e.restore(),Oe&&this.consumePath(vn)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=yn}eoClip(){this.pendingClip=mn}beginText(){this.current.textMatrix=xe.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const Oe=this.pendingTextPaths,$e=this.ctx;if(Oe===void 0){$e.beginPath();return}$e.save(),$e.beginPath();for(const rn of Oe)$e.setTransform(...rn.transform),$e.translate(rn.x,rn.y),rn.addToPath($e,rn.fontSize);$e.restore(),$e.clip(),$e.beginPath(),delete this.pendingTextPaths}setCharSpacing(Oe){this.current.charSpacing=Oe}setWordSpacing(Oe){this.current.wordSpacing=Oe}setHScale(Oe){this.current.textHScale=Oe/100}setLeading(Oe){this.current.leading=-Oe}setFont(Oe,$e){var Wn;const rn=this.commonObjs.get(Oe),fn=this.current;if(!rn)throw new Error(`Can't find font for ${Oe}`);if(fn.fontMatrix=rn.fontMatrix||xe.FONT_IDENTITY_MATRIX,(fn.fontMatrix[0]===0||fn.fontMatrix[3]===0)&&(0,xe.warn)("Invalid font matrix for font "+Oe),$e<0?($e=-$e,fn.fontDirection=-1):fn.fontDirection=1,this.current.font=rn,this.current.fontSize=$e,rn.isType3Font)return;const gn=rn.loadedName||"sans-serif",vn=((Wn=rn.systemFontInfo)==null?void 0:Wn.css)||`"${gn}", ${rn.fallbackName}`;let wn="normal";rn.black?wn="900":rn.bold&&(wn="bold");const On=rn.italic?"italic":"normal";let jn=$e;$e<Ce?jn=Ce:$e>Re&&(jn=Re),this.current.fontSizeScale=$e/jn,this.ctx.font=`${On} ${wn} ${jn}px ${vn}`}setTextRenderingMode(Oe){this.current.textRenderingMode=Oe}setTextRise(Oe){this.current.textRise=Oe}moveText(Oe,$e){this.current.x=this.current.lineX+=Oe,this.current.y=this.current.lineY+=$e}setLeadingMoveText(Oe,$e){this.setLeading(-$e),this.moveText(Oe,$e)}setTextMatrix(Oe,$e,rn,fn,gn,vn){this.current.textMatrix=[Oe,$e,rn,fn,gn,vn],this.current.textMatrixScale=Math.hypot(Oe,$e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(Oe,$e,rn,fn){const gn=this.ctx,vn=this.current,wn=vn.font,On=vn.textRenderingMode,jn=vn.fontSize/vn.fontSizeScale,Wn=On&xe.TextRenderingMode.FILL_STROKE_MASK,ti=!!(On&xe.TextRenderingMode.ADD_TO_PATH_FLAG),si=vn.patternFill&&!wn.missingFile;let qn;(wn.disableFontFace||ti||si)&&(qn=wn.getPathGenerator(this.commonObjs,Oe)),wn.disableFontFace||si?(gn.save(),gn.translate($e,rn),gn.beginPath(),qn(gn,jn),fn&&gn.setTransform(...fn),(Wn===xe.TextRenderingMode.FILL||Wn===xe.TextRenderingMode.FILL_STROKE)&&gn.fill(),(Wn===xe.TextRenderingMode.STROKE||Wn===xe.TextRenderingMode.FILL_STROKE)&&gn.stroke(),gn.restore()):((Wn===xe.TextRenderingMode.FILL||Wn===xe.TextRenderingMode.FILL_STROKE)&&gn.fillText(Oe,$e,rn),(Wn===xe.TextRenderingMode.STROKE||Wn===xe.TextRenderingMode.FILL_STROKE)&&gn.strokeText(Oe,$e,rn)),ti&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,Se.getCurrentTransform)(gn),x:$e,y:rn,fontSize:jn,addToPath:qn})}get isFontSubpixelAAEnabled(){const{context:Oe}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);Oe.scale(1.5,1),Oe.fillText("I",0,10);const $e=Oe.getImageData(0,0,10,10).data;let rn=!1;for(let fn=3;fn<$e.length;fn+=4)if($e[fn]>0&&$e[fn]<255){rn=!0;break}return(0,xe.shadow)(this,"isFontSubpixelAAEnabled",rn)}showText(Oe){const $e=this.current,rn=$e.font;if(rn.isType3Font)return this.showType3Text(Oe);const fn=$e.fontSize;if(fn===0)return;const gn=this.ctx,vn=$e.fontSizeScale,wn=$e.charSpacing,On=$e.wordSpacing,jn=$e.fontDirection,Wn=$e.textHScale*jn,ti=Oe.length,si=rn.vertical,qn=si?1:-1,En=rn.defaultVMetrics,Qn=fn*$e.fontMatrix[0],Cn=$e.textRenderingMode===xe.TextRenderingMode.FILL&&!rn.disableFontFace&&!$e.patternFill;gn.save(),gn.transform(...$e.textMatrix),gn.translate($e.x,$e.y+$e.textRise),jn>0?gn.scale(Wn,-1):gn.scale(Wn,1);let Mn;if($e.patternFill){gn.save();const pi=$e.fillColor.getPattern(gn,this,(0,Se.getCurrentTransformInverse)(gn),Ee.PathType.FILL);Mn=(0,Se.getCurrentTransform)(gn),gn.restore(),gn.fillStyle=pi}let Un=$e.lineWidth;const zn=$e.textMatrixScale;if(zn===0||Un===0){const pi=$e.textRenderingMode&xe.TextRenderingMode.FILL_STROKE_MASK;(pi===xe.TextRenderingMode.STROKE||pi===xe.TextRenderingMode.FILL_STROKE)&&(Un=this.getSinglePixelWidth())}else Un/=zn;if(vn!==1&&(gn.scale(vn,vn),Un/=vn),gn.lineWidth=Un,rn.isInvalidPDFjsFont){const pi=[];let $n=0;for(const Yn of Oe)pi.push(Yn.unicode),$n+=Yn.width;gn.fillText(pi.join(""),0,0),$e.x+=$n*Qn*Wn,gn.restore(),this.compose();return}let ni=0,yi;for(yi=0;yi<ti;++yi){const pi=Oe[yi];if(typeof pi=="number"){ni+=qn*pi*fn/1e3;continue}let $n=!1;const Yn=(pi.isSpace?On:0)+wn,ai=pi.fontChar,Di=pi.accent;let ki,Ji,Pi=pi.width;if(si){const ea=pi.vmetric||En,Ki=-(pi.vmetric?ea[1]:Pi*.5)*Qn,oi=ea[2]*Qn;Pi=ea?-ea[0]:Pi,ki=Ki/vn,Ji=(ni+oi)/vn}else ki=ni/vn,Ji=0;if(rn.remeasure&&Pi>0){const ea=gn.measureText(ai).width*1e3/fn*vn;if(Pi<ea&&this.isFontSubpixelAAEnabled){const Ki=Pi/ea;$n=!0,gn.save(),gn.scale(Ki,1),ki/=Ki}else Pi!==ea&&(ki+=(Pi-ea)/2e3*fn/vn)}if(this.contentVisible&&(pi.isInFont||rn.missingFile)){if(Cn&&!Di)gn.fillText(ai,ki,Ji);else if(this.paintChar(ai,ki,Ji,Mn),Di){const ea=ki+fn*Di.offset.x/vn,Ki=Ji-fn*Di.offset.y/vn;this.paintChar(Di.fontChar,ea,Ki,Mn)}}const na=si?Pi*Qn-Yn*jn:Pi*Qn+Yn*jn;ni+=na,$n&&gn.restore()}si?$e.y-=ni:$e.x+=ni*Wn,gn.restore(),this.compose()}showType3Text(Oe){const $e=this.ctx,rn=this.current,fn=rn.font,gn=rn.fontSize,vn=rn.fontDirection,wn=fn.vertical?1:-1,On=rn.charSpacing,jn=rn.wordSpacing,Wn=rn.textHScale*vn,ti=rn.fontMatrix||xe.FONT_IDENTITY_MATRIX,si=Oe.length,qn=rn.textRenderingMode===xe.TextRenderingMode.INVISIBLE;let En,Qn,Cn,Mn;if(!(qn||gn===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,$e.save(),$e.transform(...rn.textMatrix),$e.translate(rn.x,rn.y),$e.scale(Wn,vn),En=0;En<si;++En){if(Qn=Oe[En],typeof Qn=="number"){Mn=wn*Qn*gn/1e3,this.ctx.translate(Mn,0),rn.x+=Mn*Wn;continue}const Un=(Qn.isSpace?jn:0)+On,zn=fn.charProcOperatorList[Qn.operatorListId];if(!zn){(0,xe.warn)(`Type3 character "${Qn.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Qn,this.save(),$e.scale(gn,gn),$e.transform(...ti),this.executeOperatorList(zn),this.restore()),Cn=xe.Util.applyTransform([Qn.width,0],ti)[0]*gn+Un,$e.translate(Cn,0),rn.x+=Cn*Wn}$e.restore(),this.processingType3=null}}setCharWidth(Oe,$e){}setCharWidthAndBounds(Oe,$e,rn,fn,gn,vn){this.ctx.rect(rn,fn,gn-rn,vn-fn),this.ctx.clip(),this.endPath()}getColorN_Pattern(Oe){let $e;if(Oe[0]==="TilingPattern"){const rn=Oe[1],fn=this.baseTransform||(0,Se.getCurrentTransform)(this.ctx),gn={createCanvasGraphics:vn=>new xn(vn,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};$e=new Ee.TilingPattern(Oe,rn,this.ctx,gn,fn)}else $e=this._getPattern(Oe[1],Oe[2]);return $e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(Oe,$e,rn){const fn=xe.Util.makeHexColor(Oe,$e,rn);this.ctx.strokeStyle=fn,this.current.strokeColor=fn}setFillRGBColor(Oe,$e,rn){const fn=xe.Util.makeHexColor(Oe,$e,rn);this.ctx.fillStyle=fn,this.current.fillColor=fn,this.current.patternFill=!1}_getPattern(Oe,$e=null){let rn;return this.cachedPatterns.has(Oe)?rn=this.cachedPatterns.get(Oe):(rn=(0,Ee.getShadingPattern)(this.getObject(Oe)),this.cachedPatterns.set(Oe,rn)),$e&&(rn.matrix=$e),rn}shadingFill(Oe){if(!this.contentVisible)return;const $e=this.ctx;this.save();const rn=this._getPattern(Oe);$e.fillStyle=rn.getPattern($e,this,(0,Se.getCurrentTransformInverse)($e),Ee.PathType.SHADING);const fn=(0,Se.getCurrentTransformInverse)($e);if(fn){const{width:gn,height:vn}=$e.canvas,[wn,On,jn,Wn]=xe.Util.getAxialAlignedBoundingBox([0,0,gn,vn],fn);this.ctx.fillRect(wn,On,jn-wn,Wn-On)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,xe.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,xe.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(Oe,$e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(Oe)&&Oe.length===6&&this.transform(...Oe),this.baseTransform=(0,Se.getCurrentTransform)(this.ctx),$e)){const rn=$e[2]-$e[0],fn=$e[3]-$e[1];this.ctx.rect($e[0],$e[1],rn,fn),this.current.updateRectMinMax((0,Se.getCurrentTransform)(this.ctx),$e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(Oe){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const $e=this.ctx;Oe.isolated||(0,xe.info)("TODO: Support non-isolated groups."),Oe.knockout&&(0,xe.warn)("Knockout groups not supported.");const rn=(0,Se.getCurrentTransform)($e);if(Oe.matrix&&$e.transform(...Oe.matrix),!Oe.bbox)throw new Error("Bounding box is required.");let fn=xe.Util.getAxialAlignedBoundingBox(Oe.bbox,(0,Se.getCurrentTransform)($e));const gn=[0,0,$e.canvas.width,$e.canvas.height];fn=xe.Util.intersect(fn,gn)||[0,0,0,0];const vn=Math.floor(fn[0]),wn=Math.floor(fn[1]);let On=Math.max(Math.ceil(fn[2])-vn,1),jn=Math.max(Math.ceil(fn[3])-wn,1),Wn=1,ti=1;On>Be&&(Wn=On/Be,On=Be),jn>Be&&(ti=jn/Be,jn=Be),this.current.startNewPathAndClipBox([0,0,On,jn]);let si="groupAt"+this.groupLevel;Oe.smask&&(si+="_smask_"+this.smaskCounter++%2);const qn=this.cachedCanvases.getCanvas(si,On,jn),En=qn.context;En.scale(1/Wn,1/ti),En.translate(-vn,-wn),En.transform(...rn),Oe.smask?this.smaskStack.push({canvas:qn.canvas,context:En,offsetX:vn,offsetY:wn,scaleX:Wn,scaleY:ti,subtype:Oe.smask.subtype,backdrop:Oe.smask.backdrop,transferMap:Oe.smask.transferMap||null,startTransformInverse:null}):($e.setTransform(1,0,0,1,0,0),$e.translate(vn,wn),$e.scale(Wn,ti),$e.save()),nn($e,En),this.ctx=En,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push($e),this.groupLevel++}endGroup(Oe){if(!this.contentVisible)return;this.groupLevel--;const $e=this.ctx,rn=this.groupStack.pop();if(this.ctx=rn,this.ctx.imageSmoothingEnabled=!1,Oe.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const fn=(0,Se.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...fn);const gn=xe.Util.getAxialAlignedBoundingBox([0,0,$e.canvas.width,$e.canvas.height],fn);this.ctx.drawImage($e.canvas,0,0),this.ctx.restore(),this.compose(gn)}}beginAnnotation(Oe,$e,rn,fn,gn){if(li(this,Pn,Ep).call(this),an(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray($e)&&$e.length===4){const vn=$e[2]-$e[0],wn=$e[3]-$e[1];if(gn&&this.annotationCanvasMap){rn=rn.slice(),rn[4]-=$e[0],rn[5]-=$e[1],$e=$e.slice(),$e[0]=$e[1]=0,$e[2]=vn,$e[3]=wn;const[On,jn]=xe.Util.singularValueDecompose2dScale((0,Se.getCurrentTransform)(this.ctx)),{viewportScale:Wn}=this,ti=Math.ceil(vn*this.outputScaleX*Wn),si=Math.ceil(wn*this.outputScaleY*Wn);this.annotationCanvas=this.canvasFactory.create(ti,si);const{canvas:qn,context:En}=this.annotationCanvas;this.annotationCanvasMap.set(Oe,qn),this.annotationCanvas.savedCtx=this.ctx,this.ctx=En,this.ctx.save(),this.ctx.setTransform(On,0,0,-jn,0,wn*jn),an(this.ctx)}else an(this.ctx),this.ctx.rect($e[0],$e[1],vn,wn),this.ctx.clip(),this.endPath()}this.current=new Qe(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...rn),this.transform(...fn)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),li(this,Pn,Pp).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(Oe){if(!this.contentVisible)return;const $e=Oe.count;Oe=this.getObject(Oe.data,Oe),Oe.count=$e;const rn=this.ctx,fn=this.processingType3;if(fn&&(fn.compiled===void 0&&(fn.compiled=je(Oe)),fn.compiled)){fn.compiled(rn);return}const gn=this._createMaskCanvas(Oe),vn=gn.canvas;rn.save(),rn.setTransform(1,0,0,1,0,0),rn.drawImage(vn,gn.offsetX,gn.offsetY),rn.restore(),this.compose()}paintImageMaskXObjectRepeat(Oe,$e,rn=0,fn=0,gn,vn){if(!this.contentVisible)return;Oe=this.getObject(Oe.data,Oe);const wn=this.ctx;wn.save();const On=(0,Se.getCurrentTransform)(wn);wn.transform($e,rn,fn,gn,0,0);const jn=this._createMaskCanvas(Oe);wn.setTransform(1,0,0,1,jn.offsetX-On[4],jn.offsetY-On[5]);for(let Wn=0,ti=vn.length;Wn<ti;Wn+=2){const si=xe.Util.transform(On,[$e,rn,fn,gn,vn[Wn],vn[Wn+1]]),[qn,En]=xe.Util.applyTransform([0,0],si);wn.drawImage(jn.canvas,qn,En)}wn.restore(),this.compose()}paintImageMaskXObjectGroup(Oe){if(!this.contentVisible)return;const $e=this.ctx,rn=this.current.fillColor,fn=this.current.patternFill;for(const gn of Oe){const{data:vn,width:wn,height:On,transform:jn}=gn,Wn=this.cachedCanvases.getCanvas("maskCanvas",wn,On),ti=Wn.context;ti.save();const si=this.getObject(vn,gn);cn(ti,si),ti.globalCompositeOperation="source-in",ti.fillStyle=fn?rn.getPattern(ti,this,(0,Se.getCurrentTransformInverse)($e),Ee.PathType.FILL):rn,ti.fillRect(0,0,wn,On),ti.restore(),$e.save(),$e.transform(...jn),$e.scale(1,-1),Xe($e,Wn.canvas,0,0,wn,On,0,-1,1,1),$e.restore()}this.compose()}paintImageXObject(Oe){if(!this.contentVisible)return;const $e=this.getObject(Oe);if(!$e){(0,xe.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject($e)}paintImageXObjectRepeat(Oe,$e,rn,fn){if(!this.contentVisible)return;const gn=this.getObject(Oe);if(!gn){(0,xe.warn)("Dependent image isn't ready yet");return}const vn=gn.width,wn=gn.height,On=[];for(let jn=0,Wn=fn.length;jn<Wn;jn+=2)On.push({transform:[$e,0,0,rn,fn[jn],fn[jn+1]],x:0,y:0,w:vn,h:wn});this.paintInlineImageXObjectGroup(gn,On)}applyTransferMapsToCanvas(Oe){return this.current.transferMaps!=="none"&&(Oe.filter=this.current.transferMaps,Oe.drawImage(Oe.canvas,0,0),Oe.filter="none"),Oe.canvas}applyTransferMapsToBitmap(Oe){if(this.current.transferMaps==="none")return Oe.bitmap;const{bitmap:$e,width:rn,height:fn}=Oe,gn=this.cachedCanvases.getCanvas("inlineImage",rn,fn),vn=gn.context;return vn.filter=this.current.transferMaps,vn.drawImage($e,0,0),vn.filter="none",gn.canvas}paintInlineImageXObject(Oe){if(!this.contentVisible)return;const $e=Oe.width,rn=Oe.height,fn=this.ctx;if(this.save(),!xe.isNodeJS){const{filter:wn}=fn;wn!=="none"&&wn!==""&&(fn.filter="none")}fn.scale(1/$e,-1/rn);let gn;if(Oe.bitmap)gn=this.applyTransferMapsToBitmap(Oe);else if(typeof HTMLElement=="function"&&Oe instanceof HTMLElement||!Oe.data)gn=Oe;else{const On=this.cachedCanvases.getCanvas("inlineImage",$e,rn).context;sn(On,Oe),gn=this.applyTransferMapsToCanvas(On)}const vn=this._scaleImage(gn,(0,Se.getCurrentTransformInverse)(fn));fn.imageSmoothingEnabled=St((0,Se.getCurrentTransform)(fn),Oe.interpolate),Xe(fn,vn.img,0,0,vn.paintWidth,vn.paintHeight,0,-rn,$e,rn),this.compose(),this.restore()}paintInlineImageXObjectGroup(Oe,$e){if(!this.contentVisible)return;const rn=this.ctx;let fn;if(Oe.bitmap)fn=Oe.bitmap;else{const gn=Oe.width,vn=Oe.height,On=this.cachedCanvases.getCanvas("inlineImage",gn,vn).context;sn(On,Oe),fn=this.applyTransferMapsToCanvas(On)}for(const gn of $e)rn.save(),rn.transform(...gn.transform),rn.scale(1,-1),Xe(rn,fn,gn.x,gn.y,gn.w,gn.h,0,-1,1,1),rn.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(Oe){}markPointProps(Oe,$e){}beginMarkedContent(Oe){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(Oe,$e){Oe==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible($e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(Oe){const $e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(Oe);const rn=this.ctx;this.pendingClip&&($e||(this.pendingClip===mn?rn.clip("evenodd"):rn.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),rn.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const Oe=(0,Se.getCurrentTransform)(this.ctx);if(Oe[1]===0&&Oe[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(Oe[0]),Math.abs(Oe[3]));else{const $e=Math.abs(Oe[0]*Oe[3]-Oe[2]*Oe[1]),rn=Math.hypot(Oe[0],Oe[2]),fn=Math.hypot(Oe[1],Oe[3]);this._cachedGetSinglePixelWidth=Math.max(rn,fn)/$e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:Oe}=this.current,{a:$e,b:rn,c:fn,d:gn}=this.ctx.getTransform();let vn,wn;if(rn===0&&fn===0){const On=Math.abs($e),jn=Math.abs(gn);if(On===jn)if(Oe===0)vn=wn=1/On;else{const Wn=On*Oe;vn=wn=Wn<1?1/Wn:1}else if(Oe===0)vn=1/On,wn=1/jn;else{const Wn=On*Oe,ti=jn*Oe;vn=Wn<1?1/Wn:1,wn=ti<1?1/ti:1}}else{const On=Math.abs($e*gn-rn*fn),jn=Math.hypot($e,rn),Wn=Math.hypot(fn,gn);if(Oe===0)vn=Wn/On,wn=jn/On;else{const ti=Oe*On;vn=Wn>ti?Wn/ti:1,wn=jn>ti?jn/ti:1}}this._cachedScaleForStroking[0]=vn,this._cachedScaleForStroking[1]=wn}return this._cachedScaleForStroking}rescaleAndStroke(Oe){const{ctx:$e}=this,{lineWidth:rn}=this.current,[fn,gn]=this.getScaleForStroking();if($e.lineWidth=rn||1,fn===1&&gn===1){$e.stroke();return}const vn=$e.getLineDash();if(Oe&&$e.save(),$e.scale(fn,gn),vn.length>0){const wn=Math.max(fn,gn);$e.setLineDash(vn.map(On=>On/wn)),$e.lineDashOffset/=wn}$e.stroke(),Oe&&$e.restore()}isContentVisible(){for(let Oe=this.markedContentStack.length-1;Oe>=0;Oe--)if(!this.markedContentStack[Oe].visible)return!1;return!0}};Pn=new WeakSet,Ep=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Pp=function(){if(this.pageColors){const Oe=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(Oe!=="none"){const $e=this.ctx.filter;this.ctx.filter=Oe,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=$e}}};let Sn=xn;e.CanvasGraphics=Sn;for(const Ge in xe.OPS)Sn.prototype[Ge]!==void 0&&(Sn.prototype[xe.OPS[Ge]]=Sn.prototype[Ge])}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=Ie;var xe=r(1),Se=r(6);const Ee={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=Ee;function Pe(je,Qe){if(!Qe)return;const sn=Qe[2]-Qe[0],cn=Qe[3]-Qe[1],nn=new Path2D;nn.rect(Qe[0],Qe[1],sn,cn),je.clip(nn)}class Ce{constructor(){this.constructor===Ce&&(0,xe.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,xe.unreachable)("Abstract method `getPattern` called.")}}class Re extends Ce{constructor(Qe){super(),this._type=Qe[1],this._bbox=Qe[2],this._colorStops=Qe[3],this._p0=Qe[4],this._p1=Qe[5],this._r0=Qe[6],this._r1=Qe[7],this.matrix=null}_createGradient(Qe){let sn;this._type==="axial"?sn=Qe.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(sn=Qe.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const cn of this._colorStops)sn.addColorStop(cn[0],cn[1]);return sn}getPattern(Qe,sn,cn,nn){let an;if(nn===Ee.STROKE||nn===Ee.FILL){const Ze=sn.current.getClippedPathBoundingBox(nn,(0,Se.getCurrentTransform)(Qe))||[0,0,0,0],tn=Math.ceil(Ze[2]-Ze[0])||1,We=Math.ceil(Ze[3]-Ze[1])||1,An=sn.cachedCanvases.getCanvas("pattern",tn,We,!0),Je=An.context;Je.clearRect(0,0,Je.canvas.width,Je.canvas.height),Je.beginPath(),Je.rect(0,0,Je.canvas.width,Je.canvas.height),Je.translate(-Ze[0],-Ze[1]),cn=xe.Util.transform(cn,[1,0,0,1,Ze[0],Ze[1]]),Je.transform(...sn.baseTransform),this.matrix&&Je.transform(...this.matrix),Pe(Je,this._bbox),Je.fillStyle=this._createGradient(Je),Je.fill(),an=Qe.createPattern(An.canvas,"no-repeat");const St=new DOMMatrix(cn);an.setTransform(St)}else Pe(Qe,this._bbox),an=this._createGradient(Qe);return an}}function Be(je,Qe,sn,cn,nn,an,Ze,tn){const We=Qe.coords,An=Qe.colors,Je=je.data,St=je.width*4;let hn;We[sn+1]>We[cn+1]&&(hn=sn,sn=cn,cn=hn,hn=an,an=Ze,Ze=hn),We[cn+1]>We[nn+1]&&(hn=cn,cn=nn,nn=hn,hn=Ze,Ze=tn,tn=hn),We[sn+1]>We[cn+1]&&(hn=sn,sn=cn,cn=hn,hn=an,an=Ze,Ze=hn);const _n=(We[sn]+Qe.offsetX)*Qe.scaleX,yn=(We[sn+1]+Qe.offsetY)*Qe.scaleY,mn=(We[cn]+Qe.offsetX)*Qe.scaleX,Sn=(We[cn+1]+Qe.offsetY)*Qe.scaleY,Pn=(We[nn]+Qe.offsetX)*Qe.scaleX,pn=(We[nn+1]+Qe.offsetY)*Qe.scaleY;if(yn>=pn)return;const on=An[an],xn=An[an+1],Ge=An[an+2],Oe=An[Ze],$e=An[Ze+1],rn=An[Ze+2],fn=An[tn],gn=An[tn+1],vn=An[tn+2],wn=Math.round(yn),On=Math.round(pn);let jn,Wn,ti,si,qn,En,Qn,Cn;for(let Mn=wn;Mn<=On;Mn++){if(Mn<Sn){const pi=Mn<yn?0:(yn-Mn)/(yn-Sn);jn=_n-(_n-mn)*pi,Wn=on-(on-Oe)*pi,ti=xn-(xn-$e)*pi,si=Ge-(Ge-rn)*pi}else{let pi;Mn>pn?pi=1:Sn===pn?pi=0:pi=(Sn-Mn)/(Sn-pn),jn=mn-(mn-Pn)*pi,Wn=Oe-(Oe-fn)*pi,ti=$e-($e-gn)*pi,si=rn-(rn-vn)*pi}let Un;Mn<yn?Un=0:Mn>pn?Un=1:Un=(yn-Mn)/(yn-pn),qn=_n-(_n-Pn)*Un,En=on-(on-fn)*Un,Qn=xn-(xn-gn)*Un,Cn=Ge-(Ge-vn)*Un;const zn=Math.round(Math.min(jn,qn)),ni=Math.round(Math.max(jn,qn));let yi=St*Mn+zn*4;for(let pi=zn;pi<=ni;pi++)Un=(jn-pi)/(jn-qn),Un<0?Un=0:Un>1&&(Un=1),Je[yi++]=Wn-(Wn-En)*Un|0,Je[yi++]=ti-(ti-Qn)*Un|0,Je[yi++]=si-(si-Cn)*Un|0,Je[yi++]=255}}function Me(je,Qe,sn){const cn=Qe.coords,nn=Qe.colors;let an,Ze;switch(Qe.type){case"lattice":const tn=Qe.verticesPerRow,We=Math.floor(cn.length/tn)-1,An=tn-1;for(an=0;an<We;an++){let Je=an*tn;for(let St=0;St<An;St++,Je++)Be(je,sn,cn[Je],cn[Je+1],cn[Je+tn],nn[Je],nn[Je+1],nn[Je+tn]),Be(je,sn,cn[Je+tn+1],cn[Je+1],cn[Je+tn],nn[Je+tn+1],nn[Je+1],nn[Je+tn])}break;case"triangles":for(an=0,Ze=cn.length;an<Ze;an+=3)Be(je,sn,cn[an],cn[an+1],cn[an+2],nn[an],nn[an+1],nn[an+2]);break;default:throw new Error("illegal figure")}}class Ve extends Ce{constructor(Qe){super(),this._coords=Qe[2],this._colors=Qe[3],this._figures=Qe[4],this._bounds=Qe[5],this._bbox=Qe[7],this._background=Qe[8],this.matrix=null}_createMeshCanvas(Qe,sn,cn){const tn=Math.floor(this._bounds[0]),We=Math.floor(this._bounds[1]),An=Math.ceil(this._bounds[2])-tn,Je=Math.ceil(this._bounds[3])-We,St=Math.min(Math.ceil(Math.abs(An*Qe[0]*1.1)),3e3),hn=Math.min(Math.ceil(Math.abs(Je*Qe[1]*1.1)),3e3),_n=An/St,yn=Je/hn,mn={coords:this._coords,colors:this._colors,offsetX:-tn,offsetY:-We,scaleX:1/_n,scaleY:1/yn},Sn=St+4,Pn=hn+4,pn=cn.getCanvas("mesh",Sn,Pn,!1),on=pn.context,xn=on.createImageData(St,hn);if(sn){const Oe=xn.data;for(let $e=0,rn=Oe.length;$e<rn;$e+=4)Oe[$e]=sn[0],Oe[$e+1]=sn[1],Oe[$e+2]=sn[2],Oe[$e+3]=255}for(const Oe of this._figures)Me(xn,Oe,mn);return on.putImageData(xn,2,2),{canvas:pn.canvas,offsetX:tn-2*_n,offsetY:We-2*yn,scaleX:_n,scaleY:yn}}getPattern(Qe,sn,cn,nn){Pe(Qe,this._bbox);let an;if(nn===Ee.SHADING)an=xe.Util.singularValueDecompose2dScale((0,Se.getCurrentTransform)(Qe));else if(an=xe.Util.singularValueDecompose2dScale(sn.baseTransform),this.matrix){const tn=xe.Util.singularValueDecompose2dScale(this.matrix);an=[an[0]*tn[0],an[1]*tn[1]]}const Ze=this._createMeshCanvas(an,nn===Ee.SHADING?null:this._background,sn.cachedCanvases);return nn!==Ee.SHADING&&(Qe.setTransform(...sn.baseTransform),this.matrix&&Qe.transform(...this.matrix)),Qe.translate(Ze.offsetX,Ze.offsetY),Qe.scale(Ze.scaleX,Ze.scaleY),Qe.createPattern(Ze.canvas,"no-repeat")}}class Fe extends Ce{getPattern(){return"hotpink"}}function Ie(je){switch(je[0]){case"RadialAxial":return new Re(je);case"Mesh":return new Ve(je);case"Dummy":return new Fe}throw new Error(`Unknown IR type: ${je[0]}`)}const qe={COLORED:1,UNCOLORED:2},Xe=class Xe{constructor(Qe,sn,cn,nn,an){this.operatorList=Qe[2],this.matrix=Qe[3]||[1,0,0,1,0,0],this.bbox=Qe[4],this.xstep=Qe[5],this.ystep=Qe[6],this.paintType=Qe[7],this.tilingType=Qe[8],this.color=sn,this.ctx=cn,this.canvasGraphicsFactory=nn,this.baseTransform=an}createPatternCanvas(Qe){const sn=this.operatorList,cn=this.bbox,nn=this.xstep,an=this.ystep,Ze=this.paintType,tn=this.tilingType,We=this.color,An=this.canvasGraphicsFactory;(0,xe.info)("TilingType: "+tn);const Je=cn[0],St=cn[1],hn=cn[2],_n=cn[3],yn=xe.Util.singularValueDecompose2dScale(this.matrix),mn=xe.Util.singularValueDecompose2dScale(this.baseTransform),Sn=[yn[0]*mn[0],yn[1]*mn[1]],Pn=this.getSizeAndScale(nn,this.ctx.canvas.width,Sn[0]),pn=this.getSizeAndScale(an,this.ctx.canvas.height,Sn[1]),on=Qe.cachedCanvases.getCanvas("pattern",Pn.size,pn.size,!0),xn=on.context,Ge=An.createCanvasGraphics(xn);Ge.groupLevel=Qe.groupLevel,this.setFillAndStrokeStyleToContext(Ge,Ze,We);let Oe=Je,$e=St,rn=hn,fn=_n;return Je<0&&(Oe=0,rn+=Math.abs(Je)),St<0&&($e=0,fn+=Math.abs(St)),xn.translate(-(Pn.scale*Oe),-(pn.scale*$e)),Ge.transform(Pn.scale,0,0,pn.scale,0,0),xn.save(),this.clipBbox(Ge,Oe,$e,rn,fn),Ge.baseTransform=(0,Se.getCurrentTransform)(Ge.ctx),Ge.executeOperatorList(sn),Ge.endDrawing(),{canvas:on.canvas,scaleX:Pn.scale,scaleY:pn.scale,offsetX:Oe,offsetY:$e}}getSizeAndScale(Qe,sn,cn){Qe=Math.abs(Qe);const nn=Math.max(Xe.MAX_PATTERN_SIZE,sn);let an=Math.ceil(Qe*cn);return an>=nn?an=nn:cn=an/Qe,{scale:cn,size:an}}clipBbox(Qe,sn,cn,nn,an){const Ze=nn-sn,tn=an-cn;Qe.ctx.rect(sn,cn,Ze,tn),Qe.current.updateRectMinMax((0,Se.getCurrentTransform)(Qe.ctx),[sn,cn,nn,an]),Qe.clip(),Qe.endPath()}setFillAndStrokeStyleToContext(Qe,sn,cn){const nn=Qe.ctx,an=Qe.current;switch(sn){case qe.COLORED:const Ze=this.ctx;nn.fillStyle=Ze.fillStyle,nn.strokeStyle=Ze.strokeStyle,an.fillColor=Ze.fillStyle,an.strokeColor=Ze.strokeStyle;break;case qe.UNCOLORED:const tn=xe.Util.makeHexColor(cn[0],cn[1],cn[2]);nn.fillStyle=tn,nn.strokeStyle=tn,an.fillColor=tn,an.strokeColor=tn;break;default:throw new xe.FormatError(`Unsupported paint type: ${sn}`)}}getPattern(Qe,sn,cn,nn){let an=cn;nn!==Ee.SHADING&&(an=xe.Util.transform(an,sn.baseTransform),this.matrix&&(an=xe.Util.transform(an,this.matrix)));const Ze=this.createPatternCanvas(sn);let tn=new DOMMatrix(an);tn=tn.translate(Ze.offsetX,Ze.offsetY),tn=tn.scale(1/Ze.scaleX,1/Ze.scaleY);const We=Qe.createPattern(Ze.canvas,"repeat");return We.setTransform(tn),We}};Ka(Xe,"MAX_PATTERN_SIZE",3e3);let Ye=Xe;e.TilingPattern=Ye}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=Ee,e.convertToRGBA=Se,e.grayToRGBA=Ce;var xe=r(1);function Se(Re){switch(Re.kind){case xe.ImageKind.GRAYSCALE_1BPP:return Ee(Re);case xe.ImageKind.RGB_24BPP:return Pe(Re)}return null}function Ee({src:Re,srcPos:Be=0,dest:Me,width:Ve,height:Fe,nonBlackColor:Ie=4294967295,inverseDecode:qe=!1}){const Ye=xe.FeatureTest.isLittleEndian?4278190080:255,[Xe,je]=qe?[Ie,Ye]:[Ye,Ie],Qe=Ve>>3,sn=Ve&7,cn=Re.length;Me=new Uint32Array(Me.buffer);let nn=0;for(let an=0;an<Fe;an++){for(const tn=Be+Qe;Be<tn;Be++){const We=Be<cn?Re[Be]:255;Me[nn++]=We&128?je:Xe,Me[nn++]=We&64?je:Xe,Me[nn++]=We&32?je:Xe,Me[nn++]=We&16?je:Xe,Me[nn++]=We&8?je:Xe,Me[nn++]=We&4?je:Xe,Me[nn++]=We&2?je:Xe,Me[nn++]=We&1?je:Xe}if(sn===0)continue;const Ze=Be<cn?Re[Be++]:255;for(let tn=0;tn<sn;tn++)Me[nn++]=Ze&1<<7-tn?je:Xe}return{srcPos:Be,destPos:nn}}function Pe({src:Re,srcPos:Be=0,dest:Me,destPos:Ve=0,width:Fe,height:Ie}){let qe=0;const Ye=Re.length>>2,Xe=new Uint32Array(Re.buffer,Be,Ye);if(xe.FeatureTest.isLittleEndian){for(;qe<Ye-2;qe+=3,Ve+=4){const je=Xe[qe],Qe=Xe[qe+1],sn=Xe[qe+2];Me[Ve]=je|4278190080,Me[Ve+1]=je>>>24|Qe<<8|4278190080,Me[Ve+2]=Qe>>>16|sn<<16|4278190080,Me[Ve+3]=sn>>>8|4278190080}for(let je=qe*4,Qe=Re.length;je<Qe;je+=3)Me[Ve++]=Re[je]|Re[je+1]<<8|Re[je+2]<<16|4278190080}else{for(;qe<Ye-2;qe+=3,Ve+=4){const je=Xe[qe],Qe=Xe[qe+1],sn=Xe[qe+2];Me[Ve]=je|255,Me[Ve+1]=je<<24|Qe>>>8|255,Me[Ve+2]=Qe<<16|sn>>>16|255,Me[Ve+3]=sn<<8|255}for(let je=qe*4,Qe=Re.length;je<Qe;je+=3)Me[Ve++]=Re[je]<<24|Re[je+1]<<16|Re[je+2]<<8|255}return{srcPos:Be,destPos:Ve}}function Ce(Re,Be){if(xe.FeatureTest.isLittleEndian)for(let Me=0,Ve=Re.length;Me<Ve;Me++)Be[Me]=Re[Me]*65793|4278190080;else for(let Me=0,Ve=Re.length;Me<Ve;Me++)Be[Me]=Re[Me]*16843008|255}}),((t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const r=Object.create(null);e.GlobalWorkerOptions=r,r.workerPort=null,r.workerSrc=""}),((t,e,r)=>{var Re,m0,g0,jd;Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var xe=r(1);const Se={DATA:1,ERROR:2},Ee={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Pe(Fe){switch(Fe instanceof Error||typeof Fe=="object"&&Fe!==null||(0,xe.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),Fe.name){case"AbortException":return new xe.AbortException(Fe.message);case"MissingPDFException":return new xe.MissingPDFException(Fe.message);case"PasswordException":return new xe.PasswordException(Fe.message,Fe.code);case"UnexpectedResponseException":return new xe.UnexpectedResponseException(Fe.message,Fe.status);case"UnknownErrorException":return new xe.UnknownErrorException(Fe.message,Fe.details);default:return new xe.UnknownErrorException(Fe.message,Fe.toString())}}class Ce{constructor(Ie,qe,Ye){bi(this,Re);this.sourceName=Ie,this.targetName=qe,this.comObj=Ye,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=Xe=>{const je=Xe.data;if(je.targetName!==this.sourceName)return;if(je.stream){li(this,Re,g0).call(this,je);return}if(je.callback){const sn=je.callbackId,cn=this.callbackCapabilities[sn];if(!cn)throw new Error(`Cannot resolve callback ${sn}`);if(delete this.callbackCapabilities[sn],je.callback===Se.DATA)cn.resolve(je.data);else if(je.callback===Se.ERROR)cn.reject(Pe(je.reason));else throw new Error("Unexpected callback case");return}const Qe=this.actionHandler[je.action];if(!Qe)throw new Error(`Unknown action from worker: ${je.action}`);if(je.callbackId){const sn=this.sourceName,cn=je.sourceName;new Promise(function(nn){nn(Qe(je.data))}).then(function(nn){Ye.postMessage({sourceName:sn,targetName:cn,callback:Se.DATA,callbackId:je.callbackId,data:nn})},function(nn){Ye.postMessage({sourceName:sn,targetName:cn,callback:Se.ERROR,callbackId:je.callbackId,reason:Pe(nn)})});return}if(je.streamId){li(this,Re,m0).call(this,je);return}Qe(je.data)},Ye.addEventListener("message",this._onComObjOnMessage)}on(Ie,qe){const Ye=this.actionHandler;if(Ye[Ie])throw new Error(`There is already an actionName called "${Ie}"`);Ye[Ie]=qe}send(Ie,qe,Ye){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:Ie,data:qe},Ye)}sendWithPromise(Ie,qe,Ye){const Xe=this.callbackId++,je=new xe.PromiseCapability;this.callbackCapabilities[Xe]=je;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:Ie,callbackId:Xe,data:qe},Ye)}catch(Qe){je.reject(Qe)}return je.promise}sendWithStream(Ie,qe,Ye,Xe){const je=this.streamId++,Qe=this.sourceName,sn=this.targetName,cn=this.comObj;return new ReadableStream({start:nn=>{const an=new xe.PromiseCapability;return this.streamControllers[je]={controller:nn,startCall:an,pullCall:null,cancelCall:null,isClosed:!1},cn.postMessage({sourceName:Qe,targetName:sn,action:Ie,streamId:je,data:qe,desiredSize:nn.desiredSize},Xe),an.promise},pull:nn=>{const an=new xe.PromiseCapability;return this.streamControllers[je].pullCall=an,cn.postMessage({sourceName:Qe,targetName:sn,stream:Ee.PULL,streamId:je,desiredSize:nn.desiredSize}),an.promise},cancel:nn=>{(0,xe.assert)(nn instanceof Error,"cancel must have a valid reason");const an=new xe.PromiseCapability;return this.streamControllers[je].cancelCall=an,this.streamControllers[je].isClosed=!0,cn.postMessage({sourceName:Qe,targetName:sn,stream:Ee.CANCEL,streamId:je,reason:Pe(nn)}),an.promise}},Ye)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}Re=new WeakSet,m0=function(Ie){const qe=Ie.streamId,Ye=this.sourceName,Xe=Ie.sourceName,je=this.comObj,Qe=this,sn=this.actionHandler[Ie.action],cn={enqueue(nn,an=1,Ze){if(this.isCancelled)return;const tn=this.desiredSize;this.desiredSize-=an,tn>0&&this.desiredSize<=0&&(this.sinkCapability=new xe.PromiseCapability,this.ready=this.sinkCapability.promise),je.postMessage({sourceName:Ye,targetName:Xe,stream:Ee.ENQUEUE,streamId:qe,chunk:nn},Ze)},close(){this.isCancelled||(this.isCancelled=!0,je.postMessage({sourceName:Ye,targetName:Xe,stream:Ee.CLOSE,streamId:qe}),delete Qe.streamSinks[qe])},error(nn){(0,xe.assert)(nn instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,je.postMessage({sourceName:Ye,targetName:Xe,stream:Ee.ERROR,streamId:qe,reason:Pe(nn)}))},sinkCapability:new xe.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:Ie.desiredSize,ready:null};cn.sinkCapability.resolve(),cn.ready=cn.sinkCapability.promise,this.streamSinks[qe]=cn,new Promise(function(nn){nn(sn(Ie.data,cn))}).then(function(){je.postMessage({sourceName:Ye,targetName:Xe,stream:Ee.START_COMPLETE,streamId:qe,success:!0})},function(nn){je.postMessage({sourceName:Ye,targetName:Xe,stream:Ee.START_COMPLETE,streamId:qe,reason:Pe(nn)})})},g0=function(Ie){const qe=Ie.streamId,Ye=this.sourceName,Xe=Ie.sourceName,je=this.comObj,Qe=this.streamControllers[qe],sn=this.streamSinks[qe];switch(Ie.stream){case Ee.START_COMPLETE:Ie.success?Qe.startCall.resolve():Qe.startCall.reject(Pe(Ie.reason));break;case Ee.PULL_COMPLETE:Ie.success?Qe.pullCall.resolve():Qe.pullCall.reject(Pe(Ie.reason));break;case Ee.PULL:if(!sn){je.postMessage({sourceName:Ye,targetName:Xe,stream:Ee.PULL_COMPLETE,streamId:qe,success:!0});break}sn.desiredSize<=0&&Ie.desiredSize>0&&sn.sinkCapability.resolve(),sn.desiredSize=Ie.desiredSize,new Promise(function(cn){var nn;cn((nn=sn.onPull)==null?void 0:nn.call(sn))}).then(function(){je.postMessage({sourceName:Ye,targetName:Xe,stream:Ee.PULL_COMPLETE,streamId:qe,success:!0})},function(cn){je.postMessage({sourceName:Ye,targetName:Xe,stream:Ee.PULL_COMPLETE,streamId:qe,reason:Pe(cn)})});break;case Ee.ENQUEUE:if((0,xe.assert)(Qe,"enqueue should have stream controller"),Qe.isClosed)break;Qe.controller.enqueue(Ie.chunk);break;case Ee.CLOSE:if((0,xe.assert)(Qe,"close should have stream controller"),Qe.isClosed)break;Qe.isClosed=!0,Qe.controller.close(),li(this,Re,jd).call(this,Qe,qe);break;case Ee.ERROR:(0,xe.assert)(Qe,"error should have stream controller"),Qe.controller.error(Pe(Ie.reason)),li(this,Re,jd).call(this,Qe,qe);break;case Ee.CANCEL_COMPLETE:Ie.success?Qe.cancelCall.resolve():Qe.cancelCall.reject(Pe(Ie.reason)),li(this,Re,jd).call(this,Qe,qe);break;case Ee.CANCEL:if(!sn)break;new Promise(function(cn){var nn;cn((nn=sn.onCancel)==null?void 0:nn.call(sn,Pe(Ie.reason)))}).then(function(){je.postMessage({sourceName:Ye,targetName:Xe,stream:Ee.CANCEL_COMPLETE,streamId:qe,success:!0})},function(cn){je.postMessage({sourceName:Ye,targetName:Xe,stream:Ee.CANCEL_COMPLETE,streamId:qe,reason:Pe(cn)})}),sn.sinkCapability.reject(Pe(Ie.reason)),sn.isCancelled=!0,delete this.streamSinks[qe];break;default:throw new Error("Unexpected stream case")}},jd=async function(Ie,qe){var Ye,Xe,je;await Promise.allSettled([(Ye=Ie.startCall)==null?void 0:Ye.promise,(Xe=Ie.pullCall)==null?void 0:Xe.promise,(je=Ie.cancelCall)==null?void 0:je.promise]),delete this.streamControllers[qe]},e.MessageHandler=Ce}),((t,e,r)=>{var Ee,Pe;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var xe=r(1);class Se{constructor({parsedData:Re,rawData:Be}){bi(this,Ee);bi(this,Pe);xi(this,Ee,Re),xi(this,Pe,Be)}getRaw(){return un(this,Pe)}get(Re){return un(this,Ee).get(Re)??null}getAll(){return(0,xe.objectFromMap)(un(this,Ee))}has(Re){return un(this,Ee).has(Re)}}Ee=new WeakMap,Pe=new WeakMap,e.Metadata=Se}),((t,e,r)=>{var Re,Be,Me,Ve,Fe,Ie,wp;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var xe=r(1),Se=r(8);const Ee=Symbol("INTERNAL");class Pe{constructor(Xe,je){bi(this,Re,!0);this.name=Xe,this.intent=je}get visible(){return un(this,Re)}_setVisible(Xe,je){Xe!==Ee&&(0,xe.unreachable)("Internal method `_setVisible` called."),xi(this,Re,je)}}Re=new WeakMap;class Ce{constructor(Xe){bi(this,Ie);bi(this,Be,null);bi(this,Me,new Map);bi(this,Ve,null);bi(this,Fe,null);if(this.name=null,this.creator=null,Xe!==null){this.name=Xe.name,this.creator=Xe.creator,xi(this,Fe,Xe.order);for(const je of Xe.groups)un(this,Me).set(je.id,new Pe(je.name,je.intent));if(Xe.baseState==="OFF")for(const je of un(this,Me).values())je._setVisible(Ee,!1);for(const je of Xe.on)un(this,Me).get(je)._setVisible(Ee,!0);for(const je of Xe.off)un(this,Me).get(je)._setVisible(Ee,!1);xi(this,Ve,this.getHash())}}isVisible(Xe){if(un(this,Me).size===0)return!0;if(!Xe)return(0,xe.warn)("Optional content group not defined."),!0;if(Xe.type==="OCG")return un(this,Me).has(Xe.id)?un(this,Me).get(Xe.id).visible:((0,xe.warn)(`Optional content group not found: ${Xe.id}`),!0);if(Xe.type==="OCMD"){if(Xe.expression)return li(this,Ie,wp).call(this,Xe.expression);if(!Xe.policy||Xe.policy==="AnyOn"){for(const je of Xe.ids){if(!un(this,Me).has(je))return(0,xe.warn)(`Optional content group not found: ${je}`),!0;if(un(this,Me).get(je).visible)return!0}return!1}else if(Xe.policy==="AllOn"){for(const je of Xe.ids){if(!un(this,Me).has(je))return(0,xe.warn)(`Optional content group not found: ${je}`),!0;if(!un(this,Me).get(je).visible)return!1}return!0}else if(Xe.policy==="AnyOff"){for(const je of Xe.ids){if(!un(this,Me).has(je))return(0,xe.warn)(`Optional content group not found: ${je}`),!0;if(!un(this,Me).get(je).visible)return!0}return!1}else if(Xe.policy==="AllOff"){for(const je of Xe.ids){if(!un(this,Me).has(je))return(0,xe.warn)(`Optional content group not found: ${je}`),!0;if(un(this,Me).get(je).visible)return!1}return!0}return(0,xe.warn)(`Unknown optional content policy ${Xe.policy}.`),!0}return(0,xe.warn)(`Unknown group type ${Xe.type}.`),!0}setVisibility(Xe,je=!0){if(!un(this,Me).has(Xe)){(0,xe.warn)(`Optional content group not found: ${Xe}`);return}un(this,Me).get(Xe)._setVisible(Ee,!!je),xi(this,Be,null)}get hasInitialVisibility(){return un(this,Ve)===null||this.getHash()===un(this,Ve)}getOrder(){return un(this,Me).size?un(this,Fe)?un(this,Fe).slice():[...un(this,Me).keys()]:null}getGroups(){return un(this,Me).size>0?(0,xe.objectFromMap)(un(this,Me)):null}getGroup(Xe){return un(this,Me).get(Xe)||null}getHash(){if(un(this,Be)!==null)return un(this,Be);const Xe=new Se.MurmurHash3_64;for(const[je,Qe]of un(this,Me))Xe.update(`${je}:${Qe.visible}`);return xi(this,Be,Xe.hexdigest())}}Be=new WeakMap,Me=new WeakMap,Ve=new WeakMap,Fe=new WeakMap,Ie=new WeakSet,wp=function(Xe){const je=Xe.length;if(je<2)return!0;const Qe=Xe[0];for(let sn=1;sn<je;sn++){const cn=Xe[sn];let nn;if(Array.isArray(cn))nn=li(this,Ie,wp).call(this,cn);else if(un(this,Me).has(cn))nn=un(this,Me).get(cn).visible;else return(0,xe.warn)(`Optional content group not found: ${cn}`),!0;switch(Qe){case"And":if(!nn)return!1;break;case"Or":if(nn)return!0;break;case"Not":return!nn;default:return!0}}return Qe==="And"},e.OptionalContentConfig=Ce}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var xe=r(1),Se=r(6);class Ee{constructor({length:Be,initialData:Me,progressiveDone:Ve=!1,contentDispositionFilename:Fe=null,disableRange:Ie=!1,disableStream:qe=!1},Ye){if((0,xe.assert)(Ye,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=Ve,this._contentDispositionFilename=Fe,(Me==null?void 0:Me.length)>0){const Xe=Me instanceof Uint8Array&&Me.byteLength===Me.buffer.byteLength?Me.buffer:new Uint8Array(Me).buffer;this._queuedChunks.push(Xe)}this._pdfDataRangeTransport=Ye,this._isStreamingSupported=!qe,this._isRangeSupported=!Ie,this._contentLength=Be,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((Xe,je)=>{this._onReceiveData({begin:Xe,chunk:je})}),this._pdfDataRangeTransport.addProgressListener((Xe,je)=>{this._onProgress({loaded:Xe,total:je})}),this._pdfDataRangeTransport.addProgressiveReadListener(Xe=>{this._onReceiveData({chunk:Xe})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:Be,chunk:Me}){const Ve=Me instanceof Uint8Array&&Me.byteLength===Me.buffer.byteLength?Me.buffer:new Uint8Array(Me).buffer;if(Be===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(Ve):this._queuedChunks.push(Ve);else{const Fe=this._rangeReaders.some(function(Ie){return Ie._begin!==Be?!1:(Ie._enqueue(Ve),!0)});(0,xe.assert)(Fe,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var Be;return((Be=this._fullRequestReader)==null?void 0:Be._loaded)??0}_onProgress(Be){var Me,Ve,Fe,Ie;Be.total===void 0?(Ve=(Me=this._rangeReaders[0])==null?void 0:Me.onProgress)==null||Ve.call(Me,{loaded:Be.loaded}):(Ie=(Fe=this._fullRequestReader)==null?void 0:Fe.onProgress)==null||Ie.call(Fe,{loaded:Be.loaded,total:Be.total})}_onProgressiveDone(){var Be;(Be=this._fullRequestReader)==null||Be.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(Be){const Me=this._rangeReaders.indexOf(Be);Me>=0&&this._rangeReaders.splice(Me,1)}getFullReader(){(0,xe.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const Be=this._queuedChunks;return this._queuedChunks=null,new Pe(this,Be,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(Be,Me){if(Me<=this._progressiveDataLength)return null;const Ve=new Ce(this,Be,Me);return this._pdfDataRangeTransport.requestDataRange(Be,Me),this._rangeReaders.push(Ve),Ve}cancelAllRequests(Be){var Me;(Me=this._fullRequestReader)==null||Me.cancel(Be);for(const Ve of this._rangeReaders.slice(0))Ve.cancel(Be);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=Ee;class Pe{constructor(Be,Me,Ve=!1,Fe=null){this._stream=Be,this._done=Ve||!1,this._filename=(0,Se.isPdfFile)(Fe)?Fe:null,this._queuedChunks=Me||[],this._loaded=0;for(const Ie of this._queuedChunks)this._loaded+=Ie.byteLength;this._requests=[],this._headersReady=Promise.resolve(),Be._fullRequestReader=this,this.onProgress=null}_enqueue(Be){this._done||(this._requests.length>0?this._requests.shift().resolve({value:Be,done:!1}):this._queuedChunks.push(Be),this._loaded+=Be.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const Be=new xe.PromiseCapability;return this._requests.push(Be),Be.promise}cancel(Be){this._done=!0;for(const Me of this._requests)Me.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Ce{constructor(Be,Me,Ve){this._stream=Be,this._begin=Me,this._end=Ve,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(Be){if(!this._done){if(this._requests.length===0)this._queuedChunk=Be;else{this._requests.shift().resolve({value:Be,done:!1});for(const Ve of this._requests)Ve.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const Me=this._queuedChunk;return this._queuedChunk=null,{value:Me,done:!1}}if(this._done)return{value:void 0,done:!0};const Be=new xe.PromiseCapability;return this._requests.push(Be),Be.promise}cancel(Be){this._done=!0;for(const Me of this._requests)Me.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var xe=r(1),Se=r(20);function Ee(Ve,Fe,Ie){return{method:"GET",headers:Ve,signal:Ie.signal,mode:"cors",credentials:Fe?"include":"same-origin",redirect:"follow"}}function Pe(Ve){const Fe=new Headers;for(const Ie in Ve){const qe=Ve[Ie];qe!==void 0&&Fe.append(Ie,qe)}return Fe}function Ce(Ve){return Ve instanceof Uint8Array?Ve.buffer:Ve instanceof ArrayBuffer?Ve:((0,xe.warn)(`getArrayBuffer - unexpected data format: ${Ve}`),new Uint8Array(Ve).buffer)}class Re{constructor(Fe){this.source=Fe,this.isHttp=/^https?:/i.test(Fe.url),this.httpHeaders=this.isHttp&&Fe.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var Fe;return((Fe=this._fullRequestReader)==null?void 0:Fe._loaded)??0}getFullReader(){return(0,xe.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Be(this),this._fullRequestReader}getRangeReader(Fe,Ie){if(Ie<=this._progressiveDataLength)return null;const qe=new Me(this,Fe,Ie);return this._rangeRequestReaders.push(qe),qe}cancelAllRequests(Fe){var Ie;(Ie=this._fullRequestReader)==null||Ie.cancel(Fe);for(const qe of this._rangeRequestReaders.slice(0))qe.cancel(Fe)}}e.PDFFetchStream=Re;class Be{constructor(Fe){this._stream=Fe,this._reader=null,this._loaded=0,this._filename=null;const Ie=Fe.source;this._withCredentials=Ie.withCredentials||!1,this._contentLength=Ie.length,this._headersCapability=new xe.PromiseCapability,this._disableRange=Ie.disableRange||!1,this._rangeChunkSize=Ie.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!Ie.disableStream,this._isRangeSupported=!Ie.disableRange,this._headers=Pe(this._stream.httpHeaders);const qe=Ie.url;fetch(qe,Ee(this._headers,this._withCredentials,this._abortController)).then(Ye=>{if(!(0,Se.validateResponseStatus)(Ye.status))throw(0,Se.createResponseStatusError)(Ye.status,qe);this._reader=Ye.body.getReader(),this._headersCapability.resolve();const Xe=sn=>Ye.headers.get(sn),{allowRangeRequests:je,suggestedLength:Qe}=(0,Se.validateRangeRequestCapabilities)({getResponseHeader:Xe,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=je,this._contentLength=Qe||this._contentLength,this._filename=(0,Se.extractFilenameFromHeader)(Xe),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new xe.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var qe;await this._headersCapability.promise;const{value:Fe,done:Ie}=await this._reader.read();return Ie?{value:Fe,done:Ie}:(this._loaded+=Fe.byteLength,(qe=this.onProgress)==null||qe.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Ce(Fe),done:!1})}cancel(Fe){var Ie;(Ie=this._reader)==null||Ie.cancel(Fe),this._abortController.abort()}}class Me{constructor(Fe,Ie,qe){this._stream=Fe,this._reader=null,this._loaded=0;const Ye=Fe.source;this._withCredentials=Ye.withCredentials||!1,this._readCapability=new xe.PromiseCapability,this._isStreamingSupported=!Ye.disableStream,this._abortController=new AbortController,this._headers=Pe(this._stream.httpHeaders),this._headers.append("Range",`bytes=${Ie}-${qe-1}`);const Xe=Ye.url;fetch(Xe,Ee(this._headers,this._withCredentials,this._abortController)).then(je=>{if(!(0,Se.validateResponseStatus)(je.status))throw(0,Se.createResponseStatusError)(je.status,Xe);this._readCapability.resolve(),this._reader=je.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var qe;await this._readCapability.promise;const{value:Fe,done:Ie}=await this._reader.read();return Ie?{value:Fe,done:Ie}:(this._loaded+=Fe.byteLength,(qe=this.onProgress)==null||qe.call(this,{loaded:this._loaded}),{value:Ce(Fe),done:!1})}cancel(Fe){var Ie;(Ie=this._reader)==null||Ie.cancel(Fe),this._abortController.abort()}}}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=Re,e.extractFilenameFromHeader=Ce,e.validateRangeRequestCapabilities=Pe,e.validateResponseStatus=Be;var xe=r(1),Se=r(21),Ee=r(6);function Pe({getResponseHeader:Me,isHttp:Ve,rangeChunkSize:Fe,disableRange:Ie}){const qe={allowRangeRequests:!1,suggestedLength:void 0},Ye=parseInt(Me("Content-Length"),10);return!Number.isInteger(Ye)||(qe.suggestedLength=Ye,Ye<=2*Fe)||Ie||!Ve||Me("Accept-Ranges")!=="bytes"||(Me("Content-Encoding")||"identity")!=="identity"||(qe.allowRangeRequests=!0),qe}function Ce(Me){const Ve=Me("Content-Disposition");if(Ve){let Fe=(0,Se.getFilenameFromContentDispositionHeader)(Ve);if(Fe.includes("%"))try{Fe=decodeURIComponent(Fe)}catch{}if((0,Ee.isPdfFile)(Fe))return Fe}return null}function Re(Me,Ve){return Me===404||Me===0&&Ve.startsWith("file:")?new xe.MissingPDFException('Missing PDF "'+Ve+'".'):new xe.UnexpectedResponseException(`Unexpected server response (${Me}) while retrieving PDF "${Ve}".`,Me)}function Be(Me){return Me===200||Me===206}}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=Se;var xe=r(1);function Se(Ee){let Pe=!0,Ce=Re("filename\\*","i").exec(Ee);if(Ce){Ce=Ce[1];let Ye=Fe(Ce);return Ye=unescape(Ye),Ye=Ie(Ye),Ye=qe(Ye),Me(Ye)}if(Ce=Ve(Ee),Ce){const Ye=qe(Ce);return Me(Ye)}if(Ce=Re("filename","i").exec(Ee),Ce){Ce=Ce[1];let Ye=Fe(Ce);return Ye=qe(Ye),Me(Ye)}function Re(Ye,Xe){return new RegExp("(?:^|;)\\s*"+Ye+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',Xe)}function Be(Ye,Xe){if(Ye){if(!/^[\x00-\xFF]+$/.test(Xe))return Xe;try{const je=new TextDecoder(Ye,{fatal:!0}),Qe=(0,xe.stringToBytes)(Xe);Xe=je.decode(Qe),Pe=!1}catch{}}return Xe}function Me(Ye){return Pe&&/[\x80-\xff]/.test(Ye)&&(Ye=Be("utf-8",Ye),Pe&&(Ye=Be("iso-8859-1",Ye))),Ye}function Ve(Ye){const Xe=[];let je;const Qe=Re("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(je=Qe.exec(Ye))!==null;){let[,cn,nn,an]=je;if(cn=parseInt(cn,10),cn in Xe){if(cn===0)break;continue}Xe[cn]=[nn,an]}const sn=[];for(let cn=0;cn<Xe.length&&cn in Xe;++cn){let[nn,an]=Xe[cn];an=Fe(an),nn&&(an=unescape(an),cn===0&&(an=Ie(an))),sn.push(an)}return sn.join("")}function Fe(Ye){if(Ye.startsWith('"')){const Xe=Ye.slice(1).split('\\"');for(let je=0;je<Xe.length;++je){const Qe=Xe[je].indexOf('"');Qe!==-1&&(Xe[je]=Xe[je].slice(0,Qe),Xe.length=je+1),Xe[je]=Xe[je].replaceAll(/\\(.)/g,"$1")}Ye=Xe.join('"')}return Ye}function Ie(Ye){const Xe=Ye.indexOf("'");if(Xe===-1)return Ye;const je=Ye.slice(0,Xe),sn=Ye.slice(Xe+1).replace(/^[^']*'/,"");return Be(je,sn)}function qe(Ye){return!Ye.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(Ye)?Ye:Ye.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(Xe,je,Qe,sn){if(Qe==="q"||Qe==="Q")return sn=sn.replaceAll("_"," "),sn=sn.replaceAll(/=([0-9a-fA-F]{2})/g,function(cn,nn){return String.fromCharCode(parseInt(nn,16))}),Be(je,sn);try{sn=atob(sn)}catch{}return Be(je,sn)})}return""}}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var xe=r(1),Se=r(20);const Ee=200,Pe=206;function Ce(Fe){const Ie=Fe.response;return typeof Ie!="string"?Ie:(0,xe.stringToBytes)(Ie).buffer}class Re{constructor(Ie,qe={}){this.url=Ie,this.isHttp=/^https?:/i.test(Ie),this.httpHeaders=this.isHttp&&qe.httpHeaders||Object.create(null),this.withCredentials=qe.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(Ie,qe,Ye){const Xe={begin:Ie,end:qe};for(const je in Ye)Xe[je]=Ye[je];return this.request(Xe)}requestFull(Ie){return this.request(Ie)}request(Ie){const qe=new XMLHttpRequest,Ye=this.currXhrId++,Xe=this.pendingRequests[Ye]={xhr:qe};qe.open("GET",this.url),qe.withCredentials=this.withCredentials;for(const je in this.httpHeaders){const Qe=this.httpHeaders[je];Qe!==void 0&&qe.setRequestHeader(je,Qe)}return this.isHttp&&"begin"in Ie&&"end"in Ie?(qe.setRequestHeader("Range",`bytes=${Ie.begin}-${Ie.end-1}`),Xe.expectedStatus=Pe):Xe.expectedStatus=Ee,qe.responseType="arraybuffer",Ie.onError&&(qe.onerror=function(je){Ie.onError(qe.status)}),qe.onreadystatechange=this.onStateChange.bind(this,Ye),qe.onprogress=this.onProgress.bind(this,Ye),Xe.onHeadersReceived=Ie.onHeadersReceived,Xe.onDone=Ie.onDone,Xe.onError=Ie.onError,Xe.onProgress=Ie.onProgress,qe.send(null),Ye}onProgress(Ie,qe){var Xe;const Ye=this.pendingRequests[Ie];Ye&&((Xe=Ye.onProgress)==null||Xe.call(Ye,qe))}onStateChange(Ie,qe){var cn,nn,an;const Ye=this.pendingRequests[Ie];if(!Ye)return;const Xe=Ye.xhr;if(Xe.readyState>=2&&Ye.onHeadersReceived&&(Ye.onHeadersReceived(),delete Ye.onHeadersReceived),Xe.readyState!==4||!(Ie in this.pendingRequests))return;if(delete this.pendingRequests[Ie],Xe.status===0&&this.isHttp){(cn=Ye.onError)==null||cn.call(Ye,Xe.status);return}const je=Xe.status||Ee;if(!(je===Ee&&Ye.expectedStatus===Pe)&&je!==Ye.expectedStatus){(nn=Ye.onError)==null||nn.call(Ye,Xe.status);return}const sn=Ce(Xe);if(je===Pe){const Ze=Xe.getResponseHeader("Content-Range"),tn=/bytes (\d+)-(\d+)\/(\d+)/.exec(Ze);Ye.onDone({begin:parseInt(tn[1],10),chunk:sn})}else sn?Ye.onDone({begin:0,chunk:sn}):(an=Ye.onError)==null||an.call(Ye,Xe.status)}getRequestXhr(Ie){return this.pendingRequests[Ie].xhr}isPendingRequest(Ie){return Ie in this.pendingRequests}abortRequest(Ie){const qe=this.pendingRequests[Ie].xhr;delete this.pendingRequests[Ie],qe.abort()}}class Be{constructor(Ie){this._source=Ie,this._manager=new Re(Ie.url,{httpHeaders:Ie.httpHeaders,withCredentials:Ie.withCredentials}),this._rangeChunkSize=Ie.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(Ie){const qe=this._rangeRequestReaders.indexOf(Ie);qe>=0&&this._rangeRequestReaders.splice(qe,1)}getFullReader(){return(0,xe.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Me(this._manager,this._source),this._fullRequestReader}getRangeReader(Ie,qe){const Ye=new Ve(this._manager,Ie,qe);return Ye.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(Ye),Ye}cancelAllRequests(Ie){var qe;(qe=this._fullRequestReader)==null||qe.cancel(Ie);for(const Ye of this._rangeRequestReaders.slice(0))Ye.cancel(Ie)}}e.PDFNetworkStream=Be;class Me{constructor(Ie,qe){this._manager=Ie;const Ye={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=qe.url,this._fullRequestId=Ie.requestFull(Ye),this._headersReceivedCapability=new xe.PromiseCapability,this._disableRange=qe.disableRange||!1,this._contentLength=qe.length,this._rangeChunkSize=qe.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const Ie=this._fullRequestId,qe=this._manager.getRequestXhr(Ie),Ye=Qe=>qe.getResponseHeader(Qe),{allowRangeRequests:Xe,suggestedLength:je}=(0,Se.validateRangeRequestCapabilities)({getResponseHeader:Ye,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});Xe&&(this._isRangeSupported=!0),this._contentLength=je||this._contentLength,this._filename=(0,Se.extractFilenameFromHeader)(Ye),this._isRangeSupported&&this._manager.abortRequest(Ie),this._headersReceivedCapability.resolve()}_onDone(Ie){if(Ie&&(this._requests.length>0?this._requests.shift().resolve({value:Ie.chunk,done:!1}):this._cachedChunks.push(Ie.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const qe of this._requests)qe.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(Ie){this._storedError=(0,Se.createResponseStatusError)(Ie,this._url),this._headersReceivedCapability.reject(this._storedError);for(const qe of this._requests)qe.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(Ie){var qe;(qe=this.onProgress)==null||qe.call(this,{loaded:Ie.loaded,total:Ie.lengthComputable?Ie.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const Ie=new xe.PromiseCapability;return this._requests.push(Ie),Ie.promise}cancel(Ie){this._done=!0,this._headersReceivedCapability.reject(Ie);for(const qe of this._requests)qe.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Ve{constructor(Ie,qe,Ye){this._manager=Ie;const Xe={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=Ie.url,this._requestId=Ie.requestRange(qe,Ye,Xe),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var Ie;(Ie=this.onClosed)==null||Ie.call(this,this)}_onDone(Ie){const qe=Ie.chunk;this._requests.length>0?this._requests.shift().resolve({value:qe,done:!1}):this._queuedChunk=qe,this._done=!0;for(const Ye of this._requests)Ye.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(Ie){this._storedError=(0,Se.createResponseStatusError)(Ie,this._url);for(const qe of this._requests)qe.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(Ie){var qe;this.isStreamingSupported||(qe=this.onProgress)==null||qe.call(this,{loaded:Ie.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const qe=this._queuedChunk;return this._queuedChunk=null,{value:qe,done:!1}}if(this._done)return{value:void 0,done:!0};const Ie=new xe.PromiseCapability;return this._requests.push(Ie),Ie.promise}cancel(Ie){this._done=!0;for(const qe of this._requests)qe.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var xe=r(1),Se=r(20);const Ee=/^file:\/\/\/[a-zA-Z]:\//;function Pe(Ye){const Xe=require$$5,je=Xe.parse(Ye);return je.protocol==="file:"||je.host?je:/^[a-z]:[/\\]/i.test(Ye)?Xe.parse(`file:///${Ye}`):(je.host||(je.protocol="file:"),je)}class Ce{constructor(Xe){this.source=Xe,this.url=Pe(Xe.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&Xe.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var Xe;return((Xe=this._fullRequestReader)==null?void 0:Xe._loaded)??0}getFullReader(){return(0,xe.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new Ie(this):new Ve(this),this._fullRequestReader}getRangeReader(Xe,je){if(je<=this._progressiveDataLength)return null;const Qe=this.isFsUrl?new qe(this,Xe,je):new Fe(this,Xe,je);return this._rangeRequestReaders.push(Qe),Qe}cancelAllRequests(Xe){var je;(je=this._fullRequestReader)==null||je.cancel(Xe);for(const Qe of this._rangeRequestReaders.slice(0))Qe.cancel(Xe)}}e.PDFNodeStream=Ce;class Re{constructor(Xe){this._url=Xe.url,this._done=!1,this._storedError=null,this.onProgress=null;const je=Xe.source;this._contentLength=je.length,this._loaded=0,this._filename=null,this._disableRange=je.disableRange||!1,this._rangeChunkSize=je.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!je.disableStream,this._isRangeSupported=!je.disableRange,this._readableStream=null,this._readCapability=new xe.PromiseCapability,this._headersCapability=new xe.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Qe;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const Xe=this._readableStream.read();return Xe===null?(this._readCapability=new xe.PromiseCapability,this.read()):(this._loaded+=Xe.length,(Qe=this.onProgress)==null||Qe.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(Xe).buffer,done:!1})}cancel(Xe){if(!this._readableStream){this._error(Xe);return}this._readableStream.destroy(Xe)}_error(Xe){this._storedError=Xe,this._readCapability.resolve()}_setReadableStream(Xe){this._readableStream=Xe,Xe.on("readable",()=>{this._readCapability.resolve()}),Xe.on("end",()=>{Xe.destroy(),this._done=!0,this._readCapability.resolve()}),Xe.on("error",je=>{this._error(je)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new xe.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Be{constructor(Xe){this._url=Xe.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new xe.PromiseCapability;const je=Xe.source;this._isStreamingSupported=!je.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Qe;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const Xe=this._readableStream.read();return Xe===null?(this._readCapability=new xe.PromiseCapability,this.read()):(this._loaded+=Xe.length,(Qe=this.onProgress)==null||Qe.call(this,{loaded:this._loaded}),{value:new Uint8Array(Xe).buffer,done:!1})}cancel(Xe){if(!this._readableStream){this._error(Xe);return}this._readableStream.destroy(Xe)}_error(Xe){this._storedError=Xe,this._readCapability.resolve()}_setReadableStream(Xe){this._readableStream=Xe,Xe.on("readable",()=>{this._readCapability.resolve()}),Xe.on("end",()=>{Xe.destroy(),this._done=!0,this._readCapability.resolve()}),Xe.on("error",je=>{this._error(je)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function Me(Ye,Xe){return{protocol:Ye.protocol,auth:Ye.auth,host:Ye.hostname,port:Ye.port,path:Ye.path,method:"GET",headers:Xe}}class Ve extends Re{constructor(Xe){super(Xe);const je=Qe=>{if(Qe.statusCode===404){const an=new xe.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=an,this._headersCapability.reject(an);return}this._headersCapability.resolve(),this._setReadableStream(Qe);const sn=an=>this._readableStream.headers[an.toLowerCase()],{allowRangeRequests:cn,suggestedLength:nn}=(0,Se.validateRangeRequestCapabilities)({getResponseHeader:sn,isHttp:Xe.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=cn,this._contentLength=nn||this._contentLength,this._filename=(0,Se.extractFilenameFromHeader)(sn)};if(this._request=null,this._url.protocol==="http:"){const Qe=require$$5;this._request=Qe.request(Me(this._url,Xe.httpHeaders),je)}else{const Qe=require$$5;this._request=Qe.request(Me(this._url,Xe.httpHeaders),je)}this._request.on("error",Qe=>{this._storedError=Qe,this._headersCapability.reject(Qe)}),this._request.end()}}class Fe extends Be{constructor(Xe,je,Qe){super(Xe),this._httpHeaders={};for(const cn in Xe.httpHeaders){const nn=Xe.httpHeaders[cn];nn!==void 0&&(this._httpHeaders[cn]=nn)}this._httpHeaders.Range=`bytes=${je}-${Qe-1}`;const sn=cn=>{if(cn.statusCode===404){const nn=new xe.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=nn;return}this._setReadableStream(cn)};if(this._request=null,this._url.protocol==="http:"){const cn=require$$5;this._request=cn.request(Me(this._url,this._httpHeaders),sn)}else{const cn=require$$5;this._request=cn.request(Me(this._url,this._httpHeaders),sn)}this._request.on("error",cn=>{this._storedError=cn}),this._request.end()}}class Ie extends Re{constructor(Xe){super(Xe);let je=decodeURIComponent(this._url.path);Ee.test(this._url.href)&&(je=je.replace(/^\//,""));const Qe=require$$5;Qe.lstat(je,(sn,cn)=>{if(sn){sn.code==="ENOENT"&&(sn=new xe.MissingPDFException(`Missing PDF "${je}".`)),this._storedError=sn,this._headersCapability.reject(sn);return}this._contentLength=cn.size,this._setReadableStream(Qe.createReadStream(je)),this._headersCapability.resolve()})}}class qe extends Be{constructor(Xe,je,Qe){super(Xe);let sn=decodeURIComponent(this._url.path);Ee.test(this._url.href)&&(sn=sn.replace(/^\//,""));const cn=require$$5;this._setReadableStream(cn.createReadStream(sn,{start:je,end:Qe-1}))}}}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var xe=r(6),Se=r(1);const Ee={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},Pe="http://www.w3.org/XML/1998/namespace",Ce="http://www.w3.org/1999/xlink",Re=["butt","round","square"],Be=["miter","round","bevel"],Me=function(cn,nn="",an=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!an)return URL.createObjectURL(new Blob([cn],{type:nn}));const Ze="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let tn=`data:${nn};base64,`;for(let We=0,An=cn.length;We<An;We+=3){const Je=cn[We]&255,St=cn[We+1]&255,hn=cn[We+2]&255,_n=Je>>2,yn=(Je&3)<<4|St>>4,mn=We+1<An?(St&15)<<2|hn>>6:64,Sn=We+2<An?hn&63:64;tn+=Ze[_n]+Ze[yn]+Ze[mn]+Ze[Sn]}return tn},Ve=(function(){const cn=new Uint8Array([137,80,78,71,13,10,26,10]),nn=12,an=new Int32Array(256);for(let hn=0;hn<256;hn++){let _n=hn;for(let yn=0;yn<8;yn++)_n=_n&1?3988292384^_n>>1&2147483647:_n>>1&2147483647;an[hn]=_n}function Ze(hn,_n,yn){let mn=-1;for(let Sn=_n;Sn<yn;Sn++){const Pn=(mn^hn[Sn])&255,pn=an[Pn];mn=mn>>>8^pn}return mn^-1}function tn(hn,_n,yn,mn){let Sn=mn;const Pn=_n.length;yn[Sn]=Pn>>24&255,yn[Sn+1]=Pn>>16&255,yn[Sn+2]=Pn>>8&255,yn[Sn+3]=Pn&255,Sn+=4,yn[Sn]=hn.charCodeAt(0)&255,yn[Sn+1]=hn.charCodeAt(1)&255,yn[Sn+2]=hn.charCodeAt(2)&255,yn[Sn+3]=hn.charCodeAt(3)&255,Sn+=4,yn.set(_n,Sn),Sn+=_n.length;const pn=Ze(yn,mn+4,Sn);yn[Sn]=pn>>24&255,yn[Sn+1]=pn>>16&255,yn[Sn+2]=pn>>8&255,yn[Sn+3]=pn&255}function We(hn,_n,yn){let mn=1,Sn=0;for(let Pn=_n;Pn<yn;++Pn)mn=(mn+(hn[Pn]&255))%65521,Sn=(Sn+mn)%65521;return Sn<<16|mn}function An(hn){if(!Se.isNodeJS)return Je(hn);try{const _n=parseInt(process.versions.node)>=8?hn:Buffer.from(hn),yn=require$$5.deflateSync(_n,{level:9});return yn instanceof Uint8Array?yn:new Uint8Array(yn)}catch(_n){(0,Se.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+_n)}return Je(hn)}function Je(hn){let _n=hn.length;const yn=65535,mn=Math.ceil(_n/yn),Sn=new Uint8Array(2+_n+mn*5+4);let Pn=0;Sn[Pn++]=120,Sn[Pn++]=156;let pn=0;for(;_n>yn;)Sn[Pn++]=0,Sn[Pn++]=255,Sn[Pn++]=255,Sn[Pn++]=0,Sn[Pn++]=0,Sn.set(hn.subarray(pn,pn+yn),Pn),Pn+=yn,pn+=yn,_n-=yn;Sn[Pn++]=1,Sn[Pn++]=_n&255,Sn[Pn++]=_n>>8&255,Sn[Pn++]=~_n&65535&255,Sn[Pn++]=(~_n&65535)>>8&255,Sn.set(hn.subarray(pn),Pn),Pn+=hn.length-pn;const on=We(hn,0,hn.length);return Sn[Pn++]=on>>24&255,Sn[Pn++]=on>>16&255,Sn[Pn++]=on>>8&255,Sn[Pn++]=on&255,Sn}function St(hn,_n,yn,mn){const Sn=hn.width,Pn=hn.height;let pn,on,xn;const Ge=hn.data;switch(_n){case Se.ImageKind.GRAYSCALE_1BPP:on=0,pn=1,xn=Sn+7>>3;break;case Se.ImageKind.RGB_24BPP:on=2,pn=8,xn=Sn*3;break;case Se.ImageKind.RGBA_32BPP:on=6,pn=8,xn=Sn*4;break;default:throw new Error("invalid format")}const Oe=new Uint8Array((1+xn)*Pn);let $e=0,rn=0;for(let jn=0;jn<Pn;++jn)Oe[$e++]=0,Oe.set(Ge.subarray(rn,rn+xn),$e),rn+=xn,$e+=xn;if(_n===Se.ImageKind.GRAYSCALE_1BPP&&mn){$e=0;for(let jn=0;jn<Pn;jn++){$e++;for(let Wn=0;Wn<xn;Wn++)Oe[$e++]^=255}}const fn=new Uint8Array([Sn>>24&255,Sn>>16&255,Sn>>8&255,Sn&255,Pn>>24&255,Pn>>16&255,Pn>>8&255,Pn&255,pn,on,0,0,0]),gn=An(Oe),vn=cn.length+nn*3+fn.length+gn.length,wn=new Uint8Array(vn);let On=0;return wn.set(cn,On),On+=cn.length,tn("IHDR",fn,wn,On),On+=nn+fn.length,tn("IDATA",gn,wn,On),On+=nn+gn.length,tn("IEND",new Uint8Array(0),wn,On),Me(wn,"image/png",yn)}return function(_n,yn,mn){const Sn=_n.kind===void 0?Se.ImageKind.GRAYSCALE_1BPP:_n.kind;return St(_n,Sn,yn,mn)}})();class Fe{constructor(){this.fontSizeScale=1,this.fontWeight=Ee.fontWeight,this.fontSize=0,this.textMatrix=Se.IDENTITY_MATRIX,this.fontMatrix=Se.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=Se.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=Ee.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(nn,an){this.x=nn,this.y=an}}function Ie(cn){let nn=[];const an=[];for(const Ze of cn){if(Ze.fn==="save"){nn.push({fnId:92,fn:"group",items:[]}),an.push(nn),nn=nn.at(-1).items;continue}Ze.fn==="restore"?nn=an.pop():nn.push(Ze)}return nn}function qe(cn){if(Number.isInteger(cn))return cn.toString();const nn=cn.toFixed(10);let an=nn.length-1;if(nn[an]!=="0")return nn;do an--;while(nn[an]==="0");return nn.substring(0,nn[an]==="."?an:an+1)}function Ye(cn){if(cn[4]===0&&cn[5]===0){if(cn[1]===0&&cn[2]===0)return cn[0]===1&&cn[3]===1?"":`scale(${qe(cn[0])} ${qe(cn[3])})`;if(cn[0]===cn[3]&&cn[1]===-cn[2]){const nn=Math.acos(cn[0])*180/Math.PI;return`rotate(${qe(nn)})`}}else if(cn[0]===1&&cn[1]===0&&cn[2]===0&&cn[3]===1)return`translate(${qe(cn[4])} ${qe(cn[5])})`;return`matrix(${qe(cn[0])} ${qe(cn[1])} ${qe(cn[2])} ${qe(cn[3])} ${qe(cn[4])} ${qe(cn[5])})`}let Xe=0,je=0,Qe=0;class sn{constructor(nn,an,Ze=!1){(0,xe.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new xe.DOMSVGFactory,this.current=new Fe,this.transformMatrix=Se.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=nn,this.objs=an,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!Ze,this._operatorIdMapping=[];for(const tn in Se.OPS)this._operatorIdMapping[Se.OPS[tn]]=tn}getObject(nn,an=null){return typeof nn=="string"?nn.startsWith("g_")?this.commonObjs.get(nn):this.objs.get(nn):an}save(){this.transformStack.push(this.transformMatrix);const nn=this.current;this.extraStack.push(nn),this.current=nn.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(nn){this.save(),this.executeOpTree(nn),this.restore()}loadDependencies(nn){const an=nn.fnArray,Ze=nn.argsArray;for(let tn=0,We=an.length;tn<We;tn++)if(an[tn]===Se.OPS.dependency)for(const An of Ze[tn]){const Je=An.startsWith("g_")?this.commonObjs:this.objs,St=new Promise(hn=>{Je.get(An,hn)});this.current.dependencies.push(St)}return Promise.all(this.current.dependencies)}transform(nn,an,Ze,tn,We,An){const Je=[nn,an,Ze,tn,We,An];this.transformMatrix=Se.Util.transform(this.transformMatrix,Je),this.tgrp=null}getSVG(nn,an){this.viewport=an;const Ze=this._initialize(an);return this.loadDependencies(nn).then(()=>(this.transformMatrix=Se.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(nn)),Ze))}convertOpList(nn){const an=this._operatorIdMapping,Ze=nn.argsArray,tn=nn.fnArray,We=[];for(let An=0,Je=tn.length;An<Je;An++){const St=tn[An];We.push({fnId:St,fn:an[St],args:Ze[An]})}return Ie(We)}executeOpTree(nn){for(const an of nn){const Ze=an.fn,tn=an.fnId,We=an.args;switch(tn|0){case Se.OPS.beginText:this.beginText();break;case Se.OPS.dependency:break;case Se.OPS.setLeading:this.setLeading(We);break;case Se.OPS.setLeadingMoveText:this.setLeadingMoveText(We[0],We[1]);break;case Se.OPS.setFont:this.setFont(We);break;case Se.OPS.showText:this.showText(We[0]);break;case Se.OPS.showSpacedText:this.showText(We[0]);break;case Se.OPS.endText:this.endText();break;case Se.OPS.moveText:this.moveText(We[0],We[1]);break;case Se.OPS.setCharSpacing:this.setCharSpacing(We[0]);break;case Se.OPS.setWordSpacing:this.setWordSpacing(We[0]);break;case Se.OPS.setHScale:this.setHScale(We[0]);break;case Se.OPS.setTextMatrix:this.setTextMatrix(We[0],We[1],We[2],We[3],We[4],We[5]);break;case Se.OPS.setTextRise:this.setTextRise(We[0]);break;case Se.OPS.setTextRenderingMode:this.setTextRenderingMode(We[0]);break;case Se.OPS.setLineWidth:this.setLineWidth(We[0]);break;case Se.OPS.setLineJoin:this.setLineJoin(We[0]);break;case Se.OPS.setLineCap:this.setLineCap(We[0]);break;case Se.OPS.setMiterLimit:this.setMiterLimit(We[0]);break;case Se.OPS.setFillRGBColor:this.setFillRGBColor(We[0],We[1],We[2]);break;case Se.OPS.setStrokeRGBColor:this.setStrokeRGBColor(We[0],We[1],We[2]);break;case Se.OPS.setStrokeColorN:this.setStrokeColorN(We);break;case Se.OPS.setFillColorN:this.setFillColorN(We);break;case Se.OPS.shadingFill:this.shadingFill(We[0]);break;case Se.OPS.setDash:this.setDash(We[0],We[1]);break;case Se.OPS.setRenderingIntent:this.setRenderingIntent(We[0]);break;case Se.OPS.setFlatness:this.setFlatness(We[0]);break;case Se.OPS.setGState:this.setGState(We[0]);break;case Se.OPS.fill:this.fill();break;case Se.OPS.eoFill:this.eoFill();break;case Se.OPS.stroke:this.stroke();break;case Se.OPS.fillStroke:this.fillStroke();break;case Se.OPS.eoFillStroke:this.eoFillStroke();break;case Se.OPS.clip:this.clip("nonzero");break;case Se.OPS.eoClip:this.clip("evenodd");break;case Se.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case Se.OPS.paintImageXObject:this.paintImageXObject(We[0]);break;case Se.OPS.paintInlineImageXObject:this.paintInlineImageXObject(We[0]);break;case Se.OPS.paintImageMaskXObject:this.paintImageMaskXObject(We[0]);break;case Se.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(We[0],We[1]);break;case Se.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case Se.OPS.closePath:this.closePath();break;case Se.OPS.closeStroke:this.closeStroke();break;case Se.OPS.closeFillStroke:this.closeFillStroke();break;case Se.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case Se.OPS.nextLine:this.nextLine();break;case Se.OPS.transform:this.transform(We[0],We[1],We[2],We[3],We[4],We[5]);break;case Se.OPS.constructPath:this.constructPath(We[0],We[1]);break;case Se.OPS.endPath:this.endPath();break;case 92:this.group(an.items);break;default:(0,Se.warn)(`Unimplemented operator ${Ze}`);break}}}setWordSpacing(nn){this.current.wordSpacing=nn}setCharSpacing(nn){this.current.charSpacing=nn}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(nn,an,Ze,tn,We,An){const Je=this.current;Je.textMatrix=Je.lineMatrix=[nn,an,Ze,tn,We,An],Je.textMatrixScale=Math.hypot(nn,an),Je.x=Je.lineX=0,Je.y=Je.lineY=0,Je.xcoords=[],Je.ycoords=[],Je.tspan=this.svgFactory.createElement("svg:tspan"),Je.tspan.setAttributeNS(null,"font-family",Je.fontFamily),Je.tspan.setAttributeNS(null,"font-size",`${qe(Je.fontSize)}px`),Je.tspan.setAttributeNS(null,"y",qe(-Je.y)),Je.txtElement=this.svgFactory.createElement("svg:text"),Je.txtElement.append(Je.tspan)}beginText(){const nn=this.current;nn.x=nn.lineX=0,nn.y=nn.lineY=0,nn.textMatrix=Se.IDENTITY_MATRIX,nn.lineMatrix=Se.IDENTITY_MATRIX,nn.textMatrixScale=1,nn.tspan=this.svgFactory.createElement("svg:tspan"),nn.txtElement=this.svgFactory.createElement("svg:text"),nn.txtgrp=this.svgFactory.createElement("svg:g"),nn.xcoords=[],nn.ycoords=[]}moveText(nn,an){const Ze=this.current;Ze.x=Ze.lineX+=nn,Ze.y=Ze.lineY+=an,Ze.xcoords=[],Ze.ycoords=[],Ze.tspan=this.svgFactory.createElement("svg:tspan"),Ze.tspan.setAttributeNS(null,"font-family",Ze.fontFamily),Ze.tspan.setAttributeNS(null,"font-size",`${qe(Ze.fontSize)}px`),Ze.tspan.setAttributeNS(null,"y",qe(-Ze.y))}showText(nn){const an=this.current,Ze=an.font,tn=an.fontSize;if(tn===0)return;const We=an.fontSizeScale,An=an.charSpacing,Je=an.wordSpacing,St=an.fontDirection,hn=an.textHScale*St,_n=Ze.vertical,yn=_n?1:-1,mn=Ze.defaultVMetrics,Sn=tn*an.fontMatrix[0];let Pn=0;for(const xn of nn){if(xn===null){Pn+=St*Je;continue}else if(typeof xn=="number"){Pn+=yn*xn*tn/1e3;continue}const Ge=(xn.isSpace?Je:0)+An,Oe=xn.fontChar;let $e,rn,fn=xn.width;if(_n){let vn;const wn=xn.vmetric||mn;vn=xn.vmetric?wn[1]:fn*.5,vn=-vn*Sn;const On=wn[2]*Sn;fn=wn?-wn[0]:fn,$e=vn/We,rn=(Pn+On)/We}else $e=Pn/We,rn=0;(xn.isInFont||Ze.missingFile)&&(an.xcoords.push(an.x+$e),_n&&an.ycoords.push(-an.y+rn),an.tspan.textContent+=Oe);const gn=_n?fn*Sn-Ge*St:fn*Sn+Ge*St;Pn+=gn}an.tspan.setAttributeNS(null,"x",an.xcoords.map(qe).join(" ")),_n?an.tspan.setAttributeNS(null,"y",an.ycoords.map(qe).join(" ")):an.tspan.setAttributeNS(null,"y",qe(-an.y)),_n?an.y-=Pn:an.x+=Pn*hn,an.tspan.setAttributeNS(null,"font-family",an.fontFamily),an.tspan.setAttributeNS(null,"font-size",`${qe(an.fontSize)}px`),an.fontStyle!==Ee.fontStyle&&an.tspan.setAttributeNS(null,"font-style",an.fontStyle),an.fontWeight!==Ee.fontWeight&&an.tspan.setAttributeNS(null,"font-weight",an.fontWeight);const pn=an.textRenderingMode&Se.TextRenderingMode.FILL_STROKE_MASK;if(pn===Se.TextRenderingMode.FILL||pn===Se.TextRenderingMode.FILL_STROKE?(an.fillColor!==Ee.fillColor&&an.tspan.setAttributeNS(null,"fill",an.fillColor),an.fillAlpha<1&&an.tspan.setAttributeNS(null,"fill-opacity",an.fillAlpha)):an.textRenderingMode===Se.TextRenderingMode.ADD_TO_PATH?an.tspan.setAttributeNS(null,"fill","transparent"):an.tspan.setAttributeNS(null,"fill","none"),pn===Se.TextRenderingMode.STROKE||pn===Se.TextRenderingMode.FILL_STROKE){const xn=1/(an.textMatrixScale||1);this._setStrokeAttributes(an.tspan,xn)}let on=an.textMatrix;an.textRise!==0&&(on=on.slice(),on[5]+=an.textRise),an.txtElement.setAttributeNS(null,"transform",`${Ye(on)} scale(${qe(hn)}, -1)`),an.txtElement.setAttributeNS(Pe,"xml:space","preserve"),an.txtElement.append(an.tspan),an.txtgrp.append(an.txtElement),this._ensureTransformGroup().append(an.txtElement)}setLeadingMoveText(nn,an){this.setLeading(-an),this.moveText(nn,an)}addFontStyle(nn){if(!nn.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const an=Me(nn.data,nn.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${nn.loadedName}"; src: url(${an}); }
`}setFont(nn){const an=this.current,Ze=this.commonObjs.get(nn[0]);let tn=nn[1];an.font=Ze,this.embedFonts&&!Ze.missingFile&&!this.embeddedFonts[Ze.loadedName]&&(this.addFontStyle(Ze),this.embeddedFonts[Ze.loadedName]=Ze),an.fontMatrix=Ze.fontMatrix||Se.FONT_IDENTITY_MATRIX;let We="normal";Ze.black?We="900":Ze.bold&&(We="bold");const An=Ze.italic?"italic":"normal";tn<0?(tn=-tn,an.fontDirection=-1):an.fontDirection=1,an.fontSize=tn,an.fontFamily=Ze.loadedName,an.fontWeight=We,an.fontStyle=An,an.tspan=this.svgFactory.createElement("svg:tspan"),an.tspan.setAttributeNS(null,"y",qe(-an.y)),an.xcoords=[],an.ycoords=[]}endText(){var an;const nn=this.current;nn.textRenderingMode&Se.TextRenderingMode.ADD_TO_PATH_FLAG&&((an=nn.txtElement)!=null&&an.hasChildNodes())&&(nn.element=nn.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(nn){nn>0&&(this.current.lineWidth=nn)}setLineCap(nn){this.current.lineCap=Re[nn]}setLineJoin(nn){this.current.lineJoin=Be[nn]}setMiterLimit(nn){this.current.miterLimit=nn}setStrokeAlpha(nn){this.current.strokeAlpha=nn}setStrokeRGBColor(nn,an,Ze){this.current.strokeColor=Se.Util.makeHexColor(nn,an,Ze)}setFillAlpha(nn){this.current.fillAlpha=nn}setFillRGBColor(nn,an,Ze){this.current.fillColor=Se.Util.makeHexColor(nn,an,Ze),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(nn){this.current.strokeColor=this._makeColorN_Pattern(nn)}setFillColorN(nn){this.current.fillColor=this._makeColorN_Pattern(nn)}shadingFill(nn){const{width:an,height:Ze}=this.viewport,tn=Se.Util.inverseTransform(this.transformMatrix),[We,An,Je,St]=Se.Util.getAxialAlignedBoundingBox([0,0,an,Ze],tn),hn=this.svgFactory.createElement("svg:rect");hn.setAttributeNS(null,"x",We),hn.setAttributeNS(null,"y",An),hn.setAttributeNS(null,"width",Je-We),hn.setAttributeNS(null,"height",St-An),hn.setAttributeNS(null,"fill",this._makeShadingPattern(nn)),this.current.fillAlpha<1&&hn.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(hn)}_makeColorN_Pattern(nn){return nn[0]==="TilingPattern"?this._makeTilingPattern(nn):this._makeShadingPattern(nn)}_makeTilingPattern(nn){const an=nn[1],Ze=nn[2],tn=nn[3]||Se.IDENTITY_MATRIX,[We,An,Je,St]=nn[4],hn=nn[5],_n=nn[6],yn=nn[7],mn=`shading${Qe++}`,[Sn,Pn,pn,on]=Se.Util.normalizeRect([...Se.Util.applyTransform([We,An],tn),...Se.Util.applyTransform([Je,St],tn)]),[xn,Ge]=Se.Util.singularValueDecompose2dScale(tn),Oe=hn*xn,$e=_n*Ge,rn=this.svgFactory.createElement("svg:pattern");rn.setAttributeNS(null,"id",mn),rn.setAttributeNS(null,"patternUnits","userSpaceOnUse"),rn.setAttributeNS(null,"width",Oe),rn.setAttributeNS(null,"height",$e),rn.setAttributeNS(null,"x",`${Sn}`),rn.setAttributeNS(null,"y",`${Pn}`);const fn=this.svg,gn=this.transformMatrix,vn=this.current.fillColor,wn=this.current.strokeColor,On=this.svgFactory.create(pn-Sn,on-Pn);if(this.svg=On,this.transformMatrix=tn,yn===2){const jn=Se.Util.makeHexColor(...an);this.current.fillColor=jn,this.current.strokeColor=jn}return this.executeOpTree(this.convertOpList(Ze)),this.svg=fn,this.transformMatrix=gn,this.current.fillColor=vn,this.current.strokeColor=wn,rn.append(On.childNodes[0]),this.defs.append(rn),`url(#${mn})`}_makeShadingPattern(nn){switch(typeof nn=="string"&&(nn=this.objs.get(nn)),nn[0]){case"RadialAxial":const an=`shading${Qe++}`,Ze=nn[3];let tn;switch(nn[1]){case"axial":const We=nn[4],An=nn[5];tn=this.svgFactory.createElement("svg:linearGradient"),tn.setAttributeNS(null,"id",an),tn.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),tn.setAttributeNS(null,"x1",We[0]),tn.setAttributeNS(null,"y1",We[1]),tn.setAttributeNS(null,"x2",An[0]),tn.setAttributeNS(null,"y2",An[1]);break;case"radial":const Je=nn[4],St=nn[5],hn=nn[6],_n=nn[7];tn=this.svgFactory.createElement("svg:radialGradient"),tn.setAttributeNS(null,"id",an),tn.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),tn.setAttributeNS(null,"cx",St[0]),tn.setAttributeNS(null,"cy",St[1]),tn.setAttributeNS(null,"r",_n),tn.setAttributeNS(null,"fx",Je[0]),tn.setAttributeNS(null,"fy",Je[1]),tn.setAttributeNS(null,"fr",hn);break;default:throw new Error(`Unknown RadialAxial type: ${nn[1]}`)}for(const We of Ze){const An=this.svgFactory.createElement("svg:stop");An.setAttributeNS(null,"offset",We[0]),An.setAttributeNS(null,"stop-color",We[1]),tn.append(An)}return this.defs.append(tn),`url(#${an})`;case"Mesh":return(0,Se.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${nn[0]}`)}}setDash(nn,an){this.current.dashArray=nn,this.current.dashPhase=an}constructPath(nn,an){const Ze=this.current;let tn=Ze.x,We=Ze.y,An=[],Je=0;for(const St of nn)switch(St|0){case Se.OPS.rectangle:tn=an[Je++],We=an[Je++];const hn=an[Je++],_n=an[Je++],yn=tn+hn,mn=We+_n;An.push("M",qe(tn),qe(We),"L",qe(yn),qe(We),"L",qe(yn),qe(mn),"L",qe(tn),qe(mn),"Z");break;case Se.OPS.moveTo:tn=an[Je++],We=an[Je++],An.push("M",qe(tn),qe(We));break;case Se.OPS.lineTo:tn=an[Je++],We=an[Je++],An.push("L",qe(tn),qe(We));break;case Se.OPS.curveTo:tn=an[Je+4],We=an[Je+5],An.push("C",qe(an[Je]),qe(an[Je+1]),qe(an[Je+2]),qe(an[Je+3]),qe(tn),qe(We)),Je+=6;break;case Se.OPS.curveTo2:An.push("C",qe(tn),qe(We),qe(an[Je]),qe(an[Je+1]),qe(an[Je+2]),qe(an[Je+3])),tn=an[Je+2],We=an[Je+3],Je+=4;break;case Se.OPS.curveTo3:tn=an[Je+2],We=an[Je+3],An.push("C",qe(an[Je]),qe(an[Je+1]),qe(tn),qe(We),qe(tn),qe(We)),Je+=4;break;case Se.OPS.closePath:An.push("Z");break}An=An.join(" "),Ze.path&&nn.length>0&&nn[0]!==Se.OPS.rectangle&&nn[0]!==Se.OPS.moveTo?An=Ze.path.getAttributeNS(null,"d")+An:(Ze.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(Ze.path)),Ze.path.setAttributeNS(null,"d",An),Ze.path.setAttributeNS(null,"fill","none"),Ze.element=Ze.path,Ze.setCurrentPoint(tn,We)}endPath(){const nn=this.current;if(nn.path=null,!this.pendingClip)return;if(!nn.element){this.pendingClip=null;return}const an=`clippath${Xe++}`,Ze=this.svgFactory.createElement("svg:clipPath");Ze.setAttributeNS(null,"id",an),Ze.setAttributeNS(null,"transform",Ye(this.transformMatrix));const tn=nn.element.cloneNode(!0);if(this.pendingClip==="evenodd"?tn.setAttributeNS(null,"clip-rule","evenodd"):tn.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,Ze.append(tn),this.defs.append(Ze),nn.activeClipUrl){nn.clipGroup=null;for(const We of this.extraStack)We.clipGroup=null;Ze.setAttributeNS(null,"clip-path",nn.activeClipUrl)}nn.activeClipUrl=`url(#${an})`,this.tgrp=null}clip(nn){this.pendingClip=nn}closePath(){const nn=this.current;if(nn.path){const an=`${nn.path.getAttributeNS(null,"d")}Z`;nn.path.setAttributeNS(null,"d",an)}}setLeading(nn){this.current.leading=-nn}setTextRise(nn){this.current.textRise=nn}setTextRenderingMode(nn){this.current.textRenderingMode=nn}setHScale(nn){this.current.textHScale=nn/100}setRenderingIntent(nn){}setFlatness(nn){}setGState(nn){for(const[an,Ze]of nn)switch(an){case"LW":this.setLineWidth(Ze);break;case"LC":this.setLineCap(Ze);break;case"LJ":this.setLineJoin(Ze);break;case"ML":this.setMiterLimit(Ze);break;case"D":this.setDash(Ze[0],Ze[1]);break;case"RI":this.setRenderingIntent(Ze);break;case"FL":this.setFlatness(Ze);break;case"Font":this.setFont(Ze);break;case"CA":this.setStrokeAlpha(Ze);break;case"ca":this.setFillAlpha(Ze);break;default:(0,Se.warn)(`Unimplemented graphic state operator ${an}`);break}}fill(){const nn=this.current;nn.element&&(nn.element.setAttributeNS(null,"fill",nn.fillColor),nn.element.setAttributeNS(null,"fill-opacity",nn.fillAlpha),this.endPath())}stroke(){const nn=this.current;nn.element&&(this._setStrokeAttributes(nn.element),nn.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(nn,an=1){const Ze=this.current;let tn=Ze.dashArray;an!==1&&tn.length>0&&(tn=tn.map(function(We){return an*We})),nn.setAttributeNS(null,"stroke",Ze.strokeColor),nn.setAttributeNS(null,"stroke-opacity",Ze.strokeAlpha),nn.setAttributeNS(null,"stroke-miterlimit",qe(Ze.miterLimit)),nn.setAttributeNS(null,"stroke-linecap",Ze.lineCap),nn.setAttributeNS(null,"stroke-linejoin",Ze.lineJoin),nn.setAttributeNS(null,"stroke-width",qe(an*Ze.lineWidth)+"px"),nn.setAttributeNS(null,"stroke-dasharray",tn.map(qe).join(" ")),nn.setAttributeNS(null,"stroke-dashoffset",qe(an*Ze.dashPhase)+"px")}eoFill(){var nn;(nn=this.current.element)==null||nn.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var nn;(nn=this.current.element)==null||nn.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const nn=this.svgFactory.createElement("svg:rect");nn.setAttributeNS(null,"x","0"),nn.setAttributeNS(null,"y","0"),nn.setAttributeNS(null,"width","1px"),nn.setAttributeNS(null,"height","1px"),nn.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(nn)}paintImageXObject(nn){const an=this.getObject(nn);if(!an){(0,Se.warn)(`Dependent image with object ID ${nn} is not ready yet`);return}this.paintInlineImageXObject(an)}paintInlineImageXObject(nn,an){const Ze=nn.width,tn=nn.height,We=Ve(nn,this.forceDataSchema,!!an),An=this.svgFactory.createElement("svg:rect");An.setAttributeNS(null,"x","0"),An.setAttributeNS(null,"y","0"),An.setAttributeNS(null,"width",qe(Ze)),An.setAttributeNS(null,"height",qe(tn)),this.current.element=An,this.clip("nonzero");const Je=this.svgFactory.createElement("svg:image");Je.setAttributeNS(Ce,"xlink:href",We),Je.setAttributeNS(null,"x","0"),Je.setAttributeNS(null,"y",qe(-tn)),Je.setAttributeNS(null,"width",qe(Ze)+"px"),Je.setAttributeNS(null,"height",qe(tn)+"px"),Je.setAttributeNS(null,"transform",`scale(${qe(1/Ze)} ${qe(-1/tn)})`),an?an.append(Je):this._ensureTransformGroup().append(Je)}paintImageMaskXObject(nn){const an=this.getObject(nn.data,nn);if(an.bitmap){(0,Se.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const Ze=this.current,tn=an.width,We=an.height,An=Ze.fillColor;Ze.maskId=`mask${je++}`;const Je=this.svgFactory.createElement("svg:mask");Je.setAttributeNS(null,"id",Ze.maskId);const St=this.svgFactory.createElement("svg:rect");St.setAttributeNS(null,"x","0"),St.setAttributeNS(null,"y","0"),St.setAttributeNS(null,"width",qe(tn)),St.setAttributeNS(null,"height",qe(We)),St.setAttributeNS(null,"fill",An),St.setAttributeNS(null,"mask",`url(#${Ze.maskId})`),this.defs.append(Je),this._ensureTransformGroup().append(St),this.paintInlineImageXObject(an,Je)}paintFormXObjectBegin(nn,an){if(Array.isArray(nn)&&nn.length===6&&this.transform(nn[0],nn[1],nn[2],nn[3],nn[4],nn[5]),an){const Ze=an[2]-an[0],tn=an[3]-an[1],We=this.svgFactory.createElement("svg:rect");We.setAttributeNS(null,"x",an[0]),We.setAttributeNS(null,"y",an[1]),We.setAttributeNS(null,"width",qe(Ze)),We.setAttributeNS(null,"height",qe(tn)),this.current.element=We,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(nn){const an=this.svgFactory.create(nn.width,nn.height),Ze=this.svgFactory.createElement("svg:defs");an.append(Ze),this.defs=Ze;const tn=this.svgFactory.createElement("svg:g");return tn.setAttributeNS(null,"transform",Ye(nn.transform)),an.append(tn),this.svg=tn,an}_ensureClipGroup(){if(!this.current.clipGroup){const nn=this.svgFactory.createElement("svg:g");nn.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(nn),this.current.clipGroup=nn}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",Ye(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=sn}),((t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class r{static textContent(Se){const Ee=[],Pe={items:Ee,styles:Object.create(null)};function Ce(Re){var Ve;if(!Re)return;let Be=null;const Me=Re.name;if(Me==="#text")Be=Re.value;else if(r.shouldBuildText(Me))(Ve=Re==null?void 0:Re.attributes)!=null&&Ve.textContent?Be=Re.attributes.textContent:Re.value&&(Be=Re.value);else return;if(Be!==null&&Ee.push({str:Be}),!!Re.children)for(const Fe of Re.children)Ce(Fe)}return Ce(Se),Pe}static shouldBuildText(Se){return!(Se==="textarea"||Se==="input"||Se==="option"||Se==="select")}}e.XfaText=r}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=Ye,e.updateTextLayer=Xe;var xe=r(1),Se=r(6);const Ee=1e5,Pe=30,Ce=.8,Re=new Map;function Be(je,Qe){let sn;if(Qe&&xe.FeatureTest.isOffscreenCanvasSupported)sn=new OffscreenCanvas(je,je).getContext("2d",{alpha:!1});else{const cn=document.createElement("canvas");cn.width=cn.height=je,sn=cn.getContext("2d",{alpha:!1})}return sn}function Me(je,Qe){const sn=Re.get(je);if(sn)return sn;const cn=Be(Pe,Qe);cn.font=`${Pe}px ${je}`;const nn=cn.measureText("");let an=nn.fontBoundingBoxAscent,Ze=Math.abs(nn.fontBoundingBoxDescent);if(an){const We=an/(an+Ze);return Re.set(je,We),cn.canvas.width=cn.canvas.height=0,We}cn.strokeStyle="red",cn.clearRect(0,0,Pe,Pe),cn.strokeText("g",0,0);let tn=cn.getImageData(0,0,Pe,Pe).data;Ze=0;for(let We=tn.length-1-3;We>=0;We-=4)if(tn[We]>0){Ze=Math.ceil(We/4/Pe);break}cn.clearRect(0,0,Pe,Pe),cn.strokeText("A",0,Pe),tn=cn.getImageData(0,0,Pe,Pe).data,an=0;for(let We=0,An=tn.length;We<An;We+=4)if(tn[We]>0){an=Pe-Math.floor(We/4/Pe);break}if(cn.canvas.width=cn.canvas.height=0,an){const We=an/(an+Ze);return Re.set(je,We),We}return Re.set(je,Ce),Ce}function Ve(je,Qe,sn){const cn=document.createElement("span"),nn={angle:0,canvasWidth:0,hasText:Qe.str!=="",hasEOL:Qe.hasEOL,fontSize:0};je._textDivs.push(cn);const an=xe.Util.transform(je._transform,Qe.transform);let Ze=Math.atan2(an[1],an[0]);const tn=sn[Qe.fontName];tn.vertical&&(Ze+=Math.PI/2);const We=Math.hypot(an[2],an[3]),An=We*Me(tn.fontFamily,je._isOffscreenCanvasSupported);let Je,St;Ze===0?(Je=an[4],St=an[5]-An):(Je=an[4]+An*Math.sin(Ze),St=an[5]-An*Math.cos(Ze));const hn="calc(var(--scale-factor)*",_n=cn.style;je._container===je._rootContainer?(_n.left=`${(100*Je/je._pageWidth).toFixed(2)}%`,_n.top=`${(100*St/je._pageHeight).toFixed(2)}%`):(_n.left=`${hn}${Je.toFixed(2)}px)`,_n.top=`${hn}${St.toFixed(2)}px)`),_n.fontSize=`${hn}${We.toFixed(2)}px)`,_n.fontFamily=tn.fontFamily,nn.fontSize=We,cn.setAttribute("role","presentation"),cn.textContent=Qe.str,cn.dir=Qe.dir,je._fontInspectorEnabled&&(cn.dataset.fontName=Qe.fontName),Ze!==0&&(nn.angle=Ze*(180/Math.PI));let yn=!1;if(Qe.str.length>1)yn=!0;else if(Qe.str!==" "&&Qe.transform[0]!==Qe.transform[3]){const mn=Math.abs(Qe.transform[0]),Sn=Math.abs(Qe.transform[3]);mn!==Sn&&Math.max(mn,Sn)/Math.min(mn,Sn)>1.5&&(yn=!0)}yn&&(nn.canvasWidth=tn.vertical?Qe.height:Qe.width),je._textDivProperties.set(cn,nn),je._isReadableStream&&je._layoutText(cn)}function Fe(je){const{div:Qe,scale:sn,properties:cn,ctx:nn,prevFontSize:an,prevFontFamily:Ze}=je,{style:tn}=Qe;let We="";if(cn.canvasWidth!==0&&cn.hasText){const{fontFamily:An}=tn,{canvasWidth:Je,fontSize:St}=cn;(an!==St||Ze!==An)&&(nn.font=`${St*sn}px ${An}`,je.prevFontSize=St,je.prevFontFamily=An);const{width:hn}=nn.measureText(Qe.textContent);hn>0&&(We=`scaleX(${Je*sn/hn})`)}cn.angle!==0&&(We=`rotate(${cn.angle}deg) ${We}`),We.length>0&&(tn.transform=We)}function Ie(je){if(je._canceled)return;const Qe=je._textDivs,sn=je._capability;if(Qe.length>Ee){sn.resolve();return}if(!je._isReadableStream)for(const nn of Qe)je._layoutText(nn);sn.resolve()}class qe{constructor({textContentSource:Qe,container:sn,viewport:cn,textDivs:nn,textDivProperties:an,textContentItemsStr:Ze,isOffscreenCanvasSupported:tn}){var hn;this._textContentSource=Qe,this._isReadableStream=Qe instanceof ReadableStream,this._container=this._rootContainer=sn,this._textDivs=nn||[],this._textContentItemsStr=Ze||[],this._isOffscreenCanvasSupported=tn,this._fontInspectorEnabled=!!((hn=globalThis.FontInspector)!=null&&hn.enabled),this._reader=null,this._textDivProperties=an||new WeakMap,this._canceled=!1,this._capability=new xe.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:cn.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:Be(0,tn)};const{pageWidth:We,pageHeight:An,pageX:Je,pageY:St}=cn.rawDims;this._transform=[1,0,0,-1,-Je,St+An],this._pageWidth=We,this._pageHeight=An,(0,Se.setLayerDimensions)(sn,cn),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new xe.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new xe.AbortException("TextLayer task cancelled."))}_processItems(Qe,sn){for(const cn of Qe){if(cn.str===void 0){if(cn.type==="beginMarkedContentProps"||cn.type==="beginMarkedContent"){const nn=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),cn.id!==null&&this._container.setAttribute("id",`${cn.id}`),nn.append(this._container)}else cn.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(cn.str),Ve(this,cn,sn)}}_layoutText(Qe){const sn=this._layoutTextParams.properties=this._textDivProperties.get(Qe);if(this._layoutTextParams.div=Qe,Fe(this._layoutTextParams),sn.hasText&&this._container.append(Qe),sn.hasEOL){const cn=document.createElement("br");cn.setAttribute("role","presentation"),this._container.append(cn)}}_render(){const Qe=new xe.PromiseCapability;let sn=Object.create(null);if(this._isReadableStream){const cn=()=>{this._reader.read().then(({value:nn,done:an})=>{if(an){Qe.resolve();return}Object.assign(sn,nn.styles),this._processItems(nn.items,sn),cn()},Qe.reject)};this._reader=this._textContentSource.getReader(),cn()}else if(this._textContentSource){const{items:cn,styles:nn}=this._textContentSource;this._processItems(cn,nn),Qe.resolve()}else throw new Error('No "textContentSource" parameter specified.');Qe.promise.then(()=>{sn=null,Ie(this)},this._capability.reject)}}e.TextLayerRenderTask=qe;function Ye(je){!je.textContentSource&&(je.textContent||je.textContentStream)&&((0,Se.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),je.textContentSource=je.textContent||je.textContentStream);const{container:Qe,viewport:sn}=je,cn=getComputedStyle(Qe),nn=cn.getPropertyValue("visibility"),an=parseFloat(cn.getPropertyValue("--scale-factor"));nn==="visible"&&(!an||Math.abs(an-sn.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const Ze=new qe(je);return Ze._render(),Ze}function Xe({container:je,viewport:Qe,textDivs:sn,textDivProperties:cn,isOffscreenCanvasSupported:nn,mustRotate:an=!0,mustRescale:Ze=!0}){if(an&&(0,Se.setLayerDimensions)(je,{rotation:Qe.rotation}),Ze){const tn=Be(0,nn),An={prevFontSize:null,prevFontFamily:null,div:null,scale:Qe.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:tn};for(const Je of sn)An.properties=cn.get(Je),An.div=Je,Fe(An)}}}),((t,e,r)=>{var Me,Ve,Fe,Ie,qe,Ye,Xe,je,Qe,sn,cn,Tp,qd,Cp,Bp;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var xe=r(1),Se=r(4),Ee=r(28),Pe=r(33),Ce=r(6),Re=r(34);const We=class We{constructor({uiManager:Je,pageIndex:St,div:hn,accessibilityManager:_n,annotationLayer:yn,viewport:mn,l10n:Sn}){bi(this,cn);bi(this,Me);bi(this,Ve,!1);bi(this,Fe,null);bi(this,Ie,this.pointerup.bind(this));bi(this,qe,this.pointerdown.bind(this));bi(this,Ye,new Map);bi(this,Xe,!1);bi(this,je,!1);bi(this,Qe,!1);bi(this,sn);const Pn=[Ee.FreeTextEditor,Pe.InkEditor,Re.StampEditor];if(!We._initialized){We._initialized=!0;for(const pn of Pn)pn.initialize(Sn)}Je.registerEditorTypes(Pn),xi(this,sn,Je),this.pageIndex=St,this.div=hn,xi(this,Me,_n),xi(this,Fe,yn),this.viewport=mn,un(this,sn).addLayer(this)}get isEmpty(){return un(this,Ye).size===0}updateToolbar(Je){un(this,sn).updateToolbar(Je)}updateMode(Je=un(this,sn).getMode()){li(this,cn,Bp).call(this),Je===xe.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),Je!==xe.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",Je===xe.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",Je===xe.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",Je===xe.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(Je){if(!Je&&un(this,sn).getMode()!==xe.AnnotationEditorType.INK)return;if(!Je){for(const hn of un(this,Ye).values())if(hn.isEmpty()){hn.setInBackground();return}}li(this,cn,qd).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(Je){un(this,sn).setEditingState(Je)}addCommands(Je){un(this,sn).addCommands(Je)}enable(){this.div.style.pointerEvents="auto";const Je=new Set;for(const hn of un(this,Ye).values())hn.enableEditing(),hn.annotationElementId&&Je.add(hn.annotationElementId);if(!un(this,Fe))return;const St=un(this,Fe).getEditableAnnotations();for(const hn of St){if(hn.hide(),un(this,sn).isDeletedAnnotationElement(hn.data.id)||Je.has(hn.data.id))continue;const _n=this.deserialize(hn);_n&&(this.addOrRebuild(_n),_n.enableEditing())}}disable(){var St;xi(this,Qe,!0),this.div.style.pointerEvents="none";const Je=new Set;for(const hn of un(this,Ye).values()){if(hn.disableEditing(),!hn.annotationElementId||hn.serialize()!==null){Je.add(hn.annotationElementId);continue}(St=this.getEditableAnnotation(hn.annotationElementId))==null||St.show(),hn.remove()}if(un(this,Fe)){const hn=un(this,Fe).getEditableAnnotations();for(const _n of hn){const{id:yn}=_n.data;Je.has(yn)||un(this,sn).isDeletedAnnotationElement(yn)||_n.show()}}li(this,cn,Bp).call(this),this.isEmpty&&(this.div.hidden=!0),xi(this,Qe,!1)}getEditableAnnotation(Je){var St;return((St=un(this,Fe))==null?void 0:St.getEditableAnnotation(Je))||null}setActiveEditor(Je){un(this,sn).getActive()!==Je&&un(this,sn).setActiveEditor(Je)}enableClick(){this.div.addEventListener("pointerdown",un(this,qe)),this.div.addEventListener("pointerup",un(this,Ie))}disableClick(){this.div.removeEventListener("pointerdown",un(this,qe)),this.div.removeEventListener("pointerup",un(this,Ie))}attach(Je){un(this,Ye).set(Je.id,Je);const{annotationElementId:St}=Je;St&&un(this,sn).isDeletedAnnotationElement(St)&&un(this,sn).removeDeletedAnnotationElement(Je)}detach(Je){var St;un(this,Ye).delete(Je.id),(St=un(this,Me))==null||St.removePointerInTextLayer(Je.contentDiv),!un(this,Qe)&&Je.annotationElementId&&un(this,sn).addDeletedAnnotationElement(Je)}remove(Je){this.detach(Je),un(this,sn).removeEditor(Je),Je.div.contains(document.activeElement)&&setTimeout(()=>{un(this,sn).focusMainContainer()},0),Je.div.remove(),Je.isAttachedToDOM=!1,un(this,je)||this.addInkEditorIfNeeded(!1)}changeParent(Je){var St;Je.parent!==this&&(Je.annotationElementId&&(un(this,sn).addDeletedAnnotationElement(Je.annotationElementId),Se.AnnotationEditor.deleteAnnotationElement(Je),Je.annotationElementId=null),this.attach(Je),(St=Je.parent)==null||St.detach(Je),Je.setParent(this),Je.div&&Je.isAttachedToDOM&&(Je.div.remove(),this.div.append(Je.div)))}add(Je){if(this.changeParent(Je),un(this,sn).addEditor(Je),this.attach(Je),!Je.isAttachedToDOM){const St=Je.render();this.div.append(St),Je.isAttachedToDOM=!0}Je.fixAndSetPosition(),Je.onceAdded(),un(this,sn).addToAnnotationStorage(Je)}moveEditorInDOM(Je){var hn;if(!Je.isAttachedToDOM)return;const{activeElement:St}=document;Je.div.contains(St)&&(Je._focusEventsAllowed=!1,setTimeout(()=>{Je.div.contains(document.activeElement)?Je._focusEventsAllowed=!0:(Je.div.addEventListener("focusin",()=>{Je._focusEventsAllowed=!0},{once:!0}),St.focus())},0)),Je._structTreeParentId=(hn=un(this,Me))==null?void 0:hn.moveElementInDOM(this.div,Je.div,Je.contentDiv,!0)}addOrRebuild(Je){Je.needsToBeRebuilt()?Je.rebuild():this.add(Je)}addUndoableEditor(Je){const St=()=>Je._uiManager.rebuild(Je),hn=()=>{Je.remove()};this.addCommands({cmd:St,undo:hn,mustExec:!1})}getNextId(){return un(this,sn).getId()}pasteEditor(Je,St){un(this,sn).updateToolbar(Je),un(this,sn).updateMode(Je);const{offsetX:hn,offsetY:_n}=li(this,cn,Cp).call(this),yn=this.getNextId(),mn=li(this,cn,Tp).call(this,{parent:this,id:yn,x:hn,y:_n,uiManager:un(this,sn),isCentered:!0,...St});mn&&this.add(mn)}deserialize(Je){switch(Je.annotationType??Je.annotationEditorType){case xe.AnnotationEditorType.FREETEXT:return Ee.FreeTextEditor.deserialize(Je,this,un(this,sn));case xe.AnnotationEditorType.INK:return Pe.InkEditor.deserialize(Je,this,un(this,sn));case xe.AnnotationEditorType.STAMP:return Re.StampEditor.deserialize(Je,this,un(this,sn))}return null}addNewEditor(){li(this,cn,qd).call(this,li(this,cn,Cp).call(this),!0)}setSelected(Je){un(this,sn).setSelected(Je)}toggleSelected(Je){un(this,sn).toggleSelected(Je)}isSelected(Je){return un(this,sn).isSelected(Je)}unselect(Je){un(this,sn).unselect(Je)}pointerup(Je){const{isMac:St}=xe.FeatureTest.platform;if(!(Je.button!==0||Je.ctrlKey&&St)&&Je.target===this.div&&un(this,Xe)){if(xi(this,Xe,!1),!un(this,Ve)){xi(this,Ve,!0);return}if(un(this,sn).getMode()===xe.AnnotationEditorType.STAMP){un(this,sn).unselectAll();return}li(this,cn,qd).call(this,Je,!1)}}pointerdown(Je){if(un(this,Xe)){xi(this,Xe,!1);return}const{isMac:St}=xe.FeatureTest.platform;if(Je.button!==0||Je.ctrlKey&&St||Je.target!==this.div)return;xi(this,Xe,!0);const hn=un(this,sn).getActive();xi(this,Ve,!hn||hn.isEmpty())}findNewParent(Je,St,hn){const _n=un(this,sn).findParent(St,hn);return _n===null||_n===this?!1:(_n.changeParent(Je),!0)}destroy(){var Je,St;((Je=un(this,sn).getActive())==null?void 0:Je.parent)===this&&(un(this,sn).commitOrRemove(),un(this,sn).setActiveEditor(null));for(const hn of un(this,Ye).values())(St=un(this,Me))==null||St.removePointerInTextLayer(hn.contentDiv),hn.setParent(null),hn.isAttachedToDOM=!1,hn.div.remove();this.div=null,un(this,Ye).clear(),un(this,sn).removeLayer(this)}render({viewport:Je}){this.viewport=Je,(0,Ce.setLayerDimensions)(this.div,Je);for(const St of un(this,sn).getEditors(this.pageIndex))this.add(St);this.updateMode()}update({viewport:Je}){un(this,sn).commitOrRemove(),this.viewport=Je,(0,Ce.setLayerDimensions)(this.div,{rotation:Je.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:Je,pageHeight:St}=this.viewport.rawDims;return[Je,St]}};Me=new WeakMap,Ve=new WeakMap,Fe=new WeakMap,Ie=new WeakMap,qe=new WeakMap,Ye=new WeakMap,Xe=new WeakMap,je=new WeakMap,Qe=new WeakMap,sn=new WeakMap,cn=new WeakSet,Tp=function(Je){switch(un(this,sn).getMode()){case xe.AnnotationEditorType.FREETEXT:return new Ee.FreeTextEditor(Je);case xe.AnnotationEditorType.INK:return new Pe.InkEditor(Je);case xe.AnnotationEditorType.STAMP:return new Re.StampEditor(Je)}return null},qd=function(Je,St){const hn=this.getNextId(),_n=li(this,cn,Tp).call(this,{parent:this,id:hn,x:Je.offsetX,y:Je.offsetY,uiManager:un(this,sn),isCentered:St});return _n&&this.add(_n),_n},Cp=function(){const{x:Je,y:St,width:hn,height:_n}=this.div.getBoundingClientRect(),yn=Math.max(0,Je),mn=Math.max(0,St),Sn=Math.min(window.innerWidth,Je+hn),Pn=Math.min(window.innerHeight,St+_n),pn=(yn+Sn)/2-Je,on=(mn+Pn)/2-St,[xn,Ge]=this.viewport.rotation%180===0?[pn,on]:[on,pn];return{offsetX:xn,offsetY:Ge}},Bp=function(){xi(this,je,!0);for(const Je of un(this,Ye).values())Je.isEmpty()&&Je.remove();xi(this,je,!1)},Ka(We,"_initialized",!1);let Be=We;e.AnnotationEditorLayer=Be}),((t,e,r)=>{var Re,Be,Me,Ve,Fe,Ie,qe,Ye,Xe,je,y0,v0,b0,qh,Rp,x0,Np;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var xe=r(1),Se=r(5),Ee=r(4),Pe=r(29);const We=class We extends Ee.AnnotationEditor{constructor(St){super({...St,name:"freeTextEditor"});bi(this,je);bi(this,Re,this.editorDivBlur.bind(this));bi(this,Be,this.editorDivFocus.bind(this));bi(this,Me,this.editorDivInput.bind(this));bi(this,Ve,this.editorDivKeydown.bind(this));bi(this,Fe);bi(this,Ie,"");bi(this,qe,`${this.id}-editor`);bi(this,Ye);bi(this,Xe,null);xi(this,Fe,St.color||We._defaultColor||Ee.AnnotationEditor._defaultLineColor),xi(this,Ye,St.fontSize||We._defaultFontSize)}static get _keyboardManager(){const St=We.prototype,hn=mn=>mn.isEmpty(),_n=Se.AnnotationEditorUIManager.TRANSLATE_SMALL,yn=Se.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,xe.shadow)(this,"_keyboardManager",new Se.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],St.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],St.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],St._translateEmpty,{args:[-_n,0],checker:hn}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],St._translateEmpty,{args:[-yn,0],checker:hn}],[["ArrowRight","mac+ArrowRight"],St._translateEmpty,{args:[_n,0],checker:hn}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],St._translateEmpty,{args:[yn,0],checker:hn}],[["ArrowUp","mac+ArrowUp"],St._translateEmpty,{args:[0,-_n],checker:hn}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],St._translateEmpty,{args:[0,-yn],checker:hn}],[["ArrowDown","mac+ArrowDown"],St._translateEmpty,{args:[0,_n],checker:hn}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],St._translateEmpty,{args:[0,yn],checker:hn}]]))}static initialize(St){Ee.AnnotationEditor.initialize(St,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const hn=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(hn.getPropertyValue("--freetext-padding"))}static updateDefaultParams(St,hn){switch(St){case xe.AnnotationEditorParamsType.FREETEXT_SIZE:We._defaultFontSize=hn;break;case xe.AnnotationEditorParamsType.FREETEXT_COLOR:We._defaultColor=hn;break}}updateParams(St,hn){switch(St){case xe.AnnotationEditorParamsType.FREETEXT_SIZE:li(this,je,y0).call(this,hn);break;case xe.AnnotationEditorParamsType.FREETEXT_COLOR:li(this,je,v0).call(this,hn);break}}static get defaultPropertiesToUpdate(){return[[xe.AnnotationEditorParamsType.FREETEXT_SIZE,We._defaultFontSize],[xe.AnnotationEditorParamsType.FREETEXT_COLOR,We._defaultColor||Ee.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[xe.AnnotationEditorParamsType.FREETEXT_SIZE,un(this,Ye)],[xe.AnnotationEditorParamsType.FREETEXT_COLOR,un(this,Fe)]]}_translateEmpty(St,hn){this._uiManager.translateSelectedEditors(St,hn,!0)}getInitialTranslation(){const St=this.parentScale;return[-We._internalPadding*St,-(We._internalPadding+un(this,Ye))*St]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(xe.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",un(this,Ve)),this.editorDiv.addEventListener("focus",un(this,Be)),this.editorDiv.addEventListener("blur",un(this,Re)),this.editorDiv.addEventListener("input",un(this,Me)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",un(this,qe)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",un(this,Ve)),this.editorDiv.removeEventListener("focus",un(this,Be)),this.editorDiv.removeEventListener("blur",un(this,Re)),this.editorDiv.removeEventListener("input",un(this,Me)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(St){this._focusEventsAllowed&&(super.focusin(St),St.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var St;if(this.width){li(this,je,Np).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(St=this._initialOptions)!=null&&St.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const St=un(this,Ie),hn=xi(this,Ie,li(this,je,b0).call(this).trimEnd());if(St===hn)return;const _n=yn=>{if(xi(this,Ie,yn),!yn){this.remove();return}li(this,je,Rp).call(this),this._uiManager.rebuild(this),li(this,je,qh).call(this)};this.addCommands({cmd:()=>{_n(hn)},undo:()=>{_n(St)},mustExec:!1}),li(this,je,qh).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(St){this.enterInEditMode()}keydown(St){St.target===this.div&&St.key==="Enter"&&(this.enterInEditMode(),St.preventDefault())}editorDivKeydown(St){We._keyboardManager.exec(this,St)}editorDivFocus(St){this.isEditing=!0}editorDivBlur(St){this.isEditing=!1}editorDivInput(St){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let St,hn;this.width&&(St=this.x,hn=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",un(this,qe)),this.enableEditing(),Ee.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(yn=>{var mn;return(mn=this.editorDiv)==null?void 0:mn.setAttribute("aria-label",yn)}),Ee.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(yn=>{var mn;return(mn=this.editorDiv)==null?void 0:mn.setAttribute("default-content",yn)}),this.editorDiv.contentEditable=!0;const{style:_n}=this.editorDiv;if(_n.fontSize=`calc(${un(this,Ye)}px * var(--scale-factor))`,_n.color=un(this,Fe),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,Se.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[yn,mn]=this.parentDimensions;if(this.annotationElementId){const{position:Sn}=un(this,Xe);let[Pn,pn]=this.getInitialTranslation();[Pn,pn]=this.pageTranslationToScreen(Pn,pn);const[on,xn]=this.pageDimensions,[Ge,Oe]=this.pageTranslation;let $e,rn;switch(this.rotation){case 0:$e=St+(Sn[0]-Ge)/on,rn=hn+this.height-(Sn[1]-Oe)/xn;break;case 90:$e=St+(Sn[0]-Ge)/on,rn=hn-(Sn[1]-Oe)/xn,[Pn,pn]=[pn,-Pn];break;case 180:$e=St-this.width+(Sn[0]-Ge)/on,rn=hn-(Sn[1]-Oe)/xn,[Pn,pn]=[-Pn,-pn];break;case 270:$e=St+(Sn[0]-Ge-this.height*xn)/on,rn=hn+(Sn[1]-Oe-this.width*on)/xn,[Pn,pn]=[-pn,Pn];break}this.setAt($e*yn,rn*mn,Pn,pn)}else this.setAt(St*yn,hn*mn,this.width*yn,this.height*mn);li(this,je,Rp).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(St,hn,_n){let yn=null;if(St instanceof Pe.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:Sn,fontColor:Pn},rect:pn,rotation:on,id:xn},textContent:Ge,textPosition:Oe,parent:{page:{pageNumber:$e}}}=St;if(!Ge||Ge.length===0)return null;yn=St={annotationType:xe.AnnotationEditorType.FREETEXT,color:Array.from(Pn),fontSize:Sn,value:Ge.join(`
`),position:Oe,pageIndex:$e-1,rect:pn,rotation:on,id:xn,deleted:!1}}const mn=super.deserialize(St,hn,_n);return xi(mn,Ye,St.fontSize),xi(mn,Fe,xe.Util.makeHexColor(...St.color)),xi(mn,Ie,St.value),mn.annotationElementId=St.id||null,xi(mn,Xe,yn),mn}serialize(St=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const hn=We._internalPadding*this.parentScale,_n=this.getRect(hn,hn),yn=Ee.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:un(this,Fe)),mn={annotationType:xe.AnnotationEditorType.FREETEXT,color:yn,fontSize:un(this,Ye),value:un(this,Ie),pageIndex:this.pageIndex,rect:_n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return St?mn:this.annotationElementId&&!li(this,je,x0).call(this,mn)?null:(mn.id=this.annotationElementId,mn)}};Re=new WeakMap,Be=new WeakMap,Me=new WeakMap,Ve=new WeakMap,Fe=new WeakMap,Ie=new WeakMap,qe=new WeakMap,Ye=new WeakMap,Xe=new WeakMap,je=new WeakSet,y0=function(St){const hn=yn=>{this.editorDiv.style.fontSize=`calc(${yn}px * var(--scale-factor))`,this.translate(0,-(yn-un(this,Ye))*this.parentScale),xi(this,Ye,yn),li(this,je,qh).call(this)},_n=un(this,Ye);this.addCommands({cmd:()=>{hn(St)},undo:()=>{hn(_n)},mustExec:!0,type:xe.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},v0=function(St){const hn=un(this,Fe);this.addCommands({cmd:()=>{xi(this,Fe,this.editorDiv.style.color=St)},undo:()=>{xi(this,Fe,this.editorDiv.style.color=hn)},mustExec:!0,type:xe.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},b0=function(){const St=this.editorDiv.getElementsByTagName("div");if(St.length===0)return this.editorDiv.innerText;const hn=[];for(const _n of St)hn.push(_n.innerText.replace(/\r\n?|\n/,""));return hn.join(`
`)},qh=function(){const[St,hn]=this.parentDimensions;let _n;if(this.isAttachedToDOM)_n=this.div.getBoundingClientRect();else{const{currentLayer:yn,div:mn}=this,Sn=mn.style.display;mn.style.display="hidden",yn.div.append(this.div),_n=mn.getBoundingClientRect(),mn.remove(),mn.style.display=Sn}this.rotation%180===this.parentRotation%180?(this.width=_n.width/St,this.height=_n.height/hn):(this.width=_n.height/St,this.height=_n.width/hn),this.fixAndSetPosition()},Rp=function(){if(this.editorDiv.replaceChildren(),!!un(this,Ie))for(const St of un(this,Ie).split(`
`)){const hn=document.createElement("div");hn.append(St?document.createTextNode(St):document.createElement("br")),this.editorDiv.append(hn)}},x0=function(St){const{value:hn,fontSize:_n,color:yn,rect:mn,pageIndex:Sn}=un(this,Xe);return St.value!==hn||St.fontSize!==_n||St.rect.some((Pn,pn)=>Math.abs(Pn-mn[pn])>=1)||St.color.some((Pn,pn)=>Pn!==yn[pn])||St.pageIndex!==Sn},Np=function(St=!1){if(!this.annotationElementId)return;if(li(this,je,qh).call(this),!St&&(this.width===0||this.height===0)){setTimeout(()=>li(this,je,Np).call(this,!0),0);return}const hn=We._internalPadding*this.parentScale;un(this,Xe).rect=this.getRect(hn,hn)},Ka(We,"_freeTextDefaultContent",""),Ka(We,"_internalPadding",0),Ka(We,"_defaultColor",null),Ka(We,"_defaultFontSize",10),Ka(We,"_type","freetext");let Ce=We;e.FreeTextEditor=Ce}),((t,e,r)=>{var rn,gn,rc,_0,On,jn,Wn,ti,si,qn,En,Qn,Cn,Mn,Un,zn,ni,yi,pi,$n,Yn,ai,S0,Hd,Mp,kp,na,ea,Ki,oi,Kn,di,Ui,Vp,Ai,Rn,Zn,Xn,A0,Lp;Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var xe=r(1),Se=r(6),Ee=r(3),Pe=r(30),Ce=r(31),Re=r(32);const Be=1e3,Me=9,Ve=new WeakSet;function Fe(Oi){return{width:Oi[2]-Oi[0],height:Oi[3]-Oi[1]}}class Ie{static create(Fn){switch(Fn.data.annotationType){case xe.AnnotationType.LINK:return new Ye(Fn);case xe.AnnotationType.TEXT:return new Xe(Fn);case xe.AnnotationType.WIDGET:switch(Fn.data.fieldType){case"Tx":return new Qe(Fn);case"Btn":return Fn.data.radioButton?new nn(Fn):Fn.data.checkBox?new cn(Fn):new an(Fn);case"Ch":return new Ze(Fn);case"Sig":return new sn(Fn)}return new je(Fn);case xe.AnnotationType.POPUP:return new tn(Fn);case xe.AnnotationType.FREETEXT:return new An(Fn);case xe.AnnotationType.LINE:return new Je(Fn);case xe.AnnotationType.SQUARE:return new St(Fn);case xe.AnnotationType.CIRCLE:return new hn(Fn);case xe.AnnotationType.POLYLINE:return new _n(Fn);case xe.AnnotationType.CARET:return new mn(Fn);case xe.AnnotationType.INK:return new Sn(Fn);case xe.AnnotationType.POLYGON:return new yn(Fn);case xe.AnnotationType.HIGHLIGHT:return new Pn(Fn);case xe.AnnotationType.UNDERLINE:return new pn(Fn);case xe.AnnotationType.SQUIGGLY:return new on(Fn);case xe.AnnotationType.STRIKEOUT:return new xn(Fn);case xe.AnnotationType.STAMP:return new Ge(Fn);case xe.AnnotationType.FILEATTACHMENT:return new Oe(Fn);default:return new qe(Fn)}}}const fn=class fn{constructor(Fn,{isRenderable:Nn=!1,ignoreBorder:Gn=!1,createQuadrilaterals:ei=!1}={}){bi(this,rn,!1);this.isRenderable=Nn,this.data=Fn.data,this.layer=Fn.layer,this.linkService=Fn.linkService,this.downloadManager=Fn.downloadManager,this.imageResourcesPath=Fn.imageResourcesPath,this.renderForms=Fn.renderForms,this.svgFactory=Fn.svgFactory,this.annotationStorage=Fn.annotationStorage,this.enableScripting=Fn.enableScripting,this.hasJSActions=Fn.hasJSActions,this._fieldObjects=Fn.fieldObjects,this.parent=Fn.parent,Nn&&(this.container=this._createContainer(Gn)),ei&&this._createQuadrilaterals()}static _hasPopupData({titleObj:Fn,contentsObj:Nn,richText:Gn}){return!!(Fn!=null&&Fn.str||Nn!=null&&Nn.str||Gn!=null&&Gn.str)}get hasPopupData(){return fn._hasPopupData(this.data)}_createContainer(Fn){const{data:Nn,parent:{page:Gn,viewport:ei}}=this,ii=document.createElement("section");ii.setAttribute("data-annotation-id",Nn.id),this instanceof je||(ii.tabIndex=Be),ii.style.zIndex=this.parent.zIndex++,this.data.popupRef&&ii.setAttribute("aria-haspopup","dialog"),Nn.noRotate&&ii.classList.add("norotate");const{pageWidth:gi,pageHeight:Ti,pageX:Wi,pageY:qi}=ei.rawDims;if(!Nn.rect||this instanceof tn){const{rotation:aa}=Nn;return!Nn.hasOwnCanvas&&aa!==0&&this.setRotation(aa,ii),ii}const{width:ji,height:la}=Fe(Nn.rect),ia=xe.Util.normalizeRect([Nn.rect[0],Gn.view[3]-Nn.rect[1]+Gn.view[1],Nn.rect[2],Gn.view[3]-Nn.rect[3]+Gn.view[1]]);if(!Fn&&Nn.borderStyle.width>0){ii.style.borderWidth=`${Nn.borderStyle.width}px`;const aa=Nn.borderStyle.horizontalCornerRadius,ca=Nn.borderStyle.verticalCornerRadius;if(aa>0||ca>0){const xa=`calc(${aa}px * var(--scale-factor)) / calc(${ca}px * var(--scale-factor))`;ii.style.borderRadius=xa}else if(this instanceof nn){const xa=`calc(${ji}px * var(--scale-factor)) / calc(${la}px * var(--scale-factor))`;ii.style.borderRadius=xa}switch(Nn.borderStyle.style){case xe.AnnotationBorderStyleType.SOLID:ii.style.borderStyle="solid";break;case xe.AnnotationBorderStyleType.DASHED:ii.style.borderStyle="dashed";break;case xe.AnnotationBorderStyleType.BEVELED:(0,xe.warn)("Unimplemented border style: beveled");break;case xe.AnnotationBorderStyleType.INSET:(0,xe.warn)("Unimplemented border style: inset");break;case xe.AnnotationBorderStyleType.UNDERLINE:ii.style.borderBottomStyle="solid";break}const ma=Nn.borderColor||null;ma?(xi(this,rn,!0),ii.style.borderColor=xe.Util.makeHexColor(ma[0]|0,ma[1]|0,ma[2]|0)):ii.style.borderWidth=0}ii.style.left=`${100*(ia[0]-Wi)/gi}%`,ii.style.top=`${100*(ia[1]-qi)/Ti}%`;const{rotation:Zi}=Nn;return Nn.hasOwnCanvas||Zi===0?(ii.style.width=`${100*ji/gi}%`,ii.style.height=`${100*la/Ti}%`):this.setRotation(Zi,ii),ii}setRotation(Fn,Nn=this.container){if(!this.data.rect)return;const{pageWidth:Gn,pageHeight:ei}=this.parent.viewport.rawDims,{width:ii,height:gi}=Fe(this.data.rect);let Ti,Wi;Fn%180===0?(Ti=100*ii/Gn,Wi=100*gi/ei):(Ti=100*gi/Gn,Wi=100*ii/ei),Nn.style.width=`${Ti}%`,Nn.style.height=`${Wi}%`,Nn.setAttribute("data-main-rotation",(360-Fn)%360)}get _commonActions(){const Fn=(Nn,Gn,ei)=>{const ii=ei.detail[Nn],gi=ii[0],Ti=ii.slice(1);ei.target.style[Gn]=Pe.ColorConverters[`${gi}_HTML`](Ti),this.annotationStorage.setValue(this.data.id,{[Gn]:Pe.ColorConverters[`${gi}_rgb`](Ti)})};return(0,xe.shadow)(this,"_commonActions",{display:Nn=>{const{display:Gn}=Nn.detail,ei=Gn%2===1;this.container.style.visibility=ei?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:ei,noPrint:Gn===1||Gn===2})},print:Nn=>{this.annotationStorage.setValue(this.data.id,{noPrint:!Nn.detail.print})},hidden:Nn=>{const{hidden:Gn}=Nn.detail;this.container.style.visibility=Gn?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:Gn,noView:Gn})},focus:Nn=>{setTimeout(()=>Nn.target.focus({preventScroll:!1}),0)},userName:Nn=>{Nn.target.title=Nn.detail.userName},readonly:Nn=>{Nn.target.disabled=Nn.detail.readonly},required:Nn=>{this._setRequired(Nn.target,Nn.detail.required)},bgColor:Nn=>{Fn("bgColor","backgroundColor",Nn)},fillColor:Nn=>{Fn("fillColor","backgroundColor",Nn)},fgColor:Nn=>{Fn("fgColor","color",Nn)},textColor:Nn=>{Fn("textColor","color",Nn)},borderColor:Nn=>{Fn("borderColor","borderColor",Nn)},strokeColor:Nn=>{Fn("strokeColor","borderColor",Nn)},rotation:Nn=>{const Gn=Nn.detail.rotation;this.setRotation(Gn),this.annotationStorage.setValue(this.data.id,{rotation:Gn})}})}_dispatchEventFromSandbox(Fn,Nn){const Gn=this._commonActions;for(const ei of Object.keys(Nn.detail)){const ii=Fn[ei]||Gn[ei];ii==null||ii(Nn)}}_setDefaultPropertiesFromJS(Fn){if(!this.enableScripting)return;const Nn=this.annotationStorage.getRawValue(this.data.id);if(!Nn)return;const Gn=this._commonActions;for(const[ei,ii]of Object.entries(Nn)){const gi=Gn[ei];if(gi){const Ti={detail:{[ei]:ii},target:Fn};gi(Ti),delete Nn[ei]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:Fn}=this.data;if(!Fn)return;const[Nn,Gn,ei,ii]=this.data.rect;if(Fn.length===1){const[,{x:ca,y:ma},{x:xa,y:Oa}]=Fn[0];if(ei===ca&&ii===ma&&Nn===xa&&Gn===Oa)return}const{style:gi}=this.container;let Ti;if(un(this,rn)){const{borderColor:ca,borderWidth:ma}=gi;gi.borderWidth=0,Ti=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${ca}" stroke-width="${ma}">`],this.container.classList.add("hasBorder")}const Wi=ei-Nn,qi=ii-Gn,{svgFactory:ji}=this,la=ji.createElement("svg");la.classList.add("quadrilateralsContainer"),la.setAttribute("width",0),la.setAttribute("height",0);const ia=ji.createElement("defs");la.append(ia);const Zi=ji.createElement("clipPath"),aa=`clippath_${this.data.id}`;Zi.setAttribute("id",aa),Zi.setAttribute("clipPathUnits","objectBoundingBox"),ia.append(Zi);for(const[,{x:ca,y:ma},{x:xa,y:Oa}]of Fn){const Ba=ji.createElement("rect"),tr=(xa-Nn)/Wi,wr=(ii-ma)/qi,Sr=(ca-xa)/Wi,ss=(ma-Oa)/qi;Ba.setAttribute("x",tr),Ba.setAttribute("y",wr),Ba.setAttribute("width",Sr),Ba.setAttribute("height",ss),Zi.append(Ba),Ti==null||Ti.push(`<rect vector-effect="non-scaling-stroke" x="${tr}" y="${wr}" width="${Sr}" height="${ss}"/>`)}un(this,rn)&&(Ti.push("</g></svg>')"),gi.backgroundImage=Ti.join("")),this.container.append(la),this.container.style.clipPath=`url(#${aa})`}_createPopup(){const{container:Fn,data:Nn}=this;Fn.setAttribute("aria-haspopup","dialog");const Gn=new tn({data:{color:Nn.color,titleObj:Nn.titleObj,modificationDate:Nn.modificationDate,contentsObj:Nn.contentsObj,richText:Nn.richText,parentRect:Nn.rect,borderStyle:0,id:`popup_${Nn.id}`,rotation:Nn.rotation},parent:this.parent,elements:[this]});this.parent.div.append(Gn.render())}render(){(0,xe.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(Fn,Nn=null){const Gn=[];if(this._fieldObjects){const ei=this._fieldObjects[Fn];if(ei)for(const{page:ii,id:gi,exportValues:Ti}of ei){if(ii===-1||gi===Nn)continue;const Wi=typeof Ti=="string"?Ti:null,qi=document.querySelector(`[data-element-id="${gi}"]`);if(qi&&!Ve.has(qi)){(0,xe.warn)(`_getElementsByName - element not allowed: ${gi}`);continue}Gn.push({id:gi,exportValue:Wi,domElement:qi})}return Gn}for(const ei of document.getElementsByName(Fn)){const{exportValue:ii}=ei,gi=ei.getAttribute("data-element-id");gi!==Nn&&Ve.has(ei)&&Gn.push({id:gi,exportValue:ii,domElement:ei})}return Gn}show(){var Fn;this.container&&(this.container.hidden=!1),(Fn=this.popup)==null||Fn.maybeShow()}hide(){var Fn;this.container&&(this.container.hidden=!0),(Fn=this.popup)==null||Fn.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const Fn=this.getElementsToTriggerPopup();if(Array.isArray(Fn))for(const Nn of Fn)Nn.classList.add("highlightArea");else Fn.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:Fn,data:{id:Nn}}=this;this.container.addEventListener("dblclick",()=>{var Gn;(Gn=this.linkService.eventBus)==null||Gn.dispatch("switchannotationeditormode",{source:this,mode:Fn,editId:Nn})})}};rn=new WeakMap;let qe=fn;class Ye extends qe{constructor(Nn,Gn=null){super(Nn,{isRenderable:!0,ignoreBorder:!!(Gn!=null&&Gn.ignoreBorder),createQuadrilaterals:!0});bi(this,gn);this.isTooltipOnly=Nn.data.isTooltipOnly}render(){const{data:Nn,linkService:Gn}=this,ei=document.createElement("a");ei.setAttribute("data-element-id",Nn.id);let ii=!1;return Nn.url?(Gn.addLinkAttributes(ei,Nn.url,Nn.newWindow),ii=!0):Nn.action?(this._bindNamedAction(ei,Nn.action),ii=!0):Nn.attachment?(this._bindAttachment(ei,Nn.attachment),ii=!0):Nn.setOCGState?(li(this,gn,_0).call(this,ei,Nn.setOCGState),ii=!0):Nn.dest?(this._bindLink(ei,Nn.dest),ii=!0):(Nn.actions&&(Nn.actions.Action||Nn.actions["Mouse Up"]||Nn.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(ei,Nn),ii=!0),Nn.resetForm?(this._bindResetFormAction(ei,Nn.resetForm),ii=!0):this.isTooltipOnly&&!ii&&(this._bindLink(ei,""),ii=!0)),this.container.classList.add("linkAnnotation"),ii&&this.container.append(ei),this.container}_bindLink(Nn,Gn){Nn.href=this.linkService.getDestinationHash(Gn),Nn.onclick=()=>(Gn&&this.linkService.goToDestination(Gn),!1),(Gn||Gn==="")&&li(this,gn,rc).call(this)}_bindNamedAction(Nn,Gn){Nn.href=this.linkService.getAnchorUrl(""),Nn.onclick=()=>(this.linkService.executeNamedAction(Gn),!1),li(this,gn,rc).call(this)}_bindAttachment(Nn,Gn){Nn.href=this.linkService.getAnchorUrl(""),Nn.onclick=()=>{var ei;return(ei=this.downloadManager)==null||ei.openOrDownloadData(this.container,Gn.content,Gn.filename),!1},li(this,gn,rc).call(this)}_bindJSAction(Nn,Gn){Nn.href=this.linkService.getAnchorUrl("");const ei=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const ii of Object.keys(Gn.actions)){const gi=ei.get(ii);gi&&(Nn[gi]=()=>{var Ti;return(Ti=this.linkService.eventBus)==null||Ti.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Gn.id,name:ii}}),!1})}Nn.onclick||(Nn.onclick=()=>!1),li(this,gn,rc).call(this)}_bindResetFormAction(Nn,Gn){const ei=Nn.onclick;if(ei||(Nn.href=this.linkService.getAnchorUrl("")),li(this,gn,rc).call(this),!this._fieldObjects){(0,xe.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),ei||(Nn.onclick=()=>!1);return}Nn.onclick=()=>{var la;ei==null||ei();const{fields:ii,refs:gi,include:Ti}=Gn,Wi=[];if(ii.length!==0||gi.length!==0){const ia=new Set(gi);for(const Zi of ii){const aa=this._fieldObjects[Zi]||[];for(const{id:ca}of aa)ia.add(ca)}for(const Zi of Object.values(this._fieldObjects))for(const aa of Zi)ia.has(aa.id)===Ti&&Wi.push(aa)}else for(const ia of Object.values(this._fieldObjects))Wi.push(...ia);const qi=this.annotationStorage,ji=[];for(const ia of Wi){const{id:Zi}=ia;switch(ji.push(Zi),ia.type){case"text":{const ca=ia.defaultValue||"";qi.setValue(Zi,{value:ca});break}case"checkbox":case"radiobutton":{const ca=ia.defaultValue===ia.exportValues;qi.setValue(Zi,{value:ca});break}case"combobox":case"listbox":{const ca=ia.defaultValue||"";qi.setValue(Zi,{value:ca});break}default:continue}const aa=document.querySelector(`[data-element-id="${Zi}"]`);if(aa){if(!Ve.has(aa)){(0,xe.warn)(`_bindResetFormAction - element not allowed: ${Zi}`);continue}}else continue;aa.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((la=this.linkService.eventBus)==null||la.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:ji,name:"ResetForm"}})),!1}}}gn=new WeakSet,rc=function(){this.container.setAttribute("data-internal-link","")},_0=function(Nn,Gn){Nn.href=this.linkService.getAnchorUrl(""),Nn.onclick=()=>(this.linkService.executeSetOCGState(Gn),!1),li(this,gn,rc).call(this)};class Xe extends qe{constructor(Fn){super(Fn,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const Fn=document.createElement("img");return Fn.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",Fn.alt="[{{type}} Annotation]",Fn.dataset.l10nId="text_annotation_type",Fn.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(Fn),this.container}}class je extends qe{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(Fn){var Nn;this.data.hasOwnCanvas&&(((Nn=Fn.previousSibling)==null?void 0:Nn.nodeName)==="CANVAS"&&(Fn.previousSibling.hidden=!0),Fn.hidden=!1)}_getKeyModifier(Fn){const{isWin:Nn,isMac:Gn}=xe.FeatureTest.platform;return Nn&&Fn.ctrlKey||Gn&&Fn.metaKey}_setEventListener(Fn,Nn,Gn,ei,ii){Gn.includes("mouse")?Fn.addEventListener(Gn,gi=>{var Ti;(Ti=this.linkService.eventBus)==null||Ti.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ei,value:ii(gi),shift:gi.shiftKey,modifier:this._getKeyModifier(gi)}})}):Fn.addEventListener(Gn,gi=>{var Ti;if(Gn==="blur"){if(!Nn.focused||!gi.relatedTarget)return;Nn.focused=!1}else if(Gn==="focus"){if(Nn.focused)return;Nn.focused=!0}ii&&((Ti=this.linkService.eventBus)==null||Ti.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ei,value:ii(gi)}}))})}_setEventListeners(Fn,Nn,Gn,ei){var ii,gi,Ti;for(const[Wi,qi]of Gn)(qi==="Action"||(ii=this.data.actions)!=null&&ii[qi])&&((qi==="Focus"||qi==="Blur")&&(Nn||(Nn={focused:!1})),this._setEventListener(Fn,Nn,Wi,qi,ei),qi==="Focus"&&!((gi=this.data.actions)!=null&&gi.Blur)?this._setEventListener(Fn,Nn,"blur","Blur",null):qi==="Blur"&&!((Ti=this.data.actions)!=null&&Ti.Focus)&&this._setEventListener(Fn,Nn,"focus","Focus",null))}_setBackgroundColor(Fn){const Nn=this.data.backgroundColor||null;Fn.style.backgroundColor=Nn===null?"transparent":xe.Util.makeHexColor(Nn[0],Nn[1],Nn[2])}_setTextStyle(Fn){const Nn=["left","center","right"],{fontColor:Gn}=this.data.defaultAppearanceData,ei=this.data.defaultAppearanceData.fontSize||Me,ii=Fn.style;let gi;const Ti=2,Wi=qi=>Math.round(10*qi)/10;if(this.data.multiLine){const qi=Math.abs(this.data.rect[3]-this.data.rect[1]-Ti),ji=Math.round(qi/(xe.LINE_FACTOR*ei))||1,la=qi/ji;gi=Math.min(ei,Wi(la/xe.LINE_FACTOR))}else{const qi=Math.abs(this.data.rect[3]-this.data.rect[1]-Ti);gi=Math.min(ei,Wi(qi/xe.LINE_FACTOR))}ii.fontSize=`calc(${gi}px * var(--scale-factor))`,ii.color=xe.Util.makeHexColor(Gn[0],Gn[1],Gn[2]),this.data.textAlignment!==null&&(ii.textAlign=Nn[this.data.textAlignment])}_setRequired(Fn,Nn){Nn?Fn.setAttribute("required",!0):Fn.removeAttribute("required"),Fn.setAttribute("aria-required",Nn)}}class Qe extends je{constructor(Fn){const Nn=Fn.renderForms||!Fn.data.hasAppearance&&!!Fn.data.fieldValue;super(Fn,{isRenderable:Nn})}setPropertyOnSiblings(Fn,Nn,Gn,ei){const ii=this.annotationStorage;for(const gi of this._getElementsByName(Fn.name,Fn.id))gi.domElement&&(gi.domElement[Nn]=Gn),ii.setValue(gi.id,{[ei]:Gn})}render(){var ei,ii;const Fn=this.annotationStorage,Nn=this.data.id;this.container.classList.add("textWidgetAnnotation");let Gn=null;if(this.renderForms){const gi=Fn.getValue(Nn,{value:this.data.fieldValue});let Ti=gi.value||"";const Wi=Fn.getValue(Nn,{charLimit:this.data.maxLen}).charLimit;Wi&&Ti.length>Wi&&(Ti=Ti.slice(0,Wi));let qi=gi.formattedValue||((ei=this.data.textContent)==null?void 0:ei.join(`
`))||null;qi&&this.data.comb&&(qi=qi.replaceAll(/\s+/g,""));const ji={userValue:Ti,formattedValue:qi,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(Gn=document.createElement("textarea"),Gn.textContent=qi??Ti,this.data.doNotScroll&&(Gn.style.overflowY="hidden")):(Gn=document.createElement("input"),Gn.type="text",Gn.setAttribute("value",qi??Ti),this.data.doNotScroll&&(Gn.style.overflowX="hidden")),this.data.hasOwnCanvas&&(Gn.hidden=!0),Ve.add(Gn),Gn.setAttribute("data-element-id",Nn),Gn.disabled=this.data.readOnly,Gn.name=this.data.fieldName,Gn.tabIndex=Be,this._setRequired(Gn,this.data.required),Wi&&(Gn.maxLength=Wi),Gn.addEventListener("input",ia=>{Fn.setValue(Nn,{value:ia.target.value}),this.setPropertyOnSiblings(Gn,"value",ia.target.value,"value"),ji.formattedValue=null}),Gn.addEventListener("resetform",ia=>{const Zi=this.data.defaultFieldValue??"";Gn.value=ji.userValue=Zi,ji.formattedValue=null});let la=ia=>{const{formattedValue:Zi}=ji;Zi!=null&&(ia.target.value=Zi),ia.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){Gn.addEventListener("focus",Zi=>{if(ji.focused)return;const{target:aa}=Zi;ji.userValue&&(aa.value=ji.userValue),ji.lastCommittedValue=aa.value,ji.commitKey=1,ji.focused=!0}),Gn.addEventListener("updatefromsandbox",Zi=>{this.showElementAndHideCanvas(Zi.target);const aa={value(ca){ji.userValue=ca.detail.value??"",Fn.setValue(Nn,{value:ji.userValue.toString()}),ca.target.value=ji.userValue},formattedValue(ca){const{formattedValue:ma}=ca.detail;ji.formattedValue=ma,ma!=null&&ca.target!==document.activeElement&&(ca.target.value=ma),Fn.setValue(Nn,{formattedValue:ma})},selRange(ca){ca.target.setSelectionRange(...ca.detail.selRange)},charLimit:ca=>{var Ba;const{charLimit:ma}=ca.detail,{target:xa}=ca;if(ma===0){xa.removeAttribute("maxLength");return}xa.setAttribute("maxLength",ma);let Oa=ji.userValue;!Oa||Oa.length<=ma||(Oa=Oa.slice(0,ma),xa.value=ji.userValue=Oa,Fn.setValue(Nn,{value:Oa}),(Ba=this.linkService.eventBus)==null||Ba.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Nn,name:"Keystroke",value:Oa,willCommit:!0,commitKey:1,selStart:xa.selectionStart,selEnd:xa.selectionEnd}}))}};this._dispatchEventFromSandbox(aa,Zi)}),Gn.addEventListener("keydown",Zi=>{var ma;ji.commitKey=1;let aa=-1;if(Zi.key==="Escape"?aa=0:Zi.key==="Enter"&&!this.data.multiLine?aa=2:Zi.key==="Tab"&&(ji.commitKey=3),aa===-1)return;const{value:ca}=Zi.target;ji.lastCommittedValue!==ca&&(ji.lastCommittedValue=ca,ji.userValue=ca,(ma=this.linkService.eventBus)==null||ma.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Nn,name:"Keystroke",value:ca,willCommit:!0,commitKey:aa,selStart:Zi.target.selectionStart,selEnd:Zi.target.selectionEnd}}))});const ia=la;la=null,Gn.addEventListener("blur",Zi=>{var ca;if(!ji.focused||!Zi.relatedTarget)return;ji.focused=!1;const{value:aa}=Zi.target;ji.userValue=aa,ji.lastCommittedValue!==aa&&((ca=this.linkService.eventBus)==null||ca.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Nn,name:"Keystroke",value:aa,willCommit:!0,commitKey:ji.commitKey,selStart:Zi.target.selectionStart,selEnd:Zi.target.selectionEnd}})),ia(Zi)}),(ii=this.data.actions)!=null&&ii.Keystroke&&Gn.addEventListener("beforeinput",Zi=>{var wr;ji.lastCommittedValue=null;const{data:aa,target:ca}=Zi,{value:ma,selectionStart:xa,selectionEnd:Oa}=ca;let Ba=xa,tr=Oa;switch(Zi.inputType){case"deleteWordBackward":{const Sr=ma.substring(0,xa).match(/\w*[^\w]*$/);Sr&&(Ba-=Sr[0].length);break}case"deleteWordForward":{const Sr=ma.substring(xa).match(/^[^\w]*\w*/);Sr&&(tr+=Sr[0].length);break}case"deleteContentBackward":xa===Oa&&(Ba-=1);break;case"deleteContentForward":xa===Oa&&(tr+=1);break}Zi.preventDefault(),(wr=this.linkService.eventBus)==null||wr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Nn,name:"Keystroke",value:ma,change:aa||"",willCommit:!1,selStart:Ba,selEnd:tr}})}),this._setEventListeners(Gn,ji,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Zi=>Zi.target.value)}if(la&&Gn.addEventListener("blur",la),this.data.comb){const Zi=(this.data.rect[2]-this.data.rect[0])/Wi;Gn.classList.add("comb"),Gn.style.letterSpacing=`calc(${Zi}px * var(--scale-factor) - 1ch)`}}else Gn=document.createElement("div"),Gn.textContent=this.data.fieldValue,Gn.style.verticalAlign="middle",Gn.style.display="table-cell";return this._setTextStyle(Gn),this._setBackgroundColor(Gn),this._setDefaultPropertiesFromJS(Gn),this.container.append(Gn),this.container}}class sn extends je{constructor(Fn){super(Fn,{isRenderable:!!Fn.data.hasOwnCanvas})}}class cn extends je{constructor(Fn){super(Fn,{isRenderable:Fn.renderForms})}render(){const Fn=this.annotationStorage,Nn=this.data,Gn=Nn.id;let ei=Fn.getValue(Gn,{value:Nn.exportValue===Nn.fieldValue}).value;typeof ei=="string"&&(ei=ei!=="Off",Fn.setValue(Gn,{value:ei})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const ii=document.createElement("input");return Ve.add(ii),ii.setAttribute("data-element-id",Gn),ii.disabled=Nn.readOnly,this._setRequired(ii,this.data.required),ii.type="checkbox",ii.name=Nn.fieldName,ei&&ii.setAttribute("checked",!0),ii.setAttribute("exportValue",Nn.exportValue),ii.tabIndex=Be,ii.addEventListener("change",gi=>{const{name:Ti,checked:Wi}=gi.target;for(const qi of this._getElementsByName(Ti,Gn)){const ji=Wi&&qi.exportValue===Nn.exportValue;qi.domElement&&(qi.domElement.checked=ji),Fn.setValue(qi.id,{value:ji})}Fn.setValue(Gn,{value:Wi})}),ii.addEventListener("resetform",gi=>{const Ti=Nn.defaultFieldValue||"Off";gi.target.checked=Ti===Nn.exportValue}),this.enableScripting&&this.hasJSActions&&(ii.addEventListener("updatefromsandbox",gi=>{const Ti={value(Wi){Wi.target.checked=Wi.detail.value!=="Off",Fn.setValue(Gn,{value:Wi.target.checked})}};this._dispatchEventFromSandbox(Ti,gi)}),this._setEventListeners(ii,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],gi=>gi.target.checked)),this._setBackgroundColor(ii),this._setDefaultPropertiesFromJS(ii),this.container.append(ii),this.container}}class nn extends je{constructor(Fn){super(Fn,{isRenderable:Fn.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const Fn=this.annotationStorage,Nn=this.data,Gn=Nn.id;let ei=Fn.getValue(Gn,{value:Nn.fieldValue===Nn.buttonValue}).value;typeof ei=="string"&&(ei=ei!==Nn.buttonValue,Fn.setValue(Gn,{value:ei}));const ii=document.createElement("input");if(Ve.add(ii),ii.setAttribute("data-element-id",Gn),ii.disabled=Nn.readOnly,this._setRequired(ii,this.data.required),ii.type="radio",ii.name=Nn.fieldName,ei&&ii.setAttribute("checked",!0),ii.tabIndex=Be,ii.addEventListener("change",gi=>{const{name:Ti,checked:Wi}=gi.target;for(const qi of this._getElementsByName(Ti,Gn))Fn.setValue(qi.id,{value:!1});Fn.setValue(Gn,{value:Wi})}),ii.addEventListener("resetform",gi=>{const Ti=Nn.defaultFieldValue;gi.target.checked=Ti!=null&&Ti===Nn.buttonValue}),this.enableScripting&&this.hasJSActions){const gi=Nn.buttonValue;ii.addEventListener("updatefromsandbox",Ti=>{const Wi={value:qi=>{const ji=gi===qi.detail.value;for(const la of this._getElementsByName(qi.target.name)){const ia=ji&&la.id===Gn;la.domElement&&(la.domElement.checked=ia),Fn.setValue(la.id,{value:ia})}}};this._dispatchEventFromSandbox(Wi,Ti)}),this._setEventListeners(ii,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ti=>Ti.target.checked)}return this._setBackgroundColor(ii),this._setDefaultPropertiesFromJS(ii),this.container.append(ii),this.container}}class an extends Ye{constructor(Fn){super(Fn,{ignoreBorder:Fn.data.hasAppearance})}render(){const Fn=super.render();Fn.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(Fn.title=this.data.alternativeText);const Nn=Fn.lastChild;return this.enableScripting&&this.hasJSActions&&Nn&&(this._setDefaultPropertiesFromJS(Nn),Nn.addEventListener("updatefromsandbox",Gn=>{this._dispatchEventFromSandbox({},Gn)})),Fn}}class Ze extends je{constructor(Fn){super(Fn,{isRenderable:Fn.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const Fn=this.annotationStorage,Nn=this.data.id,Gn=Fn.getValue(Nn,{value:this.data.fieldValue}),ei=document.createElement("select");Ve.add(ei),ei.setAttribute("data-element-id",Nn),ei.disabled=this.data.readOnly,this._setRequired(ei,this.data.required),ei.name=this.data.fieldName,ei.tabIndex=Be;let ii=this.data.combo&&this.data.options.length>0;this.data.combo||(ei.size=this.data.options.length,this.data.multiSelect&&(ei.multiple=!0)),ei.addEventListener("resetform",ji=>{const la=this.data.defaultFieldValue;for(const ia of ei.options)ia.selected=ia.value===la});for(const ji of this.data.options){const la=document.createElement("option");la.textContent=ji.displayValue,la.value=ji.exportValue,Gn.value.includes(ji.exportValue)&&(la.setAttribute("selected",!0),ii=!1),ei.append(la)}let gi=null;if(ii){const ji=document.createElement("option");ji.value=" ",ji.setAttribute("hidden",!0),ji.setAttribute("selected",!0),ei.prepend(ji),gi=()=>{ji.remove(),ei.removeEventListener("input",gi),gi=null},ei.addEventListener("input",gi)}const Ti=ji=>{const la=ji?"value":"textContent",{options:ia,multiple:Zi}=ei;return Zi?Array.prototype.filter.call(ia,aa=>aa.selected).map(aa=>aa[la]):ia.selectedIndex===-1?null:ia[ia.selectedIndex][la]};let Wi=Ti(!1);const qi=ji=>{const la=ji.target.options;return Array.prototype.map.call(la,ia=>({displayValue:ia.textContent,exportValue:ia.value}))};return this.enableScripting&&this.hasJSActions?(ei.addEventListener("updatefromsandbox",ji=>{const la={value(ia){gi==null||gi();const Zi=ia.detail.value,aa=new Set(Array.isArray(Zi)?Zi:[Zi]);for(const ca of ei.options)ca.selected=aa.has(ca.value);Fn.setValue(Nn,{value:Ti(!0)}),Wi=Ti(!1)},multipleSelection(ia){ei.multiple=!0},remove(ia){const Zi=ei.options,aa=ia.detail.remove;Zi[aa].selected=!1,ei.remove(aa),Zi.length>0&&Array.prototype.findIndex.call(Zi,ma=>ma.selected)===-1&&(Zi[0].selected=!0),Fn.setValue(Nn,{value:Ti(!0),items:qi(ia)}),Wi=Ti(!1)},clear(ia){for(;ei.length!==0;)ei.remove(0);Fn.setValue(Nn,{value:null,items:[]}),Wi=Ti(!1)},insert(ia){const{index:Zi,displayValue:aa,exportValue:ca}=ia.detail.insert,ma=ei.children[Zi],xa=document.createElement("option");xa.textContent=aa,xa.value=ca,ma?ma.before(xa):ei.append(xa),Fn.setValue(Nn,{value:Ti(!0),items:qi(ia)}),Wi=Ti(!1)},items(ia){const{items:Zi}=ia.detail;for(;ei.length!==0;)ei.remove(0);for(const aa of Zi){const{displayValue:ca,exportValue:ma}=aa,xa=document.createElement("option");xa.textContent=ca,xa.value=ma,ei.append(xa)}ei.options.length>0&&(ei.options[0].selected=!0),Fn.setValue(Nn,{value:Ti(!0),items:qi(ia)}),Wi=Ti(!1)},indices(ia){const Zi=new Set(ia.detail.indices);for(const aa of ia.target.options)aa.selected=Zi.has(aa.index);Fn.setValue(Nn,{value:Ti(!0)}),Wi=Ti(!1)},editable(ia){ia.target.disabled=!ia.detail.editable}};this._dispatchEventFromSandbox(la,ji)}),ei.addEventListener("input",ji=>{var ia;const la=Ti(!0);Fn.setValue(Nn,{value:la}),ji.preventDefault(),(ia=this.linkService.eventBus)==null||ia.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Nn,name:"Keystroke",value:Wi,changeEx:la,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(ei,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],ji=>ji.target.value)):ei.addEventListener("input",function(ji){Fn.setValue(Nn,{value:Ti(!0)})}),this.data.combo&&this._setTextStyle(ei),this._setBackgroundColor(ei),this._setDefaultPropertiesFromJS(ei),this.container.append(ei),this.container}}class tn extends qe{constructor(Fn){const{data:Nn,elements:Gn}=Fn;super(Fn,{isRenderable:qe._hasPopupData(Nn)}),this.elements=Gn}render(){this.container.classList.add("popupAnnotation");const Fn=new We({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),Nn=[];for(const Gn of this.elements)Gn.popup=Fn,Nn.push(Gn.data.id),Gn.addHighlightArea();return this.container.setAttribute("aria-controls",Nn.map(Gn=>`${xe.AnnotationPrefix}${Gn}`).join(",")),this.container}}class We{constructor({container:Fn,color:Nn,elements:Gn,titleObj:ei,modificationDate:ii,contentsObj:gi,richText:Ti,parent:Wi,rect:qi,parentRect:ji,open:la}){bi(this,ai);bi(this,On,null);bi(this,jn,li(this,ai,S0).bind(this));bi(this,Wn,li(this,ai,kp).bind(this));bi(this,ti,li(this,ai,Mp).bind(this));bi(this,si,li(this,ai,Hd).bind(this));bi(this,qn,null);bi(this,En,null);bi(this,Qn,null);bi(this,Cn,null);bi(this,Mn,null);bi(this,Un,null);bi(this,zn,!1);bi(this,ni,null);bi(this,yi,null);bi(this,pi,null);bi(this,$n,null);bi(this,Yn,!1);var Zi;xi(this,En,Fn),xi(this,$n,ei),xi(this,Qn,gi),xi(this,pi,Ti),xi(this,Mn,Wi),xi(this,qn,Nn),xi(this,yi,qi),xi(this,Un,ji),xi(this,Cn,Gn);const ia=Se.PDFDateString.toDateObject(ii);ia&&xi(this,On,Wi.l10n.get("annotation_date_string",{date:ia.toLocaleDateString(),time:ia.toLocaleTimeString()})),this.trigger=Gn.flatMap(aa=>aa.getElementsToTriggerPopup());for(const aa of this.trigger)aa.addEventListener("click",un(this,si)),aa.addEventListener("mouseenter",un(this,ti)),aa.addEventListener("mouseleave",un(this,Wn)),aa.classList.add("popupTriggerArea");for(const aa of Gn)(Zi=aa.container)==null||Zi.addEventListener("keydown",un(this,jn));un(this,En).hidden=!0,la&&li(this,ai,Hd).call(this)}render(){if(un(this,ni))return;const{page:{view:Fn},viewport:{rawDims:{pageWidth:Nn,pageHeight:Gn,pageX:ei,pageY:ii}}}=un(this,Mn),gi=xi(this,ni,document.createElement("div"));if(gi.className="popup",un(this,qn)){const Ba=gi.style.outlineColor=xe.Util.makeHexColor(...un(this,qn));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?gi.style.backgroundColor=`color-mix(in srgb, ${Ba} 30%, white)`:gi.style.backgroundColor=xe.Util.makeHexColor(...un(this,qn).map(wr=>Math.floor(.7*(255-wr)+wr)))}const Ti=document.createElement("span");Ti.className="header";const Wi=document.createElement("h1");if(Ti.append(Wi),{dir:Wi.dir,str:Wi.textContent}=un(this,$n),gi.append(Ti),un(this,On)){const Ba=document.createElement("span");Ba.classList.add("popupDate"),un(this,On).then(tr=>{Ba.textContent=tr}),Ti.append(Ba)}const qi=un(this,Qn),ji=un(this,pi);if(ji!=null&&ji.str&&(!(qi!=null&&qi.str)||qi.str===ji.str))Re.XfaLayer.render({xfaHtml:ji.html,intent:"richText",div:gi}),gi.lastChild.classList.add("richText","popupContent");else{const Ba=this._formatContents(qi);gi.append(Ba)}let la=!!un(this,Un),ia=la?un(this,Un):un(this,yi);for(const Ba of un(this,Cn))if(!ia||xe.Util.intersect(Ba.data.rect,ia)!==null){ia=Ba.data.rect,la=!0;break}const Zi=xe.Util.normalizeRect([ia[0],Fn[3]-ia[1]+Fn[1],ia[2],Fn[3]-ia[3]+Fn[1]]),ca=la?ia[2]-ia[0]+5:0,ma=Zi[0]+ca,xa=Zi[1],{style:Oa}=un(this,En);Oa.left=`${100*(ma-ei)/Nn}%`,Oa.top=`${100*(xa-ii)/Gn}%`,un(this,En).append(gi)}_formatContents({str:Fn,dir:Nn}){const Gn=document.createElement("p");Gn.classList.add("popupContent"),Gn.dir=Nn;const ei=Fn.split(/(?:\r\n?|\n)/);for(let ii=0,gi=ei.length;ii<gi;++ii){const Ti=ei[ii];Gn.append(document.createTextNode(Ti)),ii<gi-1&&Gn.append(document.createElement("br"))}return Gn}forceHide(){xi(this,Yn,this.isVisible),un(this,Yn)&&(un(this,En).hidden=!0)}maybeShow(){un(this,Yn)&&(xi(this,Yn,!1),un(this,En).hidden=!1)}get isVisible(){return un(this,En).hidden===!1}}On=new WeakMap,jn=new WeakMap,Wn=new WeakMap,ti=new WeakMap,si=new WeakMap,qn=new WeakMap,En=new WeakMap,Qn=new WeakMap,Cn=new WeakMap,Mn=new WeakMap,Un=new WeakMap,zn=new WeakMap,ni=new WeakMap,yi=new WeakMap,pi=new WeakMap,$n=new WeakMap,Yn=new WeakMap,ai=new WeakSet,S0=function(Fn){Fn.altKey||Fn.shiftKey||Fn.ctrlKey||Fn.metaKey||(Fn.key==="Enter"||Fn.key==="Escape"&&un(this,zn))&&li(this,ai,Hd).call(this)},Hd=function(){xi(this,zn,!un(this,zn)),un(this,zn)?(li(this,ai,Mp).call(this),un(this,En).addEventListener("click",un(this,si)),un(this,En).addEventListener("keydown",un(this,jn))):(li(this,ai,kp).call(this),un(this,En).removeEventListener("click",un(this,si)),un(this,En).removeEventListener("keydown",un(this,jn)))},Mp=function(){un(this,ni)||this.render(),this.isVisible?un(this,zn)&&un(this,En).classList.add("focused"):(un(this,En).hidden=!1,un(this,En).style.zIndex=parseInt(un(this,En).style.zIndex)+1e3)},kp=function(){un(this,En).classList.remove("focused"),!(un(this,zn)||!this.isVisible)&&(un(this,En).hidden=!0,un(this,En).style.zIndex=parseInt(un(this,En).style.zIndex)-1e3)};class An extends qe{constructor(Fn){super(Fn,{isRenderable:!0,ignoreBorder:!0}),this.textContent=Fn.data.textContent,this.textPosition=Fn.data.textPosition,this.annotationEditorType=xe.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const Fn=document.createElement("div");Fn.classList.add("annotationTextContent"),Fn.setAttribute("role","comment");for(const Nn of this.textContent){const Gn=document.createElement("span");Gn.textContent=Nn,Fn.append(Gn)}this.container.append(Fn)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=An;class Je extends qe{constructor(Nn){super(Nn,{isRenderable:!0,ignoreBorder:!0});bi(this,na,null)}render(){this.container.classList.add("lineAnnotation");const Nn=this.data,{width:Gn,height:ei}=Fe(Nn.rect),ii=this.svgFactory.create(Gn,ei,!0),gi=xi(this,na,this.svgFactory.createElement("svg:line"));return gi.setAttribute("x1",Nn.rect[2]-Nn.lineCoordinates[0]),gi.setAttribute("y1",Nn.rect[3]-Nn.lineCoordinates[1]),gi.setAttribute("x2",Nn.rect[2]-Nn.lineCoordinates[2]),gi.setAttribute("y2",Nn.rect[3]-Nn.lineCoordinates[3]),gi.setAttribute("stroke-width",Nn.borderStyle.width||1),gi.setAttribute("stroke","transparent"),gi.setAttribute("fill","transparent"),ii.append(gi),this.container.append(ii),!Nn.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return un(this,na)}addHighlightArea(){this.container.classList.add("highlightArea")}}na=new WeakMap;class St extends qe{constructor(Nn){super(Nn,{isRenderable:!0,ignoreBorder:!0});bi(this,ea,null)}render(){this.container.classList.add("squareAnnotation");const Nn=this.data,{width:Gn,height:ei}=Fe(Nn.rect),ii=this.svgFactory.create(Gn,ei,!0),gi=Nn.borderStyle.width,Ti=xi(this,ea,this.svgFactory.createElement("svg:rect"));return Ti.setAttribute("x",gi/2),Ti.setAttribute("y",gi/2),Ti.setAttribute("width",Gn-gi),Ti.setAttribute("height",ei-gi),Ti.setAttribute("stroke-width",gi||1),Ti.setAttribute("stroke","transparent"),Ti.setAttribute("fill","transparent"),ii.append(Ti),this.container.append(ii),!Nn.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return un(this,ea)}addHighlightArea(){this.container.classList.add("highlightArea")}}ea=new WeakMap;class hn extends qe{constructor(Nn){super(Nn,{isRenderable:!0,ignoreBorder:!0});bi(this,Ki,null)}render(){this.container.classList.add("circleAnnotation");const Nn=this.data,{width:Gn,height:ei}=Fe(Nn.rect),ii=this.svgFactory.create(Gn,ei,!0),gi=Nn.borderStyle.width,Ti=xi(this,Ki,this.svgFactory.createElement("svg:ellipse"));return Ti.setAttribute("cx",Gn/2),Ti.setAttribute("cy",ei/2),Ti.setAttribute("rx",Gn/2-gi/2),Ti.setAttribute("ry",ei/2-gi/2),Ti.setAttribute("stroke-width",gi||1),Ti.setAttribute("stroke","transparent"),Ti.setAttribute("fill","transparent"),ii.append(Ti),this.container.append(ii),!Nn.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return un(this,Ki)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ki=new WeakMap;class _n extends qe{constructor(Nn){super(Nn,{isRenderable:!0,ignoreBorder:!0});bi(this,oi,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const Nn=this.data,{width:Gn,height:ei}=Fe(Nn.rect),ii=this.svgFactory.create(Gn,ei,!0);let gi=[];for(const Wi of Nn.vertices){const qi=Wi.x-Nn.rect[0],ji=Nn.rect[3]-Wi.y;gi.push(qi+","+ji)}gi=gi.join(" ");const Ti=xi(this,oi,this.svgFactory.createElement(this.svgElementName));return Ti.setAttribute("points",gi),Ti.setAttribute("stroke-width",Nn.borderStyle.width||1),Ti.setAttribute("stroke","transparent"),Ti.setAttribute("fill","transparent"),ii.append(Ti),this.container.append(ii),!Nn.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return un(this,oi)}addHighlightArea(){this.container.classList.add("highlightArea")}}oi=new WeakMap;class yn extends _n{constructor(Fn){super(Fn),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class mn extends qe{constructor(Fn){super(Fn,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Sn extends qe{constructor(Nn){super(Nn,{isRenderable:!0,ignoreBorder:!0});bi(this,Kn,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=xe.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const Nn=this.data,{width:Gn,height:ei}=Fe(Nn.rect),ii=this.svgFactory.create(Gn,ei,!0);for(const gi of Nn.inkLists){let Ti=[];for(const qi of gi){const ji=qi.x-Nn.rect[0],la=Nn.rect[3]-qi.y;Ti.push(`${ji},${la}`)}Ti=Ti.join(" ");const Wi=this.svgFactory.createElement(this.svgElementName);un(this,Kn).push(Wi),Wi.setAttribute("points",Ti),Wi.setAttribute("stroke-width",Nn.borderStyle.width||1),Wi.setAttribute("stroke","transparent"),Wi.setAttribute("fill","transparent"),!Nn.popupRef&&this.hasPopupData&&this._createPopup(),ii.append(Wi)}return this.container.append(ii),this.container}getElementsToTriggerPopup(){return un(this,Kn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Kn=new WeakMap,e.InkAnnotationElement=Sn;class Pn extends qe{constructor(Fn){super(Fn,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class pn extends qe{constructor(Fn){super(Fn,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class on extends qe{constructor(Fn){super(Fn,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class xn extends qe{constructor(Fn){super(Fn,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Ge extends qe{constructor(Fn){super(Fn,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=Ge;class Oe extends qe{constructor(Nn){var ii;super(Nn,{isRenderable:!0});bi(this,Ui);bi(this,di,null);const{filename:Gn,content:ei}=this.data.file;this.filename=(0,Se.getFilenameFromUrl)(Gn,!0),this.content=ei,(ii=this.linkService.eventBus)==null||ii.dispatch("fileattachmentannotation",{source:this,filename:Gn,content:ei})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:Nn,data:Gn}=this;let ei;Gn.hasAppearance||Gn.fillAlpha===0?ei=document.createElement("div"):(ei=document.createElement("img"),ei.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(Gn.name)?"paperclip":"pushpin"}.svg`,Gn.fillAlpha&&Gn.fillAlpha<1&&(ei.style=`filter: opacity(${Math.round(Gn.fillAlpha*100)}%);`)),ei.addEventListener("dblclick",li(this,Ui,Vp).bind(this)),xi(this,di,ei);const{isMac:ii}=xe.FeatureTest.platform;return Nn.addEventListener("keydown",gi=>{gi.key==="Enter"&&(ii?gi.metaKey:gi.ctrlKey)&&li(this,Ui,Vp).call(this)}),!Gn.popupRef&&this.hasPopupData?this._createPopup():ei.classList.add("popupTriggerArea"),Nn.append(ei),Nn}getElementsToTriggerPopup(){return un(this,di)}addHighlightArea(){this.container.classList.add("highlightArea")}}di=new WeakMap,Ui=new WeakSet,Vp=function(){var Nn;(Nn=this.downloadManager)==null||Nn.openOrDownloadData(this.container,this.content,this.filename)};class $e{constructor({div:Fn,accessibilityManager:Nn,annotationCanvasMap:Gn,l10n:ei,page:ii,viewport:gi}){bi(this,Xn);bi(this,Ai,null);bi(this,Rn,null);bi(this,Zn,new Map);this.div=Fn,xi(this,Ai,Nn),xi(this,Rn,Gn),this.l10n=ei,this.page=ii,this.viewport=gi,this.zIndex=0,this.l10n||(this.l10n=Ce.NullL10n)}async render(Fn){const{annotations:Nn}=Fn,Gn=this.div;(0,Se.setLayerDimensions)(Gn,this.viewport);const ei=new Map,ii={data:null,layer:Gn,linkService:Fn.linkService,downloadManager:Fn.downloadManager,imageResourcesPath:Fn.imageResourcesPath||"",renderForms:Fn.renderForms!==!1,svgFactory:new Se.DOMSVGFactory,annotationStorage:Fn.annotationStorage||new Ee.AnnotationStorage,enableScripting:Fn.enableScripting===!0,hasJSActions:Fn.hasJSActions,fieldObjects:Fn.fieldObjects,parent:this,elements:null};for(const gi of Nn){if(gi.noHTML)continue;const Ti=gi.annotationType===xe.AnnotationType.POPUP;if(Ti){const ji=ei.get(gi.id);if(!ji)continue;ii.elements=ji}else{const{width:ji,height:la}=Fe(gi.rect);if(ji<=0||la<=0)continue}ii.data=gi;const Wi=Ie.create(ii);if(!Wi.isRenderable)continue;if(!Ti&&gi.popupRef){const ji=ei.get(gi.popupRef);ji?ji.push(Wi):ei.set(gi.popupRef,[Wi])}Wi.annotationEditorType>0&&un(this,Zn).set(Wi.data.id,Wi);const qi=Wi.render();gi.hidden&&(qi.style.visibility="hidden"),li(this,Xn,A0).call(this,qi,gi.id)}li(this,Xn,Lp).call(this),await this.l10n.translate(Gn)}update({viewport:Fn}){const Nn=this.div;this.viewport=Fn,(0,Se.setLayerDimensions)(Nn,{rotation:Fn.rotation}),li(this,Xn,Lp).call(this),Nn.hidden=!1}getEditableAnnotations(){return Array.from(un(this,Zn).values())}getEditableAnnotation(Fn){return un(this,Zn).get(Fn)}}Ai=new WeakMap,Rn=new WeakMap,Zn=new WeakMap,Xn=new WeakSet,A0=function(Fn,Nn){var ei;const Gn=Fn.firstChild||Fn;Gn.id=`${xe.AnnotationPrefix}${Nn}`,this.div.append(Fn),(ei=un(this,Ai))==null||ei.moveElementInDOM(this.div,Fn,Gn,!1)},Lp=function(){if(!un(this,Rn))return;const Fn=this.div;for(const[Nn,Gn]of un(this,Rn)){const ei=Fn.querySelector(`[data-annotation-id="${Nn}"]`);if(!ei)continue;const{firstChild:ii}=ei;ii?ii.nodeName==="CANVAS"?ii.replaceWith(Gn):ii.before(Gn):ei.append(Gn)}un(this,Rn).clear()},e.AnnotationLayer=$e}),((t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function r(Ee){return Math.floor(Math.max(0,Math.min(1,Ee))*255).toString(16).padStart(2,"0")}function xe(Ee){return Math.max(0,Math.min(255,255*Ee))}class Se{static CMYK_G([Pe,Ce,Re,Be]){return["G",1-Math.min(1,.3*Pe+.59*Re+.11*Ce+Be)]}static G_CMYK([Pe]){return["CMYK",0,0,0,1-Pe]}static G_RGB([Pe]){return["RGB",Pe,Pe,Pe]}static G_rgb([Pe]){return Pe=xe(Pe),[Pe,Pe,Pe]}static G_HTML([Pe]){const Ce=r(Pe);return`#${Ce}${Ce}${Ce}`}static RGB_G([Pe,Ce,Re]){return["G",.3*Pe+.59*Ce+.11*Re]}static RGB_rgb(Pe){return Pe.map(xe)}static RGB_HTML(Pe){return`#${Pe.map(r).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([Pe,Ce,Re,Be]){return["RGB",1-Math.min(1,Pe+Be),1-Math.min(1,Re+Be),1-Math.min(1,Ce+Be)]}static CMYK_rgb([Pe,Ce,Re,Be]){return[xe(1-Math.min(1,Pe+Be)),xe(1-Math.min(1,Re+Be)),xe(1-Math.min(1,Ce+Be))]}static CMYK_HTML(Pe){const Ce=this.CMYK_RGB(Pe).slice(1);return this.RGB_HTML(Ce)}static RGB_CMYK([Pe,Ce,Re]){const Be=1-Pe,Me=1-Ce,Ve=1-Re,Fe=Math.min(Be,Me,Ve);return["CMYK",Be,Me,Ve,Fe]}}e.ColorConverters=Se}),((t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=xe;const r={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};r.print_progress_percent="{{progress}}%";function xe(Pe,Ce){switch(Pe){case"find_match_count":Pe=`find_match_count[${Ce.total===1?"one":"other"}]`;break;case"find_match_count_limit":Pe=`find_match_count_limit[${Ce.limit===1?"one":"other"}]`;break}return r[Pe]||""}function Se(Pe,Ce){return Ce?Pe.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(Re,Be)=>Be in Ce?Ce[Be]:"{{"+Be+"}}"):Pe}const Ee={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(Pe,Ce=null,Re=xe(Pe,Ce)){return Se(Re,Ce)},async translate(Pe){}};e.NullL10n=Ee}),((t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var xe=r(25);class Se{static setupStorage(Pe,Ce,Re,Be,Me){const Ve=Be.getValue(Ce,{value:null});switch(Re.name){case"textarea":if(Ve.value!==null&&(Pe.textContent=Ve.value),Me==="print")break;Pe.addEventListener("input",Fe=>{Be.setValue(Ce,{value:Fe.target.value})});break;case"input":if(Re.attributes.type==="radio"||Re.attributes.type==="checkbox"){if(Ve.value===Re.attributes.xfaOn?Pe.setAttribute("checked",!0):Ve.value===Re.attributes.xfaOff&&Pe.removeAttribute("checked"),Me==="print")break;Pe.addEventListener("change",Fe=>{Be.setValue(Ce,{value:Fe.target.checked?Fe.target.getAttribute("xfaOn"):Fe.target.getAttribute("xfaOff")})})}else{if(Ve.value!==null&&Pe.setAttribute("value",Ve.value),Me==="print")break;Pe.addEventListener("input",Fe=>{Be.setValue(Ce,{value:Fe.target.value})})}break;case"select":if(Ve.value!==null){Pe.setAttribute("value",Ve.value);for(const Fe of Re.children)Fe.attributes.value===Ve.value?Fe.attributes.selected=!0:Fe.attributes.hasOwnProperty("selected")&&delete Fe.attributes.selected}Pe.addEventListener("input",Fe=>{const Ie=Fe.target.options,qe=Ie.selectedIndex===-1?"":Ie[Ie.selectedIndex].value;Be.setValue(Ce,{value:qe})});break}}static setAttributes({html:Pe,element:Ce,storage:Re=null,intent:Be,linkService:Me}){const{attributes:Ve}=Ce,Fe=Pe instanceof HTMLAnchorElement;Ve.type==="radio"&&(Ve.name=`${Ve.name}-${Be}`);for(const[Ie,qe]of Object.entries(Ve))if(qe!=null)switch(Ie){case"class":qe.length&&Pe.setAttribute(Ie,qe.join(" "));break;case"dataId":break;case"id":Pe.setAttribute("data-element-id",qe);break;case"style":Object.assign(Pe.style,qe);break;case"textContent":Pe.textContent=qe;break;default:(!Fe||Ie!=="href"&&Ie!=="newWindow")&&Pe.setAttribute(Ie,qe)}Fe&&Me.addLinkAttributes(Pe,Ve.href,Ve.newWindow),Re&&Ve.dataId&&this.setupStorage(Pe,Ve.dataId,Ce,Re)}static render(Pe){var Ye;const Ce=Pe.annotationStorage,Re=Pe.linkService,Be=Pe.xfaHtml,Me=Pe.intent||"display",Ve=document.createElement(Be.name);Be.attributes&&this.setAttributes({html:Ve,element:Be,intent:Me,linkService:Re});const Fe=[[Be,-1,Ve]],Ie=Pe.div;if(Ie.append(Ve),Pe.viewport){const Xe=`matrix(${Pe.viewport.transform.join(",")})`;Ie.style.transform=Xe}Me!=="richText"&&Ie.setAttribute("class","xfaLayer xfaFont");const qe=[];for(;Fe.length>0;){const[Xe,je,Qe]=Fe.at(-1);if(je+1===Xe.children.length){Fe.pop();continue}const sn=Xe.children[++Fe.at(-1)[1]];if(sn===null)continue;const{name:cn}=sn;if(cn==="#text"){const an=document.createTextNode(sn.value);qe.push(an),Qe.append(an);continue}const nn=(Ye=sn==null?void 0:sn.attributes)!=null&&Ye.xmlns?document.createElementNS(sn.attributes.xmlns,cn):document.createElement(cn);if(Qe.append(nn),sn.attributes&&this.setAttributes({html:nn,element:sn,storage:Ce,intent:Me,linkService:Re}),sn.children&&sn.children.length>0)Fe.push([sn,-1,nn]);else if(sn.value){const an=document.createTextNode(sn.value);xe.XfaText.shouldBuildText(cn)&&qe.push(an),nn.append(an)}}for(const Xe of Ie.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))Xe.setAttribute("readOnly",!0);return{textDivs:qe}}static update(Pe){const Ce=`matrix(${Pe.viewport.transform.join(",")})`;Pe.div.style.transform=Ce,Pe.div.hidden=!1}}e.XfaLayer=Se}),((t,e,r)=>{var Be,Me,Ve,Fe,Ie,qe,Ye,Xe,je,Qe,sn,cn,nn,an,Ze,E0,P0,w0,T0,Ip,C0,Dp,B0,R0,N0,M0,k0,Dl,Fp,Gd,Yd,eh,Op,Jd,gn,V0,Up,L0,I0,zp,Xd,th;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var xe=r(1),Se=r(4),Ee=r(29),Pe=r(6),Ce=r(5);const qn=class qn extends Se.AnnotationEditor{constructor(Cn){super({...Cn,name:"inkEditor"});bi(this,Ze);bi(this,Be,0);bi(this,Me,0);bi(this,Ve,this.canvasPointermove.bind(this));bi(this,Fe,this.canvasPointerleave.bind(this));bi(this,Ie,this.canvasPointerup.bind(this));bi(this,qe,this.canvasPointerdown.bind(this));bi(this,Ye,new Path2D);bi(this,Xe,!1);bi(this,je,!1);bi(this,Qe,!1);bi(this,sn,null);bi(this,cn,0);bi(this,nn,0);bi(this,an,null);this.color=Cn.color||null,this.thickness=Cn.thickness||null,this.opacity=Cn.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(Cn){Se.AnnotationEditor.initialize(Cn,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(Cn,Mn){switch(Cn){case xe.AnnotationEditorParamsType.INK_THICKNESS:qn._defaultThickness=Mn;break;case xe.AnnotationEditorParamsType.INK_COLOR:qn._defaultColor=Mn;break;case xe.AnnotationEditorParamsType.INK_OPACITY:qn._defaultOpacity=Mn/100;break}}updateParams(Cn,Mn){switch(Cn){case xe.AnnotationEditorParamsType.INK_THICKNESS:li(this,Ze,E0).call(this,Mn);break;case xe.AnnotationEditorParamsType.INK_COLOR:li(this,Ze,P0).call(this,Mn);break;case xe.AnnotationEditorParamsType.INK_OPACITY:li(this,Ze,w0).call(this,Mn);break}}static get defaultPropertiesToUpdate(){return[[xe.AnnotationEditorParamsType.INK_THICKNESS,qn._defaultThickness],[xe.AnnotationEditorParamsType.INK_COLOR,qn._defaultColor||Se.AnnotationEditor._defaultLineColor],[xe.AnnotationEditorParamsType.INK_OPACITY,Math.round(qn._defaultOpacity*100)]]}get propertiesToUpdate(){return[[xe.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||qn._defaultThickness],[xe.AnnotationEditorParamsType.INK_COLOR,this.color||qn._defaultColor||Se.AnnotationEditor._defaultLineColor],[xe.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??qn._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(li(this,Ze,Gd).call(this),li(this,Ze,Yd).call(this)),this.isAttachedToDOM||(this.parent.add(this),li(this,Ze,eh).call(this)),li(this,Ze,th).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,un(this,sn).disconnect(),xi(this,sn,null),super.remove())}setParent(Cn){!this.parent&&Cn?this._uiManager.removeShouldRescale(this):this.parent&&Cn===null&&this._uiManager.addShouldRescale(this),super.setParent(Cn)}onScaleChanging(){const[Cn,Mn]=this.parentDimensions,Un=this.width*Cn,zn=this.height*Mn;this.setDimensions(Un,zn)}enableEditMode(){un(this,Xe)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",un(this,qe)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",un(this,qe)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){un(this,Xe)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),xi(this,Xe,!0),this.div.classList.add("disabled"),li(this,Ze,th).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(Cn){this._focusEventsAllowed&&(super.focusin(Cn),this.enableEditMode())}canvasPointerdown(Cn){Cn.button!==0||!this.isInEditMode()||un(this,Xe)||(this.setInForeground(),Cn.preventDefault(),Cn.type!=="mouse"&&this.div.focus(),li(this,Ze,C0).call(this,Cn.offsetX,Cn.offsetY))}canvasPointermove(Cn){Cn.preventDefault(),li(this,Ze,Dp).call(this,Cn.offsetX,Cn.offsetY)}canvasPointerup(Cn){Cn.preventDefault(),li(this,Ze,Fp).call(this,Cn)}canvasPointerleave(Cn){li(this,Ze,Fp).call(this,Cn)}get isResizable(){return!this.isEmpty()&&un(this,Xe)}render(){if(this.div)return this.div;let Cn,Mn;this.width&&(Cn=this.x,Mn=this.y),super.render(),Se.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(pi=>{var $n;return($n=this.div)==null?void 0:$n.setAttribute("aria-label",pi)});const[Un,zn,ni,yi]=li(this,Ze,T0).call(this);if(this.setAt(Un,zn,0,0),this.setDims(ni,yi),li(this,Ze,Gd).call(this),this.width){const[pi,$n]=this.parentDimensions;this.setAspectRatio(this.width*pi,this.height*$n),this.setAt(Cn*pi,Mn*$n,this.width*pi,this.height*$n),xi(this,Qe,!0),li(this,Ze,eh).call(this),this.setDims(this.width*pi,this.height*$n),li(this,Ze,Dl).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return li(this,Ze,Yd).call(this),this.div}setDimensions(Cn,Mn){const Un=Math.round(Cn),zn=Math.round(Mn);if(un(this,cn)===Un&&un(this,nn)===zn)return;xi(this,cn,Un),xi(this,nn,zn),this.canvas.style.visibility="hidden";const[ni,yi]=this.parentDimensions;this.width=Cn/ni,this.height=Mn/yi,this.fixAndSetPosition(),un(this,Xe)&&li(this,Ze,Op).call(this,Cn,Mn),li(this,Ze,eh).call(this),li(this,Ze,Dl).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(Cn,Mn,Un){var na,ea,Ki;if(Cn instanceof Ee.InkAnnotationElement)return null;const zn=super.deserialize(Cn,Mn,Un);zn.thickness=Cn.thickness,zn.color=xe.Util.makeHexColor(...Cn.color),zn.opacity=Cn.opacity;const[ni,yi]=zn.pageDimensions,pi=zn.width*ni,$n=zn.height*yi,Yn=zn.parentScale,ai=Cn.thickness/2;xi(zn,Xe,!0),xi(zn,cn,Math.round(pi)),xi(zn,nn,Math.round($n));const{paths:Di,rect:ki,rotation:Ji}=Cn;for(let{bezier:oi}of Di){oi=li(na=qn,gn,L0).call(na,oi,ki,Ji);const Kn=[];zn.paths.push(Kn);let di=Yn*(oi[0]-ai),Ui=Yn*(oi[1]-ai);for(let Ai=2,Rn=oi.length;Ai<Rn;Ai+=6){const Zn=Yn*(oi[Ai]-ai),Xn=Yn*(oi[Ai+1]-ai),Si=Yn*(oi[Ai+2]-ai),Ci=Yn*(oi[Ai+3]-ai),Oi=Yn*(oi[Ai+4]-ai),Fn=Yn*(oi[Ai+5]-ai);Kn.push([[di,Ui],[Zn,Xn],[Si,Ci],[Oi,Fn]]),di=Oi,Ui=Fn}const wi=li(this,gn,V0).call(this,Kn);zn.bezierPath2D.push(wi)}const Pi=li(ea=zn,Ze,zp).call(ea);return xi(zn,Me,Math.max(Se.AnnotationEditor.MIN_SIZE,Pi[2]-Pi[0])),xi(zn,Be,Math.max(Se.AnnotationEditor.MIN_SIZE,Pi[3]-Pi[1])),li(Ki=zn,Ze,Op).call(Ki,pi,$n),zn}serialize(){if(this.isEmpty())return null;const Cn=this.getRect(0,0),Mn=Se.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:xe.AnnotationEditorType.INK,color:Mn,thickness:this.thickness,opacity:this.opacity,paths:li(this,Ze,I0).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,Cn),pageIndex:this.pageIndex,rect:Cn,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};Be=new WeakMap,Me=new WeakMap,Ve=new WeakMap,Fe=new WeakMap,Ie=new WeakMap,qe=new WeakMap,Ye=new WeakMap,Xe=new WeakMap,je=new WeakMap,Qe=new WeakMap,sn=new WeakMap,cn=new WeakMap,nn=new WeakMap,an=new WeakMap,Ze=new WeakSet,E0=function(Cn){const Mn=this.thickness;this.addCommands({cmd:()=>{this.thickness=Cn,li(this,Ze,th).call(this)},undo:()=>{this.thickness=Mn,li(this,Ze,th).call(this)},mustExec:!0,type:xe.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},P0=function(Cn){const Mn=this.color;this.addCommands({cmd:()=>{this.color=Cn,li(this,Ze,Dl).call(this)},undo:()=>{this.color=Mn,li(this,Ze,Dl).call(this)},mustExec:!0,type:xe.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},w0=function(Cn){Cn/=100;const Mn=this.opacity;this.addCommands({cmd:()=>{this.opacity=Cn,li(this,Ze,Dl).call(this)},undo:()=>{this.opacity=Mn,li(this,Ze,Dl).call(this)},mustExec:!0,type:xe.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},T0=function(){const{parentRotation:Cn,parentDimensions:[Mn,Un]}=this;switch(Cn){case 90:return[0,Un,Un,Mn];case 180:return[Mn,Un,Mn,Un];case 270:return[Mn,0,Un,Mn];default:return[0,0,Mn,Un]}},Ip=function(){const{ctx:Cn,color:Mn,opacity:Un,thickness:zn,parentScale:ni,scaleFactor:yi}=this;Cn.lineWidth=zn*ni/yi,Cn.lineCap="round",Cn.lineJoin="round",Cn.miterLimit=10,Cn.strokeStyle=`${Mn}${(0,Ce.opacityToHex)(Un)}`},C0=function(Cn,Mn){this.canvas.addEventListener("contextmenu",Pe.noContextMenu),this.canvas.addEventListener("pointerleave",un(this,Fe)),this.canvas.addEventListener("pointermove",un(this,Ve)),this.canvas.addEventListener("pointerup",un(this,Ie)),this.canvas.removeEventListener("pointerdown",un(this,qe)),this.isEditing=!0,un(this,Qe)||(xi(this,Qe,!0),li(this,Ze,eh).call(this),this.thickness||(this.thickness=qn._defaultThickness),this.color||(this.color=qn._defaultColor||Se.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=qn._defaultOpacity)),this.currentPath.push([Cn,Mn]),xi(this,je,!1),li(this,Ze,Ip).call(this),xi(this,an,()=>{li(this,Ze,N0).call(this),un(this,an)&&window.requestAnimationFrame(un(this,an))}),window.requestAnimationFrame(un(this,an))},Dp=function(Cn,Mn){const[Un,zn]=this.currentPath.at(-1);if(this.currentPath.length>1&&Cn===Un&&Mn===zn)return;const ni=this.currentPath;let yi=un(this,Ye);if(ni.push([Cn,Mn]),xi(this,je,!0),ni.length<=2){yi.moveTo(...ni[0]),yi.lineTo(Cn,Mn);return}ni.length===3&&(xi(this,Ye,yi=new Path2D),yi.moveTo(...ni[0])),li(this,Ze,M0).call(this,yi,...ni.at(-3),...ni.at(-2),Cn,Mn)},B0=function(){if(this.currentPath.length===0)return;const Cn=this.currentPath.at(-1);un(this,Ye).lineTo(...Cn)},R0=function(Cn,Mn){xi(this,an,null),Cn=Math.min(Math.max(Cn,0),this.canvas.width),Mn=Math.min(Math.max(Mn,0),this.canvas.height),li(this,Ze,Dp).call(this,Cn,Mn),li(this,Ze,B0).call(this);let Un;if(this.currentPath.length!==1)Un=li(this,Ze,k0).call(this);else{const $n=[Cn,Mn];Un=[[$n,$n.slice(),$n.slice(),$n]]}const zn=un(this,Ye),ni=this.currentPath;this.currentPath=[],xi(this,Ye,new Path2D);const yi=()=>{this.allRawPaths.push(ni),this.paths.push(Un),this.bezierPath2D.push(zn),this.rebuild()},pi=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(li(this,Ze,Gd).call(this),li(this,Ze,Yd).call(this)),li(this,Ze,th).call(this))};this.addCommands({cmd:yi,undo:pi,mustExec:!0})},N0=function(){if(!un(this,je))return;xi(this,je,!1);const Cn=Math.ceil(this.thickness*this.parentScale),Mn=this.currentPath.slice(-3),Un=Mn.map(yi=>yi[0]),zn=Mn.map(yi=>yi[1]);Math.min(...Un)-Cn,Math.max(...Un)+Cn,Math.min(...zn)-Cn,Math.max(...zn)+Cn;const{ctx:ni}=this;ni.save(),ni.clearRect(0,0,this.canvas.width,this.canvas.height);for(const yi of this.bezierPath2D)ni.stroke(yi);ni.stroke(un(this,Ye)),ni.restore()},M0=function(Cn,Mn,Un,zn,ni,yi,pi){const $n=(Mn+zn)/2,Yn=(Un+ni)/2,ai=(zn+yi)/2,Di=(ni+pi)/2;Cn.bezierCurveTo($n+2*(zn-$n)/3,Yn+2*(ni-Yn)/3,ai+2*(zn-ai)/3,Di+2*(ni-Di)/3,ai,Di)},k0=function(){const Cn=this.currentPath;if(Cn.length<=2)return[[Cn[0],Cn[0],Cn.at(-1),Cn.at(-1)]];const Mn=[];let Un,[zn,ni]=Cn[0];for(Un=1;Un<Cn.length-2;Un++){const[ki,Ji]=Cn[Un],[Pi,na]=Cn[Un+1],ea=(ki+Pi)/2,Ki=(Ji+na)/2,oi=[zn+2*(ki-zn)/3,ni+2*(Ji-ni)/3],Kn=[ea+2*(ki-ea)/3,Ki+2*(Ji-Ki)/3];Mn.push([[zn,ni],oi,Kn,[ea,Ki]]),[zn,ni]=[ea,Ki]}const[yi,pi]=Cn[Un],[$n,Yn]=Cn[Un+1],ai=[zn+2*(yi-zn)/3,ni+2*(pi-ni)/3],Di=[$n+2*(yi-$n)/3,Yn+2*(pi-Yn)/3];return Mn.push([[zn,ni],ai,Di,[$n,Yn]]),Mn},Dl=function(){if(this.isEmpty()){li(this,Ze,Jd).call(this);return}li(this,Ze,Ip).call(this);const{canvas:Cn,ctx:Mn}=this;Mn.setTransform(1,0,0,1,0,0),Mn.clearRect(0,0,Cn.width,Cn.height),li(this,Ze,Jd).call(this);for(const Un of this.bezierPath2D)Mn.stroke(Un)},Fp=function(Cn){this.canvas.removeEventListener("pointerleave",un(this,Fe)),this.canvas.removeEventListener("pointermove",un(this,Ve)),this.canvas.removeEventListener("pointerup",un(this,Ie)),this.canvas.addEventListener("pointerdown",un(this,qe)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",Pe.noContextMenu)},10),li(this,Ze,R0).call(this,Cn.offsetX,Cn.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Gd=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",Se.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(Cn=>{var Mn;return(Mn=this.canvas)==null?void 0:Mn.setAttribute("aria-label",Cn)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Yd=function(){xi(this,sn,new ResizeObserver(Cn=>{const Mn=Cn[0].contentRect;Mn.width&&Mn.height&&this.setDimensions(Mn.width,Mn.height)})),un(this,sn).observe(this.div)},eh=function(){if(!un(this,Qe))return;const[Cn,Mn]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*Cn),this.canvas.height=Math.ceil(this.height*Mn),li(this,Ze,Jd).call(this)},Op=function(Cn,Mn){const Un=li(this,Ze,Xd).call(this),zn=(Cn-Un)/un(this,Me),ni=(Mn-Un)/un(this,Be);this.scaleFactor=Math.min(zn,ni)},Jd=function(){const Cn=li(this,Ze,Xd).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+Cn,this.translationY*this.scaleFactor+Cn)},gn=new WeakSet,V0=function(Cn){const Mn=new Path2D;for(let Un=0,zn=Cn.length;Un<zn;Un++){const[ni,yi,pi,$n]=Cn[Un];Un===0&&Mn.moveTo(...ni),Mn.bezierCurveTo(yi[0],yi[1],pi[0],pi[1],$n[0],$n[1])}return Mn},Up=function(Cn,Mn,Un){const[zn,ni,yi,pi]=Mn;switch(Un){case 0:for(let $n=0,Yn=Cn.length;$n<Yn;$n+=2)Cn[$n]+=zn,Cn[$n+1]=pi-Cn[$n+1];break;case 90:for(let $n=0,Yn=Cn.length;$n<Yn;$n+=2){const ai=Cn[$n];Cn[$n]=Cn[$n+1]+zn,Cn[$n+1]=ai+ni}break;case 180:for(let $n=0,Yn=Cn.length;$n<Yn;$n+=2)Cn[$n]=yi-Cn[$n],Cn[$n+1]+=ni;break;case 270:for(let $n=0,Yn=Cn.length;$n<Yn;$n+=2){const ai=Cn[$n];Cn[$n]=yi-Cn[$n+1],Cn[$n+1]=pi-ai}break;default:throw new Error("Invalid rotation")}return Cn},L0=function(Cn,Mn,Un){const[zn,ni,yi,pi]=Mn;switch(Un){case 0:for(let $n=0,Yn=Cn.length;$n<Yn;$n+=2)Cn[$n]-=zn,Cn[$n+1]=pi-Cn[$n+1];break;case 90:for(let $n=0,Yn=Cn.length;$n<Yn;$n+=2){const ai=Cn[$n];Cn[$n]=Cn[$n+1]-ni,Cn[$n+1]=ai-zn}break;case 180:for(let $n=0,Yn=Cn.length;$n<Yn;$n+=2)Cn[$n]=yi-Cn[$n],Cn[$n+1]-=ni;break;case 270:for(let $n=0,Yn=Cn.length;$n<Yn;$n+=2){const ai=Cn[$n];Cn[$n]=pi-Cn[$n+1],Cn[$n+1]=yi-ai}break;default:throw new Error("Invalid rotation")}return Cn},I0=function(Cn,Mn,Un,zn){var Yn,ai;const ni=[],yi=this.thickness/2,pi=Cn*Mn+yi,$n=Cn*Un+yi;for(const Di of this.paths){const ki=[],Ji=[];for(let Pi=0,na=Di.length;Pi<na;Pi++){const[ea,Ki,oi,Kn]=Di[Pi],di=Cn*ea[0]+pi,Ui=Cn*ea[1]+$n,wi=Cn*Ki[0]+pi,Ai=Cn*Ki[1]+$n,Rn=Cn*oi[0]+pi,Zn=Cn*oi[1]+$n,Xn=Cn*Kn[0]+pi,Si=Cn*Kn[1]+$n;Pi===0&&(ki.push(di,Ui),Ji.push(di,Ui)),ki.push(wi,Ai,Rn,Zn,Xn,Si),Ji.push(wi,Ai),Pi===na-1&&Ji.push(Xn,Si)}ni.push({bezier:li(Yn=qn,gn,Up).call(Yn,ki,zn,this.rotation),points:li(ai=qn,gn,Up).call(ai,Ji,zn,this.rotation)})}return ni},zp=function(){let Cn=1/0,Mn=-1/0,Un=1/0,zn=-1/0;for(const ni of this.paths)for(const[yi,pi,$n,Yn]of ni){const ai=xe.Util.bezierBoundingBox(...yi,...pi,...$n,...Yn);Cn=Math.min(Cn,ai[0]),Un=Math.min(Un,ai[1]),Mn=Math.max(Mn,ai[2]),zn=Math.max(zn,ai[3])}return[Cn,Un,Mn,zn]},Xd=function(){return un(this,Xe)?Math.ceil(this.thickness*this.parentScale):0},th=function(Cn=!1){if(this.isEmpty())return;if(!un(this,Xe)){li(this,Ze,Dl).call(this);return}const Mn=li(this,Ze,zp).call(this),Un=li(this,Ze,Xd).call(this);xi(this,Me,Math.max(Se.AnnotationEditor.MIN_SIZE,Mn[2]-Mn[0])),xi(this,Be,Math.max(Se.AnnotationEditor.MIN_SIZE,Mn[3]-Mn[1]));const zn=Math.ceil(Un+un(this,Me)*this.scaleFactor),ni=Math.ceil(Un+un(this,Be)*this.scaleFactor),[yi,pi]=this.parentDimensions;this.width=zn/yi,this.height=ni/pi,this.setAspectRatio(zn,ni);const $n=this.translationX,Yn=this.translationY;this.translationX=-Mn[0],this.translationY=-Mn[1],li(this,Ze,eh).call(this),li(this,Ze,Dl).call(this),xi(this,cn,zn),xi(this,nn,ni),this.setDims(zn,ni);const ai=Cn?Un/this.scaleFactor/2:0;this.translate($n-this.translationX-ai,Yn-this.translationY-ai)},bi(qn,gn),Ka(qn,"_defaultColor",null),Ka(qn,"_defaultOpacity",1),Ka(qn,"_defaultThickness",1),Ka(qn,"_type","ink");let Re=qn;e.InkEditor=Re}),((t,e,r)=>{var Re,Be,Me,Ve,Fe,Ie,qe,Ye,Xe,je,Qe,Hh,Gh,Wd,jp,D0,F0,qp,$d,O0;Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var xe=r(1),Se=r(4),Ee=r(6),Pe=r(29);const St=class St extends Se.AnnotationEditor{constructor(yn){super({...yn,name:"stampEditor"});bi(this,Qe);bi(this,Re,null);bi(this,Be,null);bi(this,Me,null);bi(this,Ve,null);bi(this,Fe,null);bi(this,Ie,null);bi(this,qe,null);bi(this,Ye,null);bi(this,Xe,!1);bi(this,je,!1);xi(this,Ve,yn.bitmapUrl),xi(this,Fe,yn.bitmapFile)}static initialize(yn){Se.AnnotationEditor.initialize(yn)}static get supportedTypes(){const yn=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,xe.shadow)(this,"supportedTypes",yn.map(mn=>`image/${mn}`))}static get supportedTypesStr(){return(0,xe.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(yn){return this.supportedTypes.includes(yn)}static paste(yn,mn){mn.pasteEditor(xe.AnnotationEditorType.STAMP,{bitmapFile:yn.getAsFile()})}remove(){var yn,mn;un(this,Be)&&(xi(this,Re,null),this._uiManager.imageManager.deleteId(un(this,Be)),(yn=un(this,Ie))==null||yn.remove(),xi(this,Ie,null),(mn=un(this,qe))==null||mn.disconnect(),xi(this,qe,null)),super.remove()}rebuild(){if(!this.parent){un(this,Be)&&li(this,Qe,Wd).call(this);return}super.rebuild(),this.div!==null&&(un(this,Be)&&li(this,Qe,Wd).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(un(this,Me)||un(this,Re)||un(this,Ve)||un(this,Fe))}get isResizable(){return!0}render(){if(this.div)return this.div;let yn,mn;if(this.width&&(yn=this.x,mn=this.y),super.render(),this.div.hidden=!0,un(this,Re)?li(this,Qe,jp).call(this):li(this,Qe,Wd).call(this),this.width){const[Sn,Pn]=this.parentDimensions;this.setAt(yn*Sn,mn*Pn,this.width*Sn,this.height*Pn)}return this.div}static deserialize(yn,mn,Sn){if(yn instanceof Pe.StampAnnotationElement)return null;const Pn=super.deserialize(yn,mn,Sn),{rect:pn,bitmapUrl:on,bitmapId:xn,isSvg:Ge,accessibilityData:Oe}=yn;xn&&Sn.imageManager.isValidId(xn)?xi(Pn,Be,xn):xi(Pn,Ve,on),xi(Pn,Xe,Ge);const[$e,rn]=Pn.pageDimensions;return Pn.width=(pn[2]-pn[0])/$e,Pn.height=(pn[3]-pn[1])/rn,Oe&&(Pn.altTextData=Oe),Pn}serialize(yn=!1,mn=null){if(this.isEmpty())return null;const Sn={annotationType:xe.AnnotationEditorType.STAMP,bitmapId:un(this,Be),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:un(this,Xe),structTreeParentId:this._structTreeParentId};if(yn)return Sn.bitmapUrl=li(this,Qe,$d).call(this,!0),Sn.accessibilityData=this.altTextData,Sn;const{decorative:Pn,altText:pn}=this.altTextData;if(!Pn&&pn&&(Sn.accessibilityData={type:"Figure",alt:pn}),mn===null)return Sn;mn.stamps||(mn.stamps=new Map);const on=un(this,Xe)?(Sn.rect[2]-Sn.rect[0])*(Sn.rect[3]-Sn.rect[1]):null;if(!mn.stamps.has(un(this,Be)))mn.stamps.set(un(this,Be),{area:on,serialized:Sn}),Sn.bitmap=li(this,Qe,$d).call(this,!1);else if(un(this,Xe)){const xn=mn.stamps.get(un(this,Be));on>xn.area&&(xn.area=on,xn.serialized.bitmap.close(),xn.serialized.bitmap=li(this,Qe,$d).call(this,!1))}return Sn}};Re=new WeakMap,Be=new WeakMap,Me=new WeakMap,Ve=new WeakMap,Fe=new WeakMap,Ie=new WeakMap,qe=new WeakMap,Ye=new WeakMap,Xe=new WeakMap,je=new WeakMap,Qe=new WeakSet,Hh=function(yn,mn=!1){if(!yn){this.remove();return}xi(this,Re,yn.bitmap),mn||(xi(this,Be,yn.id),xi(this,Xe,yn.isSvg)),li(this,Qe,jp).call(this)},Gh=function(){xi(this,Me,null),this._uiManager.enableWaiting(!1),un(this,Ie)&&this.div.focus()},Wd=function(){if(un(this,Be)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(un(this,Be)).then(mn=>li(this,Qe,Hh).call(this,mn,!0)).finally(()=>li(this,Qe,Gh).call(this));return}if(un(this,Ve)){const mn=un(this,Ve);xi(this,Ve,null),this._uiManager.enableWaiting(!0),xi(this,Me,this._uiManager.imageManager.getFromUrl(mn).then(Sn=>li(this,Qe,Hh).call(this,Sn)).finally(()=>li(this,Qe,Gh).call(this)));return}if(un(this,Fe)){const mn=un(this,Fe);xi(this,Fe,null),this._uiManager.enableWaiting(!0),xi(this,Me,this._uiManager.imageManager.getFromFile(mn).then(Sn=>li(this,Qe,Hh).call(this,Sn)).finally(()=>li(this,Qe,Gh).call(this)));return}const yn=document.createElement("input");yn.type="file",yn.accept=St.supportedTypesStr,xi(this,Me,new Promise(mn=>{yn.addEventListener("change",async()=>{if(!yn.files||yn.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const Sn=await this._uiManager.imageManager.getFromFile(yn.files[0]);li(this,Qe,Hh).call(this,Sn)}mn()}),yn.addEventListener("cancel",()=>{this.remove(),mn()})}).finally(()=>li(this,Qe,Gh).call(this))),yn.click()},jp=function(){const{div:yn}=this;let{width:mn,height:Sn}=un(this,Re);const[Pn,pn]=this.pageDimensions,on=.75;if(this.width)mn=this.width*Pn,Sn=this.height*pn;else if(mn>on*Pn||Sn>on*pn){const $e=Math.min(on*Pn/mn,on*pn/Sn);mn*=$e,Sn*=$e}const[xn,Ge]=this.parentDimensions;this.setDims(mn*xn/Pn,Sn*Ge/pn),this._uiManager.enableWaiting(!1);const Oe=xi(this,Ie,document.createElement("canvas"));yn.append(Oe),yn.hidden=!1,li(this,Qe,qp).call(this,mn,Sn),li(this,Qe,O0).call(this),un(this,je)||(this.parent.addUndoableEditor(this),xi(this,je,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},D0=function(yn,mn){var on;const[Sn,Pn]=this.parentDimensions;this.width=yn/Sn,this.height=mn/Pn,this.setDims(yn,mn),(on=this._initialOptions)!=null&&on.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,un(this,Ye)!==null&&clearTimeout(un(this,Ye)),xi(this,Ye,setTimeout(()=>{xi(this,Ye,null),li(this,Qe,qp).call(this,yn,mn)},200))},F0=function(yn,mn){const{width:Sn,height:Pn}=un(this,Re);let pn=Sn,on=Pn,xn=un(this,Re);for(;pn>2*yn||on>2*mn;){const Ge=pn,Oe=on;pn>2*yn&&(pn=pn>=16384?Math.floor(pn/2)-1:Math.ceil(pn/2)),on>2*mn&&(on=on>=16384?Math.floor(on/2)-1:Math.ceil(on/2));const $e=new OffscreenCanvas(pn,on);$e.getContext("2d").drawImage(xn,0,0,Ge,Oe,0,0,pn,on),xn=$e.transferToImageBitmap()}return xn},qp=function(yn,mn){yn=Math.ceil(yn),mn=Math.ceil(mn);const Sn=un(this,Ie);if(!Sn||Sn.width===yn&&Sn.height===mn)return;Sn.width=yn,Sn.height=mn;const Pn=un(this,Xe)?un(this,Re):li(this,Qe,F0).call(this,yn,mn),pn=Sn.getContext("2d");pn.filter=this._uiManager.hcmFilter,pn.drawImage(Pn,0,0,Pn.width,Pn.height,0,0,yn,mn)},$d=function(yn){if(yn){if(un(this,Xe)){const Pn=this._uiManager.imageManager.getSvgUrl(un(this,Be));if(Pn)return Pn}const mn=document.createElement("canvas");return{width:mn.width,height:mn.height}=un(this,Re),mn.getContext("2d").drawImage(un(this,Re),0,0),mn.toDataURL()}if(un(this,Xe)){const[mn,Sn]=this.pageDimensions,Pn=Math.round(this.width*mn*Ee.PixelsPerInch.PDF_TO_CSS_UNITS),pn=Math.round(this.height*Sn*Ee.PixelsPerInch.PDF_TO_CSS_UNITS),on=new OffscreenCanvas(Pn,pn);return on.getContext("2d").drawImage(un(this,Re),0,0,un(this,Re).width,un(this,Re).height,0,0,Pn,pn),on.transferToImageBitmap()}return structuredClone(un(this,Re))},O0=function(){xi(this,qe,new ResizeObserver(yn=>{const mn=yn[0].contentRect;mn.width&&mn.height&&li(this,Qe,D0).call(this,mn.width,mn.height)})),un(this,qe).observe(this.div)},Ka(St,"_type","stamp");let Ce=St;e.StampEditor=Ce})],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(e!==void 0)return e.exports;var r=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](r,r.exports,__w_pdfjs_require__),r.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return Ee.AnnotationEditorLayer}}),Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return Pe.AnnotationEditorUIManager}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return Ce.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(t,"DOMSVGFactory",{enumerable:!0,get:function(){return xe.DOMSVGFactory}}),Object.defineProperty(t,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return Re.GlobalWorkerOptions}}),Object.defineProperty(t,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return r.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return xe.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return r.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return xe.PixelsPerInch}}),Object.defineProperty(t,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return xe.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return r.SVGGraphics}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return Be.XfaLayer}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return r.build}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return r.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return xe.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return xe.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return xe.getXfaPageViewport}}),Object.defineProperty(t,"isDataScheme",{enumerable:!0,get:function(){return xe.isDataScheme}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return xe.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return xe.loadScript}}),Object.defineProperty(t,"noContextMenu",{enumerable:!0,get:function(){return xe.noContextMenu}}),Object.defineProperty(t,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return Se.renderTextLayer}}),Object.defineProperty(t,"setLayerDimensions",{enumerable:!0,get:function(){return xe.setLayerDimensions}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(t,"updateTextLayer",{enumerable:!0,get:function(){return Se.updateTextLayer}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return r.version}});var e=__w_pdfjs_require__(1),r=__w_pdfjs_require__(2),xe=__w_pdfjs_require__(6),Se=__w_pdfjs_require__(26),Ee=__w_pdfjs_require__(27),Pe=__w_pdfjs_require__(5),Ce=__w_pdfjs_require__(29),Re=__w_pdfjs_require__(14),Be=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1)),pdf$1.exports}var pdfExports=requirePdf();const pdf=getDefaultExportFromCjs(pdfExports),pdfjsLib=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]),lib=pdf!=null&&pdf.getDocument?pdf:pdfjsLib;lib.GlobalWorkerOptions&&(lib.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js");const convertPdfToImages=async t=>{try{const e=await t.arrayBuffer(),xe=await lib.getDocument({data:e}).promise,Se=[],Ee=2480;for(let Pe=1;Pe<=xe.numPages;Pe++){const Ce=await xe.getPage(Pe),Re=Ce.getViewport({scale:1}),Be=Ee/Re.width,Me=Ce.getViewport({scale:Be}),Ve=document.createElement("canvas"),Fe=Ve.getContext("2d");if(Fe){Ve.height=Me.height,Ve.width=Me.width;const Ie={canvasContext:Fe,viewport:Me};await Ce.render(Ie).promise,Se.push(Ve.toDataURL("image/jpeg",.95))}}return Se}catch(e){throw console.error("Error converting PDF to images:",e),e}},scriptRel="modulepreload",assetsURL=function(t){return"/rambutan/"+t},seen={},__vitePreload=function t(e,r,xe){let Se=Promise.resolve();if(r&&r.length>0){let Pe=function(Be){return Promise.all(Be.map(Me=>Promise.resolve(Me).then(Ve=>({status:"fulfilled",value:Ve}),Ve=>({status:"rejected",reason:Ve}))))};document.getElementsByTagName("link");const Ce=document.querySelector("meta[property=csp-nonce]"),Re=(Ce==null?void 0:Ce.nonce)||(Ce==null?void 0:Ce.getAttribute("nonce"));Se=Pe(r.map(Be=>{if(Be=assetsURL(Be),Be in seen)return;seen[Be]=!0;const Me=Be.endsWith(".css"),Ve=Me?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${Be}"]${Ve}`))return;const Fe=document.createElement("link");if(Fe.rel=Me?"stylesheet":scriptRel,Me||(Fe.as="script"),Fe.crossOrigin="",Fe.href=Be,Re&&Fe.setAttribute("nonce",Re),document.head.appendChild(Fe),Me)return new Promise((Ie,qe)=>{Fe.addEventListener("load",Ie),Fe.addEventListener("error",()=>qe(new Error(`Unable to preload CSS for ${Be}`)))})}))}function Ee(Pe){const Ce=new Event("vite:preloadError",{cancelable:!0});if(Ce.payload=Pe,window.dispatchEvent(Ce),!Ce.defaultPrevented)throw Pe}return Se.then(Pe=>{for(const Ce of Pe||[])Ce.status==="rejected"&&Ee(Ce.reason);return e().catch(Ee)})};function _typeof(t){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(t)}var u8=Uint8Array,u16=Uint16Array,i32=Int32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(t,e){for(var r=new u16(31),xe=0;xe<31;++xe)r[xe]=e+=1<<t[xe-1];for(var Se=new i32(r[30]),xe=1;xe<30;++xe)for(var Ee=r[xe];Ee<r[xe+1];++Ee)Se[Ee]=Ee-r[xe]<<5|xe;return{b:r,r:Se}},_a=freb(fleb,2),fl=_a.b,revfl=_a.r;fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),fd=_b.b,revfd=_b.r,rev=new u16(32768);for(var i$1=0;i$1<32768;++i$1){var x$1=(i$1&43690)>>1|(i$1&21845)<<1;x$1=(x$1&52428)>>2|(x$1&13107)<<2,x$1=(x$1&61680)>>4|(x$1&3855)<<4,rev[i$1]=((x$1&65280)>>8|(x$1&255)<<8)>>1}var hMap=(function(t,e,r){for(var xe=t.length,Se=0,Ee=new u16(e);Se<xe;++Se)t[Se]&&++Ee[t[Se]-1];var Pe=new u16(e);for(Se=1;Se<e;++Se)Pe[Se]=Pe[Se-1]+Ee[Se-1]<<1;var Ce;if(r){Ce=new u16(1<<e);var Re=15-e;for(Se=0;Se<xe;++Se)if(t[Se])for(var Be=Se<<4|t[Se],Me=e-t[Se],Ve=Pe[t[Se]-1]++<<Me,Fe=Ve|(1<<Me)-1;Ve<=Fe;++Ve)Ce[rev[Ve]>>Re]=Be}else for(Ce=new u16(xe),Se=0;Se<xe;++Se)t[Se]&&(Ce[Se]=rev[Pe[t[Se]-1]++]>>15-t[Se]);return Ce}),flt=new u8(288);for(var i$1=0;i$1<144;++i$1)flt[i$1]=8;for(var i$1=144;i$1<256;++i$1)flt[i$1]=9;for(var i$1=256;i$1<280;++i$1)flt[i$1]=7;for(var i$1=280;i$1<288;++i$1)flt[i$1]=8;var fdt=new u8(32);for(var i$1=0;i$1<32;++i$1)fdt[i$1]=5;var flm=hMap(flt,9,0),flrm=hMap(flt,9,1),fdm=hMap(fdt,5,0),fdrm=hMap(fdt,5,1),max=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},bits=function(t,e,r){var xe=e/8|0;return(t[xe]|t[xe+1]<<8)>>(e&7)&r},bits16=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},shft=function(t){return(t+7)/8|0},slc=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new u8(t.subarray(e,r))},ec=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],err=function(t,e,r){var xe=new Error(e||ec[t]);if(xe.code=t,Error.captureStackTrace&&Error.captureStackTrace(xe,err),!r)throw xe;return xe},inflt=function(t,e,r,xe){var Se=t.length,Ee=0;if(!Se||e.f&&!e.l)return r||new u8(0);var Pe=!r,Ce=Pe||e.i!=2,Re=e.i;Pe&&(r=new u8(Se*3));var Be=function(jn){var Wn=r.length;if(jn>Wn){var ti=new u8(Math.max(Wn*2,jn));ti.set(r),r=ti}},Me=e.f||0,Ve=e.p||0,Fe=e.b||0,Ie=e.l,qe=e.d,Ye=e.m,Xe=e.n,je=Se*8;do{if(!Ie){Me=bits(t,Ve,1);var Qe=bits(t,Ve+1,3);if(Ve+=3,Qe)if(Qe==1)Ie=flrm,qe=fdrm,Ye=9,Xe=5;else if(Qe==2){var an=bits(t,Ve,31)+257,Ze=bits(t,Ve+10,15)+4,tn=an+bits(t,Ve+5,31)+1;Ve+=14;for(var We=new u8(tn),An=new u8(19),Je=0;Je<Ze;++Je)An[clim[Je]]=bits(t,Ve+Je*3,7);Ve+=Ze*3;for(var St=max(An),hn=(1<<St)-1,_n=hMap(An,St,1),Je=0;Je<tn;){var yn=_n[bits(t,Ve,hn)];Ve+=yn&15;var sn=yn>>4;if(sn<16)We[Je++]=sn;else{var mn=0,Sn=0;for(sn==16?(Sn=3+bits(t,Ve,3),Ve+=2,mn=We[Je-1]):sn==17?(Sn=3+bits(t,Ve,7),Ve+=3):sn==18&&(Sn=11+bits(t,Ve,127),Ve+=7);Sn--;)We[Je++]=mn}}var Pn=We.subarray(0,an),pn=We.subarray(an);Ye=max(Pn),Xe=max(pn),Ie=hMap(Pn,Ye,1),qe=hMap(pn,Xe,1)}else err(1);else{var sn=shft(Ve)+4,cn=t[sn-4]|t[sn-3]<<8,nn=sn+cn;if(nn>Se){Re&&err(0);break}Ce&&Be(Fe+cn),r.set(t.subarray(sn,nn),Fe),e.b=Fe+=cn,e.p=Ve=nn*8,e.f=Me;continue}if(Ve>je){Re&&err(0);break}}Ce&&Be(Fe+131072);for(var on=(1<<Ye)-1,xn=(1<<Xe)-1,Ge=Ve;;Ge=Ve){var mn=Ie[bits16(t,Ve)&on],Oe=mn>>4;if(Ve+=mn&15,Ve>je){Re&&err(0);break}if(mn||err(2),Oe<256)r[Fe++]=Oe;else if(Oe==256){Ge=Ve,Ie=null;break}else{var $e=Oe-254;if(Oe>264){var Je=Oe-257,rn=fleb[Je];$e=bits(t,Ve,(1<<rn)-1)+fl[Je],Ve+=rn}var fn=qe[bits16(t,Ve)&xn],gn=fn>>4;fn||err(3),Ve+=fn&15;var pn=fd[gn];if(gn>3){var rn=fdeb[gn];pn+=bits16(t,Ve)&(1<<rn)-1,Ve+=rn}if(Ve>je){Re&&err(0);break}Ce&&Be(Fe+131072);var vn=Fe+$e;if(Fe<pn){var wn=Ee-pn,On=Math.min(pn,vn);for(wn+Fe<0&&err(3);Fe<On;++Fe)r[Fe]=xe[wn+Fe]}for(;Fe<vn;++Fe)r[Fe]=r[Fe-pn]}}e.l=Ie,e.p=Ge,e.b=Fe,e.f=Me,Ie&&(Me=1,e.m=Ye,e.d=qe,e.n=Xe)}while(!Me);return Fe!=r.length&&Pe?slc(r,0,Fe):r.subarray(0,Fe)},wbits=function(t,e,r){r<<=e&7;var xe=e/8|0;t[xe]|=r,t[xe+1]|=r>>8},wbits16=function(t,e,r){r<<=e&7;var xe=e/8|0;t[xe]|=r,t[xe+1]|=r>>8,t[xe+2]|=r>>16},hTree=function(t,e){for(var r=[],xe=0;xe<t.length;++xe)t[xe]&&r.push({s:xe,f:t[xe]});var Se=r.length,Ee=r.slice();if(!Se)return{t:et$1,l:0};if(Se==1){var Pe=new u8(r[0].s+1);return Pe[r[0].s]=1,{t:Pe,l:1}}r.sort(function(nn,an){return nn.f-an.f}),r.push({s:-1,f:25001});var Ce=r[0],Re=r[1],Be=0,Me=1,Ve=2;for(r[0]={s:-1,f:Ce.f+Re.f,l:Ce,r:Re};Me!=Se-1;)Ce=r[r[Be].f<r[Ve].f?Be++:Ve++],Re=r[Be!=Me&&r[Be].f<r[Ve].f?Be++:Ve++],r[Me++]={s:-1,f:Ce.f+Re.f,l:Ce,r:Re};for(var Fe=Ee[0].s,xe=1;xe<Se;++xe)Ee[xe].s>Fe&&(Fe=Ee[xe].s);var Ie=new u16(Fe+1),qe=ln(r[Me-1],Ie,0);if(qe>e){var xe=0,Ye=0,Xe=qe-e,je=1<<Xe;for(Ee.sort(function(an,Ze){return Ie[Ze.s]-Ie[an.s]||an.f-Ze.f});xe<Se;++xe){var Qe=Ee[xe].s;if(Ie[Qe]>e)Ye+=je-(1<<qe-Ie[Qe]),Ie[Qe]=e;else break}for(Ye>>=Xe;Ye>0;){var sn=Ee[xe].s;Ie[sn]<e?Ye-=1<<e-Ie[sn]++-1:++xe}for(;xe>=0&&Ye;--xe){var cn=Ee[xe].s;Ie[cn]==e&&(--Ie[cn],++Ye)}qe=e}return{t:new u8(Ie),l:qe}},ln=function(t,e,r){return t.s==-1?Math.max(ln(t.l,e,r+1),ln(t.r,e,r+1)):e[t.s]=r},lc=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new u16(++e),xe=0,Se=t[0],Ee=1,Pe=function(Re){r[xe++]=Re},Ce=1;Ce<=e;++Ce)if(t[Ce]==Se&&Ce!=e)++Ee;else{if(!Se&&Ee>2){for(;Ee>138;Ee-=138)Pe(32754);Ee>2&&(Pe(Ee>10?Ee-11<<5|28690:Ee-3<<5|12305),Ee=0)}else if(Ee>3){for(Pe(Se),--Ee;Ee>6;Ee-=6)Pe(8304);Ee>2&&(Pe(Ee-3<<5|8208),Ee=0)}for(;Ee--;)Pe(Se);Ee=1,Se=t[Ce]}return{c:r.subarray(0,xe),n:e}},clen=function(t,e){for(var r=0,xe=0;xe<e.length;++xe)r+=t[xe]*e[xe];return r},wfblk=function(t,e,r){var xe=r.length,Se=shft(e+2);t[Se]=xe&255,t[Se+1]=xe>>8,t[Se+2]=t[Se]^255,t[Se+3]=t[Se+1]^255;for(var Ee=0;Ee<xe;++Ee)t[Se+Ee+4]=r[Ee];return(Se+4+xe)*8},wblk=function(t,e,r,xe,Se,Ee,Pe,Ce,Re,Be,Me){wbits(e,Me++,r),++Se[256];for(var Ve=hTree(Se,15),Fe=Ve.t,Ie=Ve.l,qe=hTree(Ee,15),Ye=qe.t,Xe=qe.l,je=lc(Fe),Qe=je.c,sn=je.n,cn=lc(Ye),nn=cn.c,an=cn.n,Ze=new u16(19),tn=0;tn<Qe.length;++tn)++Ze[Qe[tn]&31];for(var tn=0;tn<nn.length;++tn)++Ze[nn[tn]&31];for(var We=hTree(Ze,7),An=We.t,Je=We.l,St=19;St>4&&!An[clim[St-1]];--St);var hn=Be+5<<3,_n=clen(Se,flt)+clen(Ee,fdt)+Pe,yn=clen(Se,Fe)+clen(Ee,Ye)+Pe+14+3*St+clen(Ze,An)+2*Ze[16]+3*Ze[17]+7*Ze[18];if(Re>=0&&hn<=_n&&hn<=yn)return wfblk(e,Me,t.subarray(Re,Re+Be));var mn,Sn,Pn,pn;if(wbits(e,Me,1+(yn<_n)),Me+=2,yn<_n){mn=hMap(Fe,Ie,0),Sn=Fe,Pn=hMap(Ye,Xe,0),pn=Ye;var on=hMap(An,Je,0);wbits(e,Me,sn-257),wbits(e,Me+5,an-1),wbits(e,Me+10,St-4),Me+=14;for(var tn=0;tn<St;++tn)wbits(e,Me+3*tn,An[clim[tn]]);Me+=3*St;for(var xn=[Qe,nn],Ge=0;Ge<2;++Ge)for(var Oe=xn[Ge],tn=0;tn<Oe.length;++tn){var $e=Oe[tn]&31;wbits(e,Me,on[$e]),Me+=An[$e],$e>15&&(wbits(e,Me,Oe[tn]>>5&127),Me+=Oe[tn]>>12)}}else mn=flm,Sn=flt,Pn=fdm,pn=fdt;for(var tn=0;tn<Ce;++tn){var rn=xe[tn];if(rn>255){var $e=rn>>18&31;wbits16(e,Me,mn[$e+257]),Me+=Sn[$e+257],$e>7&&(wbits(e,Me,rn>>23&31),Me+=fleb[$e]);var fn=rn&31;wbits16(e,Me,Pn[fn]),Me+=pn[fn],fn>3&&(wbits16(e,Me,rn>>5&8191),Me+=fdeb[fn])}else wbits16(e,Me,mn[rn]),Me+=Sn[rn]}return wbits16(e,Me,mn[256]),Me+Sn[256]},deo=new i32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et$1=new u8(0),dflt=function(t,e,r,xe,Se,Ee){var Pe=Ee.z||t.length,Ce=new u8(xe+Pe+5*(1+Math.ceil(Pe/7e3))+Se),Re=Ce.subarray(xe,Ce.length-Se),Be=Ee.l,Me=(Ee.r||0)&7;if(e){Me&&(Re[0]=Ee.r>>3);for(var Ve=deo[e-1],Fe=Ve>>13,Ie=Ve&8191,qe=(1<<r)-1,Ye=Ee.p||new u16(32768),Xe=Ee.h||new u16(qe+1),je=Math.ceil(r/3),Qe=2*je,sn=function(si){return(t[si]^t[si+1]<<je^t[si+2]<<Qe)&qe},cn=new i32(25e3),nn=new u16(288),an=new u16(32),Ze=0,tn=0,We=Ee.i||0,An=0,Je=Ee.w||0,St=0;We+2<Pe;++We){var hn=sn(We),_n=We&32767,yn=Xe[hn];if(Ye[_n]=yn,Xe[hn]=_n,Je<=We){var mn=Pe-We;if((Ze>7e3||An>24576)&&(mn>423||!Be)){Me=wblk(t,Re,0,cn,nn,an,tn,An,St,We-St,Me),An=Ze=tn=0,St=We;for(var Sn=0;Sn<286;++Sn)nn[Sn]=0;for(var Sn=0;Sn<30;++Sn)an[Sn]=0}var Pn=2,pn=0,on=Ie,xn=_n-yn&32767;if(mn>2&&hn==sn(We-xn))for(var Ge=Math.min(Fe,mn)-1,Oe=Math.min(32767,We),$e=Math.min(258,mn);xn<=Oe&&--on&&_n!=yn;){if(t[We+Pn]==t[We+Pn-xn]){for(var rn=0;rn<$e&&t[We+rn]==t[We+rn-xn];++rn);if(rn>Pn){if(Pn=rn,pn=xn,rn>Ge)break;for(var fn=Math.min(xn,rn-2),gn=0,Sn=0;Sn<fn;++Sn){var vn=We-xn+Sn&32767,wn=Ye[vn],On=vn-wn&32767;On>gn&&(gn=On,yn=vn)}}}_n=yn,yn=Ye[_n],xn+=_n-yn&32767}if(pn){cn[An++]=268435456|revfl[Pn]<<18|revfd[pn];var jn=revfl[Pn]&31,Wn=revfd[pn]&31;tn+=fleb[jn]+fdeb[Wn],++nn[257+jn],++an[Wn],Je=We+Pn,++Ze}else cn[An++]=t[We],++nn[t[We]]}}for(We=Math.max(We,Je);We<Pe;++We)cn[An++]=t[We],++nn[t[We]];Me=wblk(t,Re,Be,cn,nn,an,tn,An,St,We-St,Me),Be||(Ee.r=Me&7|Re[Me/8|0]<<3,Me-=7,Ee.h=Xe,Ee.p=Ye,Ee.i=We,Ee.w=Je)}else{for(var We=Ee.w||0;We<Pe+Be;We+=65535){var ti=We+65535;ti>=Pe&&(Re[Me/8|0]=Be,ti=Pe),Me=wfblk(Re,Me+1,t.subarray(We,ti))}Ee.i=Pe}return slc(Ce,0,xe+shft(Me)+Se)},adler=function(){var t=1,e=0;return{p:function(r){for(var xe=t,Se=e,Ee=r.length|0,Pe=0;Pe!=Ee;){for(var Ce=Math.min(Pe+2655,Ee);Pe<Ce;++Pe)Se+=xe+=r[Pe];xe=(xe&65535)+15*(xe>>16),Se=(Se&65535)+15*(Se>>16)}t=xe,e=Se},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},dopt=function(t,e,r,xe,Se){if(!Se&&(Se={l:1},e.dictionary)){var Ee=e.dictionary.subarray(-32768),Pe=new u8(Ee.length+t.length);Pe.set(Ee),Pe.set(t,Ee.length),t=Pe,Se.w=Ee.length}return dflt(t,e.level==null?6:e.level,e.mem==null?Se.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,xe,Se)},wbytes=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},zlh=function(t,e){var r=e.level,xe=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=xe<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var Se=adler();Se.p(e.dictionary),wbytes(t,2,Se.d())}},zls=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&err(6,"invalid zlib data"),(t[1]>>5&1)==1&&err(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function zlibSync(t,e){e||(e={});var r=adler();r.p(t);var xe=dopt(t,e,e.dictionary?6:2,4);return zlh(xe,e),wbytes(xe,xe.length-4,r.d()),xe}function unzlibSync(t,e){return inflt(t.subarray(zls(t),-4),{i:2},e,e)}var td=typeof TextDecoder<"u"&&new TextDecoder,tds=0;try{td.decode(et$1,{stream:!0}),tds=1}catch(t){}var n=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function i(){n.console&&typeof n.console.log=="function"&&n.console.log.apply(n.console,arguments)}var a={log:i,warn:function(t){n.console&&(typeof n.console.warn=="function"?n.console.warn.apply(n.console,arguments):i.call(null,arguments))},error:function(t){n.console&&(typeof n.console.error=="function"?n.console.error.apply(n.console,arguments):i(t))}};function o(t,e,r){var xe=new XMLHttpRequest;xe.open("GET",t),xe.responseType="blob",xe.onload=function(){l(xe.response,e,r)},xe.onerror=function(){a.error("could not download file")},xe.send()}function s(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function c(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var u,h,l=n.saveAs||((typeof window>"u"?"undefined":_typeof(window))!=="object"||window!==n?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var xe=n.URL||n.webkitURL,Se=document.createElement("a");e=e||t.name||"download",Se.download=e,Se.rel="noopener",typeof t=="string"?(Se.href=t,Se.origin!==location.origin?s(Se.href)?o(t,e,r):c(Se,Se.target="_blank"):c(Se)):(Se.href=xe.createObjectURL(t),setTimeout((function(){xe.revokeObjectURL(Se.href)}),4e4),setTimeout((function(){c(Se)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(s(t))o(t,e,r);else{var xe=document.createElement("a");xe.href=t,xe.target="_blank",setTimeout((function(){c(xe)}))}else navigator.msSaveOrOpenBlob((function(Se,Ee){return Ee===void 0?Ee={autoBom:!1}:_typeof(Ee)!=="object"&&(a.warn("Deprecated: Expected third argument to be a object"),Ee={autoBom:!Ee}),Ee.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(Se.type)?new Blob(["\uFEFF",Se],{type:Se.type}):Se})(t,r),e)}:function(t,e,r,xe){if((xe=xe||open("","_blank"))&&(xe.document.title=xe.document.body.innerText="downloading..."),typeof t=="string")return o(t,e,r);var Se=t.type==="application/octet-stream",Ee=/constructor/i.test(n.HTMLElement)||n.safari,Pe=/CriOS\/[\d]+/.test(navigator.userAgent);if((Pe||Se&&Ee)&&(typeof FileReader>"u"?"undefined":_typeof(FileReader))==="object"){var Ce=new FileReader;Ce.onloadend=function(){var Me=Ce.result;Me=Pe?Me:Me.replace(/^data:[^;]*;/,"data:attachment/file;"),xe?xe.location.href=Me:location=Me,xe=null},Ce.readAsDataURL(t)}else{var Re=n.URL||n.webkitURL,Be=Re.createObjectURL(t);xe?xe.location=Be:location.href=Be,xe=null,setTimeout((function(){Re.revokeObjectURL(Be)}),4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function f(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(Ce){return[parseInt(Ce[1]),parseInt(Ce[2]),parseInt(Ce[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(Ce){return[parseInt(Ce[1],16),parseInt(Ce[2],16),parseInt(Ce[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(Ce){return[parseInt(Ce[1]+Ce[1],16),parseInt(Ce[2]+Ce[2],16),parseInt(Ce[3]+Ce[3],16)]}}],xe=0;xe<r.length;xe++){var Se=r[xe].re,Ee=r[xe].process,Pe=Se.exec(t);Pe&&(e=Ee(Pe),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var Ce=this.r.toString(16),Re=this.g.toString(16),Be=this.b.toString(16);return Ce.length==1&&(Ce="0"+Ce),Re.length==1&&(Re="0"+Re),Be.length==1&&(Be="0"+Be),"#"+Ce+Re+Be}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function d(t,e){var r=t[0],xe=t[1],Se=t[2],Ee=t[3];r=g(r,xe,Se,Ee,e[0],7,-680876936),Ee=g(Ee,r,xe,Se,e[1],12,-389564586),Se=g(Se,Ee,r,xe,e[2],17,606105819),xe=g(xe,Se,Ee,r,e[3],22,-1044525330),r=g(r,xe,Se,Ee,e[4],7,-176418897),Ee=g(Ee,r,xe,Se,e[5],12,1200080426),Se=g(Se,Ee,r,xe,e[6],17,-1473231341),xe=g(xe,Se,Ee,r,e[7],22,-45705983),r=g(r,xe,Se,Ee,e[8],7,1770035416),Ee=g(Ee,r,xe,Se,e[9],12,-1958414417),Se=g(Se,Ee,r,xe,e[10],17,-42063),xe=g(xe,Se,Ee,r,e[11],22,-1990404162),r=g(r,xe,Se,Ee,e[12],7,1804603682),Ee=g(Ee,r,xe,Se,e[13],12,-40341101),Se=g(Se,Ee,r,xe,e[14],17,-1502002290),r=m(r,xe=g(xe,Se,Ee,r,e[15],22,1236535329),Se,Ee,e[1],5,-165796510),Ee=m(Ee,r,xe,Se,e[6],9,-1069501632),Se=m(Se,Ee,r,xe,e[11],14,643717713),xe=m(xe,Se,Ee,r,e[0],20,-373897302),r=m(r,xe,Se,Ee,e[5],5,-701558691),Ee=m(Ee,r,xe,Se,e[10],9,38016083),Se=m(Se,Ee,r,xe,e[15],14,-660478335),xe=m(xe,Se,Ee,r,e[4],20,-405537848),r=m(r,xe,Se,Ee,e[9],5,568446438),Ee=m(Ee,r,xe,Se,e[14],9,-1019803690),Se=m(Se,Ee,r,xe,e[3],14,-187363961),xe=m(xe,Se,Ee,r,e[8],20,1163531501),r=m(r,xe,Se,Ee,e[13],5,-1444681467),Ee=m(Ee,r,xe,Se,e[2],9,-51403784),Se=m(Se,Ee,r,xe,e[7],14,1735328473),r=v(r,xe=m(xe,Se,Ee,r,e[12],20,-1926607734),Se,Ee,e[5],4,-378558),Ee=v(Ee,r,xe,Se,e[8],11,-2022574463),Se=v(Se,Ee,r,xe,e[11],16,1839030562),xe=v(xe,Se,Ee,r,e[14],23,-35309556),r=v(r,xe,Se,Ee,e[1],4,-1530992060),Ee=v(Ee,r,xe,Se,e[4],11,1272893353),Se=v(Se,Ee,r,xe,e[7],16,-155497632),xe=v(xe,Se,Ee,r,e[10],23,-1094730640),r=v(r,xe,Se,Ee,e[13],4,681279174),Ee=v(Ee,r,xe,Se,e[0],11,-358537222),Se=v(Se,Ee,r,xe,e[3],16,-722521979),xe=v(xe,Se,Ee,r,e[6],23,76029189),r=v(r,xe,Se,Ee,e[9],4,-640364487),Ee=v(Ee,r,xe,Se,e[12],11,-421815835),Se=v(Se,Ee,r,xe,e[15],16,530742520),r=b(r,xe=v(xe,Se,Ee,r,e[2],23,-995338651),Se,Ee,e[0],6,-198630844),Ee=b(Ee,r,xe,Se,e[7],10,1126891415),Se=b(Se,Ee,r,xe,e[14],15,-1416354905),xe=b(xe,Se,Ee,r,e[5],21,-57434055),r=b(r,xe,Se,Ee,e[12],6,1700485571),Ee=b(Ee,r,xe,Se,e[3],10,-1894986606),Se=b(Se,Ee,r,xe,e[10],15,-1051523),xe=b(xe,Se,Ee,r,e[1],21,-2054922799),r=b(r,xe,Se,Ee,e[8],6,1873313359),Ee=b(Ee,r,xe,Se,e[15],10,-30611744),Se=b(Se,Ee,r,xe,e[6],15,-1560198380),xe=b(xe,Se,Ee,r,e[13],21,1309151649),r=b(r,xe,Se,Ee,e[4],6,-145523070),Ee=b(Ee,r,xe,Se,e[11],10,-1120210379),Se=b(Se,Ee,r,xe,e[2],15,718787259),xe=b(xe,Se,Ee,r,e[9],21,-343485551),t[0]=_(r,t[0]),t[1]=_(xe,t[1]),t[2]=_(Se,t[2]),t[3]=_(Ee,t[3])}function p(t,e,r,xe,Se,Ee){return e=_(_(e,t),_(xe,Ee)),_(e<<Se|e>>>32-Se,r)}function g(t,e,r,xe,Se,Ee,Pe){return p(e&r|~e&xe,t,e,Se,Ee,Pe)}function m(t,e,r,xe,Se,Ee,Pe){return p(e&xe|r&~xe,t,e,Se,Ee,Pe)}function v(t,e,r,xe,Se,Ee,Pe){return p(e^r^xe,t,e,Se,Ee,Pe)}function b(t,e,r,xe,Se,Ee,Pe){return p(r^(e|~xe),t,e,Se,Ee,Pe)}function y(t){var e,r=t.length,xe=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)d(xe,w(t.substring(e-64,e)));t=t.substring(e-64);var Se=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)Se[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(Se[e>>2]|=128<<(e%4<<3),e>55)for(d(xe,Se),e=0;e<16;e++)Se[e]=0;return Se[14]=8*r,d(xe,Se),xe}function w(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}u=n.atob.bind(n),h=n.btoa.bind(n);var N="0123456789abcdef".split("");function L(t){for(var e="",r=0;r<4;r++)e+=N[t>>8*r+4&15]+N[t>>8*r&15];return e}function A(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function x(t){return y(t).map(A).join("")}var S=(function(t){for(var e=0;e<t.length;e++)t[e]=L(t[e]);return t.join("")})(y("hello"))!="5d41402abc4b2a76b9719d911017c592";function _(t,e){if(S){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function P(t,e){var r,xe,Se,Ee;if(t!==r){for(var Pe=(Se=t,Ee=1+(256/t.length>>0),new Array(Ee+1).join(Se)),Ce=[],Re=0;Re<256;Re++)Ce[Re]=Re;var Be=0;for(Re=0;Re<256;Re++){var Me=Ce[Re];Be=(Be+Me+Pe.charCodeAt(Re))%256,Ce[Re]=Ce[Be],Ce[Be]=Me}r=t,xe=Ce}else Ce=xe;var Ve=e.length,Fe=0,Ie=0,qe="";for(Re=0;Re<Ve;Re++)Ie=(Ie+(Me=Ce[Fe=(Fe+1)%256]))%256,Ce[Fe]=Ce[Ie],Ce[Ie]=Me,Pe=Ce[(Ce[Fe]+Ce[Ie])%256],qe+=String.fromCharCode(e.charCodeAt(Re)^Pe);return qe}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var k={print:4,modify:8,copy:16,"annot-forms":32};function I(t,e,r,xe){this.v=1,this.r=2;var Se=192;t.forEach((function(Ce){if(k.perm!==void 0)throw new Error("Invalid permission: "+Ce);Se+=k[Ce]})),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var Ee=(e+this.padding).substr(0,32),Pe=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(Ee,Pe),this.P=-(1+(255^Se)),this.encryptionKey=x(Ee+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(xe)).substr(0,5),this.U=P(this.encryptionKey,this.padding)}function F(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,xe=0;xe<r;xe++){var Se=t.charCodeAt(xe);Se<33||Se===35||Se===37||Se===40||Se===41||Se===47||Se===60||Se===62||Se===91||Se===93||Se===123||Se===125||Se>126?e+="#"+("0"+Se.toString(16)).slice(-2):e+=t[xe]}return e}function C(t){if(_typeof(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,xe,Se){if(Se=Se||!1,typeof r!="string"||typeof xe!="function"||typeof Se!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var Ee=Math.random().toString(35);return e[r][Ee]=[xe,!!Se],Ee},this.unsubscribe=function(r){for(var xe in e)if(e[xe][r])return delete e[xe][r],Object.keys(e[xe]).length===0&&delete e[xe],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var xe=Array.prototype.slice.call(arguments,1),Se=[];for(var Ee in e[r]){var Pe=e[r][Ee];try{Pe[0].apply(t,xe)}catch(Ce){n.console&&a.error("jsPDF PubSub Error",Ce.message,Ce)}Pe[1]&&Se.push(Ee)}Se.length&&Se.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function j(t){if(!(this instanceof j))return new j(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function O(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function B(t,e,r,xe,Se){if(!(this instanceof B))return new B(t,e,r,xe,Se);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,O.call(this,xe,Se)}function M(t,e,r,xe,Se){if(!(this instanceof M))return new M(t,e,r,xe,Se);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,O.call(this,xe,Se)}function E(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",xe=arguments[1],Se=arguments[2],Ee=arguments[3],Pe=[],Ce=1,Re=16,Be="S",Me=null;_typeof(t=t||{})==="object"&&(r=t.orientation,xe=t.unit||xe,Se=t.format||Se,Ee=t.compress||t.compressPdf||Ee,(Me=t.encryption||null)!==null&&(Me.userPassword=Me.userPassword||"",Me.ownerPassword=Me.ownerPassword||"",Me.userPermissions=Me.userPermissions||[]),Ce=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(Re=t.floatPrecision),Be=t.defaultPathOperation||"S"),Pe=t.filters||(Ee===!0?["FlateEncode"]:Pe),xe=xe||"mm",r=(""+(r||"P")).toLowerCase();var Ve=t.putOnlyUsedFonts||!1,Fe={},Ie={internal:{},__private__:{}};Ie.__private__.PubSub=C;var qe="1.3",Ye=Ie.__private__.getPdfVersion=function(){return qe};Ie.__private__.setPdfVersion=function(Ke){qe=Ke};var Xe={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};Ie.__private__.getPageFormats=function(){return Xe};var je=Ie.__private__.getPageFormat=function(Ke){return Xe[Ke]};Se=Se||"a4";var Qe={COMPAT:"compat",ADVANCED:"advanced"},sn=Qe.COMPAT;function cn(){this.saveGraphicsState(),En(new ei(Pi,0,0,-Pi,0,zo()*Pi).toString()+" cm"),this.setFontSize(this.getFontSize()/Pi),Be="n",sn=Qe.ADVANCED}function nn(){this.restoreGraphicsState(),Be="S",sn=Qe.COMPAT}var an=Ie.__private__.combineFontStyleAndFontWeight=function(Ke,Bn){if(Ke=="bold"&&Bn=="normal"||Ke=="bold"&&Bn==400||Ke=="normal"&&Bn=="italic"||Ke=="bold"&&Bn=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Bn&&(Ke=Bn==400||Bn==="normal"?Ke==="italic"?"italic":"normal":Bn!=700&&Bn!=="bold"||Ke!=="normal"?(Bn==700?"bold":Bn)+""+Ke:"bold"),Ke};Ie.advancedAPI=function(Ke){var Bn=sn===Qe.COMPAT;return Bn&&cn.call(this),typeof Ke!="function"||(Ke(this),Bn&&nn.call(this)),this},Ie.compatAPI=function(Ke){var Bn=sn===Qe.ADVANCED;return Bn&&nn.call(this),typeof Ke!="function"||(Ke(this),Bn&&cn.call(this)),this},Ie.isAdvancedAPI=function(){return sn===Qe.ADVANCED};var Ze,tn=function(Ke){if(sn!==Qe.ADVANCED)throw new Error(Ke+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},We=Ie.roundToPrecision=Ie.__private__.roundToPrecision=function(Ke,Bn){var Jn=e||Bn;if(isNaN(Ke)||isNaN(Jn))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return Ke.toFixed(Jn).replace(/0+$/,"")};Ze=Ie.hpf=Ie.__private__.hpf=typeof Re=="number"?function(Ke){if(isNaN(Ke))throw new Error("Invalid argument passed to jsPDF.hpf");return We(Ke,Re)}:Re==="smart"?function(Ke){if(isNaN(Ke))throw new Error("Invalid argument passed to jsPDF.hpf");return We(Ke,Ke>-1&&Ke<1?16:5)}:function(Ke){if(isNaN(Ke))throw new Error("Invalid argument passed to jsPDF.hpf");return We(Ke,16)};var An=Ie.f2=Ie.__private__.f2=function(Ke){if(isNaN(Ke))throw new Error("Invalid argument passed to jsPDF.f2");return We(Ke,2)},Je=Ie.__private__.f3=function(Ke){if(isNaN(Ke))throw new Error("Invalid argument passed to jsPDF.f3");return We(Ke,3)},St=Ie.scale=Ie.__private__.scale=function(Ke){if(isNaN(Ke))throw new Error("Invalid argument passed to jsPDF.scale");return sn===Qe.COMPAT?Ke*Pi:sn===Qe.ADVANCED?Ke:void 0},hn=function(Ke){return sn===Qe.COMPAT?zo()-Ke:sn===Qe.ADVANCED?Ke:void 0},_n=function(Ke){return St(hn(Ke))};Ie.__private__.setPrecision=Ie.setPrecision=function(Ke){typeof parseInt(Ke,10)=="number"&&(e=parseInt(Ke,10))};var yn,mn="00000000000000000000000000000000",Sn=Ie.__private__.getFileId=function(){return mn},Pn=Ie.__private__.setFileId=function(Ke){return mn=Ke!==void 0&&/^[a-fA-F0-9]{32}$/.test(Ke)?Ke.toUpperCase():mn.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),Me!==null&&(or=new I(Me.userPermissions,Me.userPassword,Me.ownerPassword,mn)),mn};Ie.setFileId=function(Ke){return Pn(Ke),this},Ie.getFileId=function(){return Sn()};var pn=Ie.__private__.convertDateToPDFDate=function(Ke){var Bn=Ke.getTimezoneOffset(),Jn=Bn<0?"+":"-",ui=Math.floor(Math.abs(Bn/60)),Ei=Math.abs(Bn%60),Fi=[Jn,$e(ui),"'",$e(Ei),"'"].join("");return["D:",Ke.getFullYear(),$e(Ke.getMonth()+1),$e(Ke.getDate()),$e(Ke.getHours()),$e(Ke.getMinutes()),$e(Ke.getSeconds()),Fi].join("")},on=Ie.__private__.convertPDFDateToDate=function(Ke){var Bn=parseInt(Ke.substr(2,4),10),Jn=parseInt(Ke.substr(6,2),10)-1,ui=parseInt(Ke.substr(8,2),10),Ei=parseInt(Ke.substr(10,2),10),Fi=parseInt(Ke.substr(12,2),10),ta=parseInt(Ke.substr(14,2),10);return new Date(Bn,Jn,ui,Ei,Fi,ta,0)},xn=Ie.__private__.setCreationDate=function(Ke){var Bn;if(Ke===void 0&&(Ke=new Date),Ke instanceof Date)Bn=pn(Ke);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(Ke))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Bn=Ke}return yn=Bn},Ge=Ie.__private__.getCreationDate=function(Ke){var Bn=yn;return Ke==="jsDate"&&(Bn=on(yn)),Bn};Ie.setCreationDate=function(Ke){return xn(Ke),this},Ie.getCreationDate=function(Ke){return Ge(Ke)};var Oe,$e=Ie.__private__.padd2=function(Ke){return("0"+parseInt(Ke)).slice(-2)},rn=Ie.__private__.padd2Hex=function(Ke){return("00"+(Ke=Ke.toString())).substr(Ke.length)},fn=0,gn=[],vn=[],wn=0,On=[],jn=[],Wn=!1,ti=vn,si=function(){fn=0,wn=0,vn=[],gn=[],On=[],ia=qi(),Zi=qi()};Ie.__private__.setCustomOutputDestination=function(Ke){Wn=!0,ti=Ke};var qn=function(Ke){Wn||(ti=Ke)};Ie.__private__.resetCustomOutputDestination=function(){Wn=!1,ti=vn};var En=Ie.__private__.out=function(Ke){return Ke=Ke.toString(),wn+=Ke.length+1,ti.push(Ke),ti},Qn=Ie.__private__.write=function(Ke){return En(arguments.length===1?Ke.toString():Array.prototype.join.call(arguments," "))},Cn=Ie.__private__.getArrayBuffer=function(Ke){for(var Bn=Ke.length,Jn=new ArrayBuffer(Bn),ui=new Uint8Array(Jn);Bn--;)ui[Bn]=Ke.charCodeAt(Bn);return Jn},Mn=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];Ie.__private__.getStandardFonts=function(){return Mn};var Un=t.fontSize||16;Ie.__private__.setFontSize=Ie.setFontSize=function(Ke){return Un=sn===Qe.ADVANCED?Ke/Pi:Ke,this};var zn,ni=Ie.__private__.getFontSize=Ie.getFontSize=function(){return sn===Qe.COMPAT?Un:Un*Pi},yi=t.R2L||!1;Ie.__private__.setR2L=Ie.setR2L=function(Ke){return yi=Ke,this},Ie.__private__.getR2L=Ie.getR2L=function(){return yi};var pi,$n=Ie.__private__.setZoomMode=function(Ke){var Bn=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(Ke))zn=Ke;else if(isNaN(Ke)){if(Bn.indexOf(Ke)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+Ke+'" is not recognized.');zn=Ke}else zn=parseInt(Ke,10)};Ie.__private__.getZoomMode=function(){return zn};var Yn,ai=Ie.__private__.setPageMode=function(Ke){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(Ke)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+Ke+'" is not recognized.');pi=Ke};Ie.__private__.getPageMode=function(){return pi};var Di=Ie.__private__.setLayoutMode=function(Ke){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(Ke)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+Ke+'" is not recognized.');Yn=Ke};Ie.__private__.getLayoutMode=function(){return Yn},Ie.__private__.setDisplayMode=Ie.setDisplayMode=function(Ke,Bn,Jn){return $n(Ke),Di(Bn),ai(Jn),this};var ki={title:"",subject:"",author:"",keywords:"",creator:""};Ie.__private__.getDocumentProperty=function(Ke){if(Object.keys(ki).indexOf(Ke)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ki[Ke]},Ie.__private__.getDocumentProperties=function(){return ki},Ie.__private__.setDocumentProperties=Ie.setProperties=Ie.setDocumentProperties=function(Ke){for(var Bn in ki)ki.hasOwnProperty(Bn)&&Ke[Bn]&&(ki[Bn]=Ke[Bn]);return this},Ie.__private__.setDocumentProperty=function(Ke,Bn){if(Object.keys(ki).indexOf(Ke)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ki[Ke]=Bn};var Ji,Pi,na,ea,Ki,oi={},Kn={},di=[],Ui={},wi={},Ai={},Rn={},Zn=null,Xn=0,Si=[],Ci=new C(Ie),Oi=t.hotfixes||[],Fn={},Nn={},Gn=[],ei=function Ke(Bn,Jn,ui,Ei,Fi,ta){if(!(this instanceof Ke))return new Ke(Bn,Jn,ui,Ei,Fi,ta);isNaN(Bn)&&(Bn=1),isNaN(Jn)&&(Jn=0),isNaN(ui)&&(ui=0),isNaN(Ei)&&(Ei=1),isNaN(Fi)&&(Fi=0),isNaN(ta)&&(ta=0),this._matrix=[Bn,Jn,ui,Ei,Fi,ta]};Object.defineProperty(ei.prototype,"sx",{get:function(){return this._matrix[0]},set:function(Ke){this._matrix[0]=Ke}}),Object.defineProperty(ei.prototype,"shy",{get:function(){return this._matrix[1]},set:function(Ke){this._matrix[1]=Ke}}),Object.defineProperty(ei.prototype,"shx",{get:function(){return this._matrix[2]},set:function(Ke){this._matrix[2]=Ke}}),Object.defineProperty(ei.prototype,"sy",{get:function(){return this._matrix[3]},set:function(Ke){this._matrix[3]=Ke}}),Object.defineProperty(ei.prototype,"tx",{get:function(){return this._matrix[4]},set:function(Ke){this._matrix[4]=Ke}}),Object.defineProperty(ei.prototype,"ty",{get:function(){return this._matrix[5]},set:function(Ke){this._matrix[5]=Ke}}),Object.defineProperty(ei.prototype,"a",{get:function(){return this._matrix[0]},set:function(Ke){this._matrix[0]=Ke}}),Object.defineProperty(ei.prototype,"b",{get:function(){return this._matrix[1]},set:function(Ke){this._matrix[1]=Ke}}),Object.defineProperty(ei.prototype,"c",{get:function(){return this._matrix[2]},set:function(Ke){this._matrix[2]=Ke}}),Object.defineProperty(ei.prototype,"d",{get:function(){return this._matrix[3]},set:function(Ke){this._matrix[3]=Ke}}),Object.defineProperty(ei.prototype,"e",{get:function(){return this._matrix[4]},set:function(Ke){this._matrix[4]=Ke}}),Object.defineProperty(ei.prototype,"f",{get:function(){return this._matrix[5]},set:function(Ke){this._matrix[5]=Ke}}),Object.defineProperty(ei.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ei.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ei.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ei.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ei.prototype.join=function(Ke){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Ze).join(Ke)},ei.prototype.multiply=function(Ke){var Bn=Ke.sx*this.sx+Ke.shy*this.shx,Jn=Ke.sx*this.shy+Ke.shy*this.sy,ui=Ke.shx*this.sx+Ke.sy*this.shx,Ei=Ke.shx*this.shy+Ke.sy*this.sy,Fi=Ke.tx*this.sx+Ke.ty*this.shx+this.tx,ta=Ke.tx*this.shy+Ke.ty*this.sy+this.ty;return new ei(Bn,Jn,ui,Ei,Fi,ta)},ei.prototype.decompose=function(){var Ke=this.sx,Bn=this.shy,Jn=this.shx,ui=this.sy,Ei=this.tx,Fi=this.ty,ta=Math.sqrt(Ke*Ke+Bn*Bn),ua=(Ke/=ta)*Jn+(Bn/=ta)*ui;Jn-=Ke*ua,ui-=Bn*ua;var pa=Math.sqrt(Jn*Jn+ui*ui);return ua/=pa,Ke*(ui/=pa)<Bn*(Jn/=pa)&&(Ke=-Ke,Bn=-Bn,ua=-ua,ta=-ta),{scale:new ei(ta,0,0,pa,0,0),translate:new ei(1,0,0,1,Ei,Fi),rotate:new ei(Ke,Bn,-Bn,Ke,0,0),skew:new ei(1,0,ua,1,0,0)}},ei.prototype.toString=function(Ke){return this.join(" ")},ei.prototype.inversed=function(){var Ke=this.sx,Bn=this.shy,Jn=this.shx,ui=this.sy,Ei=this.tx,Fi=this.ty,ta=1/(Ke*ui-Bn*Jn),ua=ui*ta,pa=-Bn*ta,Aa=-Jn*ta,Sa=Ke*ta;return new ei(ua,pa,Aa,Sa,-ua*Ei-Aa*Fi,-pa*Ei-Sa*Fi)},ei.prototype.applyToPoint=function(Ke){var Bn=Ke.x*this.sx+Ke.y*this.shx+this.tx,Jn=Ke.x*this.shy+Ke.y*this.sy+this.ty;return new ml(Bn,Jn)},ei.prototype.applyToRectangle=function(Ke){var Bn=this.applyToPoint(Ke),Jn=this.applyToPoint(new ml(Ke.x+Ke.w,Ke.y+Ke.h));return new zu(Bn.x,Bn.y,Jn.x-Bn.x,Jn.y-Bn.y)},ei.prototype.clone=function(){var Ke=this.sx,Bn=this.shy,Jn=this.shx,ui=this.sy,Ei=this.tx,Fi=this.ty;return new ei(Ke,Bn,Jn,ui,Ei,Fi)},Ie.Matrix=ei;var ii=Ie.matrixMult=function(Ke,Bn){return Bn.multiply(Ke)},gi=new ei(1,0,0,1,0,0);Ie.unitMatrix=Ie.identityMatrix=gi;var Ti=function(Ke,Bn){if(!wi[Ke]){var Jn=(Bn instanceof B?"Sh":"P")+(Object.keys(Ui).length+1).toString(10);Bn.id=Jn,wi[Ke]=Jn,Ui[Jn]=Bn,Ci.publish("addPattern",Bn)}};Ie.ShadingPattern=B,Ie.TilingPattern=M,Ie.addShadingPattern=function(Ke,Bn){return tn("addShadingPattern()"),Ti(Ke,Bn),this},Ie.beginTilingPattern=function(Ke){tn("beginTilingPattern()"),mc(Ke.boundingBox[0],Ke.boundingBox[1],Ke.boundingBox[2]-Ke.boundingBox[0],Ke.boundingBox[3]-Ke.boundingBox[1],Ke.matrix)},Ie.endTilingPattern=function(Ke,Bn){tn("endTilingPattern()"),Bn.stream=jn[Oe].join(`
`),Ti(Ke,Bn),Ci.publish("endTilingPattern",Bn),Gn.pop().restore()};var Wi=Ie.__private__.newObject=function(){var Ke=qi();return ji(Ke,!0),Ke},qi=Ie.__private__.newObjectDeferred=function(){return fn++,gn[fn]=function(){return wn},fn},ji=function(Ke,Bn){return Bn=typeof Bn=="boolean"&&Bn,gn[Ke]=wn,Bn&&En(Ke+" 0 obj"),Ke},la=Ie.__private__.newAdditionalObject=function(){var Ke={objId:qi(),content:""};return On.push(Ke),Ke},ia=qi(),Zi=qi(),aa=Ie.__private__.decodeColorString=function(Ke){var Bn=Ke.split(" ");if(Bn.length!==2||Bn[1]!=="g"&&Bn[1]!=="G")Bn.length===5&&(Bn[4]==="k"||Bn[4]==="K")&&(Bn=[(1-Bn[0])*(1-Bn[3]),(1-Bn[1])*(1-Bn[3]),(1-Bn[2])*(1-Bn[3]),"r"]);else{var Jn=parseFloat(Bn[0]);Bn=[Jn,Jn,Jn,"r"]}for(var ui="#",Ei=0;Ei<3;Ei++)ui+=("0"+Math.floor(255*parseFloat(Bn[Ei])).toString(16)).slice(-2);return ui},ca=Ie.__private__.encodeColorString=function(Ke){var Bn;typeof Ke=="string"&&(Ke={ch1:Ke});var Jn=Ke.ch1,ui=Ke.ch2,Ei=Ke.ch3,Fi=Ke.ch4,ta=Ke.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Jn=="string"&&Jn.charAt(0)!=="#"){var ua=new f(Jn);if(ua.ok)Jn=ua.toHex();else if(!/^\d*\.?\d*$/.test(Jn))throw new Error('Invalid color "'+Jn+'" passed to jsPDF.encodeColorString.')}if(typeof Jn=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Jn)&&(Jn="#"+Jn[1]+Jn[1]+Jn[2]+Jn[2]+Jn[3]+Jn[3]),typeof Jn=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Jn)){var pa=parseInt(Jn.substr(1),16);Jn=pa>>16&255,ui=pa>>8&255,Ei=255&pa}if(ui===void 0||Fi===void 0&&Jn===ui&&ui===Ei)if(typeof Jn=="string")Bn=Jn+" "+ta[0];else switch(Ke.precision){case 2:Bn=An(Jn/255)+" "+ta[0];break;case 3:default:Bn=Je(Jn/255)+" "+ta[0]}else if(Fi===void 0||_typeof(Fi)==="object"){if(Fi&&!isNaN(Fi.a)&&Fi.a===0)return Bn=["1.","1.","1.",ta[1]].join(" ");if(typeof Jn=="string")Bn=[Jn,ui,Ei,ta[1]].join(" ");else switch(Ke.precision){case 2:Bn=[An(Jn/255),An(ui/255),An(Ei/255),ta[1]].join(" ");break;default:case 3:Bn=[Je(Jn/255),Je(ui/255),Je(Ei/255),ta[1]].join(" ")}}else if(typeof Jn=="string")Bn=[Jn,ui,Ei,Fi,ta[2]].join(" ");else switch(Ke.precision){case 2:Bn=[An(Jn),An(ui),An(Ei),An(Fi),ta[2]].join(" ");break;case 3:default:Bn=[Je(Jn),Je(ui),Je(Ei),Je(Fi),ta[2]].join(" ")}return Bn},ma=Ie.__private__.getFilters=function(){return Pe},xa=Ie.__private__.putStream=function(Ke){var Bn=(Ke=Ke||{}).data||"",Jn=Ke.filters||ma(),ui=Ke.alreadyAppliedFilters||[],Ei=Ke.addLength1||!1,Fi=Bn.length,ta=Ke.objectId,ua=function(Fr){return Fr};if(Me!==null&&ta===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");Me!==null&&(ua=or.encryptor(ta,0));var pa={};Jn===!0&&(Jn=["FlateEncode"]);var Aa=Ke.additionalKeyValues||[],Sa=(pa=E.API.processDataByFilters!==void 0?E.API.processDataByFilters(Bn,Jn):{data:Bn,reverseChain:[]}).reverseChain+(Array.isArray(ui)?ui.join(" "):ui.toString());if(pa.data.length!==0&&(Aa.push({key:"Length",value:pa.data.length}),Ei===!0&&Aa.push({key:"Length1",value:Fi})),Sa.length!=0)if(Sa.split("/").length-1==1)Aa.push({key:"Filter",value:Sa});else{Aa.push({key:"Filter",value:"["+Sa+"]"});for(var Va=0;Va<Aa.length;Va+=1)if(Aa[Va].key==="DecodeParms"){for(var lr=[],cr=0;cr<pa.reverseChain.split("/").length-1;cr+=1)lr.push("null");lr.push(Aa[Va].value),Aa[Va].value="["+lr.join(" ")+"]"}}En("<<");for(var br=0;br<Aa.length;br++)En("/"+Aa[br].key+" "+Aa[br].value);En(">>"),pa.data.length!==0&&(En("stream"),En(ua(pa.data)),En("endstream"))},Oa=Ie.__private__.putPage=function(Ke){var Bn=Ke.number,Jn=Ke.data,ui=Ke.objId,Ei=Ke.contentsObjId;ji(ui,!0),En("<</Type /Page"),En("/Parent "+Ke.rootDictionaryObjId+" 0 R"),En("/Resources "+Ke.resourceDictionaryObjId+" 0 R"),En("/MediaBox ["+parseFloat(Ze(Ke.mediaBox.bottomLeftX))+" "+parseFloat(Ze(Ke.mediaBox.bottomLeftY))+" "+Ze(Ke.mediaBox.topRightX)+" "+Ze(Ke.mediaBox.topRightY)+"]"),Ke.cropBox!==null&&En("/CropBox ["+Ze(Ke.cropBox.bottomLeftX)+" "+Ze(Ke.cropBox.bottomLeftY)+" "+Ze(Ke.cropBox.topRightX)+" "+Ze(Ke.cropBox.topRightY)+"]"),Ke.bleedBox!==null&&En("/BleedBox ["+Ze(Ke.bleedBox.bottomLeftX)+" "+Ze(Ke.bleedBox.bottomLeftY)+" "+Ze(Ke.bleedBox.topRightX)+" "+Ze(Ke.bleedBox.topRightY)+"]"),Ke.trimBox!==null&&En("/TrimBox ["+Ze(Ke.trimBox.bottomLeftX)+" "+Ze(Ke.trimBox.bottomLeftY)+" "+Ze(Ke.trimBox.topRightX)+" "+Ze(Ke.trimBox.topRightY)+"]"),Ke.artBox!==null&&En("/ArtBox ["+Ze(Ke.artBox.bottomLeftX)+" "+Ze(Ke.artBox.bottomLeftY)+" "+Ze(Ke.artBox.topRightX)+" "+Ze(Ke.artBox.topRightY)+"]"),typeof Ke.userUnit=="number"&&Ke.userUnit!==1&&En("/UserUnit "+Ke.userUnit),Ci.publish("putPage",{objId:ui,pageContext:Si[Bn],pageNumber:Bn,page:Jn}),En("/Contents "+Ei+" 0 R"),En(">>"),En("endobj");var Fi=Jn.join(`
`);return sn===Qe.ADVANCED&&(Fi+=`
Q`),ji(Ei,!0),xa({data:Fi,filters:ma(),objectId:Ei}),En("endobj"),ui},Ba=Ie.__private__.putPages=function(){var Ke,Bn,Jn=[];for(Ke=1;Ke<=Xn;Ke++)Si[Ke].objId=qi(),Si[Ke].contentsObjId=qi();for(Ke=1;Ke<=Xn;Ke++)Jn.push(Oa({number:Ke,data:jn[Ke],objId:Si[Ke].objId,contentsObjId:Si[Ke].contentsObjId,mediaBox:Si[Ke].mediaBox,cropBox:Si[Ke].cropBox,bleedBox:Si[Ke].bleedBox,trimBox:Si[Ke].trimBox,artBox:Si[Ke].artBox,userUnit:Si[Ke].userUnit,rootDictionaryObjId:ia,resourceDictionaryObjId:Zi}));ji(ia,!0),En("<</Type /Pages");var ui="/Kids [";for(Bn=0;Bn<Xn;Bn++)ui+=Jn[Bn]+" 0 R ";En(ui+"]"),En("/Count "+Xn),En(">>"),En("endobj"),Ci.publish("postPutPages")},tr=function(Ke){Ci.publish("putFont",{font:Ke,out:En,newObject:Wi,putStream:xa}),Ke.isAlreadyPutted!==!0&&(Ke.objectNumber=Wi(),En("<<"),En("/Type /Font"),En("/BaseFont /"+F(Ke.postScriptName)),En("/Subtype /Type1"),typeof Ke.encoding=="string"&&En("/Encoding /"+Ke.encoding),En("/FirstChar 32"),En("/LastChar 255"),En(">>"),En("endobj"))},wr=function(){for(var Ke in oi)oi.hasOwnProperty(Ke)&&(Ve===!1||Ve===!0&&Fe.hasOwnProperty(Ke))&&tr(oi[Ke])},Sr=function(Ke){Ke.objectNumber=Wi();var Bn=[];Bn.push({key:"Type",value:"/XObject"}),Bn.push({key:"Subtype",value:"/Form"}),Bn.push({key:"BBox",value:"["+[Ze(Ke.x),Ze(Ke.y),Ze(Ke.x+Ke.width),Ze(Ke.y+Ke.height)].join(" ")+"]"}),Bn.push({key:"Matrix",value:"["+Ke.matrix.toString()+"]"});var Jn=Ke.pages[1].join(`
`);xa({data:Jn,additionalKeyValues:Bn,objectId:Ke.objectNumber}),En("endobj")},ss=function(){for(var Ke in Fn)Fn.hasOwnProperty(Ke)&&Sr(Fn[Ke])},No=function(Ke,Bn){var Jn,ui=[],Ei=1/(Bn-1);for(Jn=0;Jn<1;Jn+=Ei)ui.push(Jn);if(ui.push(1),Ke[0].offset!=0){var Fi={offset:0,color:Ke[0].color};Ke.unshift(Fi)}if(Ke[Ke.length-1].offset!=1){var ta={offset:1,color:Ke[Ke.length-1].color};Ke.push(ta)}for(var ua="",pa=0,Aa=0;Aa<ui.length;Aa++){for(Jn=ui[Aa];Jn>Ke[pa+1].offset;)pa++;var Sa=Ke[pa].offset,Va=(Jn-Sa)/(Ke[pa+1].offset-Sa),lr=Ke[pa].color,cr=Ke[pa+1].color;ua+=rn(Math.round((1-Va)*lr[0]+Va*cr[0]).toString(16))+rn(Math.round((1-Va)*lr[1]+Va*cr[1]).toString(16))+rn(Math.round((1-Va)*lr[2]+Va*cr[2]).toString(16))}return ua.trim()},Mo=function(Ke,Bn){Bn||(Bn=21);var Jn=Wi(),ui=No(Ke.colors,Bn),Ei=[];Ei.push({key:"FunctionType",value:"0"}),Ei.push({key:"Domain",value:"[0.0 1.0]"}),Ei.push({key:"Size",value:"["+Bn+"]"}),Ei.push({key:"BitsPerSample",value:"8"}),Ei.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ei.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),xa({data:ui,additionalKeyValues:Ei,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Jn}),En("endobj"),Ke.objectNumber=Wi(),En("<< /ShadingType "+Ke.type),En("/ColorSpace /DeviceRGB");var Fi="/Coords ["+Ze(parseFloat(Ke.coords[0]))+" "+Ze(parseFloat(Ke.coords[1]))+" ";Ke.type===2?Fi+=Ze(parseFloat(Ke.coords[2]))+" "+Ze(parseFloat(Ke.coords[3])):Fi+=Ze(parseFloat(Ke.coords[2]))+" "+Ze(parseFloat(Ke.coords[3]))+" "+Ze(parseFloat(Ke.coords[4]))+" "+Ze(parseFloat(Ke.coords[5])),En(Fi+="]"),Ke.matrix&&En("/Matrix ["+Ke.matrix.toString()+"]"),En("/Function "+Jn+" 0 R"),En("/Extend [true true]"),En(">>"),En("endobj")},Ar=function(Ke,Bn){var Jn=qi(),ui=Wi();Bn.push({resourcesOid:Jn,objectOid:ui}),Ke.objectNumber=ui;var Ei=[];Ei.push({key:"Type",value:"/Pattern"}),Ei.push({key:"PatternType",value:"1"}),Ei.push({key:"PaintType",value:"1"}),Ei.push({key:"TilingType",value:"1"}),Ei.push({key:"BBox",value:"["+Ke.boundingBox.map(Ze).join(" ")+"]"}),Ei.push({key:"XStep",value:Ze(Ke.xStep)}),Ei.push({key:"YStep",value:Ze(Ke.yStep)}),Ei.push({key:"Resources",value:Jn+" 0 R"}),Ke.matrix&&Ei.push({key:"Matrix",value:"["+Ke.matrix.toString()+"]"}),xa({data:Ke.stream,additionalKeyValues:Ei,objectId:Ke.objectNumber}),En("endobj")},ll=function(Ke){var Bn;for(Bn in Ui)Ui.hasOwnProperty(Bn)&&(Ui[Bn]instanceof B?Mo(Ui[Bn]):Ui[Bn]instanceof M&&Ar(Ui[Bn],Ke))},Cu=function(Ke){for(var Bn in Ke.objectNumber=Wi(),En("<<"),Ke)switch(Bn){case"opacity":En("/ca "+An(Ke[Bn]));break;case"stroke-opacity":En("/CA "+An(Ke[Bn]))}En(">>"),En("endobj")},fo=function(){var Ke;for(Ke in Ai)Ai.hasOwnProperty(Ke)&&Cu(Ai[Ke])},Qs=function(){for(var Ke in En("/XObject <<"),Fn)Fn.hasOwnProperty(Ke)&&Fn[Ke].objectNumber>=0&&En("/"+Ke+" "+Fn[Ke].objectNumber+" 0 R");Ci.publish("putXobjectDict"),En(">>")},nh=function(){or.oid=Wi(),En("<<"),En("/Filter /Standard"),En("/V "+or.v),En("/R "+or.r),En("/U <"+or.toHexString(or.U)+">"),En("/O <"+or.toHexString(or.O)+">"),En("/P "+or.P),En(">>"),En("endobj")},Bu=function(){for(var Ke in En("/Font <<"),oi)oi.hasOwnProperty(Ke)&&(Ve===!1||Ve===!0&&Fe.hasOwnProperty(Ke))&&En("/"+Ke+" "+oi[Ke].objectNumber+" 0 R");En(">>")},sc=function(){if(Object.keys(Ui).length>0){for(var Ke in En("/Shading <<"),Ui)Ui.hasOwnProperty(Ke)&&Ui[Ke]instanceof B&&Ui[Ke].objectNumber>=0&&En("/"+Ke+" "+Ui[Ke].objectNumber+" 0 R");Ci.publish("putShadingPatternDict"),En(">>")}},Fl=function(Ke){if(Object.keys(Ui).length>0){for(var Bn in En("/Pattern <<"),Ui)Ui.hasOwnProperty(Bn)&&Ui[Bn]instanceof Ie.TilingPattern&&Ui[Bn].objectNumber>=0&&Ui[Bn].objectNumber<Ke&&En("/"+Bn+" "+Ui[Bn].objectNumber+" 0 R");Ci.publish("putTilingPatternDict"),En(">>")}},Ol=function(){if(Object.keys(Ai).length>0){var Ke;for(Ke in En("/ExtGState <<"),Ai)Ai.hasOwnProperty(Ke)&&Ai[Ke].objectNumber>=0&&En("/"+Ke+" "+Ai[Ke].objectNumber+" 0 R");Ci.publish("putGStateDict"),En(">>")}},sr=function(Ke){ji(Ke.resourcesOid,!0),En("<<"),En("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Bu(),sc(),Fl(Ke.objectOid),Ol(),Qs(),En(">>"),En("endobj")},xs=function(){var Ke=[];wr(),fo(),ss(),ll(Ke),Ci.publish("putResources"),Ke.forEach(sr),sr({resourcesOid:Zi,objectOid:Number.MAX_SAFE_INTEGER}),Ci.publish("postPutResources")},es=function(){Ci.publish("putAdditionalObjects");for(var Ke=0;Ke<On.length;Ke++){var Bn=On[Ke];ji(Bn.objId,!0),En(Bn.content),En("endobj")}Ci.publish("postPutAdditionalObjects")},Ru=function(Ke){Kn[Ke.fontName]=Kn[Ke.fontName]||{},Kn[Ke.fontName][Ke.fontStyle]=Ke.id},Nu=function(Ke,Bn,Jn,ui,Ei){var Fi={id:"F"+(Object.keys(oi).length+1).toString(10),postScriptName:Ke,fontName:Bn,fontStyle:Jn,encoding:ui,isStandardFont:Ei||!1,metadata:{}};return Ci.publish("addFont",{font:Fi,instance:this}),oi[Fi.id]=Fi,Ru(Fi),Fi.id},Mu=function(Ke){for(var Bn=0,Jn=Mn.length;Bn<Jn;Bn++){var ui=Nu.call(this,Ke[Bn][0],Ke[Bn][1],Ke[Bn][2],Mn[Bn][3],!0);Ve===!1&&(Fe[ui]=!0);var Ei=Ke[Bn][0].split("-");Ru({id:ui,fontName:Ei[0],fontStyle:Ei[1]||""})}Ci.publish("addFonts",{fonts:oi,dictionary:Kn})},_s=function(Ke){return Ke.foo=function(){try{return Ke.apply(this,arguments)}catch(ui){var Bn=ui.stack||"";~Bn.indexOf(" at ")&&(Bn=Bn.split(" at ")[1]);var Jn="Error in function "+Bn.split(`
`)[0].split("<")[0]+": "+ui.message;if(!n.console)throw new Error(Jn);n.console.error(Jn,ui),n.alert&&alert(Jn)}},Ke.foo.bar=Ke,Ke.foo},po=function(Ke,Bn){var Jn,ui,Ei,Fi,ta,ua,pa,Aa,Sa;if(Ei=(Bn=Bn||{}).sourceEncoding||"Unicode",ta=Bn.outputEncoding,(Bn.autoencode||ta)&&oi[Ji].metadata&&oi[Ji].metadata[Ei]&&oi[Ji].metadata[Ei].encoding&&(Fi=oi[Ji].metadata[Ei].encoding,!ta&&oi[Ji].encoding&&(ta=oi[Ji].encoding),!ta&&Fi.codePages&&(ta=Fi.codePages[0]),typeof ta=="string"&&(ta=Fi[ta]),ta)){for(pa=!1,ua=[],Jn=0,ui=Ke.length;Jn<ui;Jn++)(Aa=ta[Ke.charCodeAt(Jn)])?ua.push(String.fromCharCode(Aa)):ua.push(Ke[Jn]),ua[Jn].charCodeAt(0)>>8&&(pa=!0);Ke=ua.join("")}for(Jn=Ke.length;pa===void 0&&Jn!==0;)Ke.charCodeAt(Jn-1)>>8&&(pa=!0),Jn--;if(!pa)return Ke;for(ua=Bn.noBOM?[]:[254,255],Jn=0,ui=Ke.length;Jn<ui;Jn++){if((Sa=(Aa=Ke.charCodeAt(Jn))>>8)>>8)throw new Error("Character at position "+Jn+" of string '"+Ke+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ua.push(Sa),ua.push(Aa-(Sa<<8))}return String.fromCharCode.apply(void 0,ua)},os=Ie.__private__.pdfEscape=Ie.pdfEscape=function(Ke,Bn){return po(Ke,Bn).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Gr=Ie.__private__.beginPage=function(Ke){jn[++Xn]=[],Si[Xn]={objId:0,contentsObjId:0,userUnit:Number(Ce),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(Ke[0]),topRightY:Number(Ke[1])}},zl(Xn),qn(jn[Oe])},Ul=function(Ke,Bn){var Jn,ui,Ei;switch(r=Bn||r,typeof Ke=="string"&&(Jn=je(Ke.toLowerCase()),Array.isArray(Jn)&&(ui=Jn[0],Ei=Jn[1])),Array.isArray(Ke)&&(ui=Ke[0]*Pi,Ei=Ke[1]*Pi),isNaN(ui)&&(ui=Se[0],Ei=Se[1]),(ui>14400||Ei>14400)&&(a.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ui=Math.min(14400,ui),Ei=Math.min(14400,Ei)),Se=[ui,Ei],r.substr(0,1)){case"l":Ei>ui&&(Se=[Ei,ui]);break;case"p":ui>Ei&&(Se=[Ei,ui])}Gr(Se),dl(Br),En(js),Ou!==0&&En(Ou+" J"),Uu!==0&&En(Uu+" j"),Ci.publish("addPage",{pageNumber:Xn})},oc=function(Ke){Ke>0&&Ke<=Xn&&(jn.splice(Ke,1),Si.splice(Ke,1),Xn--,Oe>Xn&&(Oe=Xn),this.setPage(Oe))},zl=function(Ke){Ke>0&&Ke<=Xn&&(Oe=Ke)},ko=Ie.__private__.getNumberOfPages=Ie.getNumberOfPages=function(){return jn.length-1},ku=function(Ke,Bn,Jn){var ui,Ei=void 0;return Jn=Jn||{},Ke=Ke!==void 0?Ke:oi[Ji].fontName,Bn=Bn!==void 0?Bn:oi[Ji].fontStyle,ui=Ke.toLowerCase(),Kn[ui]!==void 0&&Kn[ui][Bn]!==void 0?Ei=Kn[ui][Bn]:Kn[Ke]!==void 0&&Kn[Ke][Bn]!==void 0?Ei=Kn[Ke][Bn]:Jn.disableWarning===!1&&a.warn("Unable to look up font label for font '"+Ke+"', '"+Bn+"'. Refer to getFontList() for available fonts."),Ei||Jn.noFallback||(Ei=Kn.times[Bn])==null&&(Ei=Kn.times.normal),Ei},uc=Ie.__private__.putInfo=function(){var Ke=Wi(),Bn=function(ui){return ui};for(var Jn in Me!==null&&(Bn=or.encryptor(Ke,0)),En("<<"),En("/Producer ("+os(Bn("jsPDF "+E.version))+")"),ki)ki.hasOwnProperty(Jn)&&ki[Jn]&&En("/"+Jn.substr(0,1).toUpperCase()+Jn.substr(1)+" ("+os(Bn(ki[Jn]))+")");En("/CreationDate ("+os(Bn(yn))+")"),En(">>"),En("endobj")},Zs=Ie.__private__.putCatalog=function(Ke){var Bn=(Ke=Ke||{}).rootDictionaryObjId||ia;switch(Wi(),En("<<"),En("/Type /Catalog"),En("/Pages "+Bn+" 0 R"),zn||(zn="fullwidth"),zn){case"fullwidth":En("/OpenAction [3 0 R /FitH null]");break;case"fullheight":En("/OpenAction [3 0 R /FitV null]");break;case"fullpage":En("/OpenAction [3 0 R /Fit]");break;case"original":En("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Jn=""+zn;Jn.substr(Jn.length-1)==="%"&&(zn=parseInt(zn)/100),typeof zn=="number"&&En("/OpenAction [3 0 R /XYZ null null "+An(zn)+"]")}switch(Yn||(Yn="continuous"),Yn){case"continuous":En("/PageLayout /OneColumn");break;case"single":En("/PageLayout /SinglePage");break;case"two":case"twoleft":En("/PageLayout /TwoColumnLeft");break;case"tworight":En("/PageLayout /TwoColumnRight")}pi&&En("/PageMode /"+pi),Ci.publish("putCatalog"),En(">>"),En("endobj")},ih=Ie.__private__.putTrailer=function(){En("trailer"),En("<<"),En("/Size "+(fn+1)),En("/Root "+fn+" 0 R"),En("/Info "+(fn-1)+" 0 R"),Me!==null&&En("/Encrypt "+or.oid+" 0 R"),En("/ID [ <"+mn+"> <"+mn+"> ]"),En(">>")},cc=Ie.__private__.putHeader=function(){En("%PDF-"+qe),En("%")},hc=Ie.__private__.putXRef=function(){var Ke="0000000000";En("xref"),En("0 "+(fn+1)),En("0000000000 65535 f ");for(var Bn=1;Bn<=fn;Bn++)typeof gn[Bn]=="function"?En((Ke+gn[Bn]()).slice(-10)+" 00000 n "):gn[Bn]!==void 0?En((Ke+gn[Bn]).slice(-10)+" 00000 n "):En("0000000000 00000 n ")},Us=Ie.__private__.buildDocument=function(){si(),qn(vn),Ci.publish("buildDocument"),cc(),Ba(),es(),xs(),Me!==null&&nh(),uc(),Zs();var Ke=wn;return hc(),ih(),En("startxref"),En(""+Ke),En("%%EOF"),qn(jn[Oe]),vn.join(`
`)},jl=Ie.__private__.getBlob=function(Ke){return new Blob([Cn(Ke)],{type:"application/pdf"})},ql=Ie.output=Ie.__private__.output=_s((function(Ke,Bn){switch(typeof(Bn=Bn||{})=="string"?Bn={filename:Bn}:Bn.filename=Bn.filename||"generated.pdf",Ke){case void 0:return Us();case"save":Ie.save(Bn.filename);break;case"arraybuffer":return Cn(Us());case"blob":return jl(Us());case"bloburi":case"bloburl":if(n.URL!==void 0&&typeof n.URL.createObjectURL=="function")return n.URL&&n.URL.createObjectURL(jl(Us()))||void 0;a.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Jn="",ui=Us();try{Jn=h(ui)}catch{Jn=h(unescape(encodeURIComponent(ui)))}return"data:application/pdf;filename="+Bn.filename+";base64,"+Jn;case"pdfobjectnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var Ei="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Fi=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Bn.pdfObjectUrl&&(Ei=Bn.pdfObjectUrl,Fi="");var ta='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ei+'"'+Fi+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Bn)+");<\/script></body></html>",ua=n.open();return ua!==null&&ua.document.write(ta),ua}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var pa='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Bn.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Bn.filename+'" width="500px" height="400px" /></body></html>',Aa=n.open();if(Aa!==null){Aa.document.write(pa);var Sa=this;Aa.document.documentElement.querySelector("#pdfViewer").onload=function(){Aa.document.title=Bn.filename,Aa.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Sa.output("bloburl"))}}return Aa}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(n)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Va='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Bn)+'"></iframe></body></html>',lr=n.open();if(lr!==null&&(lr.document.write(Va),lr.document.title=Bn.filename),lr||typeof safari>"u")return lr;break;case"datauri":case"dataurl":return n.document.location.href=this.output("datauristring",Bn);default:return null}})),ul=function(Ke){return Array.isArray(Oi)===!0&&Oi.indexOf(Ke)>-1};switch(xe){case"pt":Pi=1;break;case"mm":Pi=72/25.4;break;case"cm":Pi=72/2.54;break;case"in":Pi=72;break;case"px":Pi=ul("px_scaling")==1?.75:96/72;break;case"pc":case"em":Pi=12;break;case"ex":Pi=6;break;default:if(typeof xe!="number")throw new Error("Invalid unit: "+xe);Pi=xe}var or=null;xn(),Pn();var Vu=function(Ke){return Me!==null?or.encryptor(Ke,0):function(Bn){return Bn}},Hl=Ie.__private__.getPageInfo=Ie.getPageInfo=function(Ke){if(isNaN(Ke)||Ke%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Si[Ke].objId,pageNumber:Ke,pageContext:Si[Ke]}},ya=Ie.__private__.getPageInfoByObjId=function(Ke){if(isNaN(Ke)||Ke%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Bn in Si)if(Si[Bn].objId===Ke)break;return Hl(Bn)},Vo=Ie.__private__.getCurrentPageInfo=Ie.getCurrentPageInfo=function(){return{objId:Si[Oe].objId,pageNumber:Oe,pageContext:Si[Oe]}};Ie.addPage=function(){return Ul.apply(this,arguments),this},Ie.setPage=function(){return zl.apply(this,arguments),qn.call(this,jn[Oe]),this},Ie.insertPage=function(Ke){return this.addPage(),this.movePage(Oe,Ke),this},Ie.movePage=function(Ke,Bn){var Jn,ui;if(Ke>Bn){Jn=jn[Ke],ui=Si[Ke];for(var Ei=Ke;Ei>Bn;Ei--)jn[Ei]=jn[Ei-1],Si[Ei]=Si[Ei-1];jn[Bn]=Jn,Si[Bn]=ui,this.setPage(Bn)}else if(Ke<Bn){Jn=jn[Ke],ui=Si[Ke];for(var Fi=Ke;Fi<Bn;Fi++)jn[Fi]=jn[Fi+1],Si[Fi]=Si[Fi+1];jn[Bn]=Jn,Si[Bn]=ui,this.setPage(Bn)}return this},Ie.deletePage=function(){return oc.apply(this,arguments),this},Ie.__private__.text=Ie.text=function(Ke,Bn,Jn,ui,Ei){var Fi,ta,ua,pa,Aa,Sa,Va,lr,cr,br=(ui=ui||{}).scope||this;if(typeof Ke=="number"&&typeof Bn=="number"&&(typeof Jn=="string"||Array.isArray(Jn))){var Fr=Jn;Jn=Bn,Bn=Ke,Ke=Fr}if(arguments[3]instanceof ei?(tn("The transform parameter of text() with a Matrix value"),cr=Ei):(ua=arguments[4],pa=arguments[5],_typeof(Va=arguments[3])==="object"&&Va!==null||(typeof ua=="string"&&(pa=ua,ua=null),typeof Va=="string"&&(pa=Va,Va=null),typeof Va=="number"&&(ua=Va,Va=null),ui={flags:Va,angle:ua,align:pa})),isNaN(Bn)||isNaN(Jn)||Ke==null)throw new Error("Invalid arguments passed to jsPDF.text");if(Ke.length===0)return br;var Tr="",Yr=!1,fs=typeof ui.lineHeightFactor=="number"?ui.lineHeightFactor:Fo,to=br.internal.scaleFactor;function gc(Ca){return Ca=Ca.split("	").join(Array(ui.TabLen||9).join(" ")),os(Ca,Va)}function $l(Ca){for(var Ga,Ua=Ca.concat(),ur=[],Js=Ua.length;Js--;)typeof(Ga=Ua.shift())=="string"?ur.push(Ga):Array.isArray(Ca)&&(Ga.length===1||Ga[1]===void 0&&Ga[2]===void 0)?ur.push(Ga[0]):ur.push([Ga[0],Ga[1],Ga[2]]);return ur}function Kl(Ca,Ga){var Ua;if(typeof Ca=="string")Ua=Ga(Ca)[0];else if(Array.isArray(Ca)){for(var ur,Js,Xo=Ca.concat(),_o=[],au=Xo.length;au--;)typeof(ur=Xo.shift())=="string"?_o.push(Ga(ur)[0]):Array.isArray(ur)&&typeof ur[0]=="string"&&(Js=Ga(ur[0],ur[1],ur[2]),_o.push([Js[0],Js[1],Js[2]]));Ua=_o}return Ua}var no=!1,go=!0;if(typeof Ke=="string")no=!0;else if(Array.isArray(Ke)){var Hu=Ke.concat();ta=[];for(var yo,Rr=Hu.length;Rr--;)(typeof(yo=Hu.shift())!="string"||Array.isArray(yo)&&typeof yo[0]!="string")&&(go=!1);no=go}if(no===!1)throw new Error('Type of text must be string or Array. "'+Ke+'" is not recognized.');typeof Ke=="string"&&(Ke=Ke.match(/[\r?\n]/)?Ke.split(/\r\n|\r|\n/g):[Ke]);var yl=Un/br.internal.scaleFactor,jo=yl*(fs-1);switch(ui.baseline){case"bottom":Jn-=jo;break;case"top":Jn+=yl-jo;break;case"hanging":Jn+=yl-2*jo;break;case"middle":Jn+=yl/2-jo}if((Sa=ui.maxWidth||0)>0&&(typeof Ke=="string"?Ke=br.splitTextToSize(Ke,Sa):Object.prototype.toString.call(Ke)==="[object Array]"&&(Ke=Ke.reduce((function(Ca,Ga){return Ca.concat(br.splitTextToSize(Ga,Sa))}),[]))),Fi={text:Ke,x:Bn,y:Jn,options:ui,mutex:{pdfEscape:os,activeFontKey:Ji,fonts:oi,activeFontSize:Un}},Ci.publish("preProcessText",Fi),Ke=Fi.text,ua=(ui=Fi.options).angle,!(cr instanceof ei)&&ua&&typeof ua=="number"){ua*=Math.PI/180,ui.rotationDirection===0&&(ua=-ua),sn===Qe.ADVANCED&&(ua=-ua);var qo=Math.cos(ua),Ql=Math.sin(ua);cr=new ei(qo,Ql,-Ql,qo,0,0)}else ua&&ua instanceof ei&&(cr=ua);sn!==Qe.ADVANCED||cr||(cr=gi),(Aa=ui.charSpace||Xl)!==void 0&&(Tr+=Ze(St(Aa))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(lr=ui.horizontalScale)!==void 0&&(Tr+=Ze(100*lr)+` Tz
`),ui.lang;var ts=-1,yc=ui.renderingMode!==void 0?ui.renderingMode:ui.stroke,Gu=br.internal.getCurrentPageInfo().pageContext;switch(yc){case 0:case!1:case"fill":ts=0;break;case 1:case!0:case"stroke":ts=1;break;case 2:case"fillThenStroke":ts=2;break;case 3:case"invisible":ts=3;break;case 4:case"fillAndAddForClipping":ts=4;break;case 5:case"strokeAndAddPathForClipping":ts=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ts=6;break;case 7:case"addToPathForClipping":ts=7}var vc=Gu.usedRenderingMode!==void 0?Gu.usedRenderingMode:-1;ts!==-1?Tr+=ts+` Tr
`:vc!==-1&&(Tr+=`0 Tr
`),ts!==-1&&(Gu.usedRenderingMode=ts),pa=ui.align||"left";var Ps,Zl=Un*fs,bc=br.internal.pageSize.getWidth(),Jr=oi[Ji];Aa=ui.charSpace||Xl,Sa=ui.maxWidth||0,Va=Object.assign({autoencode:!0,noBOM:!0},ui.flags);var ws=[],Ho=function(Ca){return br.getStringUnitWidth(Ca,{font:Jr,charSpace:Aa,fontSize:Un,doKerning:!1})*Un/to};if(Object.prototype.toString.call(Ke)==="[object Array]"){var ns;ta=$l(Ke),pa!=="left"&&(Ps=ta.map(Ho));var Xr,vo=0;if(pa==="right"){Bn-=Ps[0],Ke=[],Rr=ta.length;for(var qs=0;qs<Rr;qs++)qs===0?(Xr=Es(Bn),ns=ds(Jn)):(Xr=St(vo-Ps[qs]),ns=-Zl),Ke.push([ta[qs],Xr,ns]),vo=Ps[qs]}else if(pa==="center"){Bn-=Ps[0]/2,Ke=[],Rr=ta.length;for(var bo=0;bo<Rr;bo++)bo===0?(Xr=Es(Bn),ns=ds(Jn)):(Xr=St((vo-Ps[bo])/2),ns=-Zl),Ke.push([ta[bo],Xr,ns]),vo=Ps[bo]}else if(pa==="left"){Ke=[],Rr=ta.length;for(var Hs=0;Hs<Rr;Hs++)Ke.push(ta[Hs])}else if(pa==="justify"&&Jr.encoding==="Identity-H"){Ke=[],Rr=ta.length,Sa=Sa!==0?Sa:bc;for(var Gs=0,nr=0;nr<Rr;nr++)if(ns=nr===0?ds(Jn):-Zl,Xr=nr===0?Es(Bn):Gs,nr<Rr-1){var vl=St((Sa-Ps[nr])/(ta[nr].split(" ").length-1)),Wr=ta[nr].split(" ");Ke.push([Wr[0]+" ",Xr,ns]),Gs=0;for(var Nr=1;Nr<Wr.length;Nr++){var Ys=(Ho(Wr[Nr-1]+" "+Wr[Nr])-Ho(Wr[Nr]))*to+vl;Nr==Wr.length-1?Ke.push([Wr[Nr],Ys,0]):Ke.push([Wr[Nr]+" ",Ys,0]),Gs-=Ys}}else Ke.push([ta[nr],Xr,ns]);Ke.push(["",Gs,0])}else{if(pa!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(Ke=[],Rr=ta.length,Sa=Sa!==0?Sa:bc,nr=0;nr<Rr;nr++)ns=nr===0?ds(Jn):-Zl,Xr=nr===0?Es(Bn):0,nr<Rr-1?ws.push(Ze(St((Sa-Ps[nr])/(ta[nr].split(" ").length-1)))):ws.push(0),Ke.push([ta[nr],Xr,ns])}}var eu=typeof ui.R2L=="boolean"?ui.R2L:yi;eu===!0&&(Ke=Kl(Ke,(function(Ca,Ga,Ua){return[Ca.split("").reverse().join(""),Ga,Ua]}))),Fi={text:Ke,x:Bn,y:Jn,options:ui,mutex:{pdfEscape:os,activeFontKey:Ji,fonts:oi,activeFontSize:Un}},Ci.publish("postProcessText",Fi),Ke=Fi.text,Yr=Fi.mutex.isHex||!1;var tu=oi[Ji].encoding;tu!=="WinAnsiEncoding"&&tu!=="StandardEncoding"||(Ke=Kl(Ke,(function(Ca,Ga,Ua){return[gc(Ca),Ga,Ua]}))),ta=$l(Ke),Ke=[];for(var ps,Go,xo,Yo=0,nu=1,bl=Array.isArray(ta[0])?nu:Yo,Jo="",iu=function(Ca,Ga,Ua){var ur="";return Ua instanceof ei?(Ua=typeof ui.angle=="number"?ii(Ua,new ei(1,0,0,1,Ca,Ga)):ii(new ei(1,0,0,1,Ca,Ga),Ua),sn===Qe.ADVANCED&&(Ua=ii(new ei(1,0,0,-1,0,0),Ua)),ur=Ua.join(" ")+` Tm
`):ur=Ze(Ca)+" "+Ze(Ga)+` Td
`,ur},ms=0;ms<ta.length;ms++){switch(Jo="",bl){case nu:xo=(Yr?"<":"(")+ta[ms][0]+(Yr?">":")"),ps=parseFloat(ta[ms][1]),Go=parseFloat(ta[ms][2]);break;case Yo:xo=(Yr?"<":"(")+ta[ms]+(Yr?">":")"),ps=Es(Bn),Go=ds(Jn)}ws!==void 0&&ws[ms]!==void 0&&(Jo=ws[ms]+` Tw
`),ms===0?Ke.push(Jo+iu(ps,Go,cr)+xo):bl===Yo?Ke.push(Jo+xo):bl===nu&&Ke.push(Jo+iu(ps,Go,cr)+xo)}Ke=bl===Yo?Ke.join(` Tj
T* `):Ke.join(` Tj
`),Ke+=` Tj
`;var us=`BT
/`;return us+=Ji+" "+Un+` Tf
`,us+=Ze(Un*fs)+` TL
`,us+=pl+`
`,us+=Tr,us+=Ke,En(us+="ET"),Fe[Ji]=!0,br};var dc=Ie.__private__.clip=Ie.clip=function(Ke){return En(Ke==="evenodd"?"W*":"W"),this};Ie.clipEvenOdd=function(){return dc("evenodd")},Ie.__private__.discardPath=Ie.discardPath=function(){return En("n"),this};var Ss=Ie.__private__.isValidStyle=function(Ke){var Bn=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(Ke)!==-1&&(Bn=!0),Bn};Ie.__private__.setDefaultPathOperation=Ie.setDefaultPathOperation=function(Ke){return Ss(Ke)&&(Be=Ke),this};var Lu=Ie.__private__.getStyle=Ie.getStyle=function(Ke){var Bn=Be;switch(Ke){case"D":case"S":Bn="S";break;case"F":Bn="f";break;case"FD":case"DF":Bn="B";break;case"f":case"f*":case"B":case"B*":Bn=Ke}return Bn},Lo=Ie.close=function(){return En("h"),this};Ie.stroke=function(){return En("S"),this},Ie.fill=function(Ke){return ls("f",Ke),this},Ie.fillEvenOdd=function(Ke){return ls("f*",Ke),this},Ie.fillStroke=function(Ke){return ls("B",Ke),this},Ie.fillStrokeEvenOdd=function(Ke){return ls("B*",Ke),this};var ls=function(Ke,Bn){_typeof(Bn)==="object"?eo(Bn,Ke):En(Ke)},cl=function(Ke){Ke===null||sn===Qe.ADVANCED&&Ke===void 0||(Ke=Lu(Ke),En(Ke))};function hl(Ke,Bn,Jn,ui,Ei){var Fi=new M(Bn||this.boundingBox,Jn||this.xStep,ui||this.yStep,this.gState,Ei||this.matrix);Fi.stream=this.stream;var ta=Ke+"$$"+this.cloneIndex+++"$$";return Ti(ta,Fi),Fi}var eo=function(Ke,Bn){var Jn=wi[Ke.key],ui=Ui[Jn];if(ui instanceof B)En("q"),En(Iu(Bn)),ui.gState&&Ie.setGState(ui.gState),En(Ke.matrix.toString()+" cm"),En("/"+Jn+" sh"),En("Q");else if(ui instanceof M){var Ei=new ei(1,0,0,-1,0,zo());Ke.matrix&&(Ei=Ei.multiply(Ke.matrix||gi),Jn=hl.call(ui,Ke.key,Ke.boundingBox,Ke.xStep,Ke.yStep,Ei).id),En("q"),En("/Pattern cs"),En("/"+Jn+" scn"),ui.gState&&Ie.setGState(ui.gState),En(Bn),En("Q")}},Iu=function(Ke){switch(Ke){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Io=Ie.moveTo=function(Ke,Bn){return En(Ze(St(Ke))+" "+Ze(_n(Bn))+" m"),this},Do=Ie.lineTo=function(Ke,Bn){return En(Ze(St(Ke))+" "+Ze(_n(Bn))+" l"),this},zs=Ie.curveTo=function(Ke,Bn,Jn,ui,Ei,Fi){return En([Ze(St(Ke)),Ze(_n(Bn)),Ze(St(Jn)),Ze(_n(ui)),Ze(St(Ei)),Ze(_n(Fi)),"c"].join(" ")),this};Ie.__private__.line=Ie.line=function(Ke,Bn,Jn,ui,Ei){if(isNaN(Ke)||isNaN(Bn)||isNaN(Jn)||isNaN(ui)||!Ss(Ei))throw new Error("Invalid arguments passed to jsPDF.line");return sn===Qe.COMPAT?this.lines([[Jn-Ke,ui-Bn]],Ke,Bn,[1,1],Ei||"S"):this.lines([[Jn-Ke,ui-Bn]],Ke,Bn,[1,1]).stroke()},Ie.__private__.lines=Ie.lines=function(Ke,Bn,Jn,ui,Ei,Fi){var ta,ua,pa,Aa,Sa,Va,lr,cr,br,Fr,Tr,Yr;if(typeof Ke=="number"&&(Yr=Jn,Jn=Bn,Bn=Ke,Ke=Yr),ui=ui||[1,1],Fi=Fi||!1,isNaN(Bn)||isNaN(Jn)||!Array.isArray(Ke)||!Array.isArray(ui)||!Ss(Ei)||typeof Fi!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Io(Bn,Jn),ta=ui[0],ua=ui[1],Aa=Ke.length,Fr=Bn,Tr=Jn,pa=0;pa<Aa;pa++)(Sa=Ke[pa]).length===2?(Fr=Sa[0]*ta+Fr,Tr=Sa[1]*ua+Tr,Do(Fr,Tr)):(Va=Sa[0]*ta+Fr,lr=Sa[1]*ua+Tr,cr=Sa[2]*ta+Fr,br=Sa[3]*ua+Tr,Fr=Sa[4]*ta+Fr,Tr=Sa[5]*ua+Tr,zs(Va,lr,cr,br,Fr,Tr));return Fi&&Lo(),cl(Ei),this},Ie.path=function(Ke){for(var Bn=0;Bn<Ke.length;Bn++){var Jn=Ke[Bn],ui=Jn.c;switch(Jn.op){case"m":Io(ui[0],ui[1]);break;case"l":Do(ui[0],ui[1]);break;case"c":zs.apply(this,ui);break;case"h":Lo()}}return this},Ie.__private__.rect=Ie.rect=function(Ke,Bn,Jn,ui,Ei){if(isNaN(Ke)||isNaN(Bn)||isNaN(Jn)||isNaN(ui)||!Ss(Ei))throw new Error("Invalid arguments passed to jsPDF.rect");return sn===Qe.COMPAT&&(ui=-ui),En([Ze(St(Ke)),Ze(_n(Bn)),Ze(St(Jn)),Ze(St(ui)),"re"].join(" ")),cl(Ei),this},Ie.__private__.triangle=Ie.triangle=function(Ke,Bn,Jn,ui,Ei,Fi,ta){if(isNaN(Ke)||isNaN(Bn)||isNaN(Jn)||isNaN(ui)||isNaN(Ei)||isNaN(Fi)||!Ss(ta))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Jn-Ke,ui-Bn],[Ei-Jn,Fi-ui],[Ke-Ei,Bn-Fi]],Ke,Bn,[1,1],ta,!0),this},Ie.__private__.roundedRect=Ie.roundedRect=function(Ke,Bn,Jn,ui,Ei,Fi,ta){if(isNaN(Ke)||isNaN(Bn)||isNaN(Jn)||isNaN(ui)||isNaN(Ei)||isNaN(Fi)||!Ss(ta))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ua=4/3*(Math.SQRT2-1);return Ei=Math.min(Ei,.5*Jn),Fi=Math.min(Fi,.5*ui),this.lines([[Jn-2*Ei,0],[Ei*ua,0,Ei,Fi-Fi*ua,Ei,Fi],[0,ui-2*Fi],[0,Fi*ua,-Ei*ua,Fi,-Ei,Fi],[2*Ei-Jn,0],[-Ei*ua,0,-Ei,-Fi*ua,-Ei,-Fi],[0,2*Fi-ui],[0,-Fi*ua,Ei*ua,-Fi,Ei,-Fi]],Ke+Ei,Bn,[1,1],ta,!0),this},Ie.__private__.ellipse=Ie.ellipse=function(Ke,Bn,Jn,ui,Ei){if(isNaN(Ke)||isNaN(Bn)||isNaN(Jn)||isNaN(ui)||!Ss(Ei))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Fi=4/3*(Math.SQRT2-1)*Jn,ta=4/3*(Math.SQRT2-1)*ui;return Io(Ke+Jn,Bn),zs(Ke+Jn,Bn-ta,Ke+Fi,Bn-ui,Ke,Bn-ui),zs(Ke-Fi,Bn-ui,Ke-Jn,Bn-ta,Ke-Jn,Bn),zs(Ke-Jn,Bn+ta,Ke-Fi,Bn+ui,Ke,Bn+ui),zs(Ke+Fi,Bn+ui,Ke+Jn,Bn+ta,Ke+Jn,Bn),cl(Ei),this},Ie.__private__.circle=Ie.circle=function(Ke,Bn,Jn,ui){if(isNaN(Ke)||isNaN(Bn)||isNaN(Jn)||!Ss(ui))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(Ke,Bn,Jn,Jn,ui)},Ie.setFont=function(Ke,Bn,Jn){return Jn&&(Bn=an(Bn,Jn)),Ji=ku(Ke,Bn,{disableWarning:!1}),this};var Gl=Ie.__private__.getFont=Ie.getFont=function(){return oi[ku.apply(Ie,arguments)]};Ie.__private__.getFontList=Ie.getFontList=function(){var Ke,Bn,Jn={};for(Ke in Kn)if(Kn.hasOwnProperty(Ke))for(Bn in Jn[Ke]=[],Kn[Ke])Kn[Ke].hasOwnProperty(Bn)&&Jn[Ke].push(Bn);return Jn},Ie.addFont=function(Ke,Bn,Jn,ui,Ei){var Fi=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Fi.indexOf(arguments[3])!==-1?Ei=arguments[3]:arguments[3]&&Fi.indexOf(arguments[3])==-1&&(Jn=an(Jn,ui)),Ei=Ei||"Identity-H",Nu.call(this,Ke,Bn,Jn,Ei)};var Fo,Br=t.lineWidth||.200025,As=Ie.__private__.getLineWidth=Ie.getLineWidth=function(){return Br},dl=Ie.__private__.setLineWidth=Ie.setLineWidth=function(Ke){return Br=Ke,En(Ze(St(Ke))+" w"),this};Ie.__private__.setLineDash=E.API.setLineDash=E.API.setLineDashPattern=function(Ke,Bn){if(Ke=Ke||[],Bn=Bn||0,isNaN(Bn)||!Array.isArray(Ke))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return Ke=Ke.map((function(Jn){return Ze(St(Jn))})).join(" "),Bn=Ze(St(Bn)),En("["+Ke+"] "+Bn+" d"),this};var Oo=Ie.__private__.getLineHeight=Ie.getLineHeight=function(){return Un*Fo};Ie.__private__.getLineHeight=Ie.getLineHeight=function(){return Un*Fo};var fc=Ie.__private__.setLineHeightFactor=Ie.setLineHeightFactor=function(Ke){return typeof(Ke=Ke||1.15)=="number"&&(Fo=Ke),this},Yl=Ie.__private__.getLineHeightFactor=Ie.getLineHeightFactor=function(){return Fo};fc(t.lineHeight);var Es=Ie.__private__.getHorizontalCoordinate=function(Ke){return St(Ke)},ds=Ie.__private__.getVerticalCoordinate=function(Ke){return sn===Qe.ADVANCED?Ke:Si[Oe].mediaBox.topRightY-Si[Oe].mediaBox.bottomLeftY-St(Ke)},Jl=Ie.__private__.getHorizontalCoordinateString=Ie.getHorizontalCoordinateString=function(Ke){return Ze(Es(Ke))},mo=Ie.__private__.getVerticalCoordinateString=Ie.getVerticalCoordinateString=function(Ke){return Ze(ds(Ke))},js=t.strokeColor||"0 G";Ie.__private__.getStrokeColor=Ie.getDrawColor=function(){return aa(js)},Ie.__private__.setStrokeColor=Ie.setDrawColor=function(Ke,Bn,Jn,ui){return js=ca({ch1:Ke,ch2:Bn,ch3:Jn,ch4:ui,pdfColorType:"draw",precision:2}),En(js),this};var Du=t.fillColor||"0 g";Ie.__private__.getFillColor=Ie.getFillColor=function(){return aa(Du)},Ie.__private__.setFillColor=Ie.setFillColor=function(Ke,Bn,Jn,ui){return Du=ca({ch1:Ke,ch2:Bn,ch3:Jn,ch4:ui,pdfColorType:"fill",precision:2}),En(Du),this};var pl=t.textColor||"0 g",Fu=Ie.__private__.getTextColor=Ie.getTextColor=function(){return aa(pl)};Ie.__private__.setTextColor=Ie.setTextColor=function(Ke,Bn,Jn,ui){return pl=ca({ch1:Ke,ch2:Bn,ch3:Jn,ch4:ui,pdfColorType:"text",precision:3}),this};var Xl=t.charSpace,ah=Ie.__private__.getCharSpace=Ie.getCharSpace=function(){return parseFloat(Xl||0)};Ie.__private__.setCharSpace=Ie.setCharSpace=function(Ke){if(isNaN(Ke))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Xl=Ke,this};var Ou=0;Ie.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},Ie.__private__.setLineCap=Ie.setLineCap=function(Ke){var Bn=Ie.CapJoinStyles[Ke];if(Bn===void 0)throw new Error("Line cap style of '"+Ke+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ou=Bn,En(Bn+" J"),this};var Uu=0;Ie.__private__.setLineJoin=Ie.setLineJoin=function(Ke){var Bn=Ie.CapJoinStyles[Ke];if(Bn===void 0)throw new Error("Line join style of '"+Ke+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Uu=Bn,En(Bn+" j"),this},Ie.__private__.setLineMiterLimit=Ie.__private__.setMiterLimit=Ie.setLineMiterLimit=Ie.setMiterLimit=function(Ke){if(Ke=Ke||0,isNaN(Ke))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return En(Ze(St(Ke))+" M"),this},Ie.GState=j,Ie.setGState=function(Ke){(Ke=typeof Ke=="string"?Ai[Rn[Ke]]:pc(null,Ke)).equals(Zn)||(En("/"+Ke.id+" gs"),Zn=Ke)};var pc=function(Ke,Bn){if(!Ke||!Rn[Ke]){var Jn=!1;for(var ui in Ai)if(Ai.hasOwnProperty(ui)&&Ai[ui].equals(Bn)){Jn=!0;break}if(Jn)Bn=Ai[ui];else{var Ei="GS"+(Object.keys(Ai).length+1).toString(10);Ai[Ei]=Bn,Bn.id=Ei}return Ke&&(Rn[Ke]=Bn.id),Ci.publish("addGState",Bn),Bn}};Ie.addGState=function(Ke,Bn){return pc(Ke,Bn),this},Ie.saveGraphicsState=function(){return En("q"),di.push({key:Ji,size:Un,color:pl}),this},Ie.restoreGraphicsState=function(){En("Q");var Ke=di.pop();return Ji=Ke.key,Un=Ke.size,pl=Ke.color,Zn=null,this},Ie.setCurrentTransformationMatrix=function(Ke){return En(Ke.toString()+" cm"),this},Ie.comment=function(Ke){return En("#"+Ke),this};var ml=function(Ke,Bn){var Jn=Ke||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Jn},set:function(Fi){isNaN(Fi)||(Jn=parseFloat(Fi))}});var ui=Bn||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ui},set:function(Fi){isNaN(Fi)||(ui=parseFloat(Fi))}});var Ei="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ei},set:function(Fi){Ei=Fi.toString()}}),this},zu=function(Ke,Bn,Jn,ui){ml.call(this,Ke,Bn),this.type="rect";var Ei=Jn||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ei},set:function(ta){isNaN(ta)||(Ei=parseFloat(ta))}});var Fi=ui||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Fi},set:function(ta){isNaN(ta)||(Fi=parseFloat(ta))}}),this},ju=function(){this.page=Xn,this.currentPage=Oe,this.pages=jn.slice(0),this.pagesContext=Si.slice(0),this.x=na,this.y=ea,this.matrix=Ki,this.width=gl(Oe),this.height=zo(Oe),this.outputDestination=ti,this.id="",this.objectNumber=-1};ju.prototype.restore=function(){Xn=this.page,Oe=this.currentPage,Si=this.pagesContext,jn=this.pages,na=this.x,ea=this.y,Ki=this.matrix,qu(Oe,this.width),Wl(Oe,this.height),ti=this.outputDestination};var mc=function(Ke,Bn,Jn,ui,Ei){Gn.push(new ju),Xn=Oe=0,jn=[],na=Ke,ea=Bn,Ki=Ei,Gr([Jn,ui])},rh=function(Ke){if(Nn[Ke])Gn.pop().restore();else{var Bn=new ju,Jn="Xo"+(Object.keys(Fn).length+1).toString(10);Bn.id=Jn,Nn[Ke]=Jn,Fn[Jn]=Bn,Ci.publish("addFormObject",Bn),Gn.pop().restore()}};for(var Uo in Ie.beginFormObject=function(Ke,Bn,Jn,ui,Ei){return mc(Ke,Bn,Jn,ui,Ei),this},Ie.endFormObject=function(Ke){return rh(Ke),this},Ie.doFormObject=function(Ke,Bn){var Jn=Fn[Nn[Ke]];return En("q"),En(Bn.toString()+" cm"),En("/"+Jn.id+" Do"),En("Q"),this},Ie.getFormObject=function(Ke){var Bn=Fn[Nn[Ke]];return{x:Bn.x,y:Bn.y,width:Bn.width,height:Bn.height,matrix:Bn.matrix}},Ie.save=function(Ke,Bn){return Ke=Ke||"generated.pdf",(Bn=Bn||{}).returnPromise=Bn.returnPromise||!1,Bn.returnPromise===!1?(l(jl(Us()),Ke),typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),this):new Promise((function(Jn,ui){try{var Ei=l(jl(Us()),Ke);typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),Jn(Ei)}catch(Fi){ui(Fi.message)}}))},E.API)E.API.hasOwnProperty(Uo)&&(Uo==="events"&&E.API.events.length?(function(Ke,Bn){var Jn,ui,Ei;for(Ei=Bn.length-1;Ei!==-1;Ei--)Jn=Bn[Ei][0],ui=Bn[Ei][1],Ke.subscribe.apply(Ke,[Jn].concat(typeof ui=="function"?[ui]:ui))})(Ci,E.API.events):Ie[Uo]=E.API[Uo]);var gl=Ie.getPageWidth=function(Ke){return(Si[Ke=Ke||Oe].mediaBox.topRightX-Si[Ke].mediaBox.bottomLeftX)/Pi},qu=Ie.setPageWidth=function(Ke,Bn){Si[Ke].mediaBox.topRightX=Bn*Pi+Si[Ke].mediaBox.bottomLeftX},zo=Ie.getPageHeight=function(Ke){return(Si[Ke=Ke||Oe].mediaBox.topRightY-Si[Ke].mediaBox.bottomLeftY)/Pi},Wl=Ie.setPageHeight=function(Ke,Bn){Si[Ke].mediaBox.topRightY=Bn*Pi+Si[Ke].mediaBox.bottomLeftY};return Ie.internal={pdfEscape:os,getStyle:Lu,getFont:Gl,getFontSize:ni,getCharSpace:ah,getTextColor:Fu,getLineHeight:Oo,getLineHeightFactor:Yl,getLineWidth:As,write:Qn,getHorizontalCoordinate:Es,getVerticalCoordinate:ds,getCoordinateString:Jl,getVerticalCoordinateString:mo,collections:{},newObject:Wi,newAdditionalObject:la,newObjectDeferred:qi,newObjectDeferredBegin:ji,getFilters:ma,putStream:xa,events:Ci,scaleFactor:Pi,pageSize:{getWidth:function(){return gl(Oe)},setWidth:function(Ke){qu(Oe,Ke)},getHeight:function(){return zo(Oe)},setHeight:function(Ke){Wl(Oe,Ke)}},encryptionOptions:Me,encryption:or,getEncryptor:Vu,output:ql,getNumberOfPages:ko,pages:jn,out:En,f2:An,f3:Je,getPageInfo:Hl,getPageInfoByObjId:ya,getCurrentPageInfo:Vo,getPDFVersion:Ye,Point:ml,Rectangle:zu,Matrix:ei,hasHotfix:ul},Object.defineProperty(Ie.internal.pageSize,"width",{get:function(){return gl(Oe)},set:function(Ke){qu(Oe,Ke)},enumerable:!0,configurable:!0}),Object.defineProperty(Ie.internal.pageSize,"height",{get:function(){return zo(Oe)},set:function(Ke){Wl(Oe,Ke)},enumerable:!0,configurable:!0}),Mu.call(Ie,Mn),Ji="F1",Ul(Se,r),Ci.publish("initialized"),Ie}I.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},I.prototype.toHexString=function(t){return t.split("").map((function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)})).join("")},I.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},I.prototype.processOwnerPassword=function(t,e){return P(x(e).substr(0,5),t)},I.prototype.encryptor=function(t,e){var r=x(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(xe){return P(r,xe)}},j.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||_typeof(t)!==_typeof(this))return!1;var xe=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;xe++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&xe--;return xe===0},E.API={events:[]},E.version="2.5.2";var q=E.API,D=1,R=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},T=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},U=function(t){return t.toFixed(2)},z=function(t){return t.toFixed(5)};q.__acroform__={};var H=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},W=function(t){return t*D},V=function(t){var e=new ut,r=At.internal.getHeight(t)||0,xe=At.internal.getWidth(t)||0;return e.BBox=[0,0,Number(U(xe)),Number(U(r))],e},G=q.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},Y=q.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},J=q.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},X$1=q.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return J(t,e-1)},K=q.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return G(t,e-1)},Z=q.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Y(t,e-1)},$=q.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,xe=e.internal.getVerticalCoordinate,Se=t[0],Ee=t[1],Pe=t[2],Ce=t[3],Re={};return Re.lowerLeft_X=r(Se)||0,Re.lowerLeft_Y=xe(Ee+Ce)||0,Re.upperRight_X=r(Se+Pe)||0,Re.upperRight_Y=xe(Ee)||0,[Number(U(Re.lowerLeft_X)),Number(U(Re.lowerLeft_Y)),Number(U(Re.upperRight_X)),Number(U(Re.upperRight_Y))]},Q=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,xe=tt(t,r),Se=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+Se+" "+U(xe.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(xe.text),e.push("ET"),e.push("Q"),e.push("EMC");var Ee=V(t);return Ee.scope=t.scope,Ee.stream=e.join(`
`),Ee}},tt=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,xe={text:"",fontSize:""},Se=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");Se=t.multiline?Se.map((function(Je){return Je.split(`
`)})):Se.map((function(Je){return[Je]}));var Ee=r,Pe=At.internal.getHeight(t)||0;Pe=Pe<0?-Pe:Pe;var Ce=At.internal.getWidth(t)||0;Ce=Ce<0?-Ce:Ce;var Re=function(Je,St,hn){if(Je+1<Se.length){var _n=St+" "+Se[Je+1][0];return et(_n,t,hn).width<=Ce-4}return!1};Ee++;e:for(;Ee>0;){e="",Ee--;var Be,Me,Ve=et("3",t,Ee).height,Fe=t.multiline?Pe-Ee:(Pe-Ve)/2,Ie=Fe+=2,qe=0,Ye=0,Xe=0;if(Ee<=0){e=`(...) Tj
`,e+="% Width of Text: "+et(e,t,Ee=12).width+", FieldWidth:"+Ce+`
`;break}for(var je="",Qe=0,sn=0;sn<Se.length;sn++)if(Se.hasOwnProperty(sn)){var cn=!1;if(Se[sn].length!==1&&Xe!==Se[sn].length-1){if((Ve+2)*(Qe+2)+2>Pe)continue e;je+=Se[sn][Xe],cn=!0,Ye=sn,sn--}else{je=(je+=Se[sn][Xe]+" ").substr(je.length-1)==" "?je.substr(0,je.length-1):je;var nn=parseInt(sn),an=Re(nn,je,Ee),Ze=sn>=Se.length-1;if(an&&!Ze){je+=" ",Xe=0;continue}if(an||Ze){if(Ze)Ye=nn;else if(t.multiline&&(Ve+2)*(Qe+2)+2>Pe)continue e}else{if(!t.multiline||(Ve+2)*(Qe+2)+2>Pe)continue e;Ye=nn}}for(var tn="",We=qe;We<=Ye;We++){var An=Se[We];if(t.multiline){if(We===Ye){tn+=An[Xe]+" ",Xe=(Xe+1)%An.length;continue}if(We===qe){tn+=An[An.length-1]+" ";continue}}tn+=An[0]+" "}switch(tn=tn.substr(tn.length-1)==" "?tn.substr(0,tn.length-1):tn,Me=et(tn,t,Ee).width,t.textAlign){case"right":Be=Ce-Me-2;break;case"center":Be=(Ce-Me)/2;break;case"left":default:Be=2}e+=U(Be)+" "+U(Ie)+` Td
`,e+="("+R(tn)+`) Tj
`,e+=-U(Be)+` 0 Td
`,Ie=-(Ee+2),Me=0,qe=cn?Ye:Ye+1,Qe++,je=""}break}return xe.text=e,xe.fontSize=Ee,xe},et=function(t,e,r){var xe=e.scope.internal.getFont(e.fontName,e.fontStyle),Se=e.scope.getStringUnitWidth(t,{font:xe,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:xe,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:Se}},rt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},nt=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find((function(xe){return xe.type===r.type&&xe.object===r.object}))===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},it=function(t,e){for(var r in t)if(t.hasOwnProperty(r)){var xe=r,Se=t[r];e.internal.newObjectDeferredBegin(Se.objId,!0),_typeof(Se)==="object"&&typeof Se.putStream=="function"&&Se.putStream(),delete t[xe]}},at=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(lt.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(rt)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");D=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new ht,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",(function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)})),t.internal.events.subscribe("buildDocument",(function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var xe=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var Se in xe)if(xe.hasOwnProperty(Se)){var Ee=xe[Se];Ee.objId=void 0,Ee.hasAnnotation&&nt(Ee,r)}})(t)})),t.internal.events.subscribe("putCatalog",(function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)})),t.internal.events.subscribe("postPutPages",(function(r){(function(xe,Se){var Ee=!xe;for(var Pe in xe||(Se.internal.newObjectDeferredBegin(Se.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),Se.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),xe=xe||Se.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(xe.hasOwnProperty(Pe)){var Ce=xe[Pe],Re=[],Be=Ce.Rect;if(Ce.Rect&&(Ce.Rect=$(Ce.Rect,Se)),Se.internal.newObjectDeferredBegin(Ce.objId,!0),Ce.DA=At.createDefaultAppearanceStream(Ce),_typeof(Ce)==="object"&&typeof Ce.getKeyValueListForStream=="function"&&(Re=Ce.getKeyValueListForStream()),Ce.Rect=Be,Ce.hasAppearanceStream&&!Ce.appearanceStreamContent){var Me=Q(Ce);Re.push({key:"AP",value:"<</N "+Me+">>"}),Se.internal.acroformPlugin.xForms.push(Me)}if(Ce.appearanceStreamContent){var Ve="";for(var Fe in Ce.appearanceStreamContent)if(Ce.appearanceStreamContent.hasOwnProperty(Fe)){var Ie=Ce.appearanceStreamContent[Fe];if(Ve+="/"+Fe+" ",Ve+="<<",Object.keys(Ie).length>=1||Array.isArray(Ie)){for(var Pe in Ie)if(Ie.hasOwnProperty(Pe)){var qe=Ie[Pe];typeof qe=="function"&&(qe=qe.call(Se,Ce)),Ve+="/"+Pe+" "+qe+" ",Se.internal.acroformPlugin.xForms.indexOf(qe)>=0||Se.internal.acroformPlugin.xForms.push(qe)}}else typeof(qe=Ie)=="function"&&(qe=qe.call(Se,Ce)),Ve+="/"+Pe+" "+qe,Se.internal.acroformPlugin.xForms.indexOf(qe)>=0||Se.internal.acroformPlugin.xForms.push(qe);Ve+=">>"}Re.push({key:"AP",value:`<<
`+Ve+">>"})}Se.internal.putStream({additionalKeyValues:Re,objectId:Ce.objId}),Se.internal.out("endobj")}Ee&&it(Se.internal.acroformPlugin.xForms,Se)})(r,t)})),t.internal.acroformPlugin.isInitialized=!0}},ot=q.__acroform__.arrayToPdfArray=function(t,e,r){var xe=function(Pe){return Pe};if(Array.isArray(t)){for(var Se="[",Ee=0;Ee<t.length;Ee++)switch(Ee!==0&&(Se+=" "),_typeof(t[Ee])){case"boolean":case"number":case"object":Se+=t[Ee].toString();break;case"string":t[Ee].substr(0,1)!=="/"?(e!==void 0&&r&&(xe=r.internal.getEncryptor(e)),Se+="("+R(xe(t[Ee].toString()))+")"):Se+=t[Ee].toString()}return Se+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},st=function(t,e,r){var xe=function(Se){return Se};return e!==void 0&&r&&(xe=r.internal.getEncryptor(e)),(t=t||"").toString(),t="("+R(xe(t))+")"},ct=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ct.prototype.toString=function(){return this.objId+" 0 R"},ct.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},ct.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter((function(Ee){return Ee!="content"&&Ee!="appearanceStreamContent"&&Ee!="scope"&&Ee!="objId"&&Ee.substring(0,1)!="_"}));for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var xe=e[r],Se=this[xe];Se&&(Array.isArray(Se)?t.push({key:xe,value:ot(Se,this.objId,this.scope)}):Se instanceof ct?(Se.scope=this.scope,t.push({key:xe,value:Se.objId+" 0 R"})):typeof Se!="function"&&t.push({key:xe,value:Se}))}return t};var ut=function(){ct.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};H(ut,ct);var ht=function(){ct.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(xe){return xe};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+R(r(t))+")"}},set:function(r){t=r}})};H(ht,ct);var lt=function t(){ct.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(je){if(isNaN(je))throw new Error('Invalid value "'+je+'" for attribute F supplied.');e=je}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!X$1(e,3)},set:function(je){je?this.F=K(e,3):this.F=Z(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(je){if(isNaN(je))throw new Error('Invalid value "'+je+'" for attribute Ff supplied.');r=je}});var xe=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(xe.length!==0)return xe},set:function(je){xe=je!==void 0?je:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!xe||isNaN(xe[0])?0:xe[0]},set:function(je){xe[0]=je}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!xe||isNaN(xe[1])?0:xe[1]},set:function(je){xe[1]=je}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!xe||isNaN(xe[2])?0:xe[2]},set:function(je){xe[2]=je}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!xe||isNaN(xe[3])?0:xe[3]},set:function(je){xe[3]=je}});var Se="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return Se},set:function(je){switch(je){case"/Btn":case"/Tx":case"/Ch":case"/Sig":Se=je;break;default:throw new Error('Invalid value "'+je+'" for attribute FT supplied.')}}});var Ee=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!Ee||Ee.length<1){if(this instanceof yt)return;Ee="FieldObject"+t.FieldNum++}var je=function(Qe){return Qe};return this.scope&&(je=this.scope.internal.getEncryptor(this.objId)),"("+R(je(Ee))+")"},set:function(je){Ee=je.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return Ee},set:function(je){Ee=je}});var Pe="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return Pe},set:function(je){Pe=je}});var Ce="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return Ce},set:function(je){Ce=je}});var Re=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return Re},set:function(je){Re=je}});var Be=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return Be===void 0?50/D:Be},set:function(je){Be=je}});var Me="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return Me},set:function(je){Me=je}});var Ve="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!Ve||this instanceof yt||this instanceof Nt))return st(Ve,this.objId,this.scope)},set:function(je){je=je.toString(),Ve=je}});var Fe=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(Fe)return this instanceof mt?Fe:st(Fe,this.objId,this.scope)},set:function(je){je=je.toString(),Fe=this instanceof mt?je:je.substr(0,1)==="("?T(je.substr(1,je.length-2)):T(je)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(Fe.substr(1,Fe.length-1)):Fe},set:function(je){je=je.toString(),Fe=this instanceof mt?"/"+je:je}});var Ie=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(Ie)return Ie},set:function(je){this.V=je}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(Ie)return this instanceof mt?Ie:st(Ie,this.objId,this.scope)},set:function(je){je=je.toString(),Ie=this instanceof mt?je:je.substr(0,1)==="("?T(je.substr(1,je.length-2)):T(je)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(Ie.substr(1,Ie.length-1)):Ie},set:function(je){je=je.toString(),Ie=this instanceof mt?"/"+je:je}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var qe,Ye=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return Ye},set:function(je){je=!!je,Ye=je}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(qe)return qe},set:function(je){qe=je}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,1)},set:function(je){je?this.Ff=K(this.Ff,1):this.Ff=Z(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,2)},set:function(je){je?this.Ff=K(this.Ff,2):this.Ff=Z(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,3)},set:function(je){je?this.Ff=K(this.Ff,3):this.Ff=Z(this.Ff,3)}});var Xe=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(Xe!==null)return Xe},set:function(je){if([0,1,2].indexOf(je)===-1)throw new Error('Invalid value "'+je+'" for attribute Q supplied.');Xe=je}}),Object.defineProperty(this,"textAlign",{get:function(){var je;switch(Xe){case 0:default:je="left";break;case 1:je="center";break;case 2:je="right"}return je},configurable:!0,enumerable:!0,set:function(je){switch(je){case"right":case 2:Xe=2;break;case"center":case 1:Xe=1;break;case"left":case 0:default:Xe=0}}})};H(lt,ct);var ft=function(){lt.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ot(e,this.objId,this.scope)},set:function(r){var xe,Se;Se=[],typeof(xe=r)=="string"&&(Se=(function(Ee,Pe,Ce){Ce||(Ce=1);for(var Re,Be=[];Re=Pe.exec(Ee);)Be.push(Re[Ce]);return Be})(xe,/\((.*?)\)/g)),e=Se}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,xe){for(xe=xe||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),xe!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,18)},set:function(r){r?this.Ff=K(this.Ff,18):this.Ff=Z(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=K(this.Ff,19):this.Ff=Z(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,20)},set:function(r){r?(this.Ff=K(this.Ff,20),e.sort()):this.Ff=Z(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,22)},set:function(r){r?this.Ff=K(this.Ff,22):this.Ff=Z(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,23)},set:function(r){r?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,27)},set:function(r){r?this.Ff=K(this.Ff,27):this.Ff=Z(this.Ff,27)}}),this.hasAppearanceStream=!1};H(ft,lt);var dt=function(){ft.call(this),this.fontName="helvetica",this.combo=!1};H(dt,ft);var pt=function(){dt.call(this),this.combo=!0};H(pt,dt);var gt=function(){pt.call(this),this.edit=!0};H(gt,pt);var mt=function(){lt.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,15)},set:function(r){r?this.Ff=K(this.Ff,15):this.Ff=Z(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,16)},set:function(r){r?this.Ff=K(this.Ff,16):this.Ff=Z(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,17)},set:function(r){r?this.Ff=K(this.Ff,17):this.Ff=Z(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,26)},set:function(r){r?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(Ee){return Ee};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var xe,Se=[];for(xe in Se.push("<<"),e)Se.push("/"+xe+" ("+R(r(e[xe]))+")");return Se.push(">>"),Se.join(`
`)}},set:function(r){_typeof(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};H(mt,lt);var vt=function(){mt.call(this),this.pushButton=!0};H(vt,mt);var bt=function(){mt.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};H(bt,mt);var yt=function(){var t,e;lt.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(Se){t=Se}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(Se){e=Se}});var r,xe={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var Se=function(Ce){return Ce};this.scope&&(Se=this.scope.internal.getEncryptor(this.objId));var Ee,Pe=[];for(Ee in Pe.push("<<"),xe)Pe.push("/"+Ee+" ("+R(Se(xe[Ee]))+")");return Pe.push(">>"),Pe.join(`
`)},set:function(Se){_typeof(Se)==="object"&&(xe=Se)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return xe.CA||""},set:function(Se){typeof Se=="string"&&(xe.CA=Se)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(Se){r=Se}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(Se){r="/"+Se}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=At.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};H(yt,lt),bt.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},bt.prototype.createOption=function(t){var e=new yt;return e.Parent=this,e.optionName=t,this.Kids.push(e),xt.call(this.scope,e),e};var wt=function(){mt.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=At.CheckBox.createAppearanceStream()};H(wt,mt);var Nt=function(){lt.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,13)},set:function(e){e?this.Ff=K(this.Ff,13):this.Ff=Z(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,21)},set:function(e){e?this.Ff=K(this.Ff,21):this.Ff=Z(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,23)},set:function(e){e?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,24)},set:function(e){e?this.Ff=K(this.Ff,24):this.Ff=Z(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,25)},set:function(e){e?this.Ff=K(this.Ff,25):this.Ff=Z(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,26)},set:function(e){e?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};H(Nt,lt);var Lt=function(){Nt.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,14)},set:function(t){t?this.Ff=K(this.Ff,14):this.Ff=Z(this.Ff,14)}}),this.password=!0};H(Lt,Nt);var At={CheckBox:{createAppearanceStream:function(){return{N:{On:At.CheckBox.YesNormal},D:{On:At.CheckBox.YesPushDown,Off:At.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=V(t);e.scope=t.scope;var r=[],xe=t.scope.internal.getFont(t.fontName,t.fontStyle).id,Se=t.scope.__private__.encodeColorString(t.color),Ee=tt(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+U(At.internal.getWidth(t))+" "+U(At.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+xe+" "+U(Ee.fontSize)+" Tf "+Se),r.push("BT"),r.push(Ee.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=V(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,xe=t.scope.__private__.encodeColorString(t.color),Se=[],Ee=At.internal.getHeight(t),Pe=At.internal.getWidth(t),Ce=tt(t,t.caption);return Se.push("1 g"),Se.push("0 0 "+U(Pe)+" "+U(Ee)+" re"),Se.push("f"),Se.push("q"),Se.push("0 0 1 rg"),Se.push("0 0 "+U(Pe-1)+" "+U(Ee-1)+" re"),Se.push("W"),Se.push("n"),Se.push("0 g"),Se.push("BT"),Se.push("/"+r+" "+U(Ce.fontSize)+" Tf "+xe),Se.push(Ce.text),Se.push("ET"),Se.push("Q"),e.stream=Se.join(`
`),e},OffPushDown:function(t){var e=V(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+U(At.internal.getWidth(t))+" "+U(At.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:At.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=At.RadioButton.Circle.YesNormal,e.D[t]=At.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=V(t);e.scope=t.scope;var r=[],xe=At.internal.getWidth(t)<=At.internal.getHeight(t)?At.internal.getWidth(t)/4:At.internal.getHeight(t)/4;xe=Number((.9*xe).toFixed(5));var Se=At.internal.Bezier_C,Ee=Number((xe*Se).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+z(At.internal.getWidth(t)/2)+" "+z(At.internal.getHeight(t)/2)+" cm"),r.push(xe+" 0 m"),r.push(xe+" "+Ee+" "+Ee+" "+xe+" 0 "+xe+" c"),r.push("-"+Ee+" "+xe+" -"+xe+" "+Ee+" -"+xe+" 0 c"),r.push("-"+xe+" -"+Ee+" -"+Ee+" -"+xe+" 0 -"+xe+" c"),r.push(Ee+" -"+xe+" "+xe+" -"+Ee+" "+xe+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=V(t);e.scope=t.scope;var r=[],xe=At.internal.getWidth(t)<=At.internal.getHeight(t)?At.internal.getWidth(t)/4:At.internal.getHeight(t)/4;xe=Number((.9*xe).toFixed(5));var Se=Number((2*xe).toFixed(5)),Ee=Number((Se*At.internal.Bezier_C).toFixed(5)),Pe=Number((xe*At.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+z(At.internal.getWidth(t)/2)+" "+z(At.internal.getHeight(t)/2)+" cm"),r.push(Se+" 0 m"),r.push(Se+" "+Ee+" "+Ee+" "+Se+" 0 "+Se+" c"),r.push("-"+Ee+" "+Se+" -"+Se+" "+Ee+" -"+Se+" 0 c"),r.push("-"+Se+" -"+Ee+" -"+Ee+" -"+Se+" 0 -"+Se+" c"),r.push(Ee+" -"+Se+" "+Se+" -"+Ee+" "+Se+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+z(At.internal.getWidth(t)/2)+" "+z(At.internal.getHeight(t)/2)+" cm"),r.push(xe+" 0 m"),r.push(xe+" "+Pe+" "+Pe+" "+xe+" 0 "+xe+" c"),r.push("-"+Pe+" "+xe+" -"+xe+" "+Pe+" -"+xe+" 0 c"),r.push("-"+xe+" -"+Pe+" -"+Pe+" -"+xe+" 0 -"+xe+" c"),r.push(Pe+" -"+xe+" "+xe+" -"+Pe+" "+xe+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=V(t);e.scope=t.scope;var r=[],xe=At.internal.getWidth(t)<=At.internal.getHeight(t)?At.internal.getWidth(t)/4:At.internal.getHeight(t)/4;xe=Number((.9*xe).toFixed(5));var Se=Number((2*xe).toFixed(5)),Ee=Number((Se*At.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+z(At.internal.getWidth(t)/2)+" "+z(At.internal.getHeight(t)/2)+" cm"),r.push(Se+" 0 m"),r.push(Se+" "+Ee+" "+Ee+" "+Se+" 0 "+Se+" c"),r.push("-"+Ee+" "+Se+" -"+Se+" "+Ee+" -"+Se+" 0 c"),r.push("-"+Se+" -"+Ee+" -"+Ee+" -"+Se+" 0 -"+Se+" c"),r.push(Ee+" -"+Se+" "+Se+" -"+Ee+" "+Se+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:At.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=At.RadioButton.Cross.YesNormal,e.D[t]=At.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=V(t);e.scope=t.scope;var r=[],xe=At.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+U(At.internal.getWidth(t)-2)+" "+U(At.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(U(xe.x1.x)+" "+U(xe.x1.y)+" m"),r.push(U(xe.x2.x)+" "+U(xe.x2.y)+" l"),r.push(U(xe.x4.x)+" "+U(xe.x4.y)+" m"),r.push(U(xe.x3.x)+" "+U(xe.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=V(t);e.scope=t.scope;var r=At.internal.calculateCross(t),xe=[];return xe.push("0.749023 g"),xe.push("0 0 "+U(At.internal.getWidth(t))+" "+U(At.internal.getHeight(t))+" re"),xe.push("f"),xe.push("q"),xe.push("1 1 "+U(At.internal.getWidth(t)-2)+" "+U(At.internal.getHeight(t)-2)+" re"),xe.push("W"),xe.push("n"),xe.push(U(r.x1.x)+" "+U(r.x1.y)+" m"),xe.push(U(r.x2.x)+" "+U(r.x2.y)+" l"),xe.push(U(r.x4.x)+" "+U(r.x4.y)+" m"),xe.push(U(r.x3.x)+" "+U(r.x3.y)+" l"),xe.push("s"),xe.push("Q"),e.stream=xe.join(`
`),e},OffPushDown:function(t){var e=V(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+U(At.internal.getWidth(t))+" "+U(At.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};At.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=At.internal.getWidth(t),r=At.internal.getHeight(t),xe=Math.min(e,r);return{x1:{x:(e-xe)/2,y:(r-xe)/2+xe},x2:{x:(e-xe)/2+xe,y:(r-xe)/2},x3:{x:(e-xe)/2,y:(r-xe)/2},x4:{x:(e-xe)/2+xe,y:(r-xe)/2+xe}}}},At.internal.getWidth=function(t){var e=0;return _typeof(t)==="object"&&(e=W(t.Rect[2])),e},At.internal.getHeight=function(t){var e=0;return _typeof(t)==="object"&&(e=W(t.Rect[3])),e};var xt=q.addField=function(t){if(at(this,t),!(t instanceof lt))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};q.AcroFormChoiceField=ft,q.AcroFormListBox=dt,q.AcroFormComboBox=pt,q.AcroFormEditBox=gt,q.AcroFormButton=mt,q.AcroFormPushButton=vt,q.AcroFormRadioButton=bt,q.AcroFormCheckBox=wt,q.AcroFormTextField=Nt,q.AcroFormPasswordField=Lt,q.AcroFormAppearance=At,q.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At},E.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At};E.AcroForm;function _t(t){return t.reduce((function(e,r,xe){return e[r]=xe,e}),{})}(function(t){t.__addimage__={};var e="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},xe=t.__addimage__.getImageFileTypeByImageData=function(Je,St){var hn,_n,yn,mn,Sn,Pn=e;if((St=St||e)==="RGBA"||Je.data!==void 0&&Je.data instanceof Uint8ClampedArray&&"height"in Je&&"width"in Je)return"RGBA";if(an(Je))for(Sn in r)for(yn=r[Sn],hn=0;hn<yn.length;hn+=1){for(mn=!0,_n=0;_n<yn[hn].length;_n+=1)if(yn[hn][_n]!==void 0&&yn[hn][_n]!==Je[_n]){mn=!1;break}if(mn===!0){Pn=Sn;break}}else for(Sn in r)for(yn=r[Sn],hn=0;hn<yn.length;hn+=1){for(mn=!0,_n=0;_n<yn[hn].length;_n+=1)if(yn[hn][_n]!==void 0&&yn[hn][_n]!==Je.charCodeAt(_n)){mn=!1;break}if(mn===!0){Pn=Sn;break}}return Pn===e&&St!==e&&(Pn=St),Pn},Se=function Je(St){for(var hn=this.internal.write,_n=this.internal.putStream,yn=(0,this.internal.getFilters)();yn.indexOf("FlateEncode")!==-1;)yn.splice(yn.indexOf("FlateEncode"),1);St.objectId=this.internal.newObject();var mn=[];if(mn.push({key:"Type",value:"/XObject"}),mn.push({key:"Subtype",value:"/Image"}),mn.push({key:"Width",value:St.width}),mn.push({key:"Height",value:St.height}),St.colorSpace===Xe.INDEXED?mn.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(St.palette.length/3-1)+" "+("sMask"in St&&St.sMask!==void 0?St.objectId+2:St.objectId+1)+" 0 R]"}):(mn.push({key:"ColorSpace",value:"/"+St.colorSpace}),St.colorSpace===Xe.DEVICE_CMYK&&mn.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),mn.push({key:"BitsPerComponent",value:St.bitsPerComponent}),"decodeParameters"in St&&St.decodeParameters!==void 0&&mn.push({key:"DecodeParms",value:"<<"+St.decodeParameters+">>"}),"transparency"in St&&Array.isArray(St.transparency)){for(var Sn="",Pn=0,pn=St.transparency.length;Pn<pn;Pn++)Sn+=St.transparency[Pn]+" "+St.transparency[Pn]+" ";mn.push({key:"Mask",value:"["+Sn+"]"})}St.sMask!==void 0&&mn.push({key:"SMask",value:St.objectId+1+" 0 R"});var on=St.filter!==void 0?["/"+St.filter]:void 0;if(_n({data:St.data,additionalKeyValues:mn,alreadyAppliedFilters:on,objectId:St.objectId}),hn("endobj"),"sMask"in St&&St.sMask!==void 0){var xn="/Predictor "+St.predictor+" /Colors 1 /BitsPerComponent "+St.bitsPerComponent+" /Columns "+St.width,Ge={width:St.width,height:St.height,colorSpace:"DeviceGray",bitsPerComponent:St.bitsPerComponent,decodeParameters:xn,data:St.sMask};"filter"in St&&(Ge.filter=St.filter),Je.call(this,Ge)}if(St.colorSpace===Xe.INDEXED){var Oe=this.internal.newObject();_n({data:tn(new Uint8Array(St.palette)),objectId:Oe}),hn("endobj")}},Ee=function(){var Je=this.internal.collections.addImage_images;for(var St in Je)Se.call(this,Je[St])},Pe=function(){var Je,St=this.internal.collections.addImage_images,hn=this.internal.write;for(var _n in St)hn("/I"+(Je=St[_n]).index,Je.objectId,"0","R")},Ce=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",Ee),this.internal.events.subscribe("putXobjectDict",Pe))},Re=function(){var Je=this.internal.collections.addImage_images;return Ce.call(this),Je},Be=function(){return Object.keys(this.internal.collections.addImage_images).length},Me=function(Je){return typeof t["process"+Je.toUpperCase()]=="function"},Ve=function(Je){return _typeof(Je)==="object"&&Je.nodeType===1},Fe=function(Je,St){if(Je.nodeName==="IMG"&&Je.hasAttribute("src")){var hn=""+Je.getAttribute("src");if(hn.indexOf("data:image/")===0)return u(unescape(hn).split("base64,").pop());var _n=t.loadFile(hn,!0);if(_n!==void 0)return _n}if(Je.nodeName==="CANVAS"){if(Je.width===0||Je.height===0)throw new Error("Given canvas must have data. Canvas width: "+Je.width+", height: "+Je.height);var yn;switch(St){case"PNG":yn="image/png";break;case"WEBP":yn="image/webp";break;case"JPEG":case"JPG":default:yn="image/jpeg"}return u(Je.toDataURL(yn,1).split("base64,").pop())}},Ie=function(Je){var St=this.internal.collections.addImage_images;if(St){for(var hn in St)if(Je===St[hn].alias)return St[hn]}},qe=function(Je,St,hn){return Je||St||(Je=-96,St=-96),Je<0&&(Je=-1*hn.width*72/Je/this.internal.scaleFactor),St<0&&(St=-1*hn.height*72/St/this.internal.scaleFactor),Je===0&&(Je=St*hn.width/hn.height),St===0&&(St=Je*hn.height/hn.width),[Je,St]},Ye=function(Je,St,hn,_n,yn,mn){var Sn=qe.call(this,hn,_n,yn),Pn=this.internal.getCoordinateString,pn=this.internal.getVerticalCoordinateString,on=Re.call(this);if(hn=Sn[0],_n=Sn[1],on[yn.index]=yn,mn){mn*=Math.PI/180;var xn=Math.cos(mn),Ge=Math.sin(mn),Oe=function(rn){return rn.toFixed(4)},$e=[Oe(xn),Oe(Ge),Oe(-1*Ge),Oe(xn),0,0,"cm"]}this.internal.write("q"),mn?(this.internal.write([1,"0","0",1,Pn(Je),pn(St+_n),"cm"].join(" ")),this.internal.write($e.join(" ")),this.internal.write([Pn(hn),"0","0",Pn(_n),"0","0","cm"].join(" "))):this.internal.write([Pn(hn),"0","0",Pn(_n),Pn(Je),pn(St+_n),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+yn.index+" Do"),this.internal.write("Q")},Xe=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var je=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},Qe=t.__addimage__.sHashCode=function(Je){var St,hn,_n=0;if(typeof Je=="string")for(hn=Je.length,St=0;St<hn;St++)_n=(_n<<5)-_n+Je.charCodeAt(St),_n|=0;else if(an(Je))for(hn=Je.byteLength/2,St=0;St<hn;St++)_n=(_n<<5)-_n+Je[St],_n|=0;return _n},sn=t.__addimage__.validateStringAsBase64=function(Je){(Je=Je||"").toString().trim();var St=!0;return Je.length===0&&(St=!1),Je.length%4!=0&&(St=!1),/^[A-Za-z0-9+/]+$/.test(Je.substr(0,Je.length-2))===!1&&(St=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(Je.substr(-2))===!1&&(St=!1),St},cn=t.__addimage__.extractImageFromDataUrl=function(Je){var St=(Je=Je||"").split("base64,"),hn=null;if(St.length===2){var _n=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(St[0]);Array.isArray(_n)&&(hn={mimeType:_n[1],charset:_n[2],data:St[1]})}return hn},nn=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(Je){return nn()&&Je instanceof ArrayBuffer};var an=t.__addimage__.isArrayBufferView=function(Je){return nn()&&typeof Uint32Array<"u"&&(Je instanceof Int8Array||Je instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&Je instanceof Uint8ClampedArray||Je instanceof Int16Array||Je instanceof Uint16Array||Je instanceof Int32Array||Je instanceof Uint32Array||Je instanceof Float32Array||Je instanceof Float64Array)},Ze=t.__addimage__.binaryStringToUint8Array=function(Je){for(var St=Je.length,hn=new Uint8Array(St),_n=0;_n<St;_n++)hn[_n]=Je.charCodeAt(_n);return hn},tn=t.__addimage__.arrayBufferToBinaryString=function(Je){for(var St="",hn=an(Je)?Je:new Uint8Array(Je),_n=0;_n<hn.length;_n+=8192)St+=String.fromCharCode.apply(null,hn.subarray(_n,_n+8192));return St};t.addImage=function(){var Je,St,hn,_n,yn,mn,Sn,Pn,pn;if(typeof arguments[1]=="number"?(St=e,hn=arguments[1],_n=arguments[2],yn=arguments[3],mn=arguments[4],Sn=arguments[5],Pn=arguments[6],pn=arguments[7]):(St=arguments[1],hn=arguments[2],_n=arguments[3],yn=arguments[4],mn=arguments[5],Sn=arguments[6],Pn=arguments[7],pn=arguments[8]),_typeof(Je=arguments[0])==="object"&&!Ve(Je)&&"imageData"in Je){var on=Je;Je=on.imageData,St=on.format||St||e,hn=on.x||hn||0,_n=on.y||_n||0,yn=on.w||on.width||yn,mn=on.h||on.height||mn,Sn=on.alias||Sn,Pn=on.compression||Pn,pn=on.rotation||on.angle||pn}var xn=this.internal.getFilters();if(Pn===void 0&&xn.indexOf("FlateEncode")!==-1&&(Pn="SLOW"),isNaN(hn)||isNaN(_n))throw new Error("Invalid coordinates passed to jsPDF.addImage");Ce.call(this);var Ge=We.call(this,Je,St,Sn,Pn);return Ye.call(this,hn,_n,yn,mn,Ge,pn),this};var We=function(Je,St,hn,_n){var yn,mn,Sn;if(typeof Je=="string"&&xe(Je)===e){Je=unescape(Je);var Pn=An(Je,!1);(Pn!==""||(Pn=t.loadFile(Je,!0))!==void 0)&&(Je=Pn)}if(Ve(Je)&&(Je=Fe(Je,St)),St=xe(Je,St),!Me(St))throw new Error("addImage does not support files of type '"+St+"', please ensure that a plugin for '"+St+"' support is added.");if(((Sn=hn)==null||Sn.length===0)&&(hn=(function(pn){return typeof pn=="string"||an(pn)?Qe(pn):an(pn.data)?Qe(pn.data):null})(Je)),(yn=Ie.call(this,hn))||(nn()&&(Je instanceof Uint8Array||St==="RGBA"||(mn=Je,Je=Ze(Je))),yn=this["process"+St.toUpperCase()](Je,Be.call(this),hn,(function(pn){return pn&&typeof pn=="string"&&(pn=pn.toUpperCase()),pn in t.image_compression?pn:je.NONE})(_n),mn)),!yn)throw new Error("An unknown error occurred whilst processing the image.");return yn},An=t.__addimage__.convertBase64ToBinaryString=function(Je,St){var hn;St=typeof St!="boolean"||St;var _n,yn="";if(typeof Je=="string"){_n=(hn=cn(Je))!==null?hn.data:Je;try{yn=u(_n)}catch(mn){if(St)throw sn(_n)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+mn.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return yn};t.getImageProperties=function(Je){var St,hn,_n="";if(Ve(Je)&&(Je=Fe(Je)),typeof Je=="string"&&xe(Je)===e&&((_n=An(Je,!1))===""&&(_n=t.loadFile(Je)||""),Je=_n),hn=xe(Je),!Me(hn))throw new Error("addImage does not support files of type '"+hn+"', please ensure that a plugin for '"+hn+"' support is added.");if(!nn()||Je instanceof Uint8Array||(Je=Ze(Je)),!(St=this["process"+hn.toUpperCase()](Je)))throw new Error("An unknown error occurred whilst processing the image");return St.fileType=hn,St}})(E.API),(function(t){var e=function(r){if(r!==void 0&&r!="")return!0};E.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var xe,Se,Ee,Pe=this.internal.getCoordinateString,Ce=this.internal.getVerticalCoordinateString,Re=this.internal.getPageInfoByObjId(r.objId),Be=r.pageContext.annotations,Me=!1,Ve=0;Ve<Be.length&&!Me;Ve++)switch((xe=Be[Ve]).type){case"link":(e(xe.options.url)||e(xe.options.pageNumber))&&(Me=!0);break;case"reference":case"text":case"freetext":Me=!0}if(Me!=0){this.internal.write("/Annots [");for(var Fe=0;Fe<Be.length;Fe++){xe=Be[Fe];var Ie=this.internal.pdfEscape,qe=this.internal.getEncryptor(r.objId);switch(xe.type){case"reference":this.internal.write(" "+xe.object.objId+" 0 R ");break;case"text":var Ye=this.internal.newAdditionalObject(),Xe=this.internal.newAdditionalObject(),je=this.internal.getEncryptor(Ye.objId),Qe=xe.title||"Note";Ee="<</Type /Annot /Subtype /Text "+(Se="/Rect ["+Pe(xe.bounds.x)+" "+Ce(xe.bounds.y+xe.bounds.h)+" "+Pe(xe.bounds.x+xe.bounds.w)+" "+Ce(xe.bounds.y)+"] ")+"/Contents ("+Ie(je(xe.contents))+")",Ee+=" /Popup "+Xe.objId+" 0 R",Ee+=" /P "+Re.objId+" 0 R",Ee+=" /T ("+Ie(je(Qe))+") >>",Ye.content=Ee;var sn=Ye.objId+" 0 R";Ee="<</Type /Annot /Subtype /Popup "+(Se="/Rect ["+Pe(xe.bounds.x+30)+" "+Ce(xe.bounds.y+xe.bounds.h)+" "+Pe(xe.bounds.x+xe.bounds.w+30)+" "+Ce(xe.bounds.y)+"] ")+" /Parent "+sn,xe.open&&(Ee+=" /Open true"),Ee+=" >>",Xe.content=Ee,this.internal.write(Ye.objId,"0 R",Xe.objId,"0 R");break;case"freetext":Se="/Rect ["+Pe(xe.bounds.x)+" "+Ce(xe.bounds.y)+" "+Pe(xe.bounds.x+xe.bounds.w)+" "+Ce(xe.bounds.y+xe.bounds.h)+"] ";var cn=xe.color||"#000000";Ee="<</Type /Annot /Subtype /FreeText "+Se+"/Contents ("+Ie(qe(xe.contents))+")",Ee+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+cn+")",Ee+=" /Border [0 0 0]",Ee+=" >>",this.internal.write(Ee);break;case"link":if(xe.options.name){var nn=this.annotations._nameMap[xe.options.name];xe.options.pageNumber=nn.page,xe.options.top=nn.y}else xe.options.top||(xe.options.top=0);if(Se="/Rect ["+xe.finalBounds.x+" "+xe.finalBounds.y+" "+xe.finalBounds.w+" "+xe.finalBounds.h+"] ",Ee="",xe.options.url)Ee="<</Type /Annot /Subtype /Link "+Se+"/Border [0 0 0] /A <</S /URI /URI ("+Ie(qe(xe.options.url))+") >>";else if(xe.options.pageNumber)switch(Ee="<</Type /Annot /Subtype /Link "+Se+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(xe.options.pageNumber).objId+" 0 R",xe.options.magFactor=xe.options.magFactor||"XYZ",xe.options.magFactor){case"Fit":Ee+=" /Fit]";break;case"FitH":Ee+=" /FitH "+xe.options.top+"]";break;case"FitV":xe.options.left=xe.options.left||0,Ee+=" /FitV "+xe.options.left+"]";break;case"XYZ":default:var an=Ce(xe.options.top);xe.options.left=xe.options.left||0,xe.options.zoom===void 0&&(xe.options.zoom=0),Ee+=" /XYZ "+xe.options.left+" "+an+" "+xe.options.zoom+"]"}Ee!=""&&(Ee+=" >>",this.internal.write(Ee))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var xe=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":xe.pageContext.annotations.push(r)}},t.link=function(r,xe,Se,Ee,Pe){var Ce=this.internal.getCurrentPageInfo(),Re=this.internal.getCoordinateString,Be=this.internal.getVerticalCoordinateString;Ce.pageContext.annotations.push({finalBounds:{x:Re(r),y:Be(xe),w:Re(r+Se),h:Be(xe+Ee)},options:Pe,type:"link"})},t.textWithLink=function(r,xe,Se,Ee){var Pe,Ce,Re=this.getTextWidth(r),Be=this.internal.getLineHeight()/this.internal.scaleFactor;if(Ee.maxWidth!==void 0){Ce=Ee.maxWidth;var Me=this.splitTextToSize(r,Ce).length;Pe=Math.ceil(Be*Me)}else Ce=Re,Pe=Be;return this.text(r,xe,Se,Ee),Se+=.2*Be,Ee.align==="center"&&(xe-=Re/2),Ee.align==="right"&&(xe-=Re),this.link(xe,Se-Be,Ce,Pe,Ee),Re},t.getTextWidth=function(r){var xe=this.internal.getFontSize();return this.getStringUnitWidth(r)*xe/this.internal.scaleFactor}})(E.API),(function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},xe={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},Se=[1570,1571,1573,1575];t.__arabicParser__={};var Ee=t.__arabicParser__.isInArabicSubstitutionA=function(Ye){return e[Ye.charCodeAt(0)]!==void 0},Pe=t.__arabicParser__.isArabicLetter=function(Ye){return typeof Ye=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(Ye)},Ce=t.__arabicParser__.isArabicEndLetter=function(Ye){return Pe(Ye)&&Ee(Ye)&&e[Ye.charCodeAt(0)].length<=2},Re=t.__arabicParser__.isArabicAlfLetter=function(Ye){return Pe(Ye)&&Se.indexOf(Ye.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(Ye){return Pe(Ye)&&Ee(Ye)&&e[Ye.charCodeAt(0)].length>=1};var Be=t.__arabicParser__.arabicLetterHasFinalForm=function(Ye){return Pe(Ye)&&Ee(Ye)&&e[Ye.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(Ye){return Pe(Ye)&&Ee(Ye)&&e[Ye.charCodeAt(0)].length>=3};var Me=t.__arabicParser__.arabicLetterHasMedialForm=function(Ye){return Pe(Ye)&&Ee(Ye)&&e[Ye.charCodeAt(0)].length==4},Ve=t.__arabicParser__.resolveLigatures=function(Ye){var Xe=0,je=r,Qe="",sn=0;for(Xe=0;Xe<Ye.length;Xe+=1)je[Ye.charCodeAt(Xe)]!==void 0?(sn++,typeof(je=je[Ye.charCodeAt(Xe)])=="number"&&(Qe+=String.fromCharCode(je),je=r,sn=0),Xe===Ye.length-1&&(je=r,Qe+=Ye.charAt(Xe-(sn-1)),Xe-=sn-1,sn=0)):(je=r,Qe+=Ye.charAt(Xe-sn),Xe-=sn,sn=0);return Qe};t.__arabicParser__.isArabicDiacritic=function(Ye){return Ye!==void 0&&xe[Ye.charCodeAt(0)]!==void 0};var Fe=t.__arabicParser__.getCorrectForm=function(Ye,Xe,je){return Pe(Ye)?Ee(Ye)===!1?-1:!Be(Ye)||!Pe(Xe)&&!Pe(je)||!Pe(je)&&Ce(Xe)||Ce(Ye)&&!Pe(Xe)||Ce(Ye)&&Re(Xe)||Ce(Ye)&&Ce(Xe)?0:Me(Ye)&&Pe(Xe)&&!Ce(Xe)&&Pe(je)&&Be(je)?3:Ce(Ye)||!Pe(je)?1:2:-1},Ie=function(Ye){var Xe=0,je=0,Qe=0,sn="",cn="",nn="",an=(Ye=Ye||"").split("\\s+"),Ze=[];for(Xe=0;Xe<an.length;Xe+=1){for(Ze.push(""),je=0;je<an[Xe].length;je+=1)sn=an[Xe][je],cn=an[Xe][je-1],nn=an[Xe][je+1],Pe(sn)?(Qe=Fe(sn,cn,nn),Ze[Xe]+=Qe!==-1?String.fromCharCode(e[sn.charCodeAt(0)][Qe]):sn):Ze[Xe]+=sn;Ze[Xe]=Ve(Ze[Xe])}return Ze.join(" ")},qe=t.__arabicParser__.processArabic=t.processArabic=function(){var Ye,Xe=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,je=[];if(Array.isArray(Xe)){var Qe=0;for(je=[],Qe=0;Qe<Xe.length;Qe+=1)Array.isArray(Xe[Qe])?je.push([Ie(Xe[Qe][0]),Xe[Qe][1],Xe[Qe][2]]):je.push([Ie(Xe[Qe])]);Ye=je}else Ye=Ie(Xe);return typeof arguments[0]=="string"?Ye:(arguments[0].text=Ye,arguments[0])};t.events.push(["preProcessText",qe])})(E.API),E.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",(function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+e+" 0 R")}))}return this},(function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(Ce){r=Ce}});var xe=150;Object.defineProperty(this,"width",{get:function(){return xe},set:function(Ce){xe=isNaN(Ce)||Number.isInteger(Ce)===!1||Ce<0?150:Ce,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=xe+1)}});var Se=300;Object.defineProperty(this,"height",{get:function(){return Se},set:function(Ce){Se=isNaN(Ce)||Number.isInteger(Ce)===!1||Ce<0?300:Ce,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=Se+1)}});var Ee=[];Object.defineProperty(this,"childNodes",{get:function(){return Ee},set:function(Ce){Ee=Ce}});var Pe={};Object.defineProperty(this,"style",{get:function(){return Pe},set:function(Ce){Pe=Ce}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,xe){var Se;if((r=r||"2d")!=="2d")return null;for(Se in xe)this.pdf.context2d.hasOwnProperty(Se)&&(this.pdf.context2d[Se]=xe[Se]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(E.API),(function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,xe=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),Se.call(this))},Se=function(){this.internal.__cell__.lastCell=new Ee,this.internal.__cell__.pages=1},Ee=function(){var Re=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Re},set:function(Ye){Re=Ye}});var Be=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Be},set:function(Ye){Be=Ye}});var Me=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return Me},set:function(Ye){Me=Ye}});var Ve=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return Ve},set:function(Ye){Ve=Ye}});var Fe=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return Fe},set:function(Ye){Fe=Ye}});var Ie=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return Ie},set:function(Ye){Ie=Ye}});var qe=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return qe},set:function(Ye){qe=Ye}}),this};Ee.prototype.clone=function(){return new Ee(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},Ee.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(Re){return xe.call(this),this.internal.__cell__.headerFunction=typeof Re=="function"?Re:void 0,this},t.getTextDimensions=function(Re,Be){xe.call(this);var Me=(Be=Be||{}).fontSize||this.getFontSize(),Ve=Be.font||this.getFont(),Fe=Be.scaleFactor||this.internal.scaleFactor,Ie=0,qe=0,Ye=0,Xe=this;if(!Array.isArray(Re)&&typeof Re!="string"){if(typeof Re!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");Re=String(Re)}var je=Be.maxWidth;je>0?typeof Re=="string"?Re=this.splitTextToSize(Re,je):Object.prototype.toString.call(Re)==="[object Array]"&&(Re=Re.reduce((function(sn,cn){return sn.concat(Xe.splitTextToSize(cn,je))}),[])):Re=Array.isArray(Re)?Re:[Re];for(var Qe=0;Qe<Re.length;Qe++)Ie<(Ye=this.getStringUnitWidth(Re[Qe],{font:Ve})*Me)&&(Ie=Ye);return Ie!==0&&(qe=Re.length),{w:Ie/=Fe,h:Math.max((qe*Me*this.getLineHeightFactor()-Me*(this.getLineHeightFactor()-1))/Fe,0)}},t.cellAddPage=function(){xe.call(this),this.addPage();var Re=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new Ee(Re.left,Re.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var Pe=t.cell=function(){var Re;Re=arguments[0]instanceof Ee?arguments[0]:new Ee(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),xe.call(this);var Be=this.internal.__cell__.lastCell,Me=this.internal.__cell__.padding,Ve=this.internal.__cell__.margins||e,Fe=this.internal.__cell__.tableHeaderRow,Ie=this.internal.__cell__.printHeaders;return Be.lineNumber!==void 0&&(Be.lineNumber===Re.lineNumber?(Re.x=(Be.x||0)+(Be.width||0),Re.y=Be.y||0):Be.y+Be.height+Re.height+Ve.bottom>this.getPageHeight()?(this.cellAddPage(),Re.y=Ve.top,Ie&&Fe&&(this.printHeaderRow(Re.lineNumber,!0),Re.y+=Fe[0].height)):Re.y=Be.y+Be.height||Re.y),Re.text[0]!==void 0&&(this.rect(Re.x,Re.y,Re.width,Re.height,r===!0?"FD":void 0),Re.align==="right"?this.text(Re.text,Re.x+Re.width-Me,Re.y+Me,{align:"right",baseline:"top"}):Re.align==="center"?this.text(Re.text,Re.x+Re.width/2,Re.y+Me,{align:"center",baseline:"top",maxWidth:Re.width-Me-Me}):this.text(Re.text,Re.x+Me,Re.y+Me,{align:"left",baseline:"top",maxWidth:Re.width-Me-Me})),this.internal.__cell__.lastCell=Re,this};t.table=function(Re,Be,Me,Ve,Fe){if(xe.call(this),!Me)throw new Error("No data for PDF table.");var Ie,qe,Ye,Xe,je=[],Qe=[],sn=[],cn={},nn={},an=[],Ze=[],tn=(Fe=Fe||{}).autoSize||!1,We=Fe.printHeaders!==!1,An=Fe.css&&Fe.css["font-size"]!==void 0?16*Fe.css["font-size"]:Fe.fontSize||12,Je=Fe.margins||Object.assign({width:this.getPageWidth()},e),St=typeof Fe.padding=="number"?Fe.padding:3,hn=Fe.headerBackgroundColor||"#c8c8c8",_n=Fe.headerTextColor||"#000";if(Se.call(this),this.internal.__cell__.printHeaders=We,this.internal.__cell__.margins=Je,this.internal.__cell__.table_font_size=An,this.internal.__cell__.padding=St,this.internal.__cell__.headerBackgroundColor=hn,this.internal.__cell__.headerTextColor=_n,this.setFontSize(An),Ve==null)Qe=je=Object.keys(Me[0]),sn=je.map((function(){return"left"}));else if(Array.isArray(Ve)&&_typeof(Ve[0])==="object")for(je=Ve.map((function(on){return on.name})),Qe=Ve.map((function(on){return on.prompt||on.name||""})),sn=Ve.map((function(on){return on.align||"left"})),Ie=0;Ie<Ve.length;Ie+=1)nn[Ve[Ie].name]=Ve[Ie].width*(19.049976/25.4);else Array.isArray(Ve)&&typeof Ve[0]=="string"&&(Qe=je=Ve,sn=je.map((function(){return"left"})));if(tn||Array.isArray(Ve)&&typeof Ve[0]=="string")for(Ie=0;Ie<je.length;Ie+=1){for(cn[Xe=je[Ie]]=Me.map((function(on){return on[Xe]})),this.setFont(void 0,"bold"),an.push(this.getTextDimensions(Qe[Ie],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),qe=cn[Xe],this.setFont(void 0,"normal"),Ye=0;Ye<qe.length;Ye+=1)an.push(this.getTextDimensions(qe[Ye],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);nn[Xe]=Math.max.apply(null,an)+St+St,an=[]}if(We){var yn={};for(Ie=0;Ie<je.length;Ie+=1)yn[je[Ie]]={},yn[je[Ie]].text=Qe[Ie],yn[je[Ie]].align=sn[Ie];var mn=Ce.call(this,yn,nn);Ze=je.map((function(on){return new Ee(Re,Be,nn[on],mn,yn[on].text,void 0,yn[on].align)})),this.setTableHeaderRow(Ze),this.printHeaderRow(1,!1)}var Sn=Ve.reduce((function(on,xn){return on[xn.name]=xn.align,on}),{});for(Ie=0;Ie<Me.length;Ie+=1){"rowStart"in Fe&&Fe.rowStart instanceof Function&&Fe.rowStart({row:Ie,data:Me[Ie]},this);var Pn=Ce.call(this,Me[Ie],nn);for(Ye=0;Ye<je.length;Ye+=1){var pn=Me[Ie][je[Ye]];"cellStart"in Fe&&Fe.cellStart instanceof Function&&Fe.cellStart({row:Ie,col:Ye,data:pn},this),Pe.call(this,new Ee(Re,Be,nn[je[Ye]],Pn,pn,Ie+2,Sn[je[Ye]]))}}return this.internal.__cell__.table_x=Re,this.internal.__cell__.table_y=Be,this};var Ce=function(Re,Be){var Me=this.internal.__cell__.padding,Ve=this.internal.__cell__.table_font_size,Fe=this.internal.scaleFactor;return Object.keys(Re).map((function(Ie){var qe=Re[Ie];return this.splitTextToSize(qe.hasOwnProperty("text")?qe.text:qe,Be[Ie]-Me-Me)}),this).map((function(Ie){return this.getLineHeightFactor()*Ie.length*Ve/Fe+Me+Me}),this).reduce((function(Ie,qe){return Math.max(Ie,qe)}),0)};t.setTableHeaderRow=function(Re){xe.call(this),this.internal.__cell__.tableHeaderRow=Re},t.printHeaderRow=function(Re,Be){if(xe.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var Me;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var Ve=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new Ee(Ve[0],Ve[1],Ve[2],Ve[3],void 0,-1)}this.setFont(void 0,"bold");for(var Fe=[],Ie=0;Ie<this.internal.__cell__.tableHeaderRow.length;Ie+=1){Me=this.internal.__cell__.tableHeaderRow[Ie].clone(),Be&&(Me.y=this.internal.__cell__.margins.top||0,Fe.push(Me)),Me.lineNumber=Re;var qe=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),Pe.call(this,Me),this.setTextColor(qe)}Fe.length>0&&this.setTableHeaderRow(Fe),this.setFont(void 0,"normal"),r=!1}})(E.API);var Pt={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},kt=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],It=_t(kt),Ft=[100,200,300,400,500,600,700,800,900],Ct=_t(Ft);function jt(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=(function(Ee){return Pt[Ee=Ee||"normal"]?Ee:"normal"})(t.style),xe=(function(Ee){if(!Ee)return 400;if(typeof Ee=="number")return Ee>=100&&Ee<=900&&Ee%100==0?Ee:400;if(/^\d00$/.test(Ee))return parseInt(Ee);switch(Ee){case"bold":return 700;case"normal":default:return 400}})(t.weight),Se=(function(Ee){return typeof It[Ee=Ee||"normal"]=="number"?Ee:"normal"})(t.stretch);return{family:e,style:r,weight:xe,stretch:Se,src:t.src||[],ref:t.ref||{name:e,style:[Se,r,xe].join(" ")}}}function Ot(t,e,r,xe){var Se;for(Se=r;Se>=0&&Se<e.length;Se+=xe)if(t[e[Se]])return t[e[Se]];for(Se=r;Se>=0&&Se<e.length;Se-=xe)if(t[e[Se]])return t[e[Se]]}var Bt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Mt={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Et(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function qt(t,e,r){for(var xe=(r=r||{}).defaultFontFamily||"times",Se=Object.assign({},Bt,r.genericFontFamilies||{}),Ee=null,Pe=null,Ce=0;Ce<e.length;++Ce)if(Se[(Ee=jt(e[Ce])).family]&&(Ee.family=Se[Ee.family]),t.hasOwnProperty(Ee.family)){Pe=t[Ee.family];break}if(!(Pe=Pe||t[xe]))throw new Error("Could not find a font-family for the rule '"+Et(Ee)+"' and default family '"+xe+"'.");if(Pe=(function(Re,Be){if(Be[Re])return Be[Re];var Me=It[Re],Ve=Me<=It.normal?-1:1,Fe=Ot(Be,kt,Me,Ve);if(!Fe)throw new Error("Could not find a matching font-stretch value for "+Re);return Fe})(Ee.stretch,Pe),Pe=(function(Re,Be){if(Be[Re])return Be[Re];for(var Me=Pt[Re],Ve=0;Ve<Me.length;++Ve)if(Be[Me[Ve]])return Be[Me[Ve]];throw new Error("Could not find a matching font-style for "+Re)})(Ee.style,Pe),!(Pe=(function(Re,Be){if(Be[Re])return Be[Re];if(Re===400&&Be[500])return Be[500];if(Re===500&&Be[400])return Be[400];var Me=Ct[Re],Ve=Ot(Be,Ft,Me,Re<400?-1:1);if(!Ve)throw new Error("Could not find a matching font-weight for value "+Re);return Ve})(Ee.weight,Pe)))throw new Error("Failed to resolve a font for the rule '"+Et(Ee)+"'.");return Pe}function Dt(t){return t.trimLeft()}function Rt(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function Tt(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Ut,zt,Ht,Wt=["times"];(function(t){var e,r,xe,Se,Ee,Pe,Ce,Re,Be,Me=function(Ge){return Ge=Ge||{},this.isStrokeTransparent=Ge.isStrokeTransparent||!1,this.strokeOpacity=Ge.strokeOpacity||1,this.strokeStyle=Ge.strokeStyle||"#000000",this.fillStyle=Ge.fillStyle||"#000000",this.isFillTransparent=Ge.isFillTransparent||!1,this.fillOpacity=Ge.fillOpacity||1,this.font=Ge.font||"10px sans-serif",this.textBaseline=Ge.textBaseline||"alphabetic",this.textAlign=Ge.textAlign||"left",this.lineWidth=Ge.lineWidth||1,this.lineJoin=Ge.lineJoin||"miter",this.lineCap=Ge.lineCap||"butt",this.path=Ge.path||[],this.transform=Ge.transform!==void 0?Ge.transform.clone():new Re,this.globalCompositeOperation=Ge.globalCompositeOperation||"normal",this.globalAlpha=Ge.globalAlpha||1,this.clip_path=Ge.clip_path||[],this.currentPoint=Ge.currentPoint||new Pe,this.miterLimit=Ge.miterLimit||10,this.lastPoint=Ge.lastPoint||new Pe,this.lineDashOffset=Ge.lineDashOffset||0,this.lineDash=Ge.lineDash||[],this.margin=Ge.margin||[0,0,0,0],this.prevPageLastElemOffset=Ge.prevPageLastElemOffset||0,this.ignoreClearRect=typeof Ge.ignoreClearRect!="boolean"||Ge.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new Ve(this),e=this.internal.f2,r=this.internal.getCoordinateString,xe=this.internal.getVerticalCoordinateString,Se=this.internal.getHorizontalCoordinate,Ee=this.internal.getVerticalCoordinate,Pe=this.internal.Point,Ce=this.internal.Rectangle,Re=this.internal.Matrix,Be=new Me}]);var Ve=function(Ge){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Oe=Ge;Object.defineProperty(this,"pdf",{get:function(){return Oe}});var $e=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return $e},set:function(qn){$e=!!qn}});var rn=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return rn},set:function(qn){rn=!!qn}});var fn=0;Object.defineProperty(this,"posX",{get:function(){return fn},set:function(qn){isNaN(qn)||(fn=qn)}});var gn=0;Object.defineProperty(this,"posY",{get:function(){return gn},set:function(qn){isNaN(qn)||(gn=qn)}}),Object.defineProperty(this,"margin",{get:function(){return Be.margin},set:function(qn){var En;typeof qn=="number"?En=[qn,qn,qn,qn]:((En=new Array(4))[0]=qn[0],En[1]=qn.length>=2?qn[1]:En[0],En[2]=qn.length>=3?qn[2]:En[0],En[3]=qn.length>=4?qn[3]:En[1]),Be.margin=En}});var vn=!1;Object.defineProperty(this,"autoPaging",{get:function(){return vn},set:function(qn){vn=qn}});var wn=0;Object.defineProperty(this,"lastBreak",{get:function(){return wn},set:function(qn){wn=qn}});var On=[];Object.defineProperty(this,"pageBreaks",{get:function(){return On},set:function(qn){On=qn}}),Object.defineProperty(this,"ctx",{get:function(){return Be},set:function(qn){qn instanceof Me&&(Be=qn)}}),Object.defineProperty(this,"path",{get:function(){return Be.path},set:function(qn){Be.path=qn}});var jn=[];Object.defineProperty(this,"ctxStack",{get:function(){return jn},set:function(qn){jn=qn}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(qn){var En;En=Fe(qn),this.ctx.fillStyle=En.style,this.ctx.isFillTransparent=En.a===0,this.ctx.fillOpacity=En.a,this.pdf.setFillColor(En.r,En.g,En.b,{a:En.a}),this.pdf.setTextColor(En.r,En.g,En.b,{a:En.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(qn){var En=Fe(qn);this.ctx.strokeStyle=En.style,this.ctx.isStrokeTransparent=En.a===0,this.ctx.strokeOpacity=En.a,En.a===0?this.pdf.setDrawColor(255,255,255):(En.a,this.pdf.setDrawColor(En.r,En.g,En.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(qn){["butt","round","square"].indexOf(qn)!==-1&&(this.ctx.lineCap=qn,this.pdf.setLineCap(qn))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(qn){isNaN(qn)||(this.ctx.lineWidth=qn,this.pdf.setLineWidth(qn))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(qn){["bevel","round","miter"].indexOf(qn)!==-1&&(this.ctx.lineJoin=qn,this.pdf.setLineJoin(qn))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(qn){isNaN(qn)||(this.ctx.miterLimit=qn,this.pdf.setMiterLimit(qn))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(qn){this.ctx.textBaseline=qn}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(qn){["right","end","center","left","start"].indexOf(qn)!==-1&&(this.ctx.textAlign=qn)}});var Wn=null;function ti(qn,En){if(Wn===null){var Qn=(function(Cn){var Mn=[];return Object.keys(Cn).forEach((function(Un){Cn[Un].forEach((function(zn){var ni=null;switch(zn){case"bold":ni={family:Un,weight:"bold"};break;case"italic":ni={family:Un,style:"italic"};break;case"bolditalic":ni={family:Un,weight:"bold",style:"italic"};break;case"":case"normal":ni={family:Un}}ni!==null&&(ni.ref={name:Un,style:zn},Mn.push(ni))}))})),Mn})(qn.getFontList());Wn=(function(Cn){for(var Mn={},Un=0;Un<Cn.length;++Un){var zn=jt(Cn[Un]),ni=zn.family,yi=zn.stretch,pi=zn.style,$n=zn.weight;Mn[ni]=Mn[ni]||{},Mn[ni][yi]=Mn[ni][yi]||{},Mn[ni][yi][pi]=Mn[ni][yi][pi]||{},Mn[ni][yi][pi][$n]=zn}return Mn})(Qn.concat(En))}return Wn}var si=null;Object.defineProperty(this,"fontFaces",{get:function(){return si},set:function(qn){Wn=null,si=qn}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(qn){var En;if(this.ctx.font=qn,(En=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(qn))!==null){var Qn=En[1],Cn=(En[2],En[3]),Mn=En[4],Un=(En[5],En[6]),zn=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Mn)[2];Mn=Math.floor(zn==="px"?parseFloat(Mn)*this.pdf.internal.scaleFactor:zn==="em"?parseFloat(Mn)*this.pdf.getFontSize():parseFloat(Mn)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Mn);var ni=(function(ki){var Ji,Pi,na=[],ea=ki.trim();if(ea==="")return Wt;if(ea in Mt)return[Mt[ea]];for(;ea!=="";){switch(Pi=null,Ji=(ea=Dt(ea)).charAt(0)){case'"':case"'":Pi=Rt(ea.substring(1),Ji);break;default:Pi=Tt(ea)}if(Pi===null||(na.push(Pi[0]),(ea=Dt(Pi[1]))!==""&&ea.charAt(0)!==","))return Wt;ea=ea.replace(/^,/,"")}return na})(Un);if(this.fontFaces){var yi=qt(ti(this.pdf,this.fontFaces),ni.map((function(ki){return{family:ki,stretch:"normal",weight:Cn,style:Qn}})));this.pdf.setFont(yi.ref.name,yi.ref.style)}else{var pi="";(Cn==="bold"||parseInt(Cn,10)>=700||Qn==="bold")&&(pi="bold"),Qn==="italic"&&(pi+="italic"),pi.length===0&&(pi="normal");for(var $n="",Yn={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ai=0;ai<ni.length;ai++){if(this.pdf.internal.getFont(ni[ai],pi,{noFallback:!0,disableWarning:!0})!==void 0){$n=ni[ai];break}if(pi==="bolditalic"&&this.pdf.internal.getFont(ni[ai],"bold",{noFallback:!0,disableWarning:!0})!==void 0)$n=ni[ai],pi="bold";else if(this.pdf.internal.getFont(ni[ai],"normal",{noFallback:!0,disableWarning:!0})!==void 0){$n=ni[ai],pi="normal";break}}if($n===""){for(var Di=0;Di<ni.length;Di++)if(Yn[ni[Di]]){$n=Yn[ni[Di]];break}}$n=$n===""?"Times":$n,this.pdf.setFont($n,pi)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(qn){this.ctx.globalCompositeOperation=qn}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(qn){this.ctx.globalAlpha=qn}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(qn){this.ctx.lineDashOffset=qn,xn.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(qn){this.ctx.lineDash=qn,xn.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(qn){this.ctx.ignoreClearRect=!!qn}})};Ve.prototype.setLineDash=function(Ge){this.lineDash=Ge},Ve.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},Ve.prototype.fill=function(){cn.call(this,"fill",!1)},Ve.prototype.stroke=function(){cn.call(this,"stroke",!1)},Ve.prototype.beginPath=function(){this.path=[{type:"begin"}]},Ve.prototype.moveTo=function(Ge,Oe){if(isNaN(Ge)||isNaN(Oe))throw a.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var $e=this.ctx.transform.applyToPoint(new Pe(Ge,Oe));this.path.push({type:"mt",x:$e.x,y:$e.y}),this.ctx.lastPoint=new Pe(Ge,Oe)},Ve.prototype.closePath=function(){var Ge=new Pe(0,0),Oe=0;for(Oe=this.path.length-1;Oe!==-1;Oe--)if(this.path[Oe].type==="begin"&&_typeof(this.path[Oe+1])==="object"&&typeof this.path[Oe+1].x=="number"){Ge=new Pe(this.path[Oe+1].x,this.path[Oe+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new Pe(Ge.x,Ge.y)},Ve.prototype.lineTo=function(Ge,Oe){if(isNaN(Ge)||isNaN(Oe))throw a.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var $e=this.ctx.transform.applyToPoint(new Pe(Ge,Oe));this.path.push({type:"lt",x:$e.x,y:$e.y}),this.ctx.lastPoint=new Pe($e.x,$e.y)},Ve.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),cn.call(this,null,!0)},Ve.prototype.quadraticCurveTo=function(Ge,Oe,$e,rn){if(isNaN($e)||isNaN(rn)||isNaN(Ge)||isNaN(Oe))throw a.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var fn=this.ctx.transform.applyToPoint(new Pe($e,rn)),gn=this.ctx.transform.applyToPoint(new Pe(Ge,Oe));this.path.push({type:"qct",x1:gn.x,y1:gn.y,x:fn.x,y:fn.y}),this.ctx.lastPoint=new Pe(fn.x,fn.y)},Ve.prototype.bezierCurveTo=function(Ge,Oe,$e,rn,fn,gn){if(isNaN(fn)||isNaN(gn)||isNaN(Ge)||isNaN(Oe)||isNaN($e)||isNaN(rn))throw a.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var vn=this.ctx.transform.applyToPoint(new Pe(fn,gn)),wn=this.ctx.transform.applyToPoint(new Pe(Ge,Oe)),On=this.ctx.transform.applyToPoint(new Pe($e,rn));this.path.push({type:"bct",x1:wn.x,y1:wn.y,x2:On.x,y2:On.y,x:vn.x,y:vn.y}),this.ctx.lastPoint=new Pe(vn.x,vn.y)},Ve.prototype.arc=function(Ge,Oe,$e,rn,fn,gn){if(isNaN(Ge)||isNaN(Oe)||isNaN($e)||isNaN(rn)||isNaN(fn))throw a.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(gn=!!gn,!this.ctx.transform.isIdentity){var vn=this.ctx.transform.applyToPoint(new Pe(Ge,Oe));Ge=vn.x,Oe=vn.y;var wn=this.ctx.transform.applyToPoint(new Pe(0,$e)),On=this.ctx.transform.applyToPoint(new Pe(0,0));$e=Math.sqrt(Math.pow(wn.x-On.x,2)+Math.pow(wn.y-On.y,2))}Math.abs(fn-rn)>=2*Math.PI&&(rn=0,fn=2*Math.PI),this.path.push({type:"arc",x:Ge,y:Oe,radius:$e,startAngle:rn,endAngle:fn,counterclockwise:gn})},Ve.prototype.arcTo=function(Ge,Oe,$e,rn,fn){throw new Error("arcTo not implemented.")},Ve.prototype.rect=function(Ge,Oe,$e,rn){if(isNaN(Ge)||isNaN(Oe)||isNaN($e)||isNaN(rn))throw a.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(Ge,Oe),this.lineTo(Ge+$e,Oe),this.lineTo(Ge+$e,Oe+rn),this.lineTo(Ge,Oe+rn),this.lineTo(Ge,Oe),this.lineTo(Ge+$e,Oe),this.lineTo(Ge,Oe)},Ve.prototype.fillRect=function(Ge,Oe,$e,rn){if(isNaN(Ge)||isNaN(Oe)||isNaN($e)||isNaN(rn))throw a.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!Ie.call(this)){var fn={};this.lineCap!=="butt"&&(fn.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(fn.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(Ge,Oe,$e,rn),this.fill(),fn.hasOwnProperty("lineCap")&&(this.lineCap=fn.lineCap),fn.hasOwnProperty("lineJoin")&&(this.lineJoin=fn.lineJoin)}},Ve.prototype.strokeRect=function(Ge,Oe,$e,rn){if(isNaN(Ge)||isNaN(Oe)||isNaN($e)||isNaN(rn))throw a.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");qe.call(this)||(this.beginPath(),this.rect(Ge,Oe,$e,rn),this.stroke())},Ve.prototype.clearRect=function(Ge,Oe,$e,rn){if(isNaN(Ge)||isNaN(Oe)||isNaN($e)||isNaN(rn))throw a.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(Ge,Oe,$e,rn))},Ve.prototype.save=function(Ge){Ge=typeof Ge!="boolean"||Ge;for(var Oe=this.pdf.internal.getCurrentPageInfo().pageNumber,$e=0;$e<this.pdf.internal.getNumberOfPages();$e++)this.pdf.setPage($e+1),this.pdf.internal.out("q");if(this.pdf.setPage(Oe),Ge){this.ctx.fontSize=this.pdf.internal.getFontSize();var rn=new Me(this.ctx);this.ctxStack.push(this.ctx),this.ctx=rn}},Ve.prototype.restore=function(Ge){Ge=typeof Ge!="boolean"||Ge;for(var Oe=this.pdf.internal.getCurrentPageInfo().pageNumber,$e=0;$e<this.pdf.internal.getNumberOfPages();$e++)this.pdf.setPage($e+1),this.pdf.internal.out("Q");this.pdf.setPage(Oe),Ge&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},Ve.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var Fe=function(Ge){var Oe,$e,rn,fn;if(Ge.isCanvasGradient===!0&&(Ge=Ge.getColor()),!Ge)return{r:0,g:0,b:0,a:0,style:Ge};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(Ge))Oe=0,$e=0,rn=0,fn=0;else{var gn=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(Ge);if(gn!==null)Oe=parseInt(gn[1]),$e=parseInt(gn[2]),rn=parseInt(gn[3]),fn=1;else if((gn=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(Ge))!==null)Oe=parseInt(gn[1]),$e=parseInt(gn[2]),rn=parseInt(gn[3]),fn=parseFloat(gn[4]);else{if(fn=1,typeof Ge=="string"&&Ge.charAt(0)!=="#"){var vn=new f(Ge);Ge=vn.ok?vn.toHex():"#000000"}Ge.length===4?(Oe=Ge.substring(1,2),Oe+=Oe,$e=Ge.substring(2,3),$e+=$e,rn=Ge.substring(3,4),rn+=rn):(Oe=Ge.substring(1,3),$e=Ge.substring(3,5),rn=Ge.substring(5,7)),Oe=parseInt(Oe,16),$e=parseInt($e,16),rn=parseInt(rn,16)}}return{r:Oe,g:$e,b:rn,a:fn,style:Ge}},Ie=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},qe=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};Ve.prototype.fillText=function(Ge,Oe,$e,rn){if(isNaN(Oe)||isNaN($e)||typeof Ge!="string")throw a.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(rn=isNaN(rn)?void 0:rn,!Ie.call(this)){var fn=Pn(this.ctx.transform.rotation),gn=this.ctx.transform.scaleX;St.call(this,{text:Ge,x:Oe,y:$e,scale:gn,angle:fn,align:this.textAlign,maxWidth:rn})}},Ve.prototype.strokeText=function(Ge,Oe,$e,rn){if(isNaN(Oe)||isNaN($e)||typeof Ge!="string")throw a.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!qe.call(this)){rn=isNaN(rn)?void 0:rn;var fn=Pn(this.ctx.transform.rotation),gn=this.ctx.transform.scaleX;St.call(this,{text:Ge,x:Oe,y:$e,scale:gn,renderingMode:"stroke",angle:fn,align:this.textAlign,maxWidth:rn})}},Ve.prototype.measureText=function(Ge){if(typeof Ge!="string")throw a.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Oe=this.pdf,$e=this.pdf.internal.scaleFactor,rn=Oe.internal.getFontSize(),fn=Oe.getStringUnitWidth(Ge)*rn/Oe.internal.scaleFactor,gn=function(vn){var wn=(vn=vn||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return wn}}),this};return new gn({width:fn*=Math.round(96*$e/72*1e4)/1e4})},Ve.prototype.scale=function(Ge,Oe){if(isNaN(Ge)||isNaN(Oe))throw a.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var $e=new Re(Ge,0,0,Oe,0,0);this.ctx.transform=this.ctx.transform.multiply($e)},Ve.prototype.rotate=function(Ge){if(isNaN(Ge))throw a.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Oe=new Re(Math.cos(Ge),Math.sin(Ge),-Math.sin(Ge),Math.cos(Ge),0,0);this.ctx.transform=this.ctx.transform.multiply(Oe)},Ve.prototype.translate=function(Ge,Oe){if(isNaN(Ge)||isNaN(Oe))throw a.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var $e=new Re(1,0,0,1,Ge,Oe);this.ctx.transform=this.ctx.transform.multiply($e)},Ve.prototype.transform=function(Ge,Oe,$e,rn,fn,gn){if(isNaN(Ge)||isNaN(Oe)||isNaN($e)||isNaN(rn)||isNaN(fn)||isNaN(gn))throw a.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var vn=new Re(Ge,Oe,$e,rn,fn,gn);this.ctx.transform=this.ctx.transform.multiply(vn)},Ve.prototype.setTransform=function(Ge,Oe,$e,rn,fn,gn){Ge=isNaN(Ge)?1:Ge,Oe=isNaN(Oe)?0:Oe,$e=isNaN($e)?0:$e,rn=isNaN(rn)?1:rn,fn=isNaN(fn)?0:fn,gn=isNaN(gn)?0:gn,this.ctx.transform=new Re(Ge,Oe,$e,rn,fn,gn)};var Ye=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};Ve.prototype.drawImage=function(Ge,Oe,$e,rn,fn,gn,vn,wn,On){var jn=this.pdf.getImageProperties(Ge),Wn=1,ti=1,si=1,qn=1;rn!==void 0&&wn!==void 0&&(si=wn/rn,qn=On/fn,Wn=jn.width/rn*wn/rn,ti=jn.height/fn*On/fn),gn===void 0&&(gn=Oe,vn=$e,Oe=0,$e=0),rn!==void 0&&wn===void 0&&(wn=rn,On=fn),rn===void 0&&wn===void 0&&(wn=jn.width,On=jn.height);for(var En,Qn=this.ctx.transform.decompose(),Cn=Pn(Qn.rotate.shx),Mn=new Re,Un=(Mn=(Mn=(Mn=Mn.multiply(Qn.translate)).multiply(Qn.skew)).multiply(Qn.scale)).applyToRectangle(new Ce(gn-Oe*si,vn-$e*qn,rn*Wn,fn*ti)),zn=Xe.call(this,Un),ni=[],yi=0;yi<zn.length;yi+=1)ni.indexOf(zn[yi])===-1&&ni.push(zn[yi]);if(sn(ni),this.autoPaging)for(var pi=ni[0],$n=ni[ni.length-1],Yn=pi;Yn<$n+1;Yn++){this.pdf.setPage(Yn);var ai=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Di=Yn===1?this.posY+this.margin[0]:this.margin[0],ki=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ji=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Pi=Yn===1?0:ki+(Yn-2)*Ji;if(this.ctx.clip_path.length!==0){var na=this.path;En=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Qe(En,this.posX+this.margin[3],-Pi+Di+this.ctx.prevPageLastElemOffset),nn.call(this,"fill",!0),this.path=na}var ea=JSON.parse(JSON.stringify(Un));ea=Qe([ea],this.posX+this.margin[3],-Pi+Di+this.ctx.prevPageLastElemOffset)[0];var Ki=(Yn>pi||Yn<$n)&&Ye.call(this);Ki&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ai,Ji,null).clip().discardPath()),this.pdf.addImage(Ge,"JPEG",ea.x,ea.y,ea.w,ea.h,null,null,Cn),Ki&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(Ge,"JPEG",Un.x,Un.y,Un.w,Un.h,null,null,Cn)};var Xe=function(Ge,Oe,$e){var rn=[];Oe=Oe||this.pdf.internal.pageSize.width,$e=$e||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var fn=this.posY+this.ctx.prevPageLastElemOffset;switch(Ge.type){default:case"mt":case"lt":rn.push(Math.floor((Ge.y+fn)/$e)+1);break;case"arc":rn.push(Math.floor((Ge.y+fn-Ge.radius)/$e)+1),rn.push(Math.floor((Ge.y+fn+Ge.radius)/$e)+1);break;case"qct":var gn=pn(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Ge.x1,Ge.y1,Ge.x,Ge.y);rn.push(Math.floor((gn.y+fn)/$e)+1),rn.push(Math.floor((gn.y+gn.h+fn)/$e)+1);break;case"bct":var vn=on(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Ge.x1,Ge.y1,Ge.x2,Ge.y2,Ge.x,Ge.y);rn.push(Math.floor((vn.y+fn)/$e)+1),rn.push(Math.floor((vn.y+vn.h+fn)/$e)+1);break;case"rect":rn.push(Math.floor((Ge.y+fn)/$e)+1),rn.push(Math.floor((Ge.y+Ge.h+fn)/$e)+1)}for(var wn=0;wn<rn.length;wn+=1)for(;this.pdf.internal.getNumberOfPages()<rn[wn];)je.call(this);return rn},je=function(){var Ge=this.fillStyle,Oe=this.strokeStyle,$e=this.font,rn=this.lineCap,fn=this.lineWidth,gn=this.lineJoin;this.pdf.addPage(),this.fillStyle=Ge,this.strokeStyle=Oe,this.font=$e,this.lineCap=rn,this.lineWidth=fn,this.lineJoin=gn},Qe=function(Ge,Oe,$e){for(var rn=0;rn<Ge.length;rn++)switch(Ge[rn].type){case"bct":Ge[rn].x2+=Oe,Ge[rn].y2+=$e;case"qct":Ge[rn].x1+=Oe,Ge[rn].y1+=$e;case"mt":case"lt":case"arc":default:Ge[rn].x+=Oe,Ge[rn].y+=$e}return Ge},sn=function(Ge){return Ge.sort((function(Oe,$e){return Oe-$e}))},cn=function(Ge,Oe){for(var $e,rn,fn=this.fillStyle,gn=this.strokeStyle,vn=this.lineCap,wn=this.lineWidth,On=Math.abs(wn*this.ctx.transform.scaleX),jn=this.lineJoin,Wn=JSON.parse(JSON.stringify(this.path)),ti=JSON.parse(JSON.stringify(this.path)),si=[],qn=0;qn<ti.length;qn++)if(ti[qn].x!==void 0)for(var En=Xe.call(this,ti[qn]),Qn=0;Qn<En.length;Qn+=1)si.indexOf(En[Qn])===-1&&si.push(En[Qn]);for(var Cn=0;Cn<si.length;Cn++)for(;this.pdf.internal.getNumberOfPages()<si[Cn];)je.call(this);if(sn(si),this.autoPaging)for(var Mn=si[0],Un=si[si.length-1],zn=Mn;zn<Un+1;zn++){this.pdf.setPage(zn),this.fillStyle=fn,this.strokeStyle=gn,this.lineCap=vn,this.lineWidth=On,this.lineJoin=jn;var ni=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],yi=zn===1?this.posY+this.margin[0]:this.margin[0],pi=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$n=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Yn=zn===1?0:pi+(zn-2)*$n;if(this.ctx.clip_path.length!==0){var ai=this.path;$e=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Qe($e,this.posX+this.margin[3],-Yn+yi+this.ctx.prevPageLastElemOffset),nn.call(this,Ge,!0),this.path=ai}if(rn=JSON.parse(JSON.stringify(Wn)),this.path=Qe(rn,this.posX+this.margin[3],-Yn+yi+this.ctx.prevPageLastElemOffset),Oe===!1||zn===0){var Di=(zn>Mn||zn<Un)&&Ye.call(this);Di&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ni,$n,null).clip().discardPath()),nn.call(this,Ge,Oe),Di&&this.pdf.restoreGraphicsState()}this.lineWidth=wn}else this.lineWidth=On,nn.call(this,Ge,Oe),this.lineWidth=wn;this.path=Wn},nn=function(Ge,Oe){if((Ge!=="stroke"||Oe||!qe.call(this))&&(Ge==="stroke"||Oe||!Ie.call(this))){for(var $e,rn,fn=[],gn=this.path,vn=0;vn<gn.length;vn++){var wn=gn[vn];switch(wn.type){case"begin":fn.push({begin:!0});break;case"close":fn.push({close:!0});break;case"mt":fn.push({start:wn,deltas:[],abs:[]});break;case"lt":var On=fn.length;if(gn[vn-1]&&!isNaN(gn[vn-1].x)&&($e=[wn.x-gn[vn-1].x,wn.y-gn[vn-1].y],On>0)){for(;On>=0;On--)if(fn[On-1].close!==!0&&fn[On-1].begin!==!0){fn[On-1].deltas.push($e),fn[On-1].abs.push(wn);break}}break;case"bct":$e=[wn.x1-gn[vn-1].x,wn.y1-gn[vn-1].y,wn.x2-gn[vn-1].x,wn.y2-gn[vn-1].y,wn.x-gn[vn-1].x,wn.y-gn[vn-1].y],fn[fn.length-1].deltas.push($e);break;case"qct":var jn=gn[vn-1].x+2/3*(wn.x1-gn[vn-1].x),Wn=gn[vn-1].y+2/3*(wn.y1-gn[vn-1].y),ti=wn.x+2/3*(wn.x1-wn.x),si=wn.y+2/3*(wn.y1-wn.y),qn=wn.x,En=wn.y;$e=[jn-gn[vn-1].x,Wn-gn[vn-1].y,ti-gn[vn-1].x,si-gn[vn-1].y,qn-gn[vn-1].x,En-gn[vn-1].y],fn[fn.length-1].deltas.push($e);break;case"arc":fn.push({deltas:[],abs:[],arc:!0}),Array.isArray(fn[fn.length-1].abs)&&fn[fn.length-1].abs.push(wn)}}rn=Oe?null:Ge==="stroke"?"stroke":"fill";for(var Qn=!1,Cn=0;Cn<fn.length;Cn++)if(fn[Cn].arc)for(var Mn=fn[Cn].abs,Un=0;Un<Mn.length;Un++){var zn=Mn[Un];zn.type==="arc"?tn.call(this,zn.x,zn.y,zn.radius,zn.startAngle,zn.endAngle,zn.counterclockwise,void 0,Oe,!Qn):hn.call(this,zn.x,zn.y),Qn=!0}else if(fn[Cn].close===!0)this.pdf.internal.out("h"),Qn=!1;else if(fn[Cn].begin!==!0){var ni=fn[Cn].start.x,yi=fn[Cn].start.y;_n.call(this,fn[Cn].deltas,ni,yi),Qn=!0}rn&&We.call(this,rn),Oe&&An.call(this)}},an=function(Ge){var Oe=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,$e=Oe*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return Ge-$e;case"top":return Ge+Oe-$e;case"hanging":return Ge+Oe-2*$e;case"middle":return Ge+Oe/2-$e;case"ideographic":return Ge;case"alphabetic":default:return Ge}},Ze=function(Ge){return Ge+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};Ve.prototype.createLinearGradient=function(){var Ge=function(){};return Ge.colorStops=[],Ge.addColorStop=function(Oe,$e){this.colorStops.push([Oe,$e])},Ge.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},Ge.isCanvasGradient=!0,Ge},Ve.prototype.createPattern=function(){return this.createLinearGradient()},Ve.prototype.createRadialGradient=function(){return this.createLinearGradient()};var tn=function(Ge,Oe,$e,rn,fn,gn,vn,wn,On){for(var jn=mn.call(this,$e,rn,fn,gn),Wn=0;Wn<jn.length;Wn++){var ti=jn[Wn];Wn===0&&(On?Je.call(this,ti.x1+Ge,ti.y1+Oe):hn.call(this,ti.x1+Ge,ti.y1+Oe)),yn.call(this,Ge,Oe,ti.x2,ti.y2,ti.x3,ti.y3,ti.x4,ti.y4)}wn?An.call(this):We.call(this,vn)},We=function(Ge){switch(Ge){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},An=function(){this.pdf.clip(),this.pdf.discardPath()},Je=function(Ge,Oe){this.pdf.internal.out(r(Ge)+" "+xe(Oe)+" m")},St=function(Ge){var Oe;switch(Ge.align){case"right":case"end":Oe="right";break;case"center":Oe="center";break;case"left":case"start":default:Oe="left"}var $e=this.pdf.getTextDimensions(Ge.text),rn=an.call(this,Ge.y),fn=Ze.call(this,rn)-$e.h,gn=this.ctx.transform.applyToPoint(new Pe(Ge.x,rn)),vn=this.ctx.transform.decompose(),wn=new Re;wn=(wn=(wn=wn.multiply(vn.translate)).multiply(vn.skew)).multiply(vn.scale);for(var On,jn,Wn,ti=this.ctx.transform.applyToRectangle(new Ce(Ge.x,rn,$e.w,$e.h)),si=wn.applyToRectangle(new Ce(Ge.x,fn,$e.w,$e.h)),qn=Xe.call(this,si),En=[],Qn=0;Qn<qn.length;Qn+=1)En.indexOf(qn[Qn])===-1&&En.push(qn[Qn]);if(sn(En),this.autoPaging)for(var Cn=En[0],Mn=En[En.length-1],Un=Cn;Un<Mn+1;Un++){this.pdf.setPage(Un);var zn=Un===1?this.posY+this.margin[0]:this.margin[0],ni=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],yi=this.pdf.internal.pageSize.height-this.margin[2],pi=yi-this.margin[0],$n=this.pdf.internal.pageSize.width-this.margin[1],Yn=$n-this.margin[3],ai=Un===1?0:ni+(Un-2)*pi;if(this.ctx.clip_path.length!==0){var Di=this.path;On=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Qe(On,this.posX+this.margin[3],-1*ai+zn),nn.call(this,"fill",!0),this.path=Di}var ki=Qe([JSON.parse(JSON.stringify(si))],this.posX+this.margin[3],-ai+zn+this.ctx.prevPageLastElemOffset)[0];Ge.scale>=.01&&(jn=this.pdf.internal.getFontSize(),this.pdf.setFontSize(jn*Ge.scale),Wn=this.lineWidth,this.lineWidth=Wn*Ge.scale);var Ji=this.autoPaging!=="text";if(Ji||ki.y+ki.h<=yi){if(Ji||ki.y>=zn&&ki.x<=$n){var Pi=Ji?Ge.text:this.pdf.splitTextToSize(Ge.text,Ge.maxWidth||$n-ki.x)[0],na=Qe([JSON.parse(JSON.stringify(ti))],this.posX+this.margin[3],-ai+zn+this.ctx.prevPageLastElemOffset)[0],ea=Ji&&(Un>Cn||Un<Mn)&&Ye.call(this);ea&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Yn,pi,null).clip().discardPath()),this.pdf.text(Pi,na.x,na.y,{angle:Ge.angle,align:Oe,renderingMode:Ge.renderingMode}),ea&&this.pdf.restoreGraphicsState()}}else ki.y<yi&&(this.ctx.prevPageLastElemOffset+=yi-ki.y);Ge.scale>=.01&&(this.pdf.setFontSize(jn),this.lineWidth=Wn)}else Ge.scale>=.01&&(jn=this.pdf.internal.getFontSize(),this.pdf.setFontSize(jn*Ge.scale),Wn=this.lineWidth,this.lineWidth=Wn*Ge.scale),this.pdf.text(Ge.text,gn.x+this.posX,gn.y+this.posY,{angle:Ge.angle,align:Oe,renderingMode:Ge.renderingMode,maxWidth:Ge.maxWidth}),Ge.scale>=.01&&(this.pdf.setFontSize(jn),this.lineWidth=Wn)},hn=function(Ge,Oe,$e,rn){$e=$e||0,rn=rn||0,this.pdf.internal.out(r(Ge+$e)+" "+xe(Oe+rn)+" l")},_n=function(Ge,Oe,$e){return this.pdf.lines(Ge,Oe,$e,null,null)},yn=function(Ge,Oe,$e,rn,fn,gn,vn,wn){this.pdf.internal.out([e(Se($e+Ge)),e(Ee(rn+Oe)),e(Se(fn+Ge)),e(Ee(gn+Oe)),e(Se(vn+Ge)),e(Ee(wn+Oe)),"c"].join(" "))},mn=function(Ge,Oe,$e,rn){for(var fn=2*Math.PI,gn=Math.PI/2;Oe>$e;)Oe-=fn;var vn=Math.abs($e-Oe);vn<fn&&rn&&(vn=fn-vn);for(var wn=[],On=rn?-1:1,jn=Oe;vn>1e-5;){var Wn=jn+On*Math.min(vn,gn);wn.push(Sn.call(this,Ge,jn,Wn)),vn-=Math.abs(Wn-jn),jn=Wn}return wn},Sn=function(Ge,Oe,$e){var rn=($e-Oe)/2,fn=Ge*Math.cos(rn),gn=Ge*Math.sin(rn),vn=fn,wn=-gn,On=vn*vn+wn*wn,jn=On+vn*fn+wn*gn,Wn=4/3*(Math.sqrt(2*On*jn)-jn)/(vn*gn-wn*fn),ti=vn-Wn*wn,si=wn+Wn*vn,qn=ti,En=-si,Qn=rn+Oe,Cn=Math.cos(Qn),Mn=Math.sin(Qn);return{x1:Ge*Math.cos(Oe),y1:Ge*Math.sin(Oe),x2:ti*Cn-si*Mn,y2:ti*Mn+si*Cn,x3:qn*Cn-En*Mn,y3:qn*Mn+En*Cn,x4:Ge*Math.cos($e),y4:Ge*Math.sin($e)}},Pn=function(Ge){return 180*Ge/Math.PI},pn=function(Ge,Oe,$e,rn,fn,gn){var vn=Ge+.5*($e-Ge),wn=Oe+.5*(rn-Oe),On=fn+.5*($e-fn),jn=gn+.5*(rn-gn),Wn=Math.min(Ge,fn,vn,On),ti=Math.max(Ge,fn,vn,On),si=Math.min(Oe,gn,wn,jn),qn=Math.max(Oe,gn,wn,jn);return new Ce(Wn,si,ti-Wn,qn-si)},on=function(Ge,Oe,$e,rn,fn,gn,vn,wn){var On,jn,Wn,ti,si,qn,En,Qn,Cn,Mn,Un,zn,ni,yi,pi=$e-Ge,$n=rn-Oe,Yn=fn-$e,ai=gn-rn,Di=vn-fn,ki=wn-gn;for(jn=0;jn<41;jn++)Cn=(En=(Wn=Ge+(On=jn/40)*pi)+On*((si=$e+On*Yn)-Wn))+On*(si+On*(fn+On*Di-si)-En),Mn=(Qn=(ti=Oe+On*$n)+On*((qn=rn+On*ai)-ti))+On*(qn+On*(gn+On*ki-qn)-Qn),jn==0?(Un=Cn,zn=Mn,ni=Cn,yi=Mn):(Un=Math.min(Un,Cn),zn=Math.min(zn,Mn),ni=Math.max(ni,Cn),yi=Math.max(yi,Mn));return new Ce(Math.round(Un),Math.round(zn),Math.round(ni-Un),Math.round(yi-zn))},xn=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Ge,Oe,$e=(Ge=this.ctx.lineDash,Oe=this.ctx.lineDashOffset,JSON.stringify({lineDash:Ge,lineDashOffset:Oe}));this.prevLineDash!==$e&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=$e)}}})(E.API),(function(t){var e=function(Ee){var Pe,Ce,Re,Be,Me,Ve,Fe,Ie,qe,Ye;for(Ce=[],Re=0,Be=(Ee+=Pe="\0\0\0\0".slice(Ee.length%4||4)).length;Be>Re;Re+=4)(Me=(Ee.charCodeAt(Re)<<24)+(Ee.charCodeAt(Re+1)<<16)+(Ee.charCodeAt(Re+2)<<8)+Ee.charCodeAt(Re+3))!==0?(Ve=(Me=((Me=((Me=((Me=(Me-(Ye=Me%85))/85)-(qe=Me%85))/85)-(Ie=Me%85))/85)-(Fe=Me%85))/85)%85,Ce.push(Ve+33,Fe+33,Ie+33,qe+33,Ye+33)):Ce.push(122);return(function(Xe,je){for(var Qe=je;Qe>0;Qe--)Xe.pop()})(Ce,Pe.length),String.fromCharCode.apply(String,Ce)+"~>"},r=function(Ee){var Pe,Ce,Re,Be,Me,Ve=String,Fe="length",Ie=255,qe="charCodeAt",Ye="slice",Xe="replace";for(Ee[Ye](-2),Ee=Ee[Ye](0,-2)[Xe](/\s/g,"")[Xe]("z","!!!!!"),Re=[],Be=0,Me=(Ee+=Pe="uuuuu"[Ye](Ee[Fe]%5||5))[Fe];Me>Be;Be+=5)Ce=52200625*(Ee[qe](Be)-33)+614125*(Ee[qe](Be+1)-33)+7225*(Ee[qe](Be+2)-33)+85*(Ee[qe](Be+3)-33)+(Ee[qe](Be+4)-33),Re.push(Ie&Ce>>24,Ie&Ce>>16,Ie&Ce>>8,Ie&Ce);return(function(je,Qe){for(var sn=Qe;sn>0;sn--)je.pop()})(Re,Pe[Fe]),Ve.fromCharCode.apply(Ve,Re)},xe=function(Ee){var Pe=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((Ee=Ee.replace(/\s/g,"")).indexOf(">")!==-1&&(Ee=Ee.substr(0,Ee.indexOf(">"))),Ee.length%2&&(Ee+="0"),Pe.test(Ee)===!1)return"";for(var Ce="",Re=0;Re<Ee.length;Re+=2)Ce+=String.fromCharCode("0x"+(Ee[Re]+Ee[Re+1]));return Ce},Se=function(Ee){for(var Pe=new Uint8Array(Ee.length),Ce=Ee.length;Ce--;)Pe[Ce]=Ee.charCodeAt(Ce);return Ee=(Pe=zlibSync(Pe)).reduce((function(Re,Be){return Re+String.fromCharCode(Be)}),"")};t.processDataByFilters=function(Ee,Pe){var Ce=0,Re=Ee||"",Be=[];for(typeof(Pe=Pe||[])=="string"&&(Pe=[Pe]),Ce=0;Ce<Pe.length;Ce+=1)switch(Pe[Ce]){case"ASCII85Decode":case"/ASCII85Decode":Re=r(Re),Be.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":Re=e(Re),Be.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":Re=xe(Re),Be.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":Re=Re.split("").map((function(Me){return("0"+Me.charCodeAt().toString(16)).slice(-2)})).join("")+">",Be.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":Re=Se(Re),Be.push("/FlateDecode");break;default:throw new Error('The filter: "'+Pe[Ce]+'" is not implemented')}return{data:Re,reverseChain:Be.reverse().join(" ")}}})(E.API),(function(t){t.loadFile=function(e,r,xe){return(function(Se,Ee,Pe){Ee=Ee!==!1,Pe=typeof Pe=="function"?Pe:function(){};var Ce=void 0;try{Ce=(function(Re,Be,Me){var Ve=new XMLHttpRequest,Fe=0,Ie=function(qe){var Ye=qe.length,Xe=[],je=String.fromCharCode;for(Fe=0;Fe<Ye;Fe+=1)Xe.push(je(255&qe.charCodeAt(Fe)));return Xe.join("")};if(Ve.open("GET",Re,!Be),Ve.overrideMimeType("text/plain; charset=x-user-defined"),Be===!1&&(Ve.onload=function(){Ve.status===200?Me(Ie(this.responseText)):Me(void 0)}),Ve.send(null),Be&&Ve.status===200)return Ie(Ve.responseText)})(Se,Ee,Pe)}catch{}return Ce})(e,r,xe)},t.loadImageFile=t.loadFile})(E.API),(function(t){function e(){return(n.html2canvas?Promise.resolve(n.html2canvas):__vitePreload(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch((function(Pe){return Promise.reject(new Error("Could not load html2canvas: "+Pe))})).then((function(Pe){return Pe.default?Pe.default:Pe}))}function r(){return(n.DOMPurify?Promise.resolve(n.DOMPurify):__vitePreload(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch((function(Pe){return Promise.reject(new Error("Could not load dompurify: "+Pe))})).then((function(Pe){return Pe.default?Pe.default:Pe}))}var xe=function(Pe){var Ce=_typeof(Pe);return Ce==="undefined"?"undefined":Ce==="string"||Pe instanceof String?"string":Ce==="number"||Pe instanceof Number?"number":Ce==="function"||Pe instanceof Function?"function":Pe&&Pe.constructor===Array?"array":Pe&&Pe.nodeType===1?"element":Ce==="object"?"object":"unknown"},Se=function(Pe,Ce){var Re=document.createElement(Pe);for(var Be in Ce.className&&(Re.className=Ce.className),Ce.innerHTML&&Ce.dompurify&&(Re.innerHTML=Ce.dompurify.sanitize(Ce.innerHTML)),Ce.style)Re.style[Be]=Ce.style[Be];return Re},Ee=function Pe(Ce){var Re=Object.assign(Pe.convert(Promise.resolve()),JSON.parse(JSON.stringify(Pe.template))),Be=Pe.convert(Promise.resolve(),Re);return Be=(Be=Be.setProgress(1,Pe,1,[Pe])).set(Ce)};(Ee.prototype=Object.create(Promise.prototype)).constructor=Ee,Ee.convert=function(Pe,Ce){return Pe.__proto__=Ce||Ee.prototype,Pe},Ee.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},Ee.prototype.from=function(Pe,Ce){return this.then((function(){switch(Ce=Ce||(function(Re){switch(xe(Re)){case"string":return"string";case"element":return Re.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(Pe)){case"string":return this.then(r).then((function(Re){return this.set({src:Se("div",{innerHTML:Pe,dompurify:Re})})}));case"element":return this.set({src:Pe});case"canvas":return this.set({canvas:Pe});case"img":return this.set({img:Pe});default:return this.error("Unknown source type.")}}))},Ee.prototype.to=function(Pe){switch(Pe){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},Ee.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var Pe={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},Ce=(function Re(Be,Me){for(var Ve=Be.nodeType===3?document.createTextNode(Be.nodeValue):Be.cloneNode(!1),Fe=Be.firstChild;Fe;Fe=Fe.nextSibling)Me!==!0&&Fe.nodeType===1&&Fe.nodeName==="SCRIPT"||Ve.appendChild(Re(Fe,Me));return Be.nodeType===1&&(Be.nodeName==="CANVAS"?(Ve.width=Be.width,Ve.height=Be.height,Ve.getContext("2d").drawImage(Be,0,0)):Be.nodeName!=="TEXTAREA"&&Be.nodeName!=="SELECT"||(Ve.value=Be.value),Ve.addEventListener("load",(function(){Ve.scrollTop=Be.scrollTop,Ve.scrollLeft=Be.scrollLeft}),!0)),Ve})(this.prop.src,this.opt.html2canvas.javascriptEnabled);Ce.tagName==="BODY"&&(Pe.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=Se("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=Se("div",{className:"html2pdf__container",style:Pe}),this.prop.container.appendChild(Ce),this.prop.container.firstChild.appendChild(Se("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},Ee.prototype.toCanvas=function(){var Pe=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(Pe).then(e).then((function(Ce){var Re=Object.assign({},this.opt.html2canvas);return delete Re.onrendered,Ce(this.prop.container,Re)})).then((function(Ce){(this.opt.html2canvas.onrendered||function(){})(Ce),this.prop.canvas=Ce,document.body.removeChild(this.prop.overlay)}))},Ee.prototype.toContext2d=function(){var Pe=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(Pe).then(e).then((function(Ce){var Re=this.opt.jsPDF,Be=this.opt.fontFaces,Me=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,Ve=Object.assign({async:!0,allowTaint:!0,scale:Me,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete Ve.onrendered,Re.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,Re.context2d.posX=this.opt.x,Re.context2d.posY=this.opt.y,Re.context2d.margin=this.opt.margin,Re.context2d.fontFaces=Be,Be)for(var Fe=0;Fe<Be.length;++Fe){var Ie=Be[Fe],qe=Ie.src.find((function(Ye){return Ye.format==="truetype"}));qe&&Re.addFont(qe.url,Ie.ref.name,Ie.ref.style)}return Ve.windowHeight=Ve.windowHeight||0,Ve.windowHeight=Ve.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):Ve.windowHeight,Re.context2d.save(!0),Ce(this.prop.container,Ve)})).then((function(Ce){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(Ce),this.prop.canvas=Ce,document.body.removeChild(this.prop.overlay)}))},Ee.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var Pe=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=Pe}))},Ee.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},Ee.prototype.output=function(Pe,Ce,Re){return(Re=Re||"pdf").toLowerCase()==="img"||Re.toLowerCase()==="image"?this.outputImg(Pe,Ce):this.outputPdf(Pe,Ce)},Ee.prototype.outputPdf=function(Pe,Ce){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(Pe,Ce)}))},Ee.prototype.outputImg=function(Pe){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(Pe){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+Pe+'" is not supported.'}}))},Ee.prototype.save=function(Pe){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(Pe?{filename:Pe}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},Ee.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},Ee.prototype.set=function(Pe){if(xe(Pe)!=="object")return this;var Ce=Object.keys(Pe||{}).map((function(Re){if(Re in Ee.template.prop)return function(){this.prop[Re]=Pe[Re]};switch(Re){case"margin":return this.setMargin.bind(this,Pe.margin);case"jsPDF":return function(){return this.opt.jsPDF=Pe.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,Pe.pageSize);default:return function(){this.opt[Re]=Pe[Re]}}}),this);return this.then((function(){return this.thenList(Ce)}))},Ee.prototype.get=function(Pe,Ce){return this.then((function(){var Re=Pe in Ee.template.prop?this.prop[Pe]:this.opt[Pe];return Ce?Ce(Re):Re}))},Ee.prototype.setMargin=function(Pe){return this.then((function(){switch(xe(Pe)){case"number":Pe=[Pe,Pe,Pe,Pe];case"array":if(Pe.length===2&&(Pe=[Pe[0],Pe[1],Pe[0],Pe[1]]),Pe.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=Pe})).then(this.setPageSize)},Ee.prototype.setPageSize=function(Pe){function Ce(Re,Be){return Math.floor(Re*Be/72*96)}return this.then((function(){(Pe=Pe||E.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(Pe.inner={width:Pe.width-this.opt.margin[1]-this.opt.margin[3],height:Pe.height-this.opt.margin[0]-this.opt.margin[2]},Pe.inner.px={width:Ce(Pe.inner.width,Pe.k),height:Ce(Pe.inner.height,Pe.k)},Pe.inner.ratio=Pe.inner.height/Pe.inner.width),this.prop.pageSize=Pe}))},Ee.prototype.setProgress=function(Pe,Ce,Re,Be){return Pe!=null&&(this.progress.val=Pe),Ce!=null&&(this.progress.state=Ce),Re!=null&&(this.progress.n=Re),Be!=null&&(this.progress.stack=Be),this.progress.ratio=this.progress.val/this.progress.state,this},Ee.prototype.updateProgress=function(Pe,Ce,Re,Be){return this.setProgress(Pe?this.progress.val+Pe:null,Ce||null,Re?this.progress.n+Re:null,Be?this.progress.stack.concat(Be):null)},Ee.prototype.then=function(Pe,Ce){var Re=this;return this.thenCore(Pe,Ce,(function(Be,Me){return Re.updateProgress(null,null,1,[Be]),Promise.prototype.then.call(this,(function(Ve){return Re.updateProgress(null,Be),Ve})).then(Be,Me).then((function(Ve){return Re.updateProgress(1),Ve}))}))},Ee.prototype.thenCore=function(Pe,Ce,Re){Re=Re||Promise.prototype.then,Pe&&(Pe=Pe.bind(this)),Ce&&(Ce=Ce.bind(this));var Be=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:Ee.convert(Object.assign({},this),Promise.prototype),Me=Re.call(Be,Pe,Ce);return Ee.convert(Me,this.__proto__)},Ee.prototype.thenExternal=function(Pe,Ce){return Promise.prototype.then.call(this,Pe,Ce)},Ee.prototype.thenList=function(Pe){var Ce=this;return Pe.forEach((function(Re){Ce=Ce.thenCore(Re)})),Ce},Ee.prototype.catch=function(Pe){Pe&&(Pe=Pe.bind(this));var Ce=Promise.prototype.catch.call(this,Pe);return Ee.convert(Ce,this)},Ee.prototype.catchExternal=function(Pe){return Promise.prototype.catch.call(this,Pe)},Ee.prototype.error=function(Pe){return this.then((function(){throw new Error(Pe)}))},Ee.prototype.using=Ee.prototype.set,Ee.prototype.saveAs=Ee.prototype.save,Ee.prototype.export=Ee.prototype.output,Ee.prototype.run=Ee.prototype.then,E.getPageSize=function(Pe,Ce,Re){if(_typeof(Pe)==="object"){var Be=Pe;Pe=Be.orientation,Ce=Be.unit||Ce,Re=Be.format||Re}Ce=Ce||"mm",Re=Re||"a4",Pe=(""+(Pe||"P")).toLowerCase();var Me,Ve=(""+Re).toLowerCase(),Fe={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(Ce){case"pt":Me=1;break;case"mm":Me=72/25.4;break;case"cm":Me=72/2.54;break;case"in":Me=72;break;case"px":Me=.75;break;case"pc":case"em":Me=12;break;case"ex":Me=6;break;default:throw"Invalid unit: "+Ce}var Ie,qe=0,Ye=0;if(Fe.hasOwnProperty(Ve))qe=Fe[Ve][1]/Me,Ye=Fe[Ve][0]/Me;else try{qe=Re[1],Ye=Re[0]}catch{throw new Error("Invalid format: "+Re)}if(Pe==="p"||Pe==="portrait")Pe="p",Ye>qe&&(Ie=Ye,Ye=qe,qe=Ie);else{if(Pe!=="l"&&Pe!=="landscape")throw"Invalid orientation: "+Pe;Pe="l",qe>Ye&&(Ie=Ye,Ye=qe,qe=Ie)}return{width:Ye,height:qe,unit:Ce,k:Me,orientation:Pe}},t.html=function(Pe,Ce){(Ce=Ce||{}).callback=Ce.callback||function(){},Ce.html2canvas=Ce.html2canvas||{},Ce.html2canvas.canvas=Ce.html2canvas.canvas||this.canvas,Ce.jsPDF=Ce.jsPDF||this,Ce.fontFaces=Ce.fontFaces?Ce.fontFaces.map(jt):null;var Re=new Ee(Ce);return Ce.worker?Re:Re.from(Pe).doCallback()}})(E.API),E.API.addJS=function(t){return Ht=t,this.internal.events.subscribe("postPutResources",(function(){Ut=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ut+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),zt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ht+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){Ut!==void 0&&zt!==void 0&&this.internal.out("/Names <</JavaScript "+Ut+" 0 R>>")})),this},(function(t){var e;t.events.push(["postPutResources",function(){var r=this,xe=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var Se=r.outline.render().split(/\r\n/),Ee=0;Ee<Se.length;Ee++){var Pe=Se[Ee],Ce=xe.exec(Pe);if(Ce!=null){var Re=Ce[1];r.internal.newObjectDeferredBegin(Re,!1)}r.internal.write(Pe)}if(this.outline.createNamedDestinations){var Be=this.internal.pages.length,Me=[];for(Ee=0;Ee<Be;Ee++){var Ve=r.internal.newObject();Me.push(Ve);var Fe=r.internal.getPageInfo(Ee+1);r.internal.write("<< /D["+Fe.objId+" 0 R /XYZ null null null]>> endobj")}var Ie=r.internal.newObject();for(r.internal.write("<< /Names [ "),Ee=0;Ee<Me.length;Ee++)r.internal.write("(page_"+(Ee+1)+")"+Me[Ee]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+Ie+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(xe,Se,Ee){var Pe={title:Se,options:Ee,children:[]};return xe==null&&(xe=this.root),xe.children.push(Pe),Pe},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(xe){xe.id=r.internal.newObjectDeferred();for(var Se=0;Se<xe.children.length;Se++)this.genIds_r(xe.children[Se])},r.outline.renderRoot=function(xe){this.objStart(xe),this.line("/Type /Outlines"),xe.children.length>0&&(this.line("/First "+this.makeRef(xe.children[0])),this.line("/Last "+this.makeRef(xe.children[xe.children.length-1]))),this.line("/Count "+this.count_r({count:0},xe)),this.objEnd()},r.outline.renderItems=function(xe){for(var Se=this.ctx.pdf.internal.getVerticalCoordinateString,Ee=0;Ee<xe.children.length;Ee++){var Pe=xe.children[Ee];this.objStart(Pe),this.line("/Title "+this.makeString(Pe.title)),this.line("/Parent "+this.makeRef(xe)),Ee>0&&this.line("/Prev "+this.makeRef(xe.children[Ee-1])),Ee<xe.children.length-1&&this.line("/Next "+this.makeRef(xe.children[Ee+1])),Pe.children.length>0&&(this.line("/First "+this.makeRef(Pe.children[0])),this.line("/Last "+this.makeRef(Pe.children[Pe.children.length-1])));var Ce=this.count=this.count_r({count:0},Pe);if(Ce>0&&this.line("/Count "+Ce),Pe.options&&Pe.options.pageNumber){var Re=r.internal.getPageInfo(Pe.options.pageNumber);this.line("/Dest ["+Re.objId+" 0 R /XYZ 0 "+Se(0)+" 0]")}this.objEnd()}for(var Be=0;Be<xe.children.length;Be++)this.renderItems(xe.children[Be])},r.outline.line=function(xe){this.ctx.val+=xe+`\r
`},r.outline.makeRef=function(xe){return xe.id+" 0 R"},r.outline.makeString=function(xe){return"("+r.internal.pdfEscape(xe)+")"},r.outline.objStart=function(xe){this.ctx.val+=`\r
`+xe.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(xe,Se){for(var Ee=0;Ee<Se.children.length;Ee++)xe.count++,this.count_r(xe,Se.children[Ee]);return xe.count}}])})(E.API),(function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,xe,Se,Ee,Pe,Ce){var Re,Be=this.decode.DCT_DECODE,Me=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=Pe||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(Re=(function(Ve){for(var Fe,Ie=256*Ve.charCodeAt(4)+Ve.charCodeAt(5),qe=Ve.length,Ye={width:0,height:0,numcomponents:1},Xe=4;Xe<qe;Xe+=2){if(Xe+=Ie,e.indexOf(Ve.charCodeAt(Xe+1))!==-1){Fe=256*Ve.charCodeAt(Xe+5)+Ve.charCodeAt(Xe+6),Ye={width:256*Ve.charCodeAt(Xe+7)+Ve.charCodeAt(Xe+8),height:Fe,numcomponents:Ve.charCodeAt(Xe+9)};break}Ie=256*Ve.charCodeAt(Xe+2)+Ve.charCodeAt(Xe+3)}return Ye})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:Ce=this.color_spaces.DEVICE_GRAY;break;case 4:Ce=this.color_spaces.DEVICE_CMYK;break;case 3:Ce=this.color_spaces.DEVICE_RGB}Me={data:r,width:Re.width,height:Re.height,colorSpace:Ce,bitsPerComponent:8,filter:Be,index:xe,alias:Se}}return Me}})(E.API);var Vt,Gt,Yt,Jt,Xt,Kt=(function(){var t,e,r;function xe(Ee){var Pe,Ce,Re,Be,Me,Ve,Fe,Ie,qe,Ye,Xe,je,Qe,sn;for(this.data=Ee,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},Ve=null;;){switch(Pe=this.readUInt32(),qe=(function(){var cn,nn;for(nn=[],cn=0;cn<4;++cn)nn.push(String.fromCharCode(this.data[this.pos++]));return nn}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(Pe);break;case"fcTL":Ve&&this.animation.frames.push(Ve),this.pos+=4,Ve={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},Me=this.readUInt16(),Be=this.readUInt16()||100,Ve.delay=1e3*Me/Be,Ve.disposeOp=this.data[this.pos++],Ve.blendOp=this.data[this.pos++],Ve.data=[];break;case"IDAT":case"fdAT":for(qe==="fdAT"&&(this.pos+=4,Pe-=4),Ee=(Ve!=null?Ve.data:void 0)||this.imgData,je=0;0<=Pe?je<Pe:je>Pe;0<=Pe?++je:--je)Ee.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(Re=this.palette.length/3,this.transparency.indexed=this.read(Pe),this.transparency.indexed.length>Re)throw new Error("More transparent colors than palette size");if((Ye=Re-this.transparency.indexed.length)>0)for(Qe=0;0<=Ye?Qe<Ye:Qe>Ye;0<=Ye?++Qe:--Qe)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(Pe)[0];break;case 2:this.transparency.rgb=this.read(Pe)}break;case"tEXt":Fe=(Xe=this.read(Pe)).indexOf(0),Ie=String.fromCharCode.apply(String,Xe.slice(0,Fe)),this.text[Ie]=String.fromCharCode.apply(String,Xe.slice(Fe+1));break;case"IEND":return Ve&&this.animation.frames.push(Ve),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(sn=this.colorType)===4||sn===6,Ce=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*Ce,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=Pe}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}xe.prototype.read=function(Ee){var Pe,Ce;for(Ce=[],Pe=0;0<=Ee?Pe<Ee:Pe>Ee;0<=Ee?++Pe:--Pe)Ce.push(this.data[this.pos++]);return Ce},xe.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},xe.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},xe.prototype.decodePixels=function(Ee){var Pe=this.pixelBitlength/8,Ce=new Uint8Array(this.width*this.height*Pe),Re=0,Be=this;if(Ee==null&&(Ee=this.imgData),Ee.length===0)return new Uint8Array(0);function Me(Ve,Fe,Ie,qe){var Ye,Xe,je,Qe,sn,cn,nn,an,Ze,tn,We,An,Je,St,hn,_n,yn,mn,Sn,Pn,pn,on=Math.ceil((Be.width-Ve)/Ie),xn=Math.ceil((Be.height-Fe)/qe),Ge=Be.width==on&&Be.height==xn;for(St=Pe*on,An=Ge?Ce:new Uint8Array(St*xn),cn=Ee.length,Je=0,Xe=0;Je<xn&&Re<cn;){switch(Ee[Re++]){case 0:for(Qe=yn=0;yn<St;Qe=yn+=1)An[Xe++]=Ee[Re++];break;case 1:for(Qe=mn=0;mn<St;Qe=mn+=1)Ye=Ee[Re++],sn=Qe<Pe?0:An[Xe-Pe],An[Xe++]=(Ye+sn)%256;break;case 2:for(Qe=Sn=0;Sn<St;Qe=Sn+=1)Ye=Ee[Re++],je=(Qe-Qe%Pe)/Pe,hn=Je&&An[(Je-1)*St+je*Pe+Qe%Pe],An[Xe++]=(hn+Ye)%256;break;case 3:for(Qe=Pn=0;Pn<St;Qe=Pn+=1)Ye=Ee[Re++],je=(Qe-Qe%Pe)/Pe,sn=Qe<Pe?0:An[Xe-Pe],hn=Je&&An[(Je-1)*St+je*Pe+Qe%Pe],An[Xe++]=(Ye+Math.floor((sn+hn)/2))%256;break;case 4:for(Qe=pn=0;pn<St;Qe=pn+=1)Ye=Ee[Re++],je=(Qe-Qe%Pe)/Pe,sn=Qe<Pe?0:An[Xe-Pe],Je===0?hn=_n=0:(hn=An[(Je-1)*St+je*Pe+Qe%Pe],_n=je&&An[(Je-1)*St+(je-1)*Pe+Qe%Pe]),nn=sn+hn-_n,an=Math.abs(nn-sn),tn=Math.abs(nn-hn),We=Math.abs(nn-_n),Ze=an<=tn&&an<=We?sn:tn<=We?hn:_n,An[Xe++]=(Ye+Ze)%256;break;default:throw new Error("Invalid filter algorithm: "+Ee[Re-1])}if(!Ge){var Oe=((Fe+Je*qe)*Be.width+Ve)*Pe,$e=Je*St;for(Qe=0;Qe<on;Qe+=1){for(var rn=0;rn<Pe;rn+=1)Ce[Oe++]=An[$e++];Oe+=(Ie-1)*Pe}}Je++}}return Ee=unzlibSync(Ee),Be.interlaceMethod==1?(Me(0,0,8,8),Me(4,0,8,8),Me(0,4,4,8),Me(2,0,4,4),Me(0,2,2,4),Me(1,0,2,2),Me(0,1,1,2)):Me(0,0,1,1),Ce},xe.prototype.decodePalette=function(){var Ee,Pe,Ce,Re,Be,Me,Ve,Fe,Ie;for(Ce=this.palette,Me=this.transparency.indexed||[],Be=new Uint8Array((Me.length||0)+Ce.length),Re=0,Ee=0,Pe=Ve=0,Fe=Ce.length;Ve<Fe;Pe=Ve+=3)Be[Re++]=Ce[Pe],Be[Re++]=Ce[Pe+1],Be[Re++]=Ce[Pe+2],Be[Re++]=(Ie=Me[Ee++])!=null?Ie:255;return Be},xe.prototype.copyToImageData=function(Ee,Pe){var Ce,Re,Be,Me,Ve,Fe,Ie,qe,Ye,Xe,je;if(Re=this.colors,Ye=null,Ce=this.hasAlphaChannel,this.palette.length&&(Ye=(je=this._decodedPalette)!=null?je:this._decodedPalette=this.decodePalette(),Re=4,Ce=!0),qe=(Be=Ee.data||Ee).length,Ve=Ye||Pe,Me=Fe=0,Re===1)for(;Me<qe;)Ie=Ye?4*Pe[Me/4]:Fe,Xe=Ve[Ie++],Be[Me++]=Xe,Be[Me++]=Xe,Be[Me++]=Xe,Be[Me++]=Ce?Ve[Ie++]:255,Fe=Ie;else for(;Me<qe;)Ie=Ye?4*Pe[Me/4]:Fe,Be[Me++]=Ve[Ie++],Be[Me++]=Ve[Ie++],Be[Me++]=Ve[Ie++],Be[Me++]=Ce?Ve[Ie++]:255,Fe=Ie},xe.prototype.decode=function(){var Ee;return Ee=new Uint8Array(this.width*this.height*4),this.copyToImageData(Ee,this.decodePixels()),Ee};var Se=function(){if(Object.prototype.toString.call(n)==="[object Window]"){try{e=n.document.createElement("canvas"),r=e.getContext("2d")}catch{return!1}return!0}return!1};return Se(),t=function(Ee){var Pe;if(Se()===!0)return r.width=Ee.width,r.height=Ee.height,r.clearRect(0,0,Ee.width,Ee.height),r.putImageData(Ee,0,0),(Pe=new Image).src=e.toDataURL(),Pe;throw new Error("This method requires a Browser with Canvas-capability.")},xe.prototype.decodeFrames=function(Ee){var Pe,Ce,Re,Be,Me,Ve,Fe,Ie;if(this.animation){for(Ie=[],Ce=Me=0,Ve=(Fe=this.animation.frames).length;Me<Ve;Ce=++Me)Pe=Fe[Ce],Re=Ee.createImageData(Pe.width,Pe.height),Be=this.decodePixels(new Uint8Array(Pe.data)),this.copyToImageData(Re,Be),Pe.imageData=Re,Ie.push(Pe.image=t(Re));return Ie}},xe.prototype.renderFrame=function(Ee,Pe){var Ce,Re,Be;return Ce=(Re=this.animation.frames)[Pe],Be=Re[Pe-1],Pe===0&&Ee.clearRect(0,0,this.width,this.height),(Be!=null?Be.disposeOp:void 0)===1?Ee.clearRect(Be.xOffset,Be.yOffset,Be.width,Be.height):(Be!=null?Be.disposeOp:void 0)===2&&Ee.putImageData(Be.imageData,Be.xOffset,Be.yOffset),Ce.blendOp===0&&Ee.clearRect(Ce.xOffset,Ce.yOffset,Ce.width,Ce.height),Ee.drawImage(Ce.image,Ce.xOffset,Ce.yOffset)},xe.prototype.animate=function(Ee){var Pe,Ce,Re,Be,Me,Ve,Fe=this;return Ce=0,Ve=this.animation,Be=Ve.numFrames,Re=Ve.frames,Me=Ve.numPlays,(Pe=function(){var Ie,qe;if(Ie=Ce++%Be,qe=Re[Ie],Fe.renderFrame(Ee,Ie),Be>1&&Ce/Be<Me)return Fe.animation._timeout=setTimeout(Pe,qe.delay)})()},xe.prototype.stopAnimation=function(){var Ee;return clearTimeout((Ee=this.animation)!=null?Ee._timeout:void 0)},xe.prototype.render=function(Ee){var Pe,Ce;return Ee._png&&Ee._png.stopAnimation(),Ee._png=this,Ee.width=this.width,Ee.height=this.height,Pe=Ee.getContext("2d"),this.animation?(this.decodeFrames(Pe),this.animate(Pe)):(Ce=Pe.createImageData(this.width,this.height),this.copyToImageData(Ce,this.decodePixels()),Pe.putImageData(Ce,0,0))},xe})();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Zt(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,xe=t[e++]|t[e++]<<8,Se=t[e++],Ee=Se>>7,Pe=1<<(7&Se)+1;t[e++],t[e++];var Ce=null,Re=null;Ee&&(Ce=e,Re=Pe,e+=3*Pe);var Be=!0,Me=[],Ve=0,Fe=null,Ie=0,qe=null;for(this.width=r,this.height=xe;Be&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,qe=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((Je=t[e++])>=0))throw Error("Invalid block size");if(Je===0)break;e+=Je}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var Ye=t[e++];Ve=t[e++]|t[e++]<<8,Fe=t[e++],(1&Ye)==0&&(Fe=null),Ie=Ye>>2&7,e++;break;case 254:for(;;){if(!((Je=t[e++])>=0))throw Error("Invalid block size");if(Je===0)break;e+=Je}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var Xe=t[e++]|t[e++]<<8,je=t[e++]|t[e++]<<8,Qe=t[e++]|t[e++]<<8,sn=t[e++]|t[e++]<<8,cn=t[e++],nn=cn>>6&1,an=1<<(7&cn)+1,Ze=Ce,tn=Re,We=!1;cn>>7&&(We=!0,Ze=e,tn=an,e+=3*an);var An=e;for(e++;;){var Je;if(!((Je=t[e++])>=0))throw Error("Invalid block size");if(Je===0)break;e+=Je}Me.push({x:Xe,y:je,width:Qe,height:sn,has_local_palette:We,palette_offset:Ze,palette_size:tn,data_offset:An,data_length:e-An,transparent_index:Fe,interlaced:!!nn,delay:Ve,disposal:Ie});break;case 59:Be=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return Me.length},this.loopCount=function(){return qe},this.frameInfo=function(St){if(St<0||St>=Me.length)throw new Error("Frame index out of range.");return Me[St]},this.decodeAndBlitFrameBGRA=function(St,hn){var _n=this.frameInfo(St),yn=_n.width*_n.height,mn=new Uint8Array(yn);$t(t,_n.data_offset,mn,yn);var Sn=_n.palette_offset,Pn=_n.transparent_index;Pn===null&&(Pn=256);var pn=_n.width,on=r-pn,xn=pn,Ge=4*(_n.y*r+_n.x),Oe=4*((_n.y+_n.height)*r+_n.x),$e=Ge,rn=4*on;_n.interlaced===!0&&(rn+=4*r*7);for(var fn=8,gn=0,vn=mn.length;gn<vn;++gn){var wn=mn[gn];if(xn===0&&(xn=pn,($e+=rn)>=Oe&&(rn=4*on+4*r*(fn-1),$e=Ge+(pn+on)*(fn<<1),fn>>=1)),wn===Pn)$e+=4;else{var On=t[Sn+3*wn],jn=t[Sn+3*wn+1],Wn=t[Sn+3*wn+2];hn[$e++]=Wn,hn[$e++]=jn,hn[$e++]=On,hn[$e++]=255}--xn}},this.decodeAndBlitFrameRGBA=function(St,hn){var _n=this.frameInfo(St),yn=_n.width*_n.height,mn=new Uint8Array(yn);$t(t,_n.data_offset,mn,yn);var Sn=_n.palette_offset,Pn=_n.transparent_index;Pn===null&&(Pn=256);var pn=_n.width,on=r-pn,xn=pn,Ge=4*(_n.y*r+_n.x),Oe=4*((_n.y+_n.height)*r+_n.x),$e=Ge,rn=4*on;_n.interlaced===!0&&(rn+=4*r*7);for(var fn=8,gn=0,vn=mn.length;gn<vn;++gn){var wn=mn[gn];if(xn===0&&(xn=pn,($e+=rn)>=Oe&&(rn=4*on+4*r*(fn-1),$e=Ge+(pn+on)*(fn<<1),fn>>=1)),wn===Pn)$e+=4;else{var On=t[Sn+3*wn],jn=t[Sn+3*wn+1],Wn=t[Sn+3*wn+2];hn[$e++]=On,hn[$e++]=jn,hn[$e++]=Wn,hn[$e++]=255}--xn}}}function $t(t,e,r,xe){for(var Se=t[e++],Ee=1<<Se,Pe=Ee+1,Ce=Pe+1,Re=Se+1,Be=(1<<Re)-1,Me=0,Ve=0,Fe=0,Ie=t[e++],qe=new Int32Array(4096),Ye=null;;){for(;Me<16&&Ie!==0;)Ve|=t[e++]<<Me,Me+=8,Ie===1?Ie=t[e++]:--Ie;if(Me<Re)break;var Xe=Ve&Be;if(Ve>>=Re,Me-=Re,Xe!==Ee){if(Xe===Pe)break;for(var je=Xe<Ce?Xe:Ye,Qe=0,sn=je;sn>Ee;)sn=qe[sn]>>8,++Qe;var cn=sn;if(Fe+Qe+(je!==Xe?1:0)>xe)return void a.log("Warning, gif stream longer than expected.");r[Fe++]=cn;var nn=Fe+=Qe;for(je!==Xe&&(r[Fe++]=cn),sn=je;Qe--;)sn=qe[sn],r[--nn]=255&sn,sn>>=8;Ye!==null&&Ce<4096&&(qe[Ce++]=Ye<<8|cn,Ce>=Be+1&&Re<12&&(++Re,Be=Be<<1|1)),Ye=Xe}else Ce=Pe+1,Be=(1<<(Re=Se+1))-1,Ye=null}return Fe!==xe&&a.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Qt(t){var e,r,xe,Se,Ee,Pe=Math.floor,Ce=new Array(64),Re=new Array(64),Be=new Array(64),Me=new Array(64),Ve=new Array(65535),Fe=new Array(65535),Ie=new Array(64),qe=new Array(64),Ye=[],Xe=0,je=7,Qe=new Array(64),sn=new Array(64),cn=new Array(64),nn=new Array(256),an=new Array(2048),Ze=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],tn=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],We=[0,1,2,3,4,5,6,7,8,9,10,11],An=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Je=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],St=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],hn=[0,1,2,3,4,5,6,7,8,9,10,11],_n=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],yn=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function mn(Ge,Oe){for(var $e=0,rn=0,fn=new Array,gn=1;gn<=16;gn++){for(var vn=1;vn<=Ge[gn];vn++)fn[Oe[rn]]=[],fn[Oe[rn]][0]=$e,fn[Oe[rn]][1]=gn,rn++,$e++;$e*=2}return fn}function Sn(Ge){for(var Oe=Ge[0],$e=Ge[1]-1;$e>=0;)Oe&1<<$e&&(Xe|=1<<je),$e--,--je<0&&(Xe==255?(Pn(255),Pn(0)):Pn(Xe),je=7,Xe=0)}function Pn(Ge){Ye.push(Ge)}function pn(Ge){Pn(Ge>>8&255),Pn(255&Ge)}function on(Ge,Oe,$e,rn,fn){for(var gn,vn=fn[0],wn=fn[240],On=(function(Mn,Un){var zn,ni,yi,pi,$n,Yn,ai,Di,ki,Ji,Pi=0;for(ki=0;ki<8;++ki){zn=Mn[Pi],ni=Mn[Pi+1],yi=Mn[Pi+2],pi=Mn[Pi+3],$n=Mn[Pi+4],Yn=Mn[Pi+5],ai=Mn[Pi+6];var na=zn+(Di=Mn[Pi+7]),ea=zn-Di,Ki=ni+ai,oi=ni-ai,Kn=yi+Yn,di=yi-Yn,Ui=pi+$n,wi=pi-$n,Ai=na+Ui,Rn=na-Ui,Zn=Ki+Kn,Xn=Ki-Kn;Mn[Pi]=Ai+Zn,Mn[Pi+4]=Ai-Zn;var Si=.707106781*(Xn+Rn);Mn[Pi+2]=Rn+Si,Mn[Pi+6]=Rn-Si;var Ci=.382683433*((Ai=wi+di)-(Xn=oi+ea)),Oi=.5411961*Ai+Ci,Fn=1.306562965*Xn+Ci,Nn=.707106781*(Zn=di+oi),Gn=ea+Nn,ei=ea-Nn;Mn[Pi+5]=ei+Oi,Mn[Pi+3]=ei-Oi,Mn[Pi+1]=Gn+Fn,Mn[Pi+7]=Gn-Fn,Pi+=8}for(Pi=0,ki=0;ki<8;++ki){zn=Mn[Pi],ni=Mn[Pi+8],yi=Mn[Pi+16],pi=Mn[Pi+24],$n=Mn[Pi+32],Yn=Mn[Pi+40],ai=Mn[Pi+48];var ii=zn+(Di=Mn[Pi+56]),gi=zn-Di,Ti=ni+ai,Wi=ni-ai,qi=yi+Yn,ji=yi-Yn,la=pi+$n,ia=pi-$n,Zi=ii+la,aa=ii-la,ca=Ti+qi,ma=Ti-qi;Mn[Pi]=Zi+ca,Mn[Pi+32]=Zi-ca;var xa=.707106781*(ma+aa);Mn[Pi+16]=aa+xa,Mn[Pi+48]=aa-xa;var Oa=.382683433*((Zi=ia+ji)-(ma=Wi+gi)),Ba=.5411961*Zi+Oa,tr=1.306562965*ma+Oa,wr=.707106781*(ca=ji+Wi),Sr=gi+wr,ss=gi-wr;Mn[Pi+40]=ss+Ba,Mn[Pi+24]=ss-Ba,Mn[Pi+8]=Sr+tr,Mn[Pi+56]=Sr-tr,Pi++}for(ki=0;ki<64;++ki)Ji=Mn[ki]*Un[ki],Ie[ki]=Ji>0?Ji+.5|0:Ji-.5|0;return Ie})(Ge,Oe),jn=0;jn<64;++jn)qe[Ze[jn]]=On[jn];var Wn=qe[0]-$e;$e=qe[0],Wn==0?Sn(rn[0]):(Sn(rn[Fe[gn=32767+Wn]]),Sn(Ve[gn]));for(var ti=63;ti>0&&qe[ti]==0;)ti--;if(ti==0)return Sn(vn),$e;for(var si,qn=1;qn<=ti;){for(var En=qn;qe[qn]==0&&qn<=ti;)++qn;var Qn=qn-En;if(Qn>=16){si=Qn>>4;for(var Cn=1;Cn<=si;++Cn)Sn(wn);Qn&=15}gn=32767+qe[qn],Sn(fn[(Qn<<4)+Fe[gn]]),Sn(Ve[gn]),qn++}return ti!=63&&Sn(vn),$e}function xn(Ge){Ge=Math.min(Math.max(Ge,1),100),Ee!=Ge&&((function(Oe){for(var $e=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],rn=0;rn<64;rn++){var fn=Pe(($e[rn]*Oe+50)/100);fn=Math.min(Math.max(fn,1),255),Ce[Ze[rn]]=fn}for(var gn=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],vn=0;vn<64;vn++){var wn=Pe((gn[vn]*Oe+50)/100);wn=Math.min(Math.max(wn,1),255),Re[Ze[vn]]=wn}for(var On=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],jn=0,Wn=0;Wn<8;Wn++)for(var ti=0;ti<8;ti++)Be[jn]=1/(Ce[Ze[jn]]*On[Wn]*On[ti]*8),Me[jn]=1/(Re[Ze[jn]]*On[Wn]*On[ti]*8),jn++})(Ge<50?Math.floor(5e3/Ge):Math.floor(200-2*Ge)),Ee=Ge)}this.encode=function(Ge,Oe){Oe&&xn(Oe),Ye=new Array,Xe=0,je=7,pn(65496),pn(65504),pn(16),Pn(74),Pn(70),Pn(73),Pn(70),Pn(0),Pn(1),Pn(1),Pn(0),pn(1),pn(1),Pn(0),Pn(0),(function(){pn(65499),pn(132),Pn(0);for(var ni=0;ni<64;ni++)Pn(Ce[ni]);Pn(1);for(var yi=0;yi<64;yi++)Pn(Re[yi])})(),(function(ni,yi){pn(65472),pn(17),Pn(8),pn(yi),pn(ni),Pn(3),Pn(1),Pn(17),Pn(0),Pn(2),Pn(17),Pn(1),Pn(3),Pn(17),Pn(1)})(Ge.width,Ge.height),(function(){pn(65476),pn(418),Pn(0);for(var ni=0;ni<16;ni++)Pn(tn[ni+1]);for(var yi=0;yi<=11;yi++)Pn(We[yi]);Pn(16);for(var pi=0;pi<16;pi++)Pn(An[pi+1]);for(var $n=0;$n<=161;$n++)Pn(Je[$n]);Pn(1);for(var Yn=0;Yn<16;Yn++)Pn(St[Yn+1]);for(var ai=0;ai<=11;ai++)Pn(hn[ai]);Pn(17);for(var Di=0;Di<16;Di++)Pn(_n[Di+1]);for(var ki=0;ki<=161;ki++)Pn(yn[ki])})(),pn(65498),pn(12),Pn(3),Pn(1),Pn(0),Pn(2),Pn(17),Pn(3),Pn(17),Pn(0),Pn(63),Pn(0);var $e=0,rn=0,fn=0;Xe=0,je=7,this.encode.displayName="_encode_";for(var gn,vn,wn,On,jn,Wn,ti,si,qn,En=Ge.data,Qn=Ge.width,Cn=Ge.height,Mn=4*Qn,Un=0;Un<Cn;){for(gn=0;gn<Mn;){for(jn=Mn*Un+gn,ti=-1,si=0,qn=0;qn<64;qn++)Wn=jn+(si=qn>>3)*Mn+(ti=4*(7&qn)),Un+si>=Cn&&(Wn-=Mn*(Un+1+si-Cn)),gn+ti>=Mn&&(Wn-=gn+ti-Mn+4),vn=En[Wn++],wn=En[Wn++],On=En[Wn++],Qe[qn]=(an[vn]+an[wn+256>>0]+an[On+512>>0]>>16)-128,sn[qn]=(an[vn+768>>0]+an[wn+1024>>0]+an[On+1280>>0]>>16)-128,cn[qn]=(an[vn+1280>>0]+an[wn+1536>>0]+an[On+1792>>0]>>16)-128;$e=on(Qe,Be,$e,e,xe),rn=on(sn,Me,rn,r,Se),fn=on(cn,Me,fn,r,Se),gn+=32}Un+=8}if(je>=0){var zn=[];zn[1]=je+1,zn[0]=(1<<je+1)-1,Sn(zn)}return pn(65497),new Uint8Array(Ye)},t=t||50,(function(){for(var Ge=String.fromCharCode,Oe=0;Oe<256;Oe++)nn[Oe]=Ge(Oe)})(),e=mn(tn,We),r=mn(St,hn),xe=mn(An,Je),Se=mn(_n,yn),(function(){for(var Ge=1,Oe=2,$e=1;$e<=15;$e++){for(var rn=Ge;rn<Oe;rn++)Fe[32767+rn]=$e,Ve[32767+rn]=[],Ve[32767+rn][1]=$e,Ve[32767+rn][0]=rn;for(var fn=-(Oe-1);fn<=-Ge;fn++)Fe[32767+fn]=$e,Ve[32767+fn]=[],Ve[32767+fn][1]=$e,Ve[32767+fn][0]=Oe-1+fn;Ge<<=1,Oe<<=1}})(),(function(){for(var Ge=0;Ge<256;Ge++)an[Ge]=19595*Ge,an[Ge+256>>0]=38470*Ge,an[Ge+512>>0]=7471*Ge+32768,an[Ge+768>>0]=-11059*Ge,an[Ge+1024>>0]=-21709*Ge,an[Ge+1280>>0]=32768*Ge+8421375,an[Ge+1536>>0]=-27439*Ge,an[Ge+1792>>0]=-5329*Ge})(),xn(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function te(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ee(t){function e(tn){if(!tn)throw Error("assert :P")}function r(tn,We,An){for(var Je=0;4>Je;Je++)if(tn[We+Je]!=An.charCodeAt(Je))return!0;return!1}function xe(tn,We,An,Je,St){for(var hn=0;hn<St;hn++)tn[We+hn]=An[Je+hn]}function Se(tn,We,An,Je){for(var St=0;St<Je;St++)tn[We+St]=An}function Ee(tn){return new Int32Array(tn)}function Pe(tn,We){for(var An=[],Je=0;Je<tn;Je++)An.push(new We);return An}function Ce(tn,We){var An=[];return(function Je(St,hn,_n){for(var yn=_n[hn],mn=0;mn<yn&&(St.push(_n.length>hn+1?[]:new We),!(_n.length<hn+1));mn++)Je(St[mn],hn+1,_n)})(An,0,tn),An}var Re=function(){var tn=this;function We(De,ze){for(var en=1<<ze-1>>>0;De&en;)en>>>=1;return en?(De&en-1)+en:De}function An(De,ze,en,dn,Tn){e(!(dn%en));do De[ze+(dn-=en)]=Tn;while(0<dn)}function Je(De,ze,en,dn,Tn){if(e(2328>=Tn),512>=Tn)var kn=Ee(512);else if((kn=Ee(Tn))==null)return 0;return(function(Vn,Ln,Dn,Hn,ci,Ri){var Bi,vi,Xi=Ln,Ii=1<<Dn,hi=Ee(16),mi=Ee(16);for(e(ci!=0),e(Hn!=null),e(Vn!=null),e(0<Dn),vi=0;vi<ci;++vi){if(15<Hn[vi])return 0;++hi[Hn[vi]]}if(hi[0]==ci)return 0;for(mi[1]=0,Bi=1;15>Bi;++Bi){if(hi[Bi]>1<<Bi)return 0;mi[Bi+1]=mi[Bi]+hi[Bi]}for(vi=0;vi<ci;++vi)Bi=Hn[vi],0<Hn[vi]&&(Ri[mi[Bi]++]=vi);if(mi[15]==1)return(Hn=new St).g=0,Hn.value=Ri[0],An(Vn,Xi,1,Ii,Hn),Ii;var Gi,Qi=-1,Hi=Ii-1,oa=0,ra=1,fa=1,sa=1<<Dn;for(vi=0,Bi=1,ci=2;Bi<=Dn;++Bi,ci<<=1){if(ra+=fa<<=1,0>(fa-=hi[Bi]))return 0;for(;0<hi[Bi];--hi[Bi])(Hn=new St).g=Bi,Hn.value=Ri[vi++],An(Vn,Xi+oa,ci,sa,Hn),oa=We(oa,Bi)}for(Bi=Dn+1,ci=2;15>=Bi;++Bi,ci<<=1){if(ra+=fa<<=1,0>(fa-=hi[Bi]))return 0;for(;0<hi[Bi];--hi[Bi]){if(Hn=new St,(oa&Hi)!=Qi){for(Xi+=sa,Gi=1<<(Qi=Bi)-Dn;15>Qi&&!(0>=(Gi-=hi[Qi]));)++Qi,Gi<<=1;Ii+=sa=1<<(Gi=Qi-Dn),Vn[Ln+(Qi=oa&Hi)].g=Gi+Dn,Vn[Ln+Qi].value=Xi-Ln-Qi}Hn.g=Bi-Dn,Hn.value=Ri[vi++],An(Vn,Xi+(oa>>Dn),ci,sa,Hn),oa=We(oa,Bi)}}return ra!=2*mi[15]-1?0:Ii})(De,ze,en,dn,Tn,kn)}function St(){this.value=this.g=0}function hn(){this.value=this.g=0}function _n(){this.G=Pe(5,St),this.H=Ee(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=Pe(Rr,hn)}function yn(De,ze,en,dn){e(De!=null),e(ze!=null),e(2147483648>dn),De.Ca=254,De.I=0,De.b=-8,De.Ka=0,De.oa=ze,De.pa=en,De.Jd=ze,De.Yc=en+dn,De.Zc=4<=dn?en+dn-4+1:en,gn(De)}function mn(De,ze){for(var en=0;0<ze--;)en|=wn(De,128)<<ze;return en}function Sn(De,ze){var en=mn(De,ze);return vn(De)?-en:en}function Pn(De,ze,en,dn){var Tn,kn=0;for(e(De!=null),e(ze!=null),e(4294967288>dn),De.Sb=dn,De.Ra=0,De.u=0,De.h=0,4<dn&&(dn=4),Tn=0;Tn<dn;++Tn)kn+=ze[en+Tn]<<8*Tn;De.Ra=kn,De.bb=dn,De.oa=ze,De.pa=en}function pn(De){for(;8<=De.u&&De.bb<De.Sb;)De.Ra>>>=8,De.Ra+=De.oa[De.pa+De.bb]<<qo-8>>>0,++De.bb,De.u-=8;$e(De)&&(De.h=1,De.u=0)}function on(De,ze){if(e(0<=ze),!De.h&&ze<=jo){var en=Oe(De)&yl[ze];return De.u+=ze,pn(De),en}return De.h=1,De.u=0}function xn(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Ge(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Oe(De){return De.Ra>>>(De.u&qo-1)>>>0}function $e(De){return e(De.bb<=De.Sb),De.h||De.bb==De.Sb&&De.u>qo}function rn(De,ze){De.u=ze,De.h=$e(De)}function fn(De){De.u>=Ql&&(e(De.u>=Ql),pn(De))}function gn(De){e(De!=null&&De.oa!=null),De.pa<De.Zc?(De.I=(De.oa[De.pa++]|De.I<<8)>>>0,De.b+=8):(e(De!=null&&De.oa!=null),De.pa<De.Yc?(De.b+=8,De.I=De.oa[De.pa++]|De.I<<8):De.Ka?De.b=0:(De.I<<=8,De.b+=8,De.Ka=1))}function vn(De){return mn(De,1)}function wn(De,ze){var en=De.Ca;0>De.b&&gn(De);var dn=De.b,Tn=en*ze>>>8,kn=(De.I>>>dn>Tn)+0;for(kn?(en-=Tn,De.I-=Tn+1<<dn>>>0):en=Tn+1,dn=en,Tn=0;256<=dn;)Tn+=8,dn>>=8;return dn=7^Tn+ts[dn],De.b-=dn,De.Ca=(en<<dn)-1,kn}function On(De,ze,en){De[ze+0]=en>>24&255,De[ze+1]=en>>16&255,De[ze+2]=en>>8&255,De[ze+3]=en>>0&255}function jn(De,ze){return De[ze+0]<<0|De[ze+1]<<8}function Wn(De,ze){return jn(De,ze)|De[ze+2]<<16}function ti(De,ze){return jn(De,ze)|jn(De,ze+2)<<16}function si(De,ze){var en=1<<ze;return e(De!=null),e(0<ze),De.X=Ee(en),De.X==null?0:(De.Mb=32-ze,De.Xa=ze,1)}function qn(De,ze){e(De!=null),e(ze!=null),e(De.Xa==ze.Xa),xe(ze.X,0,De.X,0,1<<ze.Xa)}function En(){this.X=[],this.Xa=this.Mb=0}function Qn(De,ze,en,dn){e(en!=null),e(dn!=null);var Tn=en[0],kn=dn[0];return Tn==0&&(Tn=(De*kn+ze/2)/ze),kn==0&&(kn=(ze*Tn+De/2)/De),0>=Tn||0>=kn?0:(en[0]=Tn,dn[0]=kn,1)}function Cn(De,ze){return De+(1<<ze)-1>>>ze}function Mn(De,ze){return((4278255360&De)+(4278255360&ze)>>>0&4278255360)+((16711935&De)+(16711935&ze)>>>0&16711935)>>>0}function Un(De,ze){tn[ze]=function(en,dn,Tn,kn,Vn,Ln,Dn){var Hn;for(Hn=0;Hn<Vn;++Hn){var ci=tn[De](Ln[Dn+Hn-1],Tn,kn+Hn);Ln[Dn+Hn]=Mn(en[dn+Hn],ci)}}}function zn(){this.ud=this.hd=this.jd=0}function ni(De,ze){return((4278124286&(De^ze))>>>1)+(De&ze)>>>0}function yi(De){return 0<=De&&256>De?De:0>De?0:255<De?255:void 0}function pi(De,ze){return yi(De+(De-ze+.5>>1))}function $n(De,ze,en){return Math.abs(ze-en)-Math.abs(De-en)}function Yn(De,ze,en,dn,Tn,kn,Vn){for(dn=kn[Vn-1],en=0;en<Tn;++en)kn[Vn+en]=dn=Mn(De[ze+en],dn)}function ai(De,ze,en,dn,Tn){var kn;for(kn=0;kn<en;++kn){var Vn=De[ze+kn],Ln=Vn>>8&255,Dn=16711935&(Dn=(Dn=16711935&Vn)+((Ln<<16)+Ln));dn[Tn+kn]=(4278255360&Vn)+Dn>>>0}}function Di(De,ze){ze.jd=De>>0&255,ze.hd=De>>8&255,ze.ud=De>>16&255}function ki(De,ze,en,dn,Tn,kn){var Vn;for(Vn=0;Vn<dn;++Vn){var Ln=ze[en+Vn],Dn=Ln>>>8,Hn=Ln,ci=255&(ci=(ci=Ln>>>16)+((De.jd<<24>>24)*(Dn<<24>>24)>>>5));Hn=255&(Hn=(Hn=Hn+((De.hd<<24>>24)*(Dn<<24>>24)>>>5))+((De.ud<<24>>24)*(ci<<24>>24)>>>5)),Tn[kn+Vn]=(4278255360&Ln)+(ci<<16)+Hn}}function Ji(De,ze,en,dn,Tn){tn[ze]=function(kn,Vn,Ln,Dn,Hn,ci,Ri,Bi,vi){for(Dn=Ri;Dn<Bi;++Dn)for(Ri=0;Ri<vi;++Ri)Hn[ci++]=Tn(Ln[dn(kn[Vn++])])},tn[De]=function(kn,Vn,Ln,Dn,Hn,ci,Ri){var Bi=8>>kn.b,vi=kn.Ea,Xi=kn.K[0],Ii=kn.w;if(8>Bi)for(kn=(1<<kn.b)-1,Ii=(1<<Bi)-1;Vn<Ln;++Vn){var hi,mi=0;for(hi=0;hi<vi;++hi)hi&kn||(mi=dn(Dn[Hn++])),ci[Ri++]=Tn(Xi[mi&Ii]),mi>>=Bi}else tn["VP8LMapColor"+en](Dn,Hn,Xi,Ii,ci,Ri,Vn,Ln,vi)}}function Pi(De,ze,en,dn,Tn){for(en=ze+en;ze<en;){var kn=De[ze++];dn[Tn++]=kn>>16&255,dn[Tn++]=kn>>8&255,dn[Tn++]=kn>>0&255}}function na(De,ze,en,dn,Tn){for(en=ze+en;ze<en;){var kn=De[ze++];dn[Tn++]=kn>>16&255,dn[Tn++]=kn>>8&255,dn[Tn++]=kn>>0&255,dn[Tn++]=kn>>24&255}}function ea(De,ze,en,dn,Tn){for(en=ze+en;ze<en;){var kn=(Vn=De[ze++])>>16&240|Vn>>12&15,Vn=Vn>>0&240|Vn>>28&15;dn[Tn++]=kn,dn[Tn++]=Vn}}function Ki(De,ze,en,dn,Tn){for(en=ze+en;ze<en;){var kn=(Vn=De[ze++])>>16&248|Vn>>13&7,Vn=Vn>>5&224|Vn>>3&31;dn[Tn++]=kn,dn[Tn++]=Vn}}function oi(De,ze,en,dn,Tn){for(en=ze+en;ze<en;){var kn=De[ze++];dn[Tn++]=kn>>0&255,dn[Tn++]=kn>>8&255,dn[Tn++]=kn>>16&255}}function Kn(De,ze,en,dn,Tn,kn){if(kn==0)for(en=ze+en;ze<en;)On(dn,((kn=De[ze++])[0]>>24|kn[1]>>8&65280|kn[2]<<8&16711680|kn[3]<<24)>>>0),Tn+=32;else xe(dn,Tn,De,ze,en)}function di(De,ze){tn[ze][0]=tn[De+"0"],tn[ze][1]=tn[De+"1"],tn[ze][2]=tn[De+"2"],tn[ze][3]=tn[De+"3"],tn[ze][4]=tn[De+"4"],tn[ze][5]=tn[De+"5"],tn[ze][6]=tn[De+"6"],tn[ze][7]=tn[De+"7"],tn[ze][8]=tn[De+"8"],tn[ze][9]=tn[De+"9"],tn[ze][10]=tn[De+"10"],tn[ze][11]=tn[De+"11"],tn[ze][12]=tn[De+"12"],tn[ze][13]=tn[De+"13"],tn[ze][14]=tn[De+"0"],tn[ze][15]=tn[De+"0"]}function Ui(De){return De==Xu||De==Sc||De==su||De==Ac}function wi(){this.eb=[],this.size=this.A=this.fb=0}function Ai(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Rn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new wi,this.f.kb=new Ai,this.sd=null}function Zn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Xn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Si(De){return alert("todo:WebPSamplerProcessPlane"),De.T}function Ci(De,ze){var en=De.T,dn=ze.ba.f.RGBA,Tn=dn.eb,kn=dn.fb+De.ka*dn.A,Vn=zr[ze.ba.S],Ln=De.y,Dn=De.O,Hn=De.f,ci=De.N,Ri=De.ea,Bi=De.W,vi=ze.cc,Xi=ze.dc,Ii=ze.Mc,hi=ze.Nc,mi=De.ka,Gi=De.ka+De.T,Qi=De.U,Hi=Qi+1>>1;for(mi==0?Vn(Ln,Dn,null,null,Hn,ci,Ri,Bi,Hn,ci,Ri,Bi,Tn,kn,null,null,Qi):(Vn(ze.ec,ze.fc,Ln,Dn,vi,Xi,Ii,hi,Hn,ci,Ri,Bi,Tn,kn-dn.A,Tn,kn,Qi),++en);mi+2<Gi;mi+=2)vi=Hn,Xi=ci,Ii=Ri,hi=Bi,ci+=De.Rc,Bi+=De.Rc,kn+=2*dn.A,Vn(Ln,(Dn+=2*De.fa)-De.fa,Ln,Dn,vi,Xi,Ii,hi,Hn,ci,Ri,Bi,Tn,kn-dn.A,Tn,kn,Qi);return Dn+=De.fa,De.j+Gi<De.o?(xe(ze.ec,ze.fc,Ln,Dn,Qi),xe(ze.cc,ze.dc,Hn,ci,Hi),xe(ze.Mc,ze.Nc,Ri,Bi,Hi),en--):1&Gi||Vn(Ln,Dn,null,null,Hn,ci,Ri,Bi,Hn,ci,Ri,Bi,Tn,kn+dn.A,null,null,Qi),en}function Oi(De,ze,en){var dn=De.F,Tn=[De.J];if(dn!=null){var kn=De.U,Vn=ze.ba.S,Ln=Vn==Ju||Vn==su;ze=ze.ba.f.RGBA;var Dn=[0],Hn=De.ka;Dn[0]=De.T,De.Kb&&(Hn==0?--Dn[0]:(--Hn,Tn[0]-=De.width),De.j+De.ka+De.T==De.o&&(Dn[0]=De.o-De.j-Hn));var ci=ze.eb;Hn=ze.fb+Hn*ze.A,De=Ga(dn,Tn[0],De.width,kn,Dn,ci,Hn+(Ln?0:3),ze.A),e(en==Dn),De&&Ui(Vn)&&us(ci,Hn,Ln,kn,Dn,ze.A)}return 0}function Fn(De){var ze=De.ma,en=ze.ba.S,dn=11>en,Tn=en==Kr||en==Ts||en==Ju||en==ru||en==12||Ui(en);if(ze.memory=null,ze.Ib=null,ze.Jb=null,ze.Nd=null,!go(ze.Oa,De,Tn?11:12))return 0;if(Tn&&Ui(en)&&ta(),De.da)alert("todo:use_scaling");else{if(dn){if(ze.Ib=Si,De.Kb){if(en=De.U+1>>1,ze.memory=Ee(De.U+2*en),ze.memory==null)return 0;ze.ec=ze.memory,ze.fc=0,ze.cc=ze.ec,ze.dc=ze.fc+De.U,ze.Mc=ze.cc,ze.Nc=ze.dc+en,ze.Ib=Ci,ta()}}else alert("todo:EmitYUV");Tn&&(ze.Jb=Oi,dn&&Ei())}if(dn&&!tl){for(De=0;256>De;++De)jr[De]=89858*(De-128)+uu>>ks,Kd[De]=-22014*(De-128)+uu,Xh[De]=-45773*(De-128),Cc[De]=113618*(De-128)+uu>>ks;for(De=Sl;De<el;++De)ze=76283*(De-16)+uu>>ks,Qd[De-Sl]=fs(ze,255),Zd[De-Sl]=fs(ze+8>>4,15);tl=1}return 1}function Nn(De){var ze=De.ma,en=De.U,dn=De.T;return e(!(1&De.ka)),0>=en||0>=dn?0:(en=ze.Ib(De,ze),ze.Jb!=null&&ze.Jb(De,ze,en),ze.Dc+=en,1)}function Gn(De){De.ma.memory=null}function ei(De,ze,en,dn){return on(De,8)!=47?0:(ze[0]=on(De,14)+1,en[0]=on(De,14)+1,dn[0]=on(De,1),on(De,3)!=0?0:!De.h)}function ii(De,ze){if(4>De)return De+1;var en=De-2>>1;return(2+(1&De)<<en)+on(ze,en)+1}function gi(De,ze){return 120<ze?ze-120:1<=(en=((en=Bs[ze-1])>>4)*De+(8-(15&en)))?en:1;var en}function Ti(De,ze,en){var dn=Oe(en),Tn=De[ze+=255&dn].g-8;return 0<Tn&&(rn(en,en.u+8),dn=Oe(en),ze+=De[ze].value,ze+=dn&(1<<Tn)-1),rn(en,en.u+De[ze].g),De[ze].value}function Wi(De,ze,en){return en.g+=De.g,en.value+=De.value<<ze>>>0,e(8>=en.g),De.g}function qi(De,ze,en){var dn=De.xc;return e((ze=dn==0?0:De.vc[De.md*(en>>dn)+(ze>>dn)])<De.Wb),De.Ya[ze]}function ji(De,ze,en,dn){var Tn=De.ab,kn=De.c*ze,Vn=De.C;ze=Vn+ze;var Ln=en,Dn=dn;for(dn=De.Ta,en=De.Ua;0<Tn--;){var Hn=De.gc[Tn],ci=Vn,Ri=ze,Bi=Ln,vi=Dn,Xi=(Dn=dn,Ln=en,Hn.Ea);switch(e(ci<Ri),e(Ri<=Hn.nc),Hn.hc){case 2:vc(Bi,vi,(Ri-ci)*Xi,Dn,Ln);break;case 0:var Ii=ci,hi=Ri,mi=Dn,Gi=Ln,Qi=(sa=Hn).Ea;Ii==0&&(yc(Bi,vi,null,null,1,mi,Gi),Yn(Bi,vi+1,0,0,Qi-1,mi,Gi+1),vi+=Qi,Gi+=Qi,++Ii);for(var Hi=1<<sa.b,oa=Hi-1,ra=Cn(Qi,sa.b),fa=sa.K,sa=sa.w+(Ii>>sa.b)*ra;Ii<hi;){var za=fa,Na=sa,La=1;for(Gu(Bi,vi,mi,Gi-Qi,1,mi,Gi);La<Qi;){var Pa=(La&~oa)+Hi;Pa>Qi&&(Pa=Qi),(0,ws[za[Na++]>>8&15])(Bi,vi+ +La,mi,Gi+La-Qi,Pa-La,mi,Gi+La),La=Pa}vi+=Qi,Gi+=Qi,++Ii&oa||(sa+=ra)}Ri!=Hn.nc&&xe(Dn,Ln-Xi,Dn,Ln+(Ri-ci-1)*Xi,Xi);break;case 1:for(Xi=Bi,hi=vi,Qi=(Bi=Hn.Ea)-(Gi=Bi&~(mi=(vi=1<<Hn.b)-1)),Ii=Cn(Bi,Hn.b),Hi=Hn.K,Hn=Hn.w+(ci>>Hn.b)*Ii;ci<Ri;){for(oa=Hi,ra=Hn,fa=new zn,sa=hi+Gi,za=hi+Bi;hi<sa;)Di(oa[ra++],fa),Ho(fa,Xi,hi,vi,Dn,Ln),hi+=vi,Ln+=vi;hi<za&&(Di(oa[ra++],fa),Ho(fa,Xi,hi,Qi,Dn,Ln),hi+=Qi,Ln+=Qi),++ci&mi||(Hn+=Ii)}break;case 3:if(Bi==Dn&&vi==Ln&&0<Hn.b){for(hi=Dn,Bi=Xi=Ln+(Ri-ci)*Xi-(Gi=(Ri-ci)*Cn(Hn.Ea,Hn.b)),vi=Dn,mi=Ln,Ii=[],Gi=(Qi=Gi)-1;0<=Gi;--Gi)Ii[Gi]=vi[mi+Gi];for(Gi=Qi-1;0<=Gi;--Gi)hi[Bi+Gi]=Ii[Gi];Ps(Hn,ci,Ri,Dn,Xi,Dn,Ln)}else Ps(Hn,ci,Ri,Bi,vi,Dn,Ln)}Ln=dn,Dn=en}Dn!=en&&xe(dn,en,Ln,Dn,kn)}function la(De,ze){var en=De.V,dn=De.Ba+De.c*De.C,Tn=ze-De.C;if(e(ze<=De.l.o),e(16>=Tn),0<Tn){var kn=De.l,Vn=De.Ta,Ln=De.Ua,Dn=kn.width;if(ji(De,Tn,en,dn),Tn=Ln=[Ln],e((en=De.C)<(dn=ze)),e(kn.v<kn.va),dn>kn.o&&(dn=kn.o),en<kn.j){var Hn=kn.j-en;en=kn.j,Tn[0]+=Hn*Dn}if(en>=dn?en=0:(Tn[0]+=4*kn.v,kn.ka=en-kn.j,kn.U=kn.va-kn.v,kn.T=dn-en,en=1),en){if(Ln=Ln[0],11>(en=De.ca).S){var ci=en.f.RGBA,Ri=(dn=en.S,Tn=kn.U,kn=kn.T,Hn=ci.eb,ci.A),Bi=kn;for(ci=ci.fb+De.Ma*ci.A;0<Bi--;){var vi=Vn,Xi=Ln,Ii=Tn,hi=Hn,mi=ci;switch(dn){case xc:ns(vi,Xi,Ii,hi,mi);break;case Kr:Xr(vi,Xi,Ii,hi,mi);break;case Xu:Xr(vi,Xi,Ii,hi,mi),us(hi,mi,0,Ii,1,0);break;case _c:bo(vi,Xi,Ii,hi,mi);break;case Ts:Kn(vi,Xi,Ii,hi,mi,1);break;case Sc:Kn(vi,Xi,Ii,hi,mi,1),us(hi,mi,0,Ii,1,0);break;case Ju:Kn(vi,Xi,Ii,hi,mi,0);break;case su:Kn(vi,Xi,Ii,hi,mi,0),us(hi,mi,1,Ii,1,0);break;case ru:vo(vi,Xi,Ii,hi,mi);break;case Ac:vo(vi,Xi,Ii,hi,mi),Ca(hi,mi,Ii,1,0);break;case Wo:qs(vi,Xi,Ii,hi,mi);break;default:e(0)}Ln+=Dn,ci+=Ri}De.Ma+=kn}else alert("todo:EmitRescaledRowsYUVA");e(De.Ma<=en.height)}}De.C=ze,e(De.C<=De.i)}function ia(De){var ze;if(0<De.ua)return 0;for(ze=0;ze<De.Wb;++ze){var en=De.Ya[ze].G,dn=De.Ya[ze].H;if(0<en[1][dn[1]+0].g||0<en[2][dn[2]+0].g||0<en[3][dn[3]+0].g)return 0}return 1}function Zi(De,ze,en,dn,Tn,kn){if(De.Z!=0){var Vn=De.qd,Ln=De.rd;for(e(Ao[De.Z]!=null);ze<en;++ze)Ao[De.Z](Vn,Ln,dn,Tn,dn,Tn,kn),Vn=dn,Ln=Tn,Tn+=kn;De.qd=Vn,De.rd=Ln}}function aa(De,ze){var en=De.l.ma,dn=en.Z==0||en.Z==1?De.l.j:De.C;if(dn=De.C<dn?dn:De.C,e(ze<=De.l.o),ze>dn){var Tn=De.l.width,kn=en.ca,Vn=en.tb+Tn*dn,Ln=De.V,Dn=De.Ba+De.c*dn,Hn=De.gc;e(De.ab==1),e(Hn[0].hc==3),bc(Hn[0],dn,ze,Ln,Dn,kn,Vn),Zi(en,dn,ze,kn,Vn,Tn)}De.C=De.Ma=ze}function ca(De,ze,en,dn,Tn,kn,Vn){var Ln=De.$/dn,Dn=De.$%dn,Hn=De.m,ci=De.s,Ri=en+De.$,Bi=Ri;Tn=en+dn*Tn;var vi=en+dn*kn,Xi=280+ci.ua,Ii=De.Pb?Ln:16777216,hi=0<ci.ua?ci.Wa:null,mi=ci.wc,Gi=Ri<vi?qi(ci,Dn,Ln):null;e(De.C<kn),e(vi<=Tn);var Qi=!1;e:for(;;){for(;Qi||Ri<vi;){var Hi=0;if(Ln>=Ii){var oa=Ri-en;e((Ii=De).Pb),Ii.wd=Ii.m,Ii.xd=oa,0<Ii.s.ua&&qn(Ii.s.Wa,Ii.s.vb),Ii=Ln+$o}if(Dn&mi||(Gi=qi(ci,Dn,Ln)),e(Gi!=null),Gi.Qb&&(ze[Ri]=Gi.qb,Qi=!0),!Qi)if(fn(Hn),Gi.jc){Hi=Hn,oa=ze;var ra=Ri,fa=Gi.pd[Oe(Hi)&Rr-1];e(Gi.jc),256>fa.g?(rn(Hi,Hi.u+fa.g),oa[ra]=fa.value,Hi=0):(rn(Hi,Hi.u+fa.g-256),e(256<=fa.value),Hi=fa.value),Hi==0&&(Qi=!0)}else Hi=Ti(Gi.G[0],Gi.H[0],Hn);if(Hn.h)break;if(Qi||256>Hi){if(!Qi)if(Gi.nd)ze[Ri]=(Gi.qb|Hi<<8)>>>0;else{if(fn(Hn),Qi=Ti(Gi.G[1],Gi.H[1],Hn),fn(Hn),oa=Ti(Gi.G[2],Gi.H[2],Hn),ra=Ti(Gi.G[3],Gi.H[3],Hn),Hn.h)break;ze[Ri]=(ra<<24|Qi<<16|Hi<<8|oa)>>>0}if(Qi=!1,++Ri,++Dn>=dn&&(Dn=0,++Ln,Vn!=null&&Ln<=kn&&!(Ln%16)&&Vn(De,Ln),hi!=null))for(;Bi<Ri;)Hi=ze[Bi++],hi.X[(506832829*Hi&4294967295)>>>hi.Mb]=Hi}else if(280>Hi){if(Hi=ii(Hi-256,Hn),oa=Ti(Gi.G[4],Gi.H[4],Hn),fn(Hn),oa=gi(dn,oa=ii(oa,Hn)),Hn.h)break;if(Ri-en<oa||Tn-Ri<Hi)break e;for(ra=0;ra<Hi;++ra)ze[Ri+ra]=ze[Ri+ra-oa];for(Ri+=Hi,Dn+=Hi;Dn>=dn;)Dn-=dn,++Ln,Vn!=null&&Ln<=kn&&!(Ln%16)&&Vn(De,Ln);if(e(Ri<=Tn),Dn&mi&&(Gi=qi(ci,Dn,Ln)),hi!=null)for(;Bi<Ri;)Hi=ze[Bi++],hi.X[(506832829*Hi&4294967295)>>>hi.Mb]=Hi}else{if(!(Hi<Xi))break e;for(Qi=Hi-280,e(hi!=null);Bi<Ri;)Hi=ze[Bi++],hi.X[(506832829*Hi&4294967295)>>>hi.Mb]=Hi;Hi=Ri,e(!(Qi>>>(oa=hi).Xa)),ze[Hi]=oa.X[Qi],Qi=!0}Qi||e(Hn.h==$e(Hn))}if(De.Pb&&Hn.h&&Ri<Tn)e(De.m.h),De.a=5,De.m=De.wd,De.$=De.xd,0<De.s.ua&&qn(De.s.vb,De.s.Wa);else{if(Hn.h)break e;Vn!=null&&Vn(De,Ln>kn?kn:Ln),De.a=0,De.$=Ri-en}return 1}return De.a=3,0}function ma(De){e(De!=null),De.vc=null,De.yc=null,De.Ya=null;var ze=De.Wa;ze!=null&&(ze.X=null),De.vb=null,e(De!=null)}function xa(){var De=new rh;return De==null?null:(De.a=0,De.xb=oh,di("Predictor","VP8LPredictors"),di("Predictor","VP8LPredictors_C"),di("PredictorAdd","VP8LPredictorsAdd"),di("PredictorAdd","VP8LPredictorsAdd_C"),vc=ai,Ho=ki,ns=Pi,Xr=na,vo=ea,qs=Ki,bo=oi,tn.VP8LMapColor32b=Zl,tn.VP8LMapColor8b=Jr,De)}function Oa(De,ze,en,dn,Tn){var kn=1,Vn=[De],Ln=[ze],Dn=dn.m,Hn=dn.s,ci=null,Ri=0;e:for(;;){if(en)for(;kn&&on(Dn,1);){var Bi=Vn,vi=Ln,Xi=dn,Ii=1,hi=Xi.m,mi=Xi.gc[Xi.ab],Gi=on(hi,2);if(Xi.Oc&1<<Gi)kn=0;else{switch(Xi.Oc|=1<<Gi,mi.hc=Gi,mi.Ea=Bi[0],mi.nc=vi[0],mi.K=[null],++Xi.ab,e(4>=Xi.ab),Gi){case 0:case 1:mi.b=on(hi,3)+2,Ii=Oa(Cn(mi.Ea,mi.b),Cn(mi.nc,mi.b),0,Xi,mi.K),mi.K=mi.K[0];break;case 3:var Qi,Hi=on(hi,8)+1,oa=16<Hi?0:4<Hi?1:2<Hi?2:3;if(Bi[0]=Cn(mi.Ea,oa),mi.b=oa,Qi=Ii=Oa(Hi,1,0,Xi,mi.K)){var ra,fa=Hi,sa=mi,za=1<<(8>>sa.b),Na=Ee(za);if(Na==null)Qi=0;else{var La=sa.K[0],Pa=sa.w;for(Na[0]=sa.K[0][0],ra=1;ra<1*fa;++ra)Na[ra]=Mn(La[Pa+ra],Na[ra-1]);for(;ra<4*za;++ra)Na[ra]=0;sa.K[0]=null,sa.K[0]=Na,Qi=1}}Ii=Qi;break;case 2:break;default:e(0)}kn=Ii}}if(Vn=Vn[0],Ln=Ln[0],kn&&on(Dn,1)&&!(kn=1<=(Ri=on(Dn,4))&&11>=Ri)){dn.a=3;break e}var Ya;if(Ya=kn)t:{var ja,va,Xa,Mr=dn,pr=Vn,Qr=Ln,Fa=Ri,qr=en,cs=Mr.m,Cr=Mr.s,mr=[null],kr=1,ys=0,Vs=Rs[Fa];n:for(;;){if(qr&&on(cs,1)){var Er=on(cs,3)+2,_r=Cn(pr,Er),Vr=Cn(Qr,Er),vs=_r*Vr;if(!Oa(_r,Vr,0,Mr,mr))break n;for(mr=mr[0],Cr.xc=Er,ja=0;ja<vs;++ja){var ao=mr[ja]>>8&65535;mr[ja]=ao,ao>=kr&&(kr=ao+1)}}if(cs.h)break n;for(va=0;5>va;++va){var hr=xl[va];!va&&0<Fa&&(hr+=1<<Fa),ys<hr&&(ys=hr)}var ro=Pe(kr*Vs,St),hs=kr,gr=Pe(hs,_n);if(gr==null)var Al=null;else e(65536>=hs),Al=gr;var bs=Ee(ys);if(Al==null||bs==null||ro==null){Mr.a=1;break n}var Ea=ro;for(ja=Xa=0;ja<kr;++ja){var Ta=Al[ja],ar=Ta.G,Eo=Ta.H,El=0,so=1,Qu=0;for(va=0;5>va;++va){hr=xl[va],ar[va]=Ea,Eo[va]=Xa,!va&&0<Fa&&(hr+=1<<Fa);a:{var nl,il=hr,Rc=Mr,Qa=bs,uh=Ea,ch=Xa,Nc=0,Po=Rc.m,ef=on(Po,1);if(Se(Qa,0,0,il),ef){var hh=on(Po,1)+1,dh=on(Po,1),Mc=on(Po,dh==0?1:8);Qa[Mc]=1,hh==2&&(Qa[Mc=on(Po,8)]=1);var Lr=1}else{var yr=Ee(19),Zu=on(Po,4)+4;if(19<Zu){Rc.a=3;var al=0;break a}for(nl=0;nl<Zu;++nl)yr[Wu[nl]]=on(Po,3);var hu=void 0,Pl=void 0,oo=Rc,kc=yr,du=il,Vc=Qa,Lc=0,wo=oo.m,fh=8,ph=Pe(128,St);i:for(;Je(ph,0,7,kc,19);){if(on(wo,1)){var Wh=2+2*on(wo,3);if((hu=2+on(wo,Wh))>du)break i}else hu=du;for(Pl=0;Pl<du&&hu--;){fn(wo);var mh=ph[0+(127&Oe(wo))];rn(wo,wo.u+mh.g);var rl=mh.value;if(16>rl)Vc[Pl++]=rl,rl!=0&&(fh=rl);else{var $h=rl==16,Kh=rl-16,Qh=ou[Kh],gh=on(wo,Cs[Kh])+Qh;if(Pl+gh>du)break i;for(var Zh=$h?fh:0;0<gh--;)Vc[Pl++]=Zh}}Lc=1;break i}Lc||(oo.a=3),Lr=Lc}(Lr=Lr&&!Po.h)&&(Nc=Je(uh,ch,8,Qa,il)),Lr&&Nc!=0?al=Nc:(Rc.a=3,al=0)}if(al==0)break n;if(so&&Ec[va]==1&&(so=Ea[Xa].g==0),El+=Ea[Xa].g,Xa+=al,3>=va){var wl,Ic=bs[0];for(wl=1;wl<hr;++wl)bs[wl]>Ic&&(Ic=bs[wl]);Qu+=Ic}}if(Ta.nd=so,Ta.Qb=0,so&&(Ta.qb=(ar[3][Eo[3]+0].value<<24|ar[1][Eo[1]+0].value<<16|ar[2][Eo[2]+0].value)>>>0,El==0&&256>ar[0][Eo[0]+0].value&&(Ta.Qb=1,Ta.qb+=ar[0][Eo[0]+0].value<<8)),Ta.jc=!Ta.Qb&&6>Qu,Ta.jc){var tc,lo=Ta;for(tc=0;tc<Rr;++tc){var To=tc,Co=lo.pd[To],Dc=lo.G[0][lo.H[0]+To];256<=Dc.value?(Co.g=Dc.g+256,Co.value=Dc.value):(Co.g=0,Co.value=0,To>>=Wi(Dc,8,Co),To>>=Wi(lo.G[1][lo.H[1]+To],16,Co),To>>=Wi(lo.G[2][lo.H[2]+To],0,Co),Wi(lo.G[3][lo.H[3]+To],24,Co))}}}Cr.vc=mr,Cr.Wb=kr,Cr.Ya=Al,Cr.yc=ro,Ya=1;break t}Ya=0}if(!(kn=Ya)){dn.a=3;break e}if(0<Ri){if(Hn.ua=1<<Ri,!si(Hn.Wa,Ri)){dn.a=1,kn=0;break e}}else Hn.ua=0;var Fc=dn,Tl=Vn,ed=Ln,fu=Fc.s,pu=fu.xc;if(Fc.c=Tl,Fc.i=ed,fu.md=Cn(Tl,pu),fu.wc=pu==0?-1:(1<<pu)-1,en){dn.xb=Ko;break e}if((ci=Ee(Vn*Ln))==null){dn.a=1,kn=0;break e}kn=(kn=ca(dn,ci,0,Vn,Ln,Ln,null))&&!Dn.h;break e}return kn?(Tn!=null?Tn[0]=ci:(e(ci==null),e(en)),dn.$=0,en||ma(Hn)):ma(Hn),kn}function Ba(De,ze){var en=De.c*De.i,dn=en+ze+16*ze;return e(De.c<=ze),De.V=Ee(dn),De.V==null?(De.Ta=null,De.Ua=0,De.a=1,0):(De.Ta=De.V,De.Ua=De.Ba+en+ze,1)}function tr(De,ze){var en=De.C,dn=ze-en,Tn=De.V,kn=De.Ba+De.c*en;for(e(ze<=De.l.o);0<dn;){var Vn=16<dn?16:dn,Ln=De.l.ma,Dn=De.l.width,Hn=Dn*Vn,ci=Ln.ca,Ri=Ln.tb+Dn*en,Bi=De.Ta,vi=De.Ua;ji(De,Vn,Tn,kn),Ua(Bi,vi,ci,Ri,Hn),Zi(Ln,en,en+Vn,ci,Ri,Dn),dn-=Vn,Tn+=Vn*De.c,en+=Vn}e(en==ze),De.C=De.Ma=ze}function wr(){this.ub=this.yd=this.td=this.Rb=0}function Sr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ss(){this.Fb=this.Bb=this.Cb=0,this.Zb=Ee(4),this.Lb=Ee(4)}function No(){this.Yb=(function(){var De=[];return(function ze(en,dn,Tn){for(var kn=Tn[dn],Vn=0;Vn<kn&&(en.push(Tn.length>dn+1?[]:0),!(Tn.length<dn+1));Vn++)ze(en[Vn],dn+1,Tn)})(De,0,[3,11]),De})()}function Mo(){this.jb=Ee(3),this.Wc=Ce([4,8],No),this.Xc=Ce([4,17],No)}function Ar(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new Ee(4),this.od=new Ee(4)}function ll(){this.ld=this.La=this.dd=this.tc=0}function Cu(){this.Na=this.la=0}function fo(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Qs(){this.ad=Ee(384),this.Za=0,this.Ob=Ee(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function nh(){this.uc=this.M=this.Nb=0,this.wa=Array(new ll),this.Y=0,this.ya=Array(new Qs),this.aa=0,this.l=new Fl}function Bu(){this.y=Ee(16),this.f=Ee(8),this.ea=Ee(8)}function sc(){this.cb=this.a=0,this.sc="",this.m=new xn,this.Od=new wr,this.Kc=new Sr,this.ed=new Ar,this.Qa=new ss,this.Ic=this.$c=this.Aa=0,this.D=new nh,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=Pe(8,xn),this.ia=0,this.pb=Pe(4,fo),this.Pa=new Mo,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Bu),this.Hd=0,this.rb=Array(new Cu),this.sb=0,this.wa=Array(new ll),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Qs),this.L=this.aa=0,this.gd=Ce([4,2],ll),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Fl(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ol(){var De=new sc;return De!=null&&(De.a=0,De.sc="OK",De.cb=0,De.Xb=0,gs||(gs=Ru)),De}function sr(De,ze,en){return De.a==0&&(De.a=ze,De.sc=en,De.cb=0),0}function xs(De,ze,en){return 3<=en&&De[ze+0]==157&&De[ze+1]==1&&De[ze+2]==42}function es(De,ze){if(De==null)return 0;if(De.a=0,De.sc="OK",ze==null)return sr(De,2,"null VP8Io passed to VP8GetHeaders()");var en=ze.data,dn=ze.w,Tn=ze.ha;if(4>Tn)return sr(De,7,"Truncated header.");var kn=en[dn+0]|en[dn+1]<<8|en[dn+2]<<16,Vn=De.Od;if(Vn.Rb=!(1&kn),Vn.td=kn>>1&7,Vn.yd=kn>>4&1,Vn.ub=kn>>5,3<Vn.td)return sr(De,3,"Incorrect keyframe parameters.");if(!Vn.yd)return sr(De,4,"Frame not displayable.");dn+=3,Tn-=3;var Ln=De.Kc;if(Vn.Rb){if(7>Tn)return sr(De,7,"cannot parse picture header");if(!xs(en,dn,Tn))return sr(De,3,"Bad code word");Ln.c=16383&(en[dn+4]<<8|en[dn+3]),Ln.Td=en[dn+4]>>6,Ln.i=16383&(en[dn+6]<<8|en[dn+5]),Ln.Ud=en[dn+6]>>6,dn+=7,Tn-=7,De.za=Ln.c+15>>4,De.Ub=Ln.i+15>>4,ze.width=Ln.c,ze.height=Ln.i,ze.Da=0,ze.j=0,ze.v=0,ze.va=ze.width,ze.o=ze.height,ze.da=0,ze.ib=ze.width,ze.hb=ze.height,ze.U=ze.width,ze.T=ze.height,Se((kn=De.Pa).jb,0,255,kn.jb.length),e((kn=De.Qa)!=null),kn.Cb=0,kn.Bb=0,kn.Fb=1,Se(kn.Zb,0,0,kn.Zb.length),Se(kn.Lb,0,0,kn.Lb)}if(Vn.ub>Tn)return sr(De,7,"bad partition length");yn(kn=De.m,en,dn,Vn.ub),dn+=Vn.ub,Tn-=Vn.ub,Vn.Rb&&(Ln.Ld=vn(kn),Ln.Kd=vn(kn)),Ln=De.Qa;var Dn,Hn=De.Pa;if(e(kn!=null),e(Ln!=null),Ln.Cb=vn(kn),Ln.Cb){if(Ln.Bb=vn(kn),vn(kn)){for(Ln.Fb=vn(kn),Dn=0;4>Dn;++Dn)Ln.Zb[Dn]=vn(kn)?Sn(kn,7):0;for(Dn=0;4>Dn;++Dn)Ln.Lb[Dn]=vn(kn)?Sn(kn,6):0}if(Ln.Bb)for(Dn=0;3>Dn;++Dn)Hn.jb[Dn]=vn(kn)?mn(kn,8):255}else Ln.Bb=0;if(kn.Ka)return sr(De,3,"cannot parse segment header");if((Ln=De.ed).zd=vn(kn),Ln.Tb=mn(kn,6),Ln.wb=mn(kn,3),Ln.Pc=vn(kn),Ln.Pc&&vn(kn)){for(Hn=0;4>Hn;++Hn)vn(kn)&&(Ln.vd[Hn]=Sn(kn,6));for(Hn=0;4>Hn;++Hn)vn(kn)&&(Ln.od[Hn]=Sn(kn,6))}if(De.L=Ln.Tb==0?0:Ln.zd?1:2,kn.Ka)return sr(De,3,"cannot parse filter header");var ci=Tn;if(Tn=Dn=dn,dn=Dn+ci,Ln=ci,De.Xb=(1<<mn(De.m,2))-1,ci<3*(Hn=De.Xb))en=7;else{for(Dn+=3*Hn,Ln-=3*Hn,ci=0;ci<Hn;++ci){var Ri=en[Tn+0]|en[Tn+1]<<8|en[Tn+2]<<16;Ri>Ln&&(Ri=Ln),yn(De.Jc[+ci],en,Dn,Ri),Dn+=Ri,Ln-=Ri,Tn+=3}yn(De.Jc[+Hn],en,Dn,Ln),en=Dn<dn?0:5}if(en!=0)return sr(De,en,"cannot parse partitions");for(en=mn(Dn=De.m,7),Tn=vn(Dn)?Sn(Dn,4):0,dn=vn(Dn)?Sn(Dn,4):0,Ln=vn(Dn)?Sn(Dn,4):0,Hn=vn(Dn)?Sn(Dn,4):0,Dn=vn(Dn)?Sn(Dn,4):0,ci=De.Qa,Ri=0;4>Ri;++Ri){if(ci.Cb){var Bi=ci.Zb[Ri];ci.Fb||(Bi+=en)}else{if(0<Ri){De.pb[Ri]=De.pb[0];continue}Bi=en}var vi=De.pb[Ri];vi.Sc[0]=Ns[fs(Bi+Tn,127)],vi.Sc[1]=Ms[fs(Bi+0,127)],vi.Eb[0]=2*Ns[fs(Bi+dn,127)],vi.Eb[1]=101581*Ms[fs(Bi+Ln,127)]>>16,8>vi.Eb[1]&&(vi.Eb[1]=8),vi.Qc[0]=Ns[fs(Bi+Hn,117)],vi.Qc[1]=Ms[fs(Bi+Dn,127)],vi.lc=Bi+Dn}if(!Vn.Rb)return sr(De,4,"Not a key frame.");for(vn(kn),Vn=De.Pa,en=0;4>en;++en){for(Tn=0;8>Tn;++Tn)for(dn=0;3>dn;++dn)for(Ln=0;11>Ln;++Ln)Hn=wn(kn,ir[en][Tn][dn][Ln])?mn(kn,8):Jh[en][Tn][dn][Ln],Vn.Wc[en][Tn].Yb[dn][Ln]=Hn;for(Tn=0;17>Tn;++Tn)Vn.Xc[en][Tn]=Vn.Wc[en][Ra[Tn]]}return De.kc=vn(kn),De.kc&&(De.Bd=mn(kn,8)),De.cb=1}function Ru(De,ze,en,dn,Tn,kn,Vn){var Ln=ze[Tn].Yb[en];for(en=0;16>Tn;++Tn){if(!wn(De,Ln[en+0]))return Tn;for(;!wn(De,Ln[en+1]);)if(Ln=ze[++Tn].Yb[0],en=0,Tn==16)return 16;var Dn=ze[Tn+1].Yb;if(wn(De,Ln[en+2])){var Hn=De,ci=0;if(wn(Hn,(Bi=Ln)[(Ri=en)+3]))if(wn(Hn,Bi[Ri+6])){for(Ln=0,Ri=2*(ci=wn(Hn,Bi[Ri+8]))+(Bi=wn(Hn,Bi[Ri+9+ci])),ci=0,Bi=Yh[Ri];Bi[Ln];++Ln)ci+=ci+wn(Hn,Bi[Ln]);ci+=3+(8<<Ri)}else wn(Hn,Bi[Ri+7])?(ci=7+2*wn(Hn,165),ci+=wn(Hn,145)):ci=5+wn(Hn,159);else ci=wn(Hn,Bi[Ri+4])?3+wn(Hn,Bi[Ri+5]):2;Ln=Dn[2]}else ci=1,Ln=Dn[1];Dn=Vn+sh[Tn],0>(Hn=De).b&&gn(Hn);var Ri,Bi=Hn.b,vi=(Ri=Hn.Ca>>1)-(Hn.I>>Bi)>>31;--Hn.b,Hn.Ca+=vi,Hn.Ca|=1,Hn.I-=(Ri+1&vi)<<Bi,kn[Dn]=((ci^vi)-vi)*dn[(0<Tn)+0]}return 16}function Nu(De){var ze=De.rb[De.sb-1];ze.la=0,ze.Na=0,Se(De.zc,0,0,De.zc.length),De.ja=0}function Mu(De,ze){if(De==null)return 0;if(ze==null)return sr(De,2,"NULL VP8Io parameter in VP8Decode().");if(!De.cb&&!es(De,ze))return 0;if(e(De.cb),ze.ac==null||ze.ac(ze)){ze.ob&&(De.L=0);var en=cu[De.L];if(De.L==2?(De.yb=0,De.zb=0):(De.yb=ze.v-en>>4,De.zb=ze.j-en>>4,0>De.yb&&(De.yb=0),0>De.zb&&(De.zb=0)),De.Va=ze.o+15+en>>4,De.Hb=ze.va+15+en>>4,De.Hb>De.za&&(De.Hb=De.za),De.Va>De.Ub&&(De.Va=De.Ub),0<De.L){var dn=De.ed;for(en=0;4>en;++en){var Tn;if(De.Qa.Cb){var kn=De.Qa.Lb[en];De.Qa.Fb||(kn+=dn.Tb)}else kn=dn.Tb;for(Tn=0;1>=Tn;++Tn){var Vn=De.gd[en][Tn],Ln=kn;if(dn.Pc&&(Ln+=dn.vd[0],Tn&&(Ln+=dn.od[0])),0<(Ln=0>Ln?0:63<Ln?63:Ln)){var Dn=Ln;0<dn.wb&&(Dn=4<dn.wb?Dn>>2:Dn>>1)>9-dn.wb&&(Dn=9-dn.wb),1>Dn&&(Dn=1),Vn.dd=Dn,Vn.tc=2*Ln+Dn,Vn.ld=40<=Ln?2:15<=Ln?1:0}else Vn.tc=0;Vn.La=Tn}}}en=0}else sr(De,6,"Frame setup failed"),en=De.a;if(en=en==0){if(en){De.$c=0,0<De.Aa||(De.Ic=Ku);e:{en=De.Ic,dn=4*(Dn=De.za);var Hn=32*Dn,ci=Dn+1,Ri=0<De.L?Dn*(0<De.Aa?2:1):0,Bi=(De.Aa==2?2:1)*Dn;if((Vn=dn+832+(Tn=3*(16*en+cu[De.L])/2*Hn)+(kn=De.Fa!=null&&0<De.Fa.length?De.Kc.c*De.Kc.i:0))!=Vn)en=0;else{if(Vn>De.Vb){if(De.Vb=0,De.Ec=Ee(Vn),De.Fc=0,De.Ec==null){en=sr(De,1,"no memory during frame initialization.");break e}De.Vb=Vn}Vn=De.Ec,Ln=De.Fc,De.Ac=Vn,De.Bc=Ln,Ln+=dn,De.Gd=Pe(Hn,Bu),De.Hd=0,De.rb=Pe(ci+1,Cu),De.sb=1,De.wa=Ri?Pe(Ri,ll):null,De.Y=0,De.D.Nb=0,De.D.wa=De.wa,De.D.Y=De.Y,0<De.Aa&&(De.D.Y+=Dn),e(!0),De.oc=Vn,De.pc=Ln,Ln+=832,De.ya=Pe(Bi,Qs),De.aa=0,De.D.ya=De.ya,De.D.aa=De.aa,De.Aa==2&&(De.D.aa+=Dn),De.R=16*Dn,De.B=8*Dn,Dn=(Hn=cu[De.L])*De.R,Hn=Hn/2*De.B,De.sa=Vn,De.ta=Ln+Dn,De.qa=De.sa,De.ra=De.ta+16*en*De.R+Hn,De.Ha=De.qa,De.Ia=De.ra+8*en*De.B+Hn,De.$c=0,Ln+=Tn,De.mb=kn?Vn:null,De.nb=kn?Ln:null,e(Ln+kn<=De.Fc+De.Vb),Nu(De),Se(De.Ac,De.Bc,0,dn),en=1}}if(en){if(ze.ka=0,ze.y=De.sa,ze.O=De.ta,ze.f=De.qa,ze.N=De.ra,ze.ea=De.Ha,ze.Vd=De.Ia,ze.fa=De.R,ze.Rc=De.B,ze.F=null,ze.J=0,!au){for(en=-255;255>=en;++en)ur[255+en]=0>en?-en:en;for(en=-1020;1020>=en;++en)Js[1020+en]=-128>en?-128:127<en?127:en;for(en=-112;112>=en;++en)Xo[112+en]=-16>en?-16:15<en?15:en;for(en=-255;510>=en;++en)_o[255+en]=0>en?0:255<en?255:en;au=1}Hs=uc,Gs=oc,vl=zl,Wr=ko,Nr=ku,nr=Ul,Ys=Du,eu=pl,tu=ah,ps=Ou,Go=Fu,xo=Xl,Yo=Uu,nu=pc,bl=Yl,Jo=Es,iu=ds,ms=Jl,fr[0]=Ss,fr[1]=ih,fr[2]=Vo,fr[3]=dc,fr[4]=Lu,fr[5]=ls,fr[6]=Lo,fr[7]=cl,fr[8]=eo,fr[9]=hl,is[0]=ul,is[1]=hc,is[2]=Us,is[3]=jl,is[4]=or,is[5]=Vu,is[6]=Hl,Xs[0]=zs,Xs[1]=cc,Xs[2]=Iu,Xs[3]=Io,Xs[4]=Fo,Xs[5]=Gl,Xs[6]=Br,en=1}else en=0}en&&(en=(function(vi,Xi){for(vi.M=0;vi.M<vi.Va;++vi.M){var Ii,hi=vi.Jc[vi.M&vi.Xb],mi=vi.m,Gi=vi;for(Ii=0;Ii<Gi.za;++Ii){var Qi=mi,Hi=Gi,oa=Hi.Ac,ra=Hi.Bc+4*Ii,fa=Hi.zc,sa=Hi.ya[Hi.aa+Ii];if(Hi.Qa.Bb?sa.$b=wn(Qi,Hi.Pa.jb[0])?2+wn(Qi,Hi.Pa.jb[2]):wn(Qi,Hi.Pa.jb[1]):sa.$b=0,Hi.kc&&(sa.Ad=wn(Qi,Hi.Bd)),sa.Za=!wn(Qi,145)+0,sa.Za){var za=sa.Ob,Na=0;for(Hi=0;4>Hi;++Hi){var La,Pa=fa[0+Hi];for(La=0;4>La;++La){Pa=Ur[oa[ra+La]][Pa];for(var Ya=Pc[wn(Qi,Pa[0])];0<Ya;)Ya=Pc[2*Ya+wn(Qi,Pa[Ya])];Pa=-Ya,oa[ra+La]=Pa}xe(za,Na,oa,ra,4),Na+=4,fa[0+Hi]=Pa}}else Pa=wn(Qi,156)?wn(Qi,128)?1:3:wn(Qi,163)?2:0,sa.Ob[0]=Pa,Se(oa,ra,Pa,4),Se(fa,0,Pa,4);sa.Dd=wn(Qi,142)?wn(Qi,114)?wn(Qi,183)?1:3:2:0}if(Gi.m.Ka)return sr(vi,7,"Premature end-of-partition0 encountered.");for(;vi.ja<vi.za;++vi.ja){if(Gi=hi,Qi=(mi=vi).rb[mi.sb-1],oa=mi.rb[mi.sb+mi.ja],Ii=mi.ya[mi.aa+mi.ja],ra=mi.kc?Ii.Ad:0)Qi.la=oa.la=0,Ii.Za||(Qi.Na=oa.Na=0),Ii.Hc=0,Ii.Gc=0,Ii.ia=0;else{var ja,va;if(Qi=oa,oa=Gi,ra=mi.Pa.Xc,fa=mi.ya[mi.aa+mi.ja],sa=mi.pb[fa.$b],Hi=fa.ad,za=0,Na=mi.rb[mi.sb-1],Pa=La=0,Se(Hi,za,0,384),fa.Za)var Xa=0,Mr=ra[3];else{Ya=Ee(16);var pr=Qi.Na+Na.Na;if(pr=gs(oa,ra[1],pr,sa.Eb,0,Ya,0),Qi.Na=Na.Na=(0<pr)+0,1<pr)Hs(Ya,0,Hi,za);else{var Qr=Ya[0]+3>>3;for(Ya=0;256>Ya;Ya+=16)Hi[za+Ya]=Qr}Xa=1,Mr=ra[0]}var Fa=15&Qi.la,qr=15&Na.la;for(Ya=0;4>Ya;++Ya){var cs=1&qr;for(Qr=va=0;4>Qr;++Qr)Fa=Fa>>1|(cs=(pr=gs(oa,Mr,pr=cs+(1&Fa),sa.Sc,Xa,Hi,za))>Xa)<<7,va=va<<2|(3<pr?3:1<pr?2:Hi[za+0]!=0),za+=16;Fa>>=4,qr=qr>>1|cs<<7,La=(La<<8|va)>>>0}for(Mr=Fa,Xa=qr>>4,ja=0;4>ja;ja+=2){for(va=0,Fa=Qi.la>>4+ja,qr=Na.la>>4+ja,Ya=0;2>Ya;++Ya){for(cs=1&qr,Qr=0;2>Qr;++Qr)pr=cs+(1&Fa),Fa=Fa>>1|(cs=0<(pr=gs(oa,ra[2],pr,sa.Qc,0,Hi,za)))<<3,va=va<<2|(3<pr?3:1<pr?2:Hi[za+0]!=0),za+=16;Fa>>=2,qr=qr>>1|cs<<5}Pa|=va<<4*ja,Mr|=Fa<<4<<ja,Xa|=(240&qr)<<ja}Qi.la=Mr,Na.la=Xa,fa.Hc=La,fa.Gc=Pa,fa.ia=43690&Pa?0:sa.ia,ra=!(La|Pa)}if(0<mi.L&&(mi.wa[mi.Y+mi.ja]=mi.gd[Ii.$b][Ii.Za],mi.wa[mi.Y+mi.ja].La|=!ra),Gi.Ka)return sr(vi,7,"Premature end-of-file encountered.")}if(Nu(vi),mi=Xi,Gi=1,Ii=(hi=vi).D,Qi=0<hi.L&&hi.M>=hi.zb&&hi.M<=hi.Va,hi.Aa==0)e:{if(Ii.M=hi.M,Ii.uc=Qi,Kl(hi,Ii),Gi=1,Ii=(va=hi.D).Nb,Qi=(Pa=cu[hi.L])*hi.R,oa=Pa/2*hi.B,Ya=16*Ii*hi.R,Qr=8*Ii*hi.B,ra=hi.sa,fa=hi.ta-Qi+Ya,sa=hi.qa,Hi=hi.ra-oa+Qr,za=hi.Ha,Na=hi.Ia-oa+Qr,qr=(Fa=va.M)==0,La=Fa>=hi.Va-1,hi.Aa==2&&Kl(hi,va),va.uc)for(cs=(pr=hi).D.M,e(pr.D.uc),va=pr.yb;va<pr.Hb;++va){Xa=va,Mr=cs;var Cr=(mr=(hr=pr).D).Nb;ja=hr.R;var mr=mr.wa[mr.Y+Xa],kr=hr.sa,ys=hr.ta+16*Cr*ja+16*Xa,Vs=mr.dd,Er=mr.tc;if(Er!=0)if(e(3<=Er),hr.L==1)0<Xa&&Jo(kr,ys,ja,Er+4),mr.La&&ms(kr,ys,ja,Er),0<Mr&&bl(kr,ys,ja,Er+4),mr.La&&iu(kr,ys,ja,Er);else{var _r=hr.B,Vr=hr.qa,vs=hr.ra+8*Cr*_r+8*Xa,ao=hr.Ha,hr=hr.Ia+8*Cr*_r+8*Xa;Cr=mr.ld,0<Xa&&(eu(kr,ys,ja,Er+4,Vs,Cr),ps(Vr,vs,ao,hr,_r,Er+4,Vs,Cr)),mr.La&&(xo(kr,ys,ja,Er,Vs,Cr),nu(Vr,vs,ao,hr,_r,Er,Vs,Cr)),0<Mr&&(Ys(kr,ys,ja,Er+4,Vs,Cr),tu(Vr,vs,ao,hr,_r,Er+4,Vs,Cr)),mr.La&&(Go(kr,ys,ja,Er,Vs,Cr),Yo(Vr,vs,ao,hr,_r,Er,Vs,Cr))}}if(hi.ia&&alert("todo:DitherRow"),mi.put!=null){if(va=16*Fa,Fa=16*(Fa+1),qr?(mi.y=hi.sa,mi.O=hi.ta+Ya,mi.f=hi.qa,mi.N=hi.ra+Qr,mi.ea=hi.Ha,mi.W=hi.Ia+Qr):(va-=Pa,mi.y=ra,mi.O=fa,mi.f=sa,mi.N=Hi,mi.ea=za,mi.W=Na),La||(Fa-=Pa),Fa>mi.o&&(Fa=mi.o),mi.F=null,mi.J=null,hi.Fa!=null&&0<hi.Fa.length&&va<Fa&&(mi.J=Wl(hi,mi,va,Fa-va),mi.F=hi.mb,mi.F==null&&mi.F.length==0)){Gi=sr(hi,3,"Could not decode alpha data.");break e}va<mi.j&&(Pa=mi.j-va,va=mi.j,e(!(1&Pa)),mi.O+=hi.R*Pa,mi.N+=hi.B*(Pa>>1),mi.W+=hi.B*(Pa>>1),mi.F!=null&&(mi.J+=mi.width*Pa)),va<Fa&&(mi.O+=mi.v,mi.N+=mi.v>>1,mi.W+=mi.v>>1,mi.F!=null&&(mi.J+=mi.v),mi.ka=va-mi.j,mi.U=mi.va-mi.v,mi.T=Fa-va,Gi=mi.put(mi))}Ii+1!=hi.Ic||La||(xe(hi.sa,hi.ta-Qi,ra,fa+16*hi.R,Qi),xe(hi.qa,hi.ra-oa,sa,Hi+8*hi.B,oa),xe(hi.Ha,hi.Ia-oa,za,Na+8*hi.B,oa))}if(!Gi)return sr(vi,6,"Output aborted.")}return 1})(De,ze)),ze.bc!=null&&ze.bc(ze),en&=1}return en?(De.cb=0,en):0}function _s(De,ze,en,dn,Tn){Tn=De[ze+en+32*dn]+(Tn>>3),De[ze+en+32*dn]=-256&Tn?0>Tn?0:255:Tn}function po(De,ze,en,dn,Tn,kn){_s(De,ze,0,en,dn+Tn),_s(De,ze,1,en,dn+kn),_s(De,ze,2,en,dn-kn),_s(De,ze,3,en,dn-Tn)}function os(De){return(20091*De>>16)+De}function Gr(De,ze,en,dn){var Tn,kn=0,Vn=Ee(16);for(Tn=0;4>Tn;++Tn){var Ln=De[ze+0]+De[ze+8],Dn=De[ze+0]-De[ze+8],Hn=(35468*De[ze+4]>>16)-os(De[ze+12]),ci=os(De[ze+4])+(35468*De[ze+12]>>16);Vn[kn+0]=Ln+ci,Vn[kn+1]=Dn+Hn,Vn[kn+2]=Dn-Hn,Vn[kn+3]=Ln-ci,kn+=4,ze++}for(Tn=kn=0;4>Tn;++Tn)Ln=(De=Vn[kn+0]+4)+Vn[kn+8],Dn=De-Vn[kn+8],Hn=(35468*Vn[kn+4]>>16)-os(Vn[kn+12]),_s(en,dn,0,0,Ln+(ci=os(Vn[kn+4])+(35468*Vn[kn+12]>>16))),_s(en,dn,1,0,Dn+Hn),_s(en,dn,2,0,Dn-Hn),_s(en,dn,3,0,Ln-ci),kn++,dn+=32}function Ul(De,ze,en,dn){var Tn=De[ze+0]+4,kn=35468*De[ze+4]>>16,Vn=os(De[ze+4]),Ln=35468*De[ze+1]>>16;po(en,dn,0,Tn+Vn,De=os(De[ze+1]),Ln),po(en,dn,1,Tn+kn,De,Ln),po(en,dn,2,Tn-kn,De,Ln),po(en,dn,3,Tn-Vn,De,Ln)}function oc(De,ze,en,dn,Tn){Gr(De,ze,en,dn),Tn&&Gr(De,ze+16,en,dn+4)}function zl(De,ze,en,dn){Gs(De,ze+0,en,dn,1),Gs(De,ze+32,en,dn+128,1)}function ko(De,ze,en,dn){var Tn;for(De=De[ze+0]+4,Tn=0;4>Tn;++Tn)for(ze=0;4>ze;++ze)_s(en,dn,ze,Tn,De)}function ku(De,ze,en,dn){De[ze+0]&&Wr(De,ze+0,en,dn),De[ze+16]&&Wr(De,ze+16,en,dn+4),De[ze+32]&&Wr(De,ze+32,en,dn+128),De[ze+48]&&Wr(De,ze+48,en,dn+128+4)}function uc(De,ze,en,dn){var Tn,kn=Ee(16);for(Tn=0;4>Tn;++Tn){var Vn=De[ze+0+Tn]+De[ze+12+Tn],Ln=De[ze+4+Tn]+De[ze+8+Tn],Dn=De[ze+4+Tn]-De[ze+8+Tn],Hn=De[ze+0+Tn]-De[ze+12+Tn];kn[0+Tn]=Vn+Ln,kn[8+Tn]=Vn-Ln,kn[4+Tn]=Hn+Dn,kn[12+Tn]=Hn-Dn}for(Tn=0;4>Tn;++Tn)Vn=(De=kn[0+4*Tn]+3)+kn[3+4*Tn],Ln=kn[1+4*Tn]+kn[2+4*Tn],Dn=kn[1+4*Tn]-kn[2+4*Tn],Hn=De-kn[3+4*Tn],en[dn+0]=Vn+Ln>>3,en[dn+16]=Hn+Dn>>3,en[dn+32]=Vn-Ln>>3,en[dn+48]=Hn-Dn>>3,dn+=64}function Zs(De,ze,en){var dn,Tn=ze-32,kn=$r,Vn=255-De[Tn-1];for(dn=0;dn<en;++dn){var Ln,Dn=kn,Hn=Vn+De[ze-1];for(Ln=0;Ln<en;++Ln)De[ze+Ln]=Dn[Hn+De[Tn+Ln]];ze+=32}}function ih(De,ze){Zs(De,ze,4)}function cc(De,ze){Zs(De,ze,8)}function hc(De,ze){Zs(De,ze,16)}function Us(De,ze){var en;for(en=0;16>en;++en)xe(De,ze+32*en,De,ze-32,16)}function jl(De,ze){var en;for(en=16;0<en;--en)Se(De,ze,De[ze-1],16),ze+=32}function ql(De,ze,en){var dn;for(dn=0;16>dn;++dn)Se(ze,en+32*dn,De,16)}function ul(De,ze){var en,dn=16;for(en=0;16>en;++en)dn+=De[ze-1+32*en]+De[ze+en-32];ql(dn>>5,De,ze)}function or(De,ze){var en,dn=8;for(en=0;16>en;++en)dn+=De[ze-1+32*en];ql(dn>>4,De,ze)}function Vu(De,ze){var en,dn=8;for(en=0;16>en;++en)dn+=De[ze+en-32];ql(dn>>4,De,ze)}function Hl(De,ze){ql(128,De,ze)}function ya(De,ze,en){return De+2*ze+en+2>>2}function Vo(De,ze){var en,dn=ze-32;for(dn=new Uint8Array([ya(De[dn-1],De[dn+0],De[dn+1]),ya(De[dn+0],De[dn+1],De[dn+2]),ya(De[dn+1],De[dn+2],De[dn+3]),ya(De[dn+2],De[dn+3],De[dn+4])]),en=0;4>en;++en)xe(De,ze+32*en,dn,0,dn.length)}function dc(De,ze){var en=De[ze-1],dn=De[ze-1+32],Tn=De[ze-1+64],kn=De[ze-1+96];On(De,ze+0,16843009*ya(De[ze-1-32],en,dn)),On(De,ze+32,16843009*ya(en,dn,Tn)),On(De,ze+64,16843009*ya(dn,Tn,kn)),On(De,ze+96,16843009*ya(Tn,kn,kn))}function Ss(De,ze){var en,dn=4;for(en=0;4>en;++en)dn+=De[ze+en-32]+De[ze-1+32*en];for(dn>>=3,en=0;4>en;++en)Se(De,ze+32*en,dn,4)}function Lu(De,ze){var en=De[ze-1+0],dn=De[ze-1+32],Tn=De[ze-1+64],kn=De[ze-1-32],Vn=De[ze+0-32],Ln=De[ze+1-32],Dn=De[ze+2-32],Hn=De[ze+3-32];De[ze+0+96]=ya(dn,Tn,De[ze-1+96]),De[ze+1+96]=De[ze+0+64]=ya(en,dn,Tn),De[ze+2+96]=De[ze+1+64]=De[ze+0+32]=ya(kn,en,dn),De[ze+3+96]=De[ze+2+64]=De[ze+1+32]=De[ze+0+0]=ya(Vn,kn,en),De[ze+3+64]=De[ze+2+32]=De[ze+1+0]=ya(Ln,Vn,kn),De[ze+3+32]=De[ze+2+0]=ya(Dn,Ln,Vn),De[ze+3+0]=ya(Hn,Dn,Ln)}function Lo(De,ze){var en=De[ze+1-32],dn=De[ze+2-32],Tn=De[ze+3-32],kn=De[ze+4-32],Vn=De[ze+5-32],Ln=De[ze+6-32],Dn=De[ze+7-32];De[ze+0+0]=ya(De[ze+0-32],en,dn),De[ze+1+0]=De[ze+0+32]=ya(en,dn,Tn),De[ze+2+0]=De[ze+1+32]=De[ze+0+64]=ya(dn,Tn,kn),De[ze+3+0]=De[ze+2+32]=De[ze+1+64]=De[ze+0+96]=ya(Tn,kn,Vn),De[ze+3+32]=De[ze+2+64]=De[ze+1+96]=ya(kn,Vn,Ln),De[ze+3+64]=De[ze+2+96]=ya(Vn,Ln,Dn),De[ze+3+96]=ya(Ln,Dn,Dn)}function ls(De,ze){var en=De[ze-1+0],dn=De[ze-1+32],Tn=De[ze-1+64],kn=De[ze-1-32],Vn=De[ze+0-32],Ln=De[ze+1-32],Dn=De[ze+2-32],Hn=De[ze+3-32];De[ze+0+0]=De[ze+1+64]=kn+Vn+1>>1,De[ze+1+0]=De[ze+2+64]=Vn+Ln+1>>1,De[ze+2+0]=De[ze+3+64]=Ln+Dn+1>>1,De[ze+3+0]=Dn+Hn+1>>1,De[ze+0+96]=ya(Tn,dn,en),De[ze+0+64]=ya(dn,en,kn),De[ze+0+32]=De[ze+1+96]=ya(en,kn,Vn),De[ze+1+32]=De[ze+2+96]=ya(kn,Vn,Ln),De[ze+2+32]=De[ze+3+96]=ya(Vn,Ln,Dn),De[ze+3+32]=ya(Ln,Dn,Hn)}function cl(De,ze){var en=De[ze+0-32],dn=De[ze+1-32],Tn=De[ze+2-32],kn=De[ze+3-32],Vn=De[ze+4-32],Ln=De[ze+5-32],Dn=De[ze+6-32],Hn=De[ze+7-32];De[ze+0+0]=en+dn+1>>1,De[ze+1+0]=De[ze+0+64]=dn+Tn+1>>1,De[ze+2+0]=De[ze+1+64]=Tn+kn+1>>1,De[ze+3+0]=De[ze+2+64]=kn+Vn+1>>1,De[ze+0+32]=ya(en,dn,Tn),De[ze+1+32]=De[ze+0+96]=ya(dn,Tn,kn),De[ze+2+32]=De[ze+1+96]=ya(Tn,kn,Vn),De[ze+3+32]=De[ze+2+96]=ya(kn,Vn,Ln),De[ze+3+64]=ya(Vn,Ln,Dn),De[ze+3+96]=ya(Ln,Dn,Hn)}function hl(De,ze){var en=De[ze-1+0],dn=De[ze-1+32],Tn=De[ze-1+64],kn=De[ze-1+96];De[ze+0+0]=en+dn+1>>1,De[ze+2+0]=De[ze+0+32]=dn+Tn+1>>1,De[ze+2+32]=De[ze+0+64]=Tn+kn+1>>1,De[ze+1+0]=ya(en,dn,Tn),De[ze+3+0]=De[ze+1+32]=ya(dn,Tn,kn),De[ze+3+32]=De[ze+1+64]=ya(Tn,kn,kn),De[ze+3+64]=De[ze+2+64]=De[ze+0+96]=De[ze+1+96]=De[ze+2+96]=De[ze+3+96]=kn}function eo(De,ze){var en=De[ze-1+0],dn=De[ze-1+32],Tn=De[ze-1+64],kn=De[ze-1+96],Vn=De[ze-1-32],Ln=De[ze+0-32],Dn=De[ze+1-32],Hn=De[ze+2-32];De[ze+0+0]=De[ze+2+32]=en+Vn+1>>1,De[ze+0+32]=De[ze+2+64]=dn+en+1>>1,De[ze+0+64]=De[ze+2+96]=Tn+dn+1>>1,De[ze+0+96]=kn+Tn+1>>1,De[ze+3+0]=ya(Ln,Dn,Hn),De[ze+2+0]=ya(Vn,Ln,Dn),De[ze+1+0]=De[ze+3+32]=ya(en,Vn,Ln),De[ze+1+32]=De[ze+3+64]=ya(dn,en,Vn),De[ze+1+64]=De[ze+3+96]=ya(Tn,dn,en),De[ze+1+96]=ya(kn,Tn,dn)}function Iu(De,ze){var en;for(en=0;8>en;++en)xe(De,ze+32*en,De,ze-32,8)}function Io(De,ze){var en;for(en=0;8>en;++en)Se(De,ze,De[ze-1],8),ze+=32}function Do(De,ze,en){var dn;for(dn=0;8>dn;++dn)Se(ze,en+32*dn,De,8)}function zs(De,ze){var en,dn=8;for(en=0;8>en;++en)dn+=De[ze+en-32]+De[ze-1+32*en];Do(dn>>4,De,ze)}function Gl(De,ze){var en,dn=4;for(en=0;8>en;++en)dn+=De[ze+en-32];Do(dn>>3,De,ze)}function Fo(De,ze){var en,dn=4;for(en=0;8>en;++en)dn+=De[ze-1+32*en];Do(dn>>3,De,ze)}function Br(De,ze){Do(128,De,ze)}function As(De,ze,en){var dn=De[ze-en],Tn=De[ze+0],kn=3*(Tn-dn)+So[1020+De[ze-2*en]-De[ze+en]],Vn=Yu[112+(kn+4>>3)];De[ze-en]=$r[255+dn+Yu[112+(kn+3>>3)]],De[ze+0]=$r[255+Tn-Vn]}function dl(De,ze,en,dn){var Tn=De[ze+0],kn=De[ze+en];return Or[255+De[ze-2*en]-De[ze-en]]>dn||Or[255+kn-Tn]>dn}function Oo(De,ze,en,dn){return 4*Or[255+De[ze-en]-De[ze+0]]+Or[255+De[ze-2*en]-De[ze+en]]<=dn}function fc(De,ze,en,dn,Tn){var kn=De[ze-3*en],Vn=De[ze-2*en],Ln=De[ze-en],Dn=De[ze+0],Hn=De[ze+en],ci=De[ze+2*en],Ri=De[ze+3*en];return 4*Or[255+Ln-Dn]+Or[255+Vn-Hn]>dn?0:Or[255+De[ze-4*en]-kn]<=Tn&&Or[255+kn-Vn]<=Tn&&Or[255+Vn-Ln]<=Tn&&Or[255+Ri-ci]<=Tn&&Or[255+ci-Hn]<=Tn&&Or[255+Hn-Dn]<=Tn}function Yl(De,ze,en,dn){var Tn=2*dn+1;for(dn=0;16>dn;++dn)Oo(De,ze+dn,en,Tn)&&As(De,ze+dn,en)}function Es(De,ze,en,dn){var Tn=2*dn+1;for(dn=0;16>dn;++dn)Oo(De,ze+dn*en,1,Tn)&&As(De,ze+dn*en,1)}function ds(De,ze,en,dn){var Tn;for(Tn=3;0<Tn;--Tn)Yl(De,ze+=4*en,en,dn)}function Jl(De,ze,en,dn){var Tn;for(Tn=3;0<Tn;--Tn)Es(De,ze+=4,en,dn)}function mo(De,ze,en,dn,Tn,kn,Vn,Ln){for(kn=2*kn+1;0<Tn--;){if(fc(De,ze,en,kn,Vn))if(dl(De,ze,en,Ln))As(De,ze,en);else{var Dn=De,Hn=ze,ci=en,Ri=Dn[Hn-2*ci],Bi=Dn[Hn-ci],vi=Dn[Hn+0],Xi=Dn[Hn+ci],Ii=Dn[Hn+2*ci],hi=27*(Gi=So[1020+3*(vi-Bi)+So[1020+Ri-Xi]])+63>>7,mi=18*Gi+63>>7,Gi=9*Gi+63>>7;Dn[Hn-3*ci]=$r[255+Dn[Hn-3*ci]+Gi],Dn[Hn-2*ci]=$r[255+Ri+mi],Dn[Hn-ci]=$r[255+Bi+hi],Dn[Hn+0]=$r[255+vi-hi],Dn[Hn+ci]=$r[255+Xi-mi],Dn[Hn+2*ci]=$r[255+Ii-Gi]}ze+=dn}}function js(De,ze,en,dn,Tn,kn,Vn,Ln){for(kn=2*kn+1;0<Tn--;){if(fc(De,ze,en,kn,Vn))if(dl(De,ze,en,Ln))As(De,ze,en);else{var Dn=De,Hn=ze,ci=en,Ri=Dn[Hn-ci],Bi=Dn[Hn+0],vi=Dn[Hn+ci],Xi=Yu[112+((Ii=3*(Bi-Ri))+4>>3)],Ii=Yu[112+(Ii+3>>3)],hi=Xi+1>>1;Dn[Hn-2*ci]=$r[255+Dn[Hn-2*ci]+hi],Dn[Hn-ci]=$r[255+Ri+Ii],Dn[Hn+0]=$r[255+Bi-Xi],Dn[Hn+ci]=$r[255+vi-hi]}ze+=dn}}function Du(De,ze,en,dn,Tn,kn){mo(De,ze,en,1,16,dn,Tn,kn)}function pl(De,ze,en,dn,Tn,kn){mo(De,ze,1,en,16,dn,Tn,kn)}function Fu(De,ze,en,dn,Tn,kn){var Vn;for(Vn=3;0<Vn;--Vn)js(De,ze+=4*en,en,1,16,dn,Tn,kn)}function Xl(De,ze,en,dn,Tn,kn){var Vn;for(Vn=3;0<Vn;--Vn)js(De,ze+=4,1,en,16,dn,Tn,kn)}function ah(De,ze,en,dn,Tn,kn,Vn,Ln){mo(De,ze,Tn,1,8,kn,Vn,Ln),mo(en,dn,Tn,1,8,kn,Vn,Ln)}function Ou(De,ze,en,dn,Tn,kn,Vn,Ln){mo(De,ze,1,Tn,8,kn,Vn,Ln),mo(en,dn,1,Tn,8,kn,Vn,Ln)}function Uu(De,ze,en,dn,Tn,kn,Vn,Ln){js(De,ze+4*Tn,Tn,1,8,kn,Vn,Ln),js(en,dn+4*Tn,Tn,1,8,kn,Vn,Ln)}function pc(De,ze,en,dn,Tn,kn,Vn,Ln){js(De,ze+4,1,Tn,8,kn,Vn,Ln),js(en,dn+4,1,Tn,8,kn,Vn,Ln)}function ml(){this.ba=new Rn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Xn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function zu(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ju(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function mc(){this.ua=0,this.Wa=new En,this.vb=new En,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new _n,this.yc=new St}function rh(){this.xb=this.a=0,this.l=new Fl,this.ca=new Rn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Ge,this.Pb=0,this.wd=new Ge,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new mc,this.ab=0,this.gc=Pe(4,ju),this.Oc=0}function Uo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Fl,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function gl(De,ze,en,dn,Tn,kn,Vn){for(De=De==null?0:De[ze+0],ze=0;ze<Vn;++ze)Tn[kn+ze]=De+en[dn+ze]&255,De=Tn[kn+ze]}function qu(De,ze,en,dn,Tn,kn,Vn){var Ln;if(De==null)gl(null,null,en,dn,Tn,kn,Vn);else for(Ln=0;Ln<Vn;++Ln)Tn[kn+Ln]=De[ze+Ln]+en[dn+Ln]&255}function zo(De,ze,en,dn,Tn,kn,Vn){if(De==null)gl(null,null,en,dn,Tn,kn,Vn);else{var Ln,Dn=De[ze+0],Hn=Dn,ci=Dn;for(Ln=0;Ln<Vn;++Ln)Hn=ci+(Dn=De[ze+Ln])-Hn,ci=en[dn+Ln]+(-256&Hn?0>Hn?0:255:Hn)&255,Hn=Dn,Tn[kn+Ln]=ci}}function Wl(De,ze,en,dn){var Tn=ze.width,kn=ze.o;if(e(De!=null&&ze!=null),0>en||0>=dn||en+dn>kn)return null;if(!De.Cc){if(De.ga==null){var Vn;if(De.ga=new Uo,(Vn=De.ga==null)||(Vn=ze.width*ze.o,e(De.Gb.length==0),De.Gb=Ee(Vn),De.Uc=0,De.Gb==null?Vn=0:(De.mb=De.Gb,De.nb=De.Uc,De.rc=null,Vn=1),Vn=!Vn),!Vn){Vn=De.ga;var Ln=De.Fa,Dn=De.P,Hn=De.qc,ci=De.mb,Ri=De.nb,Bi=Dn+1,vi=Hn-1,Xi=Vn.l;if(e(Ln!=null&&ci!=null&&ze!=null),Ao[0]=null,Ao[1]=gl,Ao[2]=qu,Ao[3]=zo,Vn.ca=ci,Vn.tb=Ri,Vn.c=ze.width,Vn.i=ze.height,e(0<Vn.c&&0<Vn.i),1>=Hn)ze=0;else if(Vn.$a=Ln[Dn+0]>>0&3,Vn.Z=Ln[Dn+0]>>2&3,Vn.Lc=Ln[Dn+0]>>4&3,Dn=Ln[Dn+0]>>6&3,0>Vn.$a||1<Vn.$a||4<=Vn.Z||1<Vn.Lc||Dn)ze=0;else if(Xi.put=Nn,Xi.ac=Fn,Xi.bc=Gn,Xi.ma=Vn,Xi.width=ze.width,Xi.height=ze.height,Xi.Da=ze.Da,Xi.v=ze.v,Xi.va=ze.va,Xi.j=ze.j,Xi.o=ze.o,Vn.$a)e:{e(Vn.$a==1),ze=xa();t:for(;;){if(ze==null){ze=0;break e}if(e(Vn!=null),Vn.mc=ze,ze.c=Vn.c,ze.i=Vn.i,ze.l=Vn.l,ze.l.ma=Vn,ze.l.width=Vn.c,ze.l.height=Vn.i,ze.a=0,Pn(ze.m,Ln,Bi,vi),!Oa(Vn.c,Vn.i,1,ze,null)||(ze.ab==1&&ze.gc[0].hc==3&&ia(ze.s)?(Vn.ic=1,Ln=ze.c*ze.i,ze.Ta=null,ze.Ua=0,ze.V=Ee(Ln),ze.Ba=0,ze.V==null?(ze.a=1,ze=0):ze=1):(Vn.ic=0,ze=Ba(ze,Vn.c)),!ze))break t;ze=1;break e}Vn.mc=null,ze=0}else ze=vi>=Vn.c*Vn.i;Vn=!ze}if(Vn)return null;De.ga.Lc!=1?De.Ga=0:dn=kn-en}e(De.ga!=null),e(en+dn<=kn);e:{if(ze=(Ln=De.ga).c,kn=Ln.l.o,Ln.$a==0){if(Bi=De.rc,vi=De.Vc,Xi=De.Fa,Dn=De.P+1+en*ze,Hn=De.mb,ci=De.nb+en*ze,e(Dn<=De.P+De.qc),Ln.Z!=0)for(e(Ao[Ln.Z]!=null),Vn=0;Vn<dn;++Vn)Ao[Ln.Z](Bi,vi,Xi,Dn,Hn,ci,ze),Bi=Hn,vi=ci,ci+=ze,Dn+=ze;else for(Vn=0;Vn<dn;++Vn)xe(Hn,ci,Xi,Dn,ze),Bi=Hn,vi=ci,ci+=ze,Dn+=ze;De.rc=Bi,De.Vc=vi}else{if(e(Ln.mc!=null),ze=en+dn,e((Vn=Ln.mc)!=null),e(ze<=Vn.i),Vn.C>=ze)ze=1;else if(Ln.ic||Ei(),Ln.ic){Ln=Vn.V,Bi=Vn.Ba,vi=Vn.c;var Ii=Vn.i,hi=(Xi=1,Dn=Vn.$/vi,Hn=Vn.$%vi,ci=Vn.m,Ri=Vn.s,Vn.$),mi=vi*Ii,Gi=vi*ze,Qi=Ri.wc,Hi=hi<Gi?qi(Ri,Hn,Dn):null;e(hi<=mi),e(ze<=Ii),e(ia(Ri));t:for(;;){for(;!ci.h&&hi<Gi;){if(Hn&Qi||(Hi=qi(Ri,Hn,Dn)),e(Hi!=null),fn(ci),256>(Ii=Ti(Hi.G[0],Hi.H[0],ci)))Ln[Bi+hi]=Ii,++hi,++Hn>=vi&&(Hn=0,++Dn<=ze&&!(Dn%16)&&aa(Vn,Dn));else{if(!(280>Ii)){Xi=0;break t}Ii=ii(Ii-256,ci);var oa,ra=Ti(Hi.G[4],Hi.H[4],ci);if(fn(ci),!(hi>=(ra=gi(vi,ra=ii(ra,ci)))&&mi-hi>=Ii)){Xi=0;break t}for(oa=0;oa<Ii;++oa)Ln[Bi+hi+oa]=Ln[Bi+hi+oa-ra];for(hi+=Ii,Hn+=Ii;Hn>=vi;)Hn-=vi,++Dn<=ze&&!(Dn%16)&&aa(Vn,Dn);hi<Gi&&Hn&Qi&&(Hi=qi(Ri,Hn,Dn))}e(ci.h==$e(ci))}aa(Vn,Dn>ze?ze:Dn);break t}!Xi||ci.h&&hi<mi?(Xi=0,Vn.a=ci.h?5:3):Vn.$=hi,ze=Xi}else ze=ca(Vn,Vn.V,Vn.Ba,Vn.c,Vn.i,ze,tr);if(!ze){dn=0;break e}}en+dn>=kn&&(De.Cc=1),dn=1}if(!dn)return null;if(De.Cc&&((dn=De.ga)!=null&&(dn.mc=null),De.ga=null,0<De.Ga))return alert("todo:WebPDequantizeLevels"),null}return De.nb+en*Tn}function Ke(De,ze,en,dn,Tn,kn){for(;0<Tn--;){var Vn,Ln=De,Dn=ze+(en?1:0),Hn=De,ci=ze+(en?0:3);for(Vn=0;Vn<dn;++Vn){var Ri=Hn[ci+4*Vn];Ri!=255&&(Ri*=32897,Ln[Dn+4*Vn+0]=Ln[Dn+4*Vn+0]*Ri>>23,Ln[Dn+4*Vn+1]=Ln[Dn+4*Vn+1]*Ri>>23,Ln[Dn+4*Vn+2]=Ln[Dn+4*Vn+2]*Ri>>23)}ze+=kn}}function Bn(De,ze,en,dn,Tn){for(;0<dn--;){var kn;for(kn=0;kn<en;++kn){var Vn=De[ze+2*kn+0],Ln=15&(Hn=De[ze+2*kn+1]),Dn=4369*Ln,Hn=(240&Hn|Hn>>4)*Dn>>16;De[ze+2*kn+0]=(240&Vn|Vn>>4)*Dn>>16&240|(15&Vn|Vn<<4)*Dn>>16>>4&15,De[ze+2*kn+1]=240&Hn|Ln}ze+=Tn}}function Jn(De,ze,en,dn,Tn,kn,Vn,Ln){var Dn,Hn,ci=255;for(Hn=0;Hn<Tn;++Hn){for(Dn=0;Dn<dn;++Dn){var Ri=De[ze+Dn];kn[Vn+4*Dn]=Ri,ci&=Ri}ze+=en,Vn+=Ln}return ci!=255}function ui(De,ze,en,dn,Tn){var kn;for(kn=0;kn<Tn;++kn)en[dn+kn]=De[ze+kn]>>8}function Ei(){us=Ke,Ca=Bn,Ga=Jn,Ua=ui}function Fi(De,ze,en){tn[De]=function(dn,Tn,kn,Vn,Ln,Dn,Hn,ci,Ri,Bi,vi,Xi,Ii,hi,mi,Gi,Qi){var Hi,oa=Qi-1>>1,ra=Ln[Dn+0]|Hn[ci+0]<<16,fa=Ri[Bi+0]|vi[Xi+0]<<16;e(dn!=null);var sa=3*ra+fa+131074>>2;for(ze(dn[Tn+0],255&sa,sa>>16,Ii,hi),kn!=null&&(sa=3*fa+ra+131074>>2,ze(kn[Vn+0],255&sa,sa>>16,mi,Gi)),Hi=1;Hi<=oa;++Hi){var za=Ln[Dn+Hi]|Hn[ci+Hi]<<16,Na=Ri[Bi+Hi]|vi[Xi+Hi]<<16,La=ra+za+fa+Na+524296,Pa=La+2*(za+fa)>>3;sa=Pa+ra>>1,ra=(La=La+2*(ra+Na)>>3)+za>>1,ze(dn[Tn+2*Hi-1],255&sa,sa>>16,Ii,hi+(2*Hi-1)*en),ze(dn[Tn+2*Hi-0],255&ra,ra>>16,Ii,hi+(2*Hi-0)*en),kn!=null&&(sa=La+fa>>1,ra=Pa+Na>>1,ze(kn[Vn+2*Hi-1],255&sa,sa>>16,mi,Gi+(2*Hi-1)*en),ze(kn[Vn+2*Hi+0],255&ra,ra>>16,mi,Gi+(2*Hi+0)*en)),ra=za,fa=Na}1&Qi||(sa=3*ra+fa+131074>>2,ze(dn[Tn+Qi-1],255&sa,sa>>16,Ii,hi+(Qi-1)*en),kn!=null&&(sa=3*fa+ra+131074>>2,ze(kn[Vn+Qi-1],255&sa,sa>>16,mi,Gi+(Qi-1)*en)))}}function ta(){zr[xc]=_l,zr[Kr]=lu,zr[_c]=lh,zr[Ts]=wc,zr[Ju]=Qo,zr[ru]=io,zr[Wo]=Zo,zr[Xu]=lu,zr[Sc]=wc,zr[su]=Qo,zr[Ac]=io}function ua(De){return De&-16384?0>De?0:255:De>>Tc}function pa(De,ze){return ua((19077*De>>8)+(26149*ze>>8)-14234)}function Aa(De,ze,en){return ua((19077*De>>8)-(6419*ze>>8)-(13320*en>>8)+8708)}function Sa(De,ze){return ua((19077*De>>8)+(33050*ze>>8)-17685)}function Va(De,ze,en,dn,Tn){dn[Tn+0]=pa(De,en),dn[Tn+1]=Aa(De,ze,en),dn[Tn+2]=Sa(De,ze)}function lr(De,ze,en,dn,Tn){dn[Tn+0]=Sa(De,ze),dn[Tn+1]=Aa(De,ze,en),dn[Tn+2]=pa(De,en)}function cr(De,ze,en,dn,Tn){var kn=Aa(De,ze,en);ze=kn<<3&224|Sa(De,ze)>>3,dn[Tn+0]=248&pa(De,en)|kn>>5,dn[Tn+1]=ze}function br(De,ze,en,dn,Tn){var kn=240&Sa(De,ze)|15;dn[Tn+0]=240&pa(De,en)|Aa(De,ze,en)>>4,dn[Tn+1]=kn}function Fr(De,ze,en,dn,Tn){dn[Tn+0]=255,Va(De,ze,en,dn,Tn+1)}function Tr(De,ze,en,dn,Tn){lr(De,ze,en,dn,Tn),dn[Tn+3]=255}function Yr(De,ze,en,dn,Tn){Va(De,ze,en,dn,Tn),dn[Tn+3]=255}function fs(De,ze){return 0>De?0:De>ze?ze:De}function to(De,ze,en){tn[De]=function(dn,Tn,kn,Vn,Ln,Dn,Hn,ci,Ri){for(var Bi=ci+(-2&Ri)*en;ci!=Bi;)ze(dn[Tn+0],kn[Vn+0],Ln[Dn+0],Hn,ci),ze(dn[Tn+1],kn[Vn+0],Ln[Dn+0],Hn,ci+en),Tn+=2,++Vn,++Dn,ci+=2*en;1&Ri&&ze(dn[Tn+0],kn[Vn+0],Ln[Dn+0],Hn,ci)}}function gc(De,ze,en){return en==0?De==0?ze==0?6:5:ze==0?4:0:en}function $l(De,ze,en,dn,Tn){switch(De>>>30){case 3:Gs(ze,en,dn,Tn,0);break;case 2:nr(ze,en,dn,Tn);break;case 1:Wr(ze,en,dn,Tn)}}function Kl(De,ze){var en,dn,Tn=ze.M,kn=ze.Nb,Vn=De.oc,Ln=De.pc+40,Dn=De.oc,Hn=De.pc+584,ci=De.oc,Ri=De.pc+600;for(en=0;16>en;++en)Vn[Ln+32*en-1]=129;for(en=0;8>en;++en)Dn[Hn+32*en-1]=129,ci[Ri+32*en-1]=129;for(0<Tn?Vn[Ln-1-32]=Dn[Hn-1-32]=ci[Ri-1-32]=129:(Se(Vn,Ln-32-1,127,21),Se(Dn,Hn-32-1,127,9),Se(ci,Ri-32-1,127,9)),dn=0;dn<De.za;++dn){var Bi=ze.ya[ze.aa+dn];if(0<dn){for(en=-1;16>en;++en)xe(Vn,Ln+32*en-4,Vn,Ln+32*en+12,4);for(en=-1;8>en;++en)xe(Dn,Hn+32*en-4,Dn,Hn+32*en+4,4),xe(ci,Ri+32*en-4,ci,Ri+32*en+4,4)}var vi=De.Gd,Xi=De.Hd+dn,Ii=Bi.ad,hi=Bi.Hc;if(0<Tn&&(xe(Vn,Ln-32,vi[Xi].y,0,16),xe(Dn,Hn-32,vi[Xi].f,0,8),xe(ci,Ri-32,vi[Xi].ea,0,8)),Bi.Za){var mi=Vn,Gi=Ln-32+16;for(0<Tn&&(dn>=De.za-1?Se(mi,Gi,vi[Xi].y[15],4):xe(mi,Gi,vi[Xi+1].y,0,4)),en=0;4>en;en++)mi[Gi+128+en]=mi[Gi+256+en]=mi[Gi+384+en]=mi[Gi+0+en];for(en=0;16>en;++en,hi<<=2)mi=Vn,Gi=Ln+xr[en],fr[Bi.Ob[en]](mi,Gi),$l(hi,Ii,16*+en,mi,Gi)}else if(mi=gc(dn,Tn,Bi.Ob[0]),is[mi](Vn,Ln),hi!=0)for(en=0;16>en;++en,hi<<=2)$l(hi,Ii,16*+en,Vn,Ln+xr[en]);for(en=Bi.Gc,mi=gc(dn,Tn,Bi.Dd),Xs[mi](Dn,Hn),Xs[mi](ci,Ri),hi=Ii,mi=Dn,Gi=Hn,255&(Bi=en>>0)&&(170&Bi?vl(hi,256,mi,Gi):Nr(hi,256,mi,Gi)),Bi=ci,hi=Ri,255&(en>>=8)&&(170&en?vl(Ii,320,Bi,hi):Nr(Ii,320,Bi,hi)),Tn<De.Ub-1&&(xe(vi[Xi].y,0,Vn,Ln+480,16),xe(vi[Xi].f,0,Dn,Hn+224,8),xe(vi[Xi].ea,0,ci,Ri+224,8)),en=8*kn*De.B,vi=De.sa,Xi=De.ta+16*dn+16*kn*De.R,Ii=De.qa,Bi=De.ra+8*dn+en,hi=De.Ha,mi=De.Ia+8*dn+en,en=0;16>en;++en)xe(vi,Xi+en*De.R,Vn,Ln+32*en,16);for(en=0;8>en;++en)xe(Ii,Bi+en*De.B,Dn,Hn+32*en,8),xe(hi,mi+en*De.B,ci,Ri+32*en,8)}}function no(De,ze,en,dn,Tn,kn,Vn,Ln,Dn){var Hn=[0],ci=[0],Ri=0,Bi=Dn!=null?Dn.kd:0,vi=Dn??new zu;if(De==null||12>en)return 7;vi.data=De,vi.w=ze,vi.ha=en,ze=[ze],en=[en],vi.gb=[vi.gb];e:{var Xi=ze,Ii=en,hi=vi.gb;if(e(De!=null),e(Ii!=null),e(hi!=null),hi[0]=0,12<=Ii[0]&&!r(De,Xi[0],"RIFF")){if(r(De,Xi[0]+8,"WEBP")){hi=3;break e}var mi=ti(De,Xi[0]+4);if(12>mi||4294967286<mi){hi=3;break e}if(Bi&&mi>Ii[0]-8){hi=7;break e}hi[0]=mi,Xi[0]+=12,Ii[0]-=12}hi=0}if(hi!=0)return hi;for(mi=0<vi.gb[0],en=en[0];;){e:{var Gi=De;Ii=ze,hi=en;var Qi=Hn,Hi=ci,oa=Xi=[0];if((sa=Ri=[Ri])[0]=0,8>hi[0])hi=7;else{if(!r(Gi,Ii[0],"VP8X")){if(ti(Gi,Ii[0]+4)!=10){hi=3;break e}if(18>hi[0]){hi=7;break e}var ra=ti(Gi,Ii[0]+8),fa=1+Wn(Gi,Ii[0]+12);if(2147483648<=fa*(Gi=1+Wn(Gi,Ii[0]+15))){hi=3;break e}oa!=null&&(oa[0]=ra),Qi!=null&&(Qi[0]=fa),Hi!=null&&(Hi[0]=Gi),Ii[0]+=18,hi[0]-=18,sa[0]=1}hi=0}}if(Ri=Ri[0],Xi=Xi[0],hi!=0)return hi;if(Ii=!!(2&Xi),!mi&&Ri)return 3;if(kn!=null&&(kn[0]=!!(16&Xi)),Vn!=null&&(Vn[0]=Ii),Ln!=null&&(Ln[0]=0),Vn=Hn[0],Xi=ci[0],Ri&&Ii&&Dn==null){hi=0;break}if(4>en){hi=7;break}if(mi&&Ri||!mi&&!Ri&&!r(De,ze[0],"ALPH")){en=[en],vi.na=[vi.na],vi.P=[vi.P],vi.Sa=[vi.Sa];e:{ra=De,hi=ze,mi=en;var sa=vi.gb;Qi=vi.na,Hi=vi.P,oa=vi.Sa,fa=22,e(ra!=null),e(mi!=null),Gi=hi[0];var za=mi[0];for(e(Qi!=null),e(oa!=null),Qi[0]=null,Hi[0]=null,oa[0]=0;;){if(hi[0]=Gi,mi[0]=za,8>za){hi=7;break e}var Na=ti(ra,Gi+4);if(4294967286<Na){hi=3;break e}var La=8+Na+1&-2;if(fa+=La,0<sa&&fa>sa){hi=3;break e}if(!r(ra,Gi,"VP8 ")||!r(ra,Gi,"VP8L")){hi=0;break e}if(za[0]<La){hi=7;break e}r(ra,Gi,"ALPH")||(Qi[0]=ra,Hi[0]=Gi+8,oa[0]=Na),Gi+=La,za-=La}}if(en=en[0],vi.na=vi.na[0],vi.P=vi.P[0],vi.Sa=vi.Sa[0],hi!=0)break}en=[en],vi.Ja=[vi.Ja],vi.xa=[vi.xa];e:if(sa=De,hi=ze,mi=en,Qi=vi.gb[0],Hi=vi.Ja,oa=vi.xa,ra=hi[0],Gi=!r(sa,ra,"VP8 "),fa=!r(sa,ra,"VP8L"),e(sa!=null),e(mi!=null),e(Hi!=null),e(oa!=null),8>mi[0])hi=7;else{if(Gi||fa){if(sa=ti(sa,ra+4),12<=Qi&&sa>Qi-12){hi=3;break e}if(Bi&&sa>mi[0]-8){hi=7;break e}Hi[0]=sa,hi[0]+=8,mi[0]-=8,oa[0]=fa}else oa[0]=5<=mi[0]&&sa[ra+0]==47&&!(sa[ra+4]>>5),Hi[0]=mi[0];hi=0}if(en=en[0],vi.Ja=vi.Ja[0],vi.xa=vi.xa[0],ze=ze[0],hi!=0)break;if(4294967286<vi.Ja)return 3;if(Ln==null||Ii||(Ln[0]=vi.xa?2:1),Vn=[Vn],Xi=[Xi],vi.xa){if(5>en){hi=7;break}Ln=Vn,Bi=Xi,Ii=kn,De==null||5>en?De=0:5<=en&&De[ze+0]==47&&!(De[ze+4]>>5)?(mi=[0],sa=[0],Qi=[0],Pn(Hi=new Ge,De,ze,en),ei(Hi,mi,sa,Qi)?(Ln!=null&&(Ln[0]=mi[0]),Bi!=null&&(Bi[0]=sa[0]),Ii!=null&&(Ii[0]=Qi[0]),De=1):De=0):De=0}else{if(10>en){hi=7;break}Ln=Xi,De==null||10>en||!xs(De,ze+3,en-3)?De=0:(Bi=De[ze+0]|De[ze+1]<<8|De[ze+2]<<16,Ii=16383&(De[ze+7]<<8|De[ze+6]),De=16383&(De[ze+9]<<8|De[ze+8]),1&Bi||3<(Bi>>1&7)||!(Bi>>4&1)||Bi>>5>=vi.Ja||!Ii||!De?De=0:(Vn&&(Vn[0]=Ii),Ln&&(Ln[0]=De),De=1))}if(!De||(Vn=Vn[0],Xi=Xi[0],Ri&&(Hn[0]!=Vn||ci[0]!=Xi)))return 3;Dn!=null&&(Dn[0]=vi,Dn.offset=ze-Dn.w,e(4294967286>ze-Dn.w),e(Dn.offset==Dn.ha-en));break}return hi==0||hi==7&&Ri&&Dn==null?(kn!=null&&(kn[0]|=vi.na!=null&&0<vi.na.length),dn!=null&&(dn[0]=Vn),Tn!=null&&(Tn[0]=Xi),0):hi}function go(De,ze,en){var dn=ze.width,Tn=ze.height,kn=0,Vn=0,Ln=dn,Dn=Tn;if(ze.Da=De!=null&&0<De.Da,ze.Da&&(Ln=De.cd,Dn=De.bd,kn=De.v,Vn=De.j,11>en||(kn&=-2,Vn&=-2),0>kn||0>Vn||0>=Ln||0>=Dn||kn+Ln>dn||Vn+Dn>Tn))return 0;if(ze.v=kn,ze.j=Vn,ze.va=kn+Ln,ze.o=Vn+Dn,ze.U=Ln,ze.T=Dn,ze.da=De!=null&&0<De.da,ze.da){if(!Qn(Ln,Dn,en=[De.ib],kn=[De.hb]))return 0;ze.ib=en[0],ze.hb=kn[0]}return ze.ob=De!=null&&De.ob,ze.Kb=De==null||!De.Sd,ze.da&&(ze.ob=ze.ib<3*dn/4&&ze.hb<3*Tn/4,ze.Kb=0),1}function Hu(De){if(De==null)return 2;if(11>De.S){var ze=De.f.RGBA;ze.fb+=(De.height-1)*ze.A,ze.A=-ze.A}else ze=De.f.kb,De=De.height,ze.O+=(De-1)*ze.fa,ze.fa=-ze.fa,ze.N+=(De-1>>1)*ze.Ab,ze.Ab=-ze.Ab,ze.W+=(De-1>>1)*ze.Db,ze.Db=-ze.Db,ze.F!=null&&(ze.J+=(De-1)*ze.lb,ze.lb=-ze.lb);return 0}function yo(De,ze,en,dn){if(dn==null||0>=De||0>=ze)return 2;if(en!=null){if(en.Da){var Tn=en.cd,kn=en.bd,Vn=-2&en.v,Ln=-2&en.j;if(0>Vn||0>Ln||0>=Tn||0>=kn||Vn+Tn>De||Ln+kn>ze)return 2;De=Tn,ze=kn}if(en.da){if(!Qn(De,ze,Tn=[en.ib],kn=[en.hb]))return 2;De=Tn[0],ze=kn[0]}}dn.width=De,dn.height=ze;e:{var Dn=dn.width,Hn=dn.height;if(De=dn.S,0>=Dn||0>=Hn||!(De>=xc&&13>De))De=2;else{if(0>=dn.Rd&&dn.sd==null){Vn=kn=Tn=ze=0;var ci=(Ln=Dn*Bc[De])*Hn;if(11>De||(kn=(Hn+1)/2*(ze=(Dn+1)/2),De==12&&(Vn=(Tn=Dn)*Hn)),(Hn=Ee(ci+2*kn+Vn))==null){De=1;break e}dn.sd=Hn,11>De?((Dn=dn.f.RGBA).eb=Hn,Dn.fb=0,Dn.A=Ln,Dn.size=ci):((Dn=dn.f.kb).y=Hn,Dn.O=0,Dn.fa=Ln,Dn.Fd=ci,Dn.f=Hn,Dn.N=0+ci,Dn.Ab=ze,Dn.Cd=kn,Dn.ea=Hn,Dn.W=0+ci+kn,Dn.Db=ze,Dn.Ed=kn,De==12&&(Dn.F=Hn,Dn.J=0+ci+2*kn),Dn.Tc=Vn,Dn.lb=Tn)}if(ze=1,Tn=dn.S,kn=dn.width,Vn=dn.height,Tn>=xc&&13>Tn)if(11>Tn)De=dn.f.RGBA,ze&=(Ln=Math.abs(De.A))*(Vn-1)+kn<=De.size,ze&=Ln>=kn*Bc[Tn],ze&=De.eb!=null;else{De=dn.f.kb,Ln=(kn+1)/2,ci=(Vn+1)/2,Dn=Math.abs(De.fa),Hn=Math.abs(De.Ab);var Ri=Math.abs(De.Db),Bi=Math.abs(De.lb),vi=Bi*(Vn-1)+kn;ze&=Dn*(Vn-1)+kn<=De.Fd,ze&=Hn*(ci-1)+Ln<=De.Cd,ze=(ze&=Ri*(ci-1)+Ln<=De.Ed)&Dn>=kn&Hn>=Ln&Ri>=Ln,ze&=De.y!=null,ze&=De.f!=null,ze&=De.ea!=null,Tn==12&&(ze&=Bi>=kn,ze&=vi<=De.Tc,ze&=De.F!=null)}else ze=0;De=ze?0:2}}return De!=0||en!=null&&en.fd&&(De=Hu(dn)),De}var Rr=64,yl=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],jo=24,qo=32,Ql=8,ts=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Un("Predictor0","PredictorAdd0"),tn.Predictor0=function(){return 4278190080},tn.Predictor1=function(De){return De},tn.Predictor2=function(De,ze,en){return ze[en+0]},tn.Predictor3=function(De,ze,en){return ze[en+1]},tn.Predictor4=function(De,ze,en){return ze[en-1]},tn.Predictor5=function(De,ze,en){return ni(ni(De,ze[en+1]),ze[en+0])},tn.Predictor6=function(De,ze,en){return ni(De,ze[en-1])},tn.Predictor7=function(De,ze,en){return ni(De,ze[en+0])},tn.Predictor8=function(De,ze,en){return ni(ze[en-1],ze[en+0])},tn.Predictor9=function(De,ze,en){return ni(ze[en+0],ze[en+1])},tn.Predictor10=function(De,ze,en){return ni(ni(De,ze[en-1]),ni(ze[en+0],ze[en+1]))},tn.Predictor11=function(De,ze,en){var dn=ze[en+0];return 0>=$n(dn>>24&255,De>>24&255,(ze=ze[en-1])>>24&255)+$n(dn>>16&255,De>>16&255,ze>>16&255)+$n(dn>>8&255,De>>8&255,ze>>8&255)+$n(255&dn,255&De,255&ze)?dn:De},tn.Predictor12=function(De,ze,en){var dn=ze[en+0];return(yi((De>>24&255)+(dn>>24&255)-((ze=ze[en-1])>>24&255))<<24|yi((De>>16&255)+(dn>>16&255)-(ze>>16&255))<<16|yi((De>>8&255)+(dn>>8&255)-(ze>>8&255))<<8|yi((255&De)+(255&dn)-(255&ze)))>>>0},tn.Predictor13=function(De,ze,en){var dn=ze[en-1];return(pi((De=ni(De,ze[en+0]))>>24&255,dn>>24&255)<<24|pi(De>>16&255,dn>>16&255)<<16|pi(De>>8&255,dn>>8&255)<<8|pi(De>>0&255,dn>>0&255))>>>0};var yc=tn.PredictorAdd0;tn.PredictorAdd1=Yn,Un("Predictor2","PredictorAdd2"),Un("Predictor3","PredictorAdd3"),Un("Predictor4","PredictorAdd4"),Un("Predictor5","PredictorAdd5"),Un("Predictor6","PredictorAdd6"),Un("Predictor7","PredictorAdd7"),Un("Predictor8","PredictorAdd8"),Un("Predictor9","PredictorAdd9"),Un("Predictor10","PredictorAdd10"),Un("Predictor11","PredictorAdd11"),Un("Predictor12","PredictorAdd12"),Un("Predictor13","PredictorAdd13");var Gu=tn.PredictorAdd2;Ji("ColorIndexInverseTransform","MapARGB","32b",(function(De){return De>>8&255}),(function(De){return De})),Ji("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(De){return De}),(function(De){return De>>8&255}));var vc,Ps=tn.ColorIndexInverseTransform,Zl=tn.MapARGB,bc=tn.VP8LColorIndexInverseTransformAlpha,Jr=tn.MapAlpha,ws=tn.VP8LPredictorsAdd=[];ws.length=16,(tn.VP8LPredictors=[]).length=16,(tn.VP8LPredictorsAdd_C=[]).length=16,(tn.VP8LPredictors_C=[]).length=16;var Ho,ns,Xr,vo,qs,bo,Hs,Gs,nr,vl,Wr,Nr,Ys,eu,tu,ps,Go,xo,Yo,nu,bl,Jo,iu,ms,us,Ca,Ga,Ua,ur=Ee(511),Js=Ee(2041),Xo=Ee(225),_o=Ee(767),au=0,So=Js,Yu=Xo,$r=_o,Or=ur,xc=0,Kr=1,_c=2,Ts=3,Ju=4,ru=5,Wo=6,Xu=7,Sc=8,su=9,Ac=10,Cs=[2,3,7],ou=[3,3,11],xl=[280,256,256,256,40],Ec=[0,1,1,1,0],Wu=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Bs=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Rs=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],$o=8,Ns=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Ms=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],gs=null,Yh=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],sh=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Pc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Jh=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ur=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ir=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Ra=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],is=[],fr=[],Xs=[],Ko=1,oh=2,Ao=[],zr=[];Fi("UpsampleRgbLinePair",Va,3),Fi("UpsampleBgrLinePair",lr,3),Fi("UpsampleRgbaLinePair",Yr,4),Fi("UpsampleBgraLinePair",Tr,4),Fi("UpsampleArgbLinePair",Fr,4),Fi("UpsampleRgba4444LinePair",br,2),Fi("UpsampleRgb565LinePair",cr,2);var _l=tn.UpsampleRgbLinePair,lh=tn.UpsampleBgrLinePair,lu=tn.UpsampleRgbaLinePair,wc=tn.UpsampleBgraLinePair,Qo=tn.UpsampleArgbLinePair,io=tn.UpsampleRgba4444LinePair,Zo=tn.UpsampleRgb565LinePair,ks=16,uu=1<<ks-1,Sl=-227,el=482,Tc=6,tl=0,jr=Ee(256),Cc=Ee(256),Xh=Ee(256),Kd=Ee(256),Qd=Ee(el-Sl),Zd=Ee(el-Sl);to("YuvToRgbRow",Va,3),to("YuvToBgrRow",lr,3),to("YuvToRgbaRow",Yr,4),to("YuvToBgraRow",Tr,4),to("YuvToArgbRow",Fr,4),to("YuvToRgba4444Row",br,2),to("YuvToRgb565Row",cr,2);var xr=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],cu=[0,2,8],$u=[8,7,6,4,4,2,2,2,1,1,1,1],Ku=1;this.WebPDecodeRGBA=function(De,ze,en,dn,Tn){var kn=Kr,Vn=new ml,Ln=new Rn;Vn.ba=Ln,Ln.S=kn,Ln.width=[Ln.width],Ln.height=[Ln.height];var Dn=Ln.width,Hn=Ln.height,ci=new Zn;if(ci==null||De==null)var Ri=2;else e(ci!=null),Ri=no(De,ze,en,ci.width,ci.height,ci.Pd,ci.Qd,ci.format,null);if(Ri!=0?Dn=0:(Dn!=null&&(Dn[0]=ci.width[0]),Hn!=null&&(Hn[0]=ci.height[0]),Dn=1),Dn){Ln.width=Ln.width[0],Ln.height=Ln.height[0],dn!=null&&(dn[0]=Ln.width),Tn!=null&&(Tn[0]=Ln.height);e:{if(dn=new Fl,(Tn=new zu).data=De,Tn.w=ze,Tn.ha=en,Tn.kd=1,ze=[0],e(Tn!=null),((De=no(Tn.data,Tn.w,Tn.ha,null,null,null,ze,null,Tn))==0||De==7)&&ze[0]&&(De=4),(ze=De)==0){if(e(Vn!=null),dn.data=Tn.data,dn.w=Tn.w+Tn.offset,dn.ha=Tn.ha-Tn.offset,dn.put=Nn,dn.ac=Fn,dn.bc=Gn,dn.ma=Vn,Tn.xa){if((De=xa())==null){Vn=1;break e}if((function(Bi,vi){var Xi=[0],Ii=[0],hi=[0];t:for(;;){if(Bi==null)return 0;if(vi==null)return Bi.a=2,0;if(Bi.l=vi,Bi.a=0,Pn(Bi.m,vi.data,vi.w,vi.ha),!ei(Bi.m,Xi,Ii,hi)){Bi.a=3;break t}if(Bi.xb=oh,vi.width=Xi[0],vi.height=Ii[0],!Oa(Xi[0],Ii[0],1,Bi,null))break t;return 1}return e(Bi.a!=0),0})(De,dn)){if(dn=(ze=yo(dn.width,dn.height,Vn.Oa,Vn.ba))==0){t:{dn=De;n:for(;;){if(dn==null){dn=0;break t}if(e(dn.s.yc!=null),e(dn.s.Ya!=null),e(0<dn.s.Wb),e((en=dn.l)!=null),e((Tn=en.ma)!=null),dn.xb!=0){if(dn.ca=Tn.ba,dn.tb=Tn.tb,e(dn.ca!=null),!go(Tn.Oa,en,Ts)){dn.a=2;break n}if(!Ba(dn,en.width)||en.da)break n;if((en.da||Ui(dn.ca.S))&&Ei(),11>dn.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),dn.ca.f.kb.F!=null&&Ei()),dn.Pb&&0<dn.s.ua&&dn.s.vb.X==null&&!si(dn.s.vb,dn.s.Wa.Xa)){dn.a=1;break n}dn.xb=0}if(!ca(dn,dn.V,dn.Ba,dn.c,dn.i,en.o,la))break n;Tn.Dc=dn.Ma,dn=1;break t}e(dn.a!=0),dn=0}dn=!dn}dn&&(ze=De.a)}else ze=De.a}else{if((De=new Ol)==null){Vn=1;break e}if(De.Fa=Tn.na,De.P=Tn.P,De.qc=Tn.Sa,es(De,dn)){if((ze=yo(dn.width,dn.height,Vn.Oa,Vn.ba))==0){if(De.Aa=0,en=Vn.Oa,e((Tn=De)!=null),en!=null){if(0<(Dn=0>(Dn=en.Md)?0:100<Dn?255:255*Dn/100)){for(Hn=ci=0;4>Hn;++Hn)12>(Ri=Tn.pb[Hn]).lc&&(Ri.ia=Dn*$u[0>Ri.lc?0:Ri.lc]>>3),ci|=Ri.ia;ci&&(alert("todo:VP8InitRandom"),Tn.ia=1)}Tn.Ga=en.Id,100<Tn.Ga?Tn.Ga=100:0>Tn.Ga&&(Tn.Ga=0)}Mu(De,dn)||(ze=De.a)}}else ze=De.a}ze==0&&Vn.Oa!=null&&Vn.Oa.fd&&(ze=Hu(Vn.ba))}Vn=ze}kn=Vn!=0?null:11>kn?Ln.f.RGBA.eb:Ln.f.kb.y}else kn=null;return kn};var Bc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function Be(tn,We){for(var An="",Je=0;Je<4;Je++)An+=String.fromCharCode(tn[We++]);return An}function Me(tn,We){return(tn[We+0]<<0|tn[We+1]<<8|tn[We+2]<<16)>>>0}function Ve(tn,We){return(tn[We+0]<<0|tn[We+1]<<8|tn[We+2]<<16|tn[We+3]<<24)>>>0}new Re;var Fe=[0],Ie=[0],qe=[],Ye=new Re,Xe=t,je=(function(tn,We){var An={},Je=0,St=!1,hn=0,_n=0;if(An.frames=[],!(function(Oe,$e,rn,fn){for(var gn=0;gn<fn;gn++)if(Oe[$e+gn]!=rn.charCodeAt(gn))return!0;return!1})(tn,We,"RIFF",4)){var yn,mn;for(Ve(tn,We+=4),We+=8;We<tn.length;){var Sn=Be(tn,We),Pn=Ve(tn,We+=4);We+=4;var pn=Pn+(1&Pn);switch(Sn){case"VP8 ":case"VP8L":An.frames[Je]===void 0&&(An.frames[Je]={}),(Ge=An.frames[Je]).src_off=St?_n:We-8,Ge.src_size=hn+Pn+8,Je++,St&&(St=!1,hn=0,_n=0);break;case"VP8X":(Ge=An.header={}).feature_flags=tn[We];var on=We+4;Ge.canvas_width=1+Me(tn,on),on+=3,Ge.canvas_height=1+Me(tn,on),on+=3;break;case"ALPH":St=!0,hn=pn+8,_n=We-8;break;case"ANIM":(Ge=An.header).bgcolor=Ve(tn,We),on=We+4,Ge.loop_count=(yn=tn)[(mn=on)+0]<<0|yn[mn+1]<<8,on+=2;break;case"ANMF":var xn,Ge;(Ge=An.frames[Je]={}).offset_x=2*Me(tn,We),We+=3,Ge.offset_y=2*Me(tn,We),We+=3,Ge.width=1+Me(tn,We),We+=3,Ge.height=1+Me(tn,We),We+=3,Ge.duration=Me(tn,We),We+=3,xn=tn[We++],Ge.dispose=1&xn,Ge.blend=xn>>1&1}Sn!="ANMF"&&(We+=pn)}return An}})(Xe,0);je.response=Xe,je.rgbaoutput=!0,je.dataurl=!1;var Qe=je.header?je.header:null,sn=je.frames?je.frames:null;if(Qe){Qe.loop_counter=Qe.loop_count,Fe=[Qe.canvas_height],Ie=[Qe.canvas_width];for(var cn=0;cn<sn.length&&sn[cn].blend!=0;cn++);}var nn=sn[0],an=Ye.WebPDecodeRGBA(Xe,nn.src_off,nn.src_size,Ie,Fe);nn.rgba=an,nn.imgwidth=Ie[0],nn.imgheight=Fe[0];for(var Ze=0;Ze<Ie[0]*Fe[0]*4;Ze++)qe[Ze]=an[Ze];return this.width=Ie,this.height=Fe,this.data=qe,this}(function(t){var e=function(){return typeof zlibSync=="function"},r=function(Fe,Ie,qe,Ye){var Xe=4,je=Pe;switch(Ye){case t.image_compression.FAST:Xe=1,je=Ee;break;case t.image_compression.MEDIUM:Xe=6,je=Ce;break;case t.image_compression.SLOW:Xe=9,je=Re}Fe=xe(Fe,Ie,qe,je);var Qe=zlibSync(Fe,{level:Xe});return t.__addimage__.arrayBufferToBinaryString(Qe)},xe=function(Fe,Ie,qe,Ye){for(var Xe,je,Qe,sn=Fe.length/Ie,cn=new Uint8Array(Fe.length+sn),nn=Me(),an=0;an<sn;an+=1){if(Qe=an*Ie,Xe=Fe.subarray(Qe,Qe+Ie),Ye)cn.set(Ye(Xe,qe,je),Qe+an);else{for(var Ze,tn=nn.length,We=[];Ze<tn;Ze+=1)We[Ze]=nn[Ze](Xe,qe,je);var An=Ve(We.concat());cn.set(We[An],Qe+an)}je=Xe}return cn},Se=function(Fe){var Ie=Array.apply([],Fe);return Ie.unshift(0),Ie},Ee=function(Fe,Ie){var qe,Ye=[],Xe=Fe.length;Ye[0]=1;for(var je=0;je<Xe;je+=1)qe=Fe[je-Ie]||0,Ye[je+1]=Fe[je]-qe+256&255;return Ye},Pe=function(Fe,Ie,qe){var Ye,Xe=[],je=Fe.length;Xe[0]=2;for(var Qe=0;Qe<je;Qe+=1)Ye=qe&&qe[Qe]||0,Xe[Qe+1]=Fe[Qe]-Ye+256&255;return Xe},Ce=function(Fe,Ie,qe){var Ye,Xe,je=[],Qe=Fe.length;je[0]=3;for(var sn=0;sn<Qe;sn+=1)Ye=Fe[sn-Ie]||0,Xe=qe&&qe[sn]||0,je[sn+1]=Fe[sn]+256-(Ye+Xe>>>1)&255;return je},Re=function(Fe,Ie,qe){var Ye,Xe,je,Qe,sn=[],cn=Fe.length;sn[0]=4;for(var nn=0;nn<cn;nn+=1)Ye=Fe[nn-Ie]||0,Xe=qe&&qe[nn]||0,je=qe&&qe[nn-Ie]||0,Qe=Be(Ye,Xe,je),sn[nn+1]=Fe[nn]-Qe+256&255;return sn},Be=function(Fe,Ie,qe){if(Fe===Ie&&Ie===qe)return Fe;var Ye=Math.abs(Ie-qe),Xe=Math.abs(Fe-qe),je=Math.abs(Fe+Ie-qe-qe);return Ye<=Xe&&Ye<=je?Fe:Xe<=je?Ie:qe},Me=function(){return[Se,Ee,Pe,Ce,Re]},Ve=function(Fe){var Ie=Fe.map((function(qe){return qe.reduce((function(Ye,Xe){return Ye+Math.abs(Xe)}),0)}));return Ie.indexOf(Math.min.apply(null,Ie))};t.processPNG=function(Fe,Ie,qe,Ye){var Xe,je,Qe,sn,cn,nn,an,Ze,tn,We,An,Je,St,hn,_n,yn=this.decode.FLATE_DECODE,mn="";if(this.__addimage__.isArrayBuffer(Fe)&&(Fe=new Uint8Array(Fe)),this.__addimage__.isArrayBufferView(Fe)){if(Fe=(Qe=new Kt(Fe)).imgData,je=Qe.bits,Xe=Qe.colorSpace,cn=Qe.colors,[4,6].indexOf(Qe.colorType)!==-1){if(Qe.bits===8){tn=(Ze=Qe.pixelBitlength==32?new Uint32Array(Qe.decodePixels().buffer):Qe.pixelBitlength==16?new Uint16Array(Qe.decodePixels().buffer):new Uint8Array(Qe.decodePixels().buffer)).length,An=new Uint8Array(tn*Qe.colors),We=new Uint8Array(tn);var Sn,Pn=Qe.pixelBitlength-Qe.bits;for(hn=0,_n=0;hn<tn;hn++){for(St=Ze[hn],Sn=0;Sn<Pn;)An[_n++]=St>>>Sn&255,Sn+=Qe.bits;We[hn]=St>>>Sn&255}}if(Qe.bits===16){tn=(Ze=new Uint32Array(Qe.decodePixels().buffer)).length,An=new Uint8Array(tn*(32/Qe.pixelBitlength)*Qe.colors),We=new Uint8Array(tn*(32/Qe.pixelBitlength)),Je=Qe.colors>1,hn=0,_n=0;for(var pn=0;hn<tn;)St=Ze[hn++],An[_n++]=St>>>0&255,Je&&(An[_n++]=St>>>16&255,St=Ze[hn++],An[_n++]=St>>>0&255),We[pn++]=St>>>16&255;je=8}Ye!==t.image_compression.NONE&&e()?(Fe=r(An,Qe.width*Qe.colors,Qe.colors,Ye),an=r(We,Qe.width,1,Ye)):(Fe=An,an=We,yn=void 0)}if(Qe.colorType===3&&(Xe=this.color_spaces.INDEXED,nn=Qe.palette,Qe.transparency.indexed)){var on=Qe.transparency.indexed,xn=0;for(hn=0,tn=on.length;hn<tn;++hn)xn+=on[hn];if((xn/=255)===tn-1&&on.indexOf(0)!==-1)sn=[on.indexOf(0)];else if(xn!==tn){for(Ze=Qe.decodePixels(),We=new Uint8Array(Ze.length),hn=0,tn=Ze.length;hn<tn;hn++)We[hn]=on[Ze[hn]];an=r(We,Qe.width,1)}}var Ge=(function(Oe){var $e;switch(Oe){case t.image_compression.FAST:$e=11;break;case t.image_compression.MEDIUM:$e=13;break;case t.image_compression.SLOW:$e=14;break;default:$e=12}return $e})(Ye);return yn===this.decode.FLATE_DECODE&&(mn="/Predictor "+Ge+" "),mn+="/Colors "+cn+" /BitsPerComponent "+je+" /Columns "+Qe.width,(this.__addimage__.isArrayBuffer(Fe)||this.__addimage__.isArrayBufferView(Fe))&&(Fe=this.__addimage__.arrayBufferToBinaryString(Fe)),(an&&this.__addimage__.isArrayBuffer(an)||this.__addimage__.isArrayBufferView(an))&&(an=this.__addimage__.arrayBufferToBinaryString(an)),{alias:qe,data:Fe,index:Ie,filter:yn,decodeParameters:mn,transparency:sn,palette:nn,sMask:an,predictor:Ge,width:Qe.width,height:Qe.height,bitsPerComponent:je,colorSpace:Xe}}}})(E.API),(function(t){t.processGIF89A=function(e,r,xe,Se){var Ee=new Zt(e),Pe=Ee.width,Ce=Ee.height,Re=[];Ee.decodeAndBlitFrameRGBA(0,Re);var Be={data:Re,width:Pe,height:Ce},Me=new Qt(100).encode(Be,100);return t.processJPEG.call(this,Me,r,xe,Se)},t.processGIF87A=t.processGIF89A})(E.API),te.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),xe=this.datav.getUint8(this.pos++,!0),Se=this.datav.getUint8(this.pos++,!0),Ee=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:Se,green:xe,blue:r,quad:Ee}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},te.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){a.log("bit decode error:"+r)}},te.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var xe=this.bottom_up?t:this.height-1-t,Se=0;Se<e;Se++)for(var Ee=this.datav.getUint8(this.pos++,!0),Pe=xe*this.width*4+8*Se*4,Ce=0;Ce<8&&8*Se+Ce<this.width;Ce++){var Re=this.palette[Ee>>7-Ce&1];this.data[Pe+4*Ce]=Re.blue,this.data[Pe+4*Ce+1]=Re.green,this.data[Pe+4*Ce+2]=Re.red,this.data[Pe+4*Ce+3]=255}r!==0&&(this.pos+=4-r)}},te.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var xe=this.bottom_up?r:this.height-1-r,Se=0;Se<t;Se++){var Ee=this.datav.getUint8(this.pos++,!0),Pe=xe*this.width*4+2*Se*4,Ce=Ee>>4,Re=15&Ee,Be=this.palette[Ce];if(this.data[Pe]=Be.blue,this.data[Pe+1]=Be.green,this.data[Pe+2]=Be.red,this.data[Pe+3]=255,2*Se+1>=this.width)break;Be=this.palette[Re],this.data[Pe+4]=Be.blue,this.data[Pe+4+1]=Be.green,this.data[Pe+4+2]=Be.red,this.data[Pe+4+3]=255}e!==0&&(this.pos+=4-e)}},te.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,xe=0;xe<this.width;xe++){var Se=this.datav.getUint8(this.pos++,!0),Ee=r*this.width*4+4*xe;if(Se<this.palette.length){var Pe=this.palette[Se];this.data[Ee]=Pe.red,this.data[Ee+1]=Pe.green,this.data[Ee+2]=Pe.blue,this.data[Ee+3]=255}else this.data[Ee]=255,this.data[Ee+1]=255,this.data[Ee+2]=255,this.data[Ee+3]=255}t!==0&&(this.pos+=4-t)}},te.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var xe=this.bottom_up?r:this.height-1-r,Se=0;Se<this.width;Se++){var Ee=this.datav.getUint16(this.pos,!0);this.pos+=2;var Pe=(Ee&e)/e*255|0,Ce=(Ee>>5&e)/e*255|0,Re=(Ee>>10&e)/e*255|0,Be=Ee>>15?255:0,Me=xe*this.width*4+4*Se;this.data[Me]=Re,this.data[Me+1]=Ce,this.data[Me+2]=Pe,this.data[Me+3]=Be}this.pos+=t}},te.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),xe=this.height-1;xe>=0;xe--){for(var Se=this.bottom_up?xe:this.height-1-xe,Ee=0;Ee<this.width;Ee++){var Pe=this.datav.getUint16(this.pos,!0);this.pos+=2;var Ce=(Pe&e)/e*255|0,Re=(Pe>>5&r)/r*255|0,Be=(Pe>>11)/e*255|0,Me=Se*this.width*4+4*Ee;this.data[Me]=Be,this.data[Me+1]=Re,this.data[Me+2]=Ce,this.data[Me+3]=255}this.pos+=t}},te.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var xe=this.datav.getUint8(this.pos++,!0),Se=this.datav.getUint8(this.pos++,!0),Ee=this.datav.getUint8(this.pos++,!0),Pe=e*this.width*4+4*r;this.data[Pe]=Ee,this.data[Pe+1]=Se,this.data[Pe+2]=xe,this.data[Pe+3]=255}this.pos+=this.width%4}},te.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var xe=this.datav.getUint8(this.pos++,!0),Se=this.datav.getUint8(this.pos++,!0),Ee=this.datav.getUint8(this.pos++,!0),Pe=this.datav.getUint8(this.pos++,!0),Ce=e*this.width*4+4*r;this.data[Ce]=Ee,this.data[Ce+1]=Se,this.data[Ce+2]=xe,this.data[Ce+3]=Pe}},te.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(e,r,xe,Se){var Ee=new te(e,!1),Pe=Ee.width,Ce=Ee.height,Re={data:Ee.getData(),width:Pe,height:Ce},Be=new Qt(100).encode(Re,100);return t.processJPEG.call(this,Be,r,xe,Se)}})(E.API),ee.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(e,r,xe,Se){var Ee=new ee(e),Pe=Ee.width,Ce=Ee.height,Re={data:Ee.getData(),width:Pe,height:Ce},Be=new Qt(100).encode(Re,100);return t.processJPEG.call(this,Be,r,xe,Se)}})(E.API),E.API.processRGBA=function(t,e,r){for(var xe=t.data,Se=xe.length,Ee=new Uint8Array(Se/4*3),Pe=new Uint8Array(Se/4),Ce=0,Re=0,Be=0;Be<Se;Be+=4){var Me=xe[Be],Ve=xe[Be+1],Fe=xe[Be+2],Ie=xe[Be+3];Ee[Ce++]=Me,Ee[Ce++]=Ve,Ee[Ce++]=Fe,Pe[Re++]=Ie}var qe=this.__addimage__.arrayBufferToBinaryString(Ee);return{alpha:this.__addimage__.arrayBufferToBinaryString(Pe),data:qe,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},E.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},Vt=E.API,Gt=Vt.getCharWidthsArray=function(t,e){var r,xe,Se=(e=e||{}).font||this.internal.getFont(),Ee=e.fontSize||this.internal.getFontSize(),Pe=e.charSpace||this.internal.getCharSpace(),Ce=e.widths?e.widths:Se.metadata.Unicode.widths,Re=Ce.fof?Ce.fof:1,Be=e.kerning?e.kerning:Se.metadata.Unicode.kerning,Me=Be.fof?Be.fof:1,Ve=e.doKerning!==!1,Fe=0,Ie=t.length,qe=0,Ye=Ce[0]||Re,Xe=[];for(r=0;r<Ie;r++)xe=t.charCodeAt(r),typeof Se.metadata.widthOfString=="function"?Xe.push((Se.metadata.widthOfGlyph(Se.metadata.characterToGlyph(xe))+Pe*(1e3/Ee)||0)/1e3):(Fe=Ve&&_typeof(Be[xe])==="object"&&!isNaN(parseInt(Be[xe][qe],10))?Be[xe][qe]/Me:0,Xe.push((Ce[xe]||Ye)/Re+Fe)),qe=xe;return Xe},Yt=Vt.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),xe=e.font||this.internal.getFont(),Se=e.charSpace||this.internal.getCharSpace();return Vt.processArabic&&(t=Vt.processArabic(t)),typeof xe.metadata.widthOfString=="function"?xe.metadata.widthOfString(t,r,Se)/r:Gt.apply(this,arguments).reduce((function(Ee,Pe){return Ee+Pe}),0)},Jt=function(t,e,r,xe){for(var Se=[],Ee=0,Pe=t.length,Ce=0;Ee!==Pe&&Ce+e[Ee]<r;)Ce+=e[Ee],Ee++;Se.push(t.slice(0,Ee));var Re=Ee;for(Ce=0;Ee!==Pe;)Ce+e[Ee]>xe&&(Se.push(t.slice(Re,Ee)),Ce=0,Re=Ee),Ce+=e[Ee],Ee++;return Re!==Ee&&Se.push(t.slice(Re,Ee)),Se},Xt=function(t,e,r){r||(r={});var xe,Se,Ee,Pe,Ce,Re,Be,Me=[],Ve=[Me],Fe=r.textIndent||0,Ie=0,qe=0,Ye=t.split(" "),Xe=Gt.apply(this,[" ",r])[0];if(Re=r.lineIndent===-1?Ye[0].length+2:r.lineIndent||0){var je=Array(Re).join(" "),Qe=[];Ye.map((function(cn){(cn=cn.split(/\s*\n/)).length>1?Qe=Qe.concat(cn.map((function(nn,an){return(an&&nn.length?`
`:"")+nn}))):Qe.push(cn[0])})),Ye=Qe,Re=Yt.apply(this,[je,r])}for(Ee=0,Pe=Ye.length;Ee<Pe;Ee++){var sn=0;if(xe=Ye[Ee],Re&&xe[0]==`
`&&(xe=xe.substr(1),sn=1),Fe+Ie+(qe=(Se=Gt.apply(this,[xe,r])).reduce((function(cn,nn){return cn+nn}),0))>e||sn){if(qe>e){for(Ce=Jt.apply(this,[xe,Se,e-(Fe+Ie),e]),Me.push(Ce.shift()),Me=[Ce.pop()];Ce.length;)Ve.push([Ce.shift()]);qe=Se.slice(xe.length-(Me[0]?Me[0].length:0)).reduce((function(cn,nn){return cn+nn}),0)}else Me=[xe];Ve.push(Me),Fe=qe+Re,Ie=Xe}else Me.push(xe),Fe+=Ie+qe,Ie=Xe}return Be=Re?function(cn,nn){return(nn?je:"")+cn.join(" ")}:function(cn){return cn.join(" ")},Ve.map(Be)},Vt.splitTextToSize=function(t,e,r){var xe,Se=(r=r||{}).fontSize||this.internal.getFontSize(),Ee=(function(Me){if(Me.widths&&Me.kerning)return{widths:Me.widths,kerning:Me.kerning};var Ve=this.internal.getFont(Me.fontName,Me.fontStyle);return Ve.metadata.Unicode?{widths:Ve.metadata.Unicode.widths||{0:1},kerning:Ve.metadata.Unicode.kerning||{}}:{font:Ve.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);xe=Array.isArray(t)?t:String(t).split(/\r?\n/);var Pe=1*this.internal.scaleFactor*e/Se;Ee.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/Se:0,Ee.lineIndent=r.lineIndent;var Ce,Re,Be=[];for(Ce=0,Re=xe.length;Ce<Re;Ce++)Be=Be.concat(Xt.apply(this,[xe[Ce],Pe,Ee]));return Be},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",r={},xe={},Se=0;Se<e.length;Se++)r[e[Se]]="0123456789abcdef"[Se],xe["0123456789abcdef"[Se]]=e[Se];var Ee=function(Ve){return"0x"+parseInt(Ve,10).toString(16)},Pe=t.__fontmetrics__.compress=function(Ve){var Fe,Ie,qe,Ye,Xe=["{"];for(var je in Ve){if(Fe=Ve[je],isNaN(parseInt(je,10))?Ie="'"+je+"'":(je=parseInt(je,10),Ie=(Ie=Ee(je).slice(2)).slice(0,-1)+xe[Ie.slice(-1)]),typeof Fe=="number")Fe<0?(qe=Ee(Fe).slice(3),Ye="-"):(qe=Ee(Fe).slice(2),Ye=""),qe=Ye+qe.slice(0,-1)+xe[qe.slice(-1)];else{if(_typeof(Fe)!=="object")throw new Error("Don't know what to do with value type "+_typeof(Fe)+".");qe=Pe(Fe)}Xe.push(Ie+qe)}return Xe.push("}"),Xe.join("")},Ce=t.__fontmetrics__.uncompress=function(Ve){if(typeof Ve!="string")throw new Error("Invalid argument passed to uncompress.");for(var Fe,Ie,qe,Ye,Xe={},je=1,Qe=Xe,sn=[],cn="",nn="",an=Ve.length-1,Ze=1;Ze<an;Ze+=1)(Ye=Ve[Ze])=="'"?Fe?(qe=Fe.join(""),Fe=void 0):Fe=[]:Fe?Fe.push(Ye):Ye=="{"?(sn.push([Qe,qe]),Qe={},qe=void 0):Ye=="}"?((Ie=sn.pop())[0][Ie[1]]=Qe,qe=void 0,Qe=Ie[0]):Ye=="-"?je=-1:qe===void 0?r.hasOwnProperty(Ye)?(cn+=r[Ye],qe=parseInt(cn,16)*je,je=1,cn=""):cn+=Ye:r.hasOwnProperty(Ye)?(nn+=r[Ye],Qe[qe]=parseInt(nn,16)*je,je=1,qe=void 0,nn=""):nn+=Ye;return Xe},Re={codePages:["WinAnsiEncoding"],WinAnsiEncoding:Ce("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},Be={Unicode:{Courier:Re,"Courier-Bold":Re,"Courier-BoldOblique":Re,"Courier-Oblique":Re,Helvetica:Re,"Helvetica-Bold":Re,"Helvetica-BoldOblique":Re,"Helvetica-Oblique":Re,"Times-Roman":Re,"Times-Bold":Re,"Times-BoldItalic":Re,"Times-Italic":Re}},Me={Unicode:{"Courier-Oblique":Ce("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":Ce("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":Ce("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:Ce("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":Ce("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":Ce("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:Ce("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:Ce("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":Ce("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:Ce("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":Ce("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":Ce("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":Ce("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":Ce("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(Ve){var Fe=Ve.font,Ie=Me.Unicode[Fe.postScriptName];Ie&&(Fe.metadata.Unicode={},Fe.metadata.Unicode.widths=Ie.widths,Fe.metadata.Unicode.kerning=Ie.kerning);var qe=Be.Unicode[Fe.postScriptName];qe&&(Fe.metadata.Unicode.encoding=qe,Fe.encoding=qe.codePages[0])}])})(E.API),(function(t){var e=function(r){for(var xe=r.length,Se=new Uint8Array(xe),Ee=0;Ee<xe;Ee++)Se[Ee]=r.charCodeAt(Ee);return Se};t.API.events.push(["addFont",function(r){var xe=void 0,Se=r.font,Ee=r.instance;if(!Se.isStandardFont){if(Ee===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+Se.postScriptName+"').");if(typeof(xe=Ee.existsFileInVFS(Se.postScriptName)===!1?Ee.loadFile(Se.postScriptName):Ee.getFileFromVFS(Se.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+Se.postScriptName+"').");(function(Pe,Ce){Ce=/^\x00\x01\x00\x00/.test(Ce)?e(Ce):e(u(Ce)),Pe.metadata=t.API.TTFFont.open(Ce),Pe.metadata.Unicode=Pe.metadata.Unicode||{encoding:{},kerning:{},widths:[]},Pe.metadata.glyIdsUsed=[0]})(Se,xe)}}])})(E),(function(t){function e(){return(n.canvg?Promise.resolve(n.canvg):__vitePreload(()=>import("./index.es-Dkf4xjup.js"),[])).catch((function(r){return Promise.reject(new Error("Could not load canvg: "+r))})).then((function(r){return r.default?r.default:r}))}E.API.addSvgAsImage=function(r,xe,Se,Ee,Pe,Ce,Re,Be){if(isNaN(xe)||isNaN(Se))throw a.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(Ee)||isNaN(Pe))throw a.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var Me=document.createElement("canvas");Me.width=Ee,Me.height=Pe;var Ve=Me.getContext("2d");Ve.fillStyle="#fff",Ve.fillRect(0,0,Me.width,Me.height);var Fe={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},Ie=this;return e().then((function(qe){return qe.fromString(Ve,r,Fe)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(qe){return qe.render(Fe)})).then((function(){Ie.addImage(Me.toDataURL("image/jpeg",1),xe,Se,Ee,Pe,Re,Be)}))}})(),E.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var xe=1;xe<=this.internal.getNumberOfPages();xe++)for(var Se=0;Se<this.internal.pages[xe].length;Se++)this.internal.pages[xe][Se]=this.internal.pages[xe][Se].replace(e,r);return this},E.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var xe,Se,Ee,Pe={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},Ce=Object.keys(Pe),Re=[],Be=0,Me=0,Ve=0;function Fe(qe,Ye){var Xe,je=!1;for(Xe=0;Xe<qe.length;Xe+=1)qe[Xe]===Ye&&(je=!0);return je}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(Pe)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var Ie=Ce.length;for(Ve=0;Ve<Ie;Ve+=1)r[Ce[Ve]].value=r[Ce[Ve]].defaultValue,r[Ce[Ve]].explicitSet=!1}if(_typeof(t)==="object"){for(Se in t)if(Ee=t[Se],Fe(Ce,Se)&&Ee!==void 0){if(r[Se].type==="boolean"&&typeof Ee=="boolean")r[Se].value=Ee;else if(r[Se].type==="name"&&Fe(r[Se].valueSet,Ee))r[Se].value=Ee;else if(r[Se].type==="integer"&&Number.isInteger(Ee))r[Se].value=Ee;else if(r[Se].type==="array"){for(Be=0;Be<Ee.length;Be+=1)if(xe=!0,Ee[Be].length===1&&typeof Ee[Be][0]=="number")Re.push(String(Ee[Be]-1));else if(Ee[Be].length>1){for(Me=0;Me<Ee[Be].length;Me+=1)typeof Ee[Be][Me]!="number"&&(xe=!1);xe===!0&&Re.push([Ee[Be][0]-1,Ee[Be][1]-1].join(" "))}r[Se].value="["+Re.join(" ")+"]"}else r[Se].value=r[Se].defaultValue;r[Se].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){var qe,Ye=[];for(qe in r)r[qe].explicitSet===!0&&(r[qe].type==="name"?Ye.push("/"+qe+" /"+r[qe].value):Ye.push("/"+qe+" "+r[qe].value));Ye.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+Ye.join(`
`)+`
>>`)})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(t){var e=function(){var xe='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',Se=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),Ee=unescape(encodeURIComponent(xe)),Pe=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),Ce=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),Re=unescape(encodeURIComponent("</x:xmpmeta>")),Be=Ee.length+Pe.length+Ce.length+Se.length+Re.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+Be+" >>"),this.internal.write("stream"),this.internal.write(Se+Ee+Pe+Ce+Re),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(xe,Se){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:xe,namespaceuri:Se||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}})(E.API),(function(t){var e=t.API,r=e.pdfEscape16=function(Ee,Pe){for(var Ce,Re=Pe.metadata.Unicode.widths,Be=["","0","00","000","0000"],Me=[""],Ve=0,Fe=Ee.length;Ve<Fe;++Ve){if(Ce=Pe.metadata.characterToGlyph(Ee.charCodeAt(Ve)),Pe.metadata.glyIdsUsed.push(Ce),Pe.metadata.toUnicode[Ce]=Ee.charCodeAt(Ve),Re.indexOf(Ce)==-1&&(Re.push(Ce),Re.push([parseInt(Pe.metadata.widthOfGlyph(Ce),10)])),Ce=="0")return Me.join("");Ce=Ce.toString(16),Me.push(Be[4-Ce.length],Ce)}return Me.join("")},xe=function(Ee){var Pe,Ce,Re,Be,Me,Ve,Fe;for(Me=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,Re=[],Ve=0,Fe=(Ce=Object.keys(Ee).sort((function(Ie,qe){return Ie-qe}))).length;Ve<Fe;Ve++)Pe=Ce[Ve],Re.length>=100&&(Me+=`
`+Re.length+` beginbfchar
`+Re.join(`
`)+`
endbfchar`,Re=[]),Ee[Pe]!==void 0&&Ee[Pe]!==null&&typeof Ee[Pe].toString=="function"&&(Be=("0000"+Ee[Pe].toString(16)).slice(-4),Pe=("0000"+(+Pe).toString(16)).slice(-4),Re.push("<"+Pe+"><"+Be+">"));return Re.length&&(Me+=`
`+Re.length+` beginbfchar
`+Re.join(`
`)+`
endbfchar
`),Me+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(Ee){(function(Pe){var Ce=Pe.font,Re=Pe.out,Be=Pe.newObject,Me=Pe.putStream;if(Ce.metadata instanceof t.API.TTFFont&&Ce.encoding==="Identity-H"){for(var Ve=Ce.metadata.Unicode.widths,Fe=Ce.metadata.subset.encode(Ce.metadata.glyIdsUsed,1),Ie="",qe=0;qe<Fe.length;qe++)Ie+=String.fromCharCode(Fe[qe]);var Ye=Be();Me({data:Ie,addLength1:!0,objectId:Ye}),Re("endobj");var Xe=Be();Me({data:xe(Ce.metadata.toUnicode),addLength1:!0,objectId:Xe}),Re("endobj");var je=Be();Re("<<"),Re("/Type /FontDescriptor"),Re("/FontName /"+F(Ce.fontName)),Re("/FontFile2 "+Ye+" 0 R"),Re("/FontBBox "+t.API.PDFObject.convert(Ce.metadata.bbox)),Re("/Flags "+Ce.metadata.flags),Re("/StemV "+Ce.metadata.stemV),Re("/ItalicAngle "+Ce.metadata.italicAngle),Re("/Ascent "+Ce.metadata.ascender),Re("/Descent "+Ce.metadata.decender),Re("/CapHeight "+Ce.metadata.capHeight),Re(">>"),Re("endobj");var Qe=Be();Re("<<"),Re("/Type /Font"),Re("/BaseFont /"+F(Ce.fontName)),Re("/FontDescriptor "+je+" 0 R"),Re("/W "+t.API.PDFObject.convert(Ve)),Re("/CIDToGIDMap /Identity"),Re("/DW 1000"),Re("/Subtype /CIDFontType2"),Re("/CIDSystemInfo"),Re("<<"),Re("/Supplement 0"),Re("/Registry (Adobe)"),Re("/Ordering ("+Ce.encoding+")"),Re(">>"),Re(">>"),Re("endobj"),Ce.objectNumber=Be(),Re("<<"),Re("/Type /Font"),Re("/Subtype /Type0"),Re("/ToUnicode "+Xe+" 0 R"),Re("/BaseFont /"+F(Ce.fontName)),Re("/Encoding /"+Ce.encoding),Re("/DescendantFonts ["+Qe+" 0 R]"),Re(">>"),Re("endobj"),Ce.isAlreadyPutted=!0}})(Ee)}]),e.events.push(["putFont",function(Ee){(function(Pe){var Ce=Pe.font,Re=Pe.out,Be=Pe.newObject,Me=Pe.putStream;if(Ce.metadata instanceof t.API.TTFFont&&Ce.encoding==="WinAnsiEncoding"){for(var Ve=Ce.metadata.rawData,Fe="",Ie=0;Ie<Ve.length;Ie++)Fe+=String.fromCharCode(Ve[Ie]);var qe=Be();Me({data:Fe,addLength1:!0,objectId:qe}),Re("endobj");var Ye=Be();Me({data:xe(Ce.metadata.toUnicode),addLength1:!0,objectId:Ye}),Re("endobj");var Xe=Be();Re("<<"),Re("/Descent "+Ce.metadata.decender),Re("/CapHeight "+Ce.metadata.capHeight),Re("/StemV "+Ce.metadata.stemV),Re("/Type /FontDescriptor"),Re("/FontFile2 "+qe+" 0 R"),Re("/Flags 96"),Re("/FontBBox "+t.API.PDFObject.convert(Ce.metadata.bbox)),Re("/FontName /"+F(Ce.fontName)),Re("/ItalicAngle "+Ce.metadata.italicAngle),Re("/Ascent "+Ce.metadata.ascender),Re(">>"),Re("endobj"),Ce.objectNumber=Be();for(var je=0;je<Ce.metadata.hmtx.widths.length;je++)Ce.metadata.hmtx.widths[je]=parseInt(Ce.metadata.hmtx.widths[je]*(1e3/Ce.metadata.head.unitsPerEm));Re("<</Subtype/TrueType/Type/Font/ToUnicode "+Ye+" 0 R/BaseFont/"+F(Ce.fontName)+"/FontDescriptor "+Xe+" 0 R/Encoding/"+Ce.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(Ce.metadata.hmtx.widths)+">>"),Re("endobj"),Ce.isAlreadyPutted=!0}})(Ee)}]);var Se=function(Ee){var Pe,Ce=Ee.text||"",Re=Ee.x,Be=Ee.y,Me=Ee.options||{},Ve=Ee.mutex||{},Fe=Ve.pdfEscape,Ie=Ve.activeFontKey,qe=Ve.fonts,Ye=Ie,Xe="",je=0,Qe="",sn=qe[Ye].encoding;if(qe[Ye].encoding!=="Identity-H")return{text:Ce,x:Re,y:Be,options:Me,mutex:Ve};for(Qe=Ce,Ye=Ie,Array.isArray(Ce)&&(Qe=Ce[0]),je=0;je<Qe.length;je+=1)qe[Ye].metadata.hasOwnProperty("cmap")&&(Pe=qe[Ye].metadata.cmap.unicode.codeMap[Qe[je].charCodeAt(0)]),Pe||Qe[je].charCodeAt(0)<256&&qe[Ye].metadata.hasOwnProperty("Unicode")?Xe+=Qe[je]:Xe+="";var cn="";return parseInt(Ye.slice(1))<14||sn==="WinAnsiEncoding"?cn=Fe(Xe,Ye).split("").map((function(nn){return nn.charCodeAt(0).toString(16)})).join(""):sn==="Identity-H"&&(cn=r(Xe,qe[Ye])),Ve.isHex=!0,{text:cn,x:Re,y:Be,options:Me,mutex:Ve}};e.events.push(["postProcessText",function(Ee){var Pe=Ee.text||"",Ce=[],Re={text:Pe,x:Ee.x,y:Ee.y,options:Ee.options,mutex:Ee.mutex};if(Array.isArray(Pe)){var Be=0;for(Be=0;Be<Pe.length;Be+=1)Array.isArray(Pe[Be])&&Pe[Be].length===3?Ce.push([Se(Object.assign({},Re,{text:Pe[Be][0]})).text,Pe[Be][1],Pe[Be][2]]):Ce.push(Se(Object.assign({},Re,{text:Pe[Be]})).text);Ee.text=Ce}else Ee.text=Se(Object.assign({},Re,{text:Pe})).text}])})(E),(function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,xe){return e.call(this),this.internal.vFS[r]=xe,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(E.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(xe){var Se,Ee,Pe,Ce,Re,Be,Me,Ve=e,Fe=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],Ie=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],qe={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},Ye={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},Xe=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],je=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),Qe=!1,sn=0;this.__bidiEngine__={};var cn=function(Je){var St=Je.charCodeAt(),hn=St>>8,_n=Ye[hn];return _n!==void 0?Ve[256*_n+(255&St)]:hn===252||hn===253?"AL":je.test(hn)?"L":hn===8?"R":"N"},nn=function(Je){for(var St,hn=0;hn<Je.length;hn++){if((St=cn(Je.charAt(hn)))==="L")return!1;if(St==="R")return!0}return!1},an=function(Je,St,hn,_n){var yn,mn,Sn,Pn,pn=St[_n];switch(pn){case"L":case"R":Qe=!1;break;case"N":case"AN":break;case"EN":Qe&&(pn="AN");break;case"AL":Qe=!0,pn="R";break;case"WS":pn="N";break;case"CS":_n<1||_n+1>=St.length||(yn=hn[_n-1])!=="EN"&&yn!=="AN"||(mn=St[_n+1])!=="EN"&&mn!=="AN"?pn="N":Qe&&(mn="AN"),pn=mn===yn?mn:"N";break;case"ES":pn=(yn=_n>0?hn[_n-1]:"B")==="EN"&&_n+1<St.length&&St[_n+1]==="EN"?"EN":"N";break;case"ET":if(_n>0&&hn[_n-1]==="EN"){pn="EN";break}if(Qe){pn="N";break}for(Sn=_n+1,Pn=St.length;Sn<Pn&&St[Sn]==="ET";)Sn++;pn=Sn<Pn&&St[Sn]==="EN"?"EN":"N";break;case"NSM":if(Pe&&!Ce){for(Pn=St.length,Sn=_n+1;Sn<Pn&&St[Sn]==="NSM";)Sn++;if(Sn<Pn){var on=Je[_n],xn=on>=1425&&on<=2303||on===64286;if(yn=St[Sn],xn&&(yn==="R"||yn==="AL")){pn="R";break}}}pn=_n<1||(yn=St[_n-1])==="B"?"N":hn[_n-1];break;case"B":Qe=!1,Se=!0,pn=sn;break;case"S":Ee=!0,pn="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":Qe=!1;break;case"BN":pn="N"}return pn},Ze=function(Je,St,hn){var _n=Je.split("");return hn&&tn(_n,hn,{hiLevel:sn}),_n.reverse(),St&&St.reverse(),_n.join("")},tn=function(Je,St,hn){var _n,yn,mn,Sn,Pn,pn=-1,on=Je.length,xn=0,Ge=[],Oe=sn?Ie:Fe,$e=[];for(Qe=!1,Se=!1,Ee=!1,yn=0;yn<on;yn++)$e[yn]=cn(Je[yn]);for(mn=0;mn<on;mn++){if(Pn=xn,Ge[mn]=an(Je,$e,Ge,mn),_n=240&(xn=Oe[Pn][qe[Ge[mn]]]),xn&=15,St[mn]=Sn=Oe[xn][5],_n>0)if(_n===16){for(yn=pn;yn<mn;yn++)St[yn]=1;pn=-1}else pn=-1;if(Oe[xn][6])pn===-1&&(pn=mn);else if(pn>-1){for(yn=pn;yn<mn;yn++)St[yn]=Sn;pn=-1}$e[mn]==="B"&&(St[mn]=0),hn.hiLevel|=Sn}Ee&&(function(rn,fn,gn){for(var vn=0;vn<gn;vn++)if(rn[vn]==="S"){fn[vn]=sn;for(var wn=vn-1;wn>=0&&rn[wn]==="WS";wn--)fn[wn]=sn}})($e,St,on)},We=function(Je,St,hn,_n,yn){if(!(yn.hiLevel<Je)){if(Je===1&&sn===1&&!Se)return St.reverse(),void(hn&&hn.reverse());for(var mn,Sn,Pn,pn,on=St.length,xn=0;xn<on;){if(_n[xn]>=Je){for(Pn=xn+1;Pn<on&&_n[Pn]>=Je;)Pn++;for(pn=xn,Sn=Pn-1;pn<Sn;pn++,Sn--)mn=St[pn],St[pn]=St[Sn],St[Sn]=mn,hn&&(mn=hn[pn],hn[pn]=hn[Sn],hn[Sn]=mn);xn=Pn}xn++}}},An=function(Je,St,hn){var _n=Je.split(""),yn={hiLevel:sn};return hn||(hn=[]),tn(_n,hn,yn),(function(mn,Sn,Pn){if(Pn.hiLevel!==0&&Me)for(var pn,on=0;on<mn.length;on++)Sn[on]===1&&(pn=Xe.indexOf(mn[on]))>=0&&(mn[on]=Xe[pn+1])})(_n,hn,yn),We(2,_n,St,hn,yn),We(1,_n,St,hn,yn),_n.join("")};return this.__bidiEngine__.doBidiReorder=function(Je,St,hn){if((function(yn,mn){if(mn)for(var Sn=0;Sn<yn.length;Sn++)mn[Sn]=Sn;Ce===void 0&&(Ce=nn(yn)),Be===void 0&&(Be=nn(yn))})(Je,St),Pe||!Re||Be)if(Pe&&Re&&Ce^Be)sn=Ce?1:0,Je=Ze(Je,St,hn);else if(!Pe&&Re&&Be)sn=Ce?1:0,Je=An(Je,St,hn),Je=Ze(Je,St);else if(!Pe||Ce||Re||Be){if(Pe&&!Re&&Ce^Be)Je=Ze(Je,St),Ce?(sn=0,Je=An(Je,St,hn)):(sn=1,Je=An(Je,St,hn),Je=Ze(Je,St));else if(Pe&&Ce&&!Re&&Be)sn=1,Je=An(Je,St,hn),Je=Ze(Je,St);else if(!Pe&&!Re&&Ce^Be){var _n=Me;Ce?(sn=1,Je=An(Je,St,hn),sn=0,Me=!1,Je=An(Je,St,hn),Me=_n):(sn=0,Je=An(Je,St,hn),Je=Ze(Je,St),sn=1,Me=!1,Je=An(Je,St,hn),Me=_n,Je=Ze(Je,St))}}else sn=0,Je=An(Je,St,hn);else sn=Ce?1:0,Je=An(Je,St,hn);return Je},this.__bidiEngine__.setOptions=function(Je){Je&&(Pe=Je.isInputVisual,Re=Je.isOutputVisual,Ce=Je.isInputRtl,Be=Je.isOutputRtl,Me=Je.isSymmetricSwapping)},this.__bidiEngine__.setOptions(xe),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(xe){var Se=xe.text,Ee=(xe.x,xe.y,xe.options||{}),Pe=(xe.mutex,Ee.lang,[]);if(Ee.isInputVisual=typeof Ee.isInputVisual!="boolean"||Ee.isInputVisual,r.setOptions(Ee),Object.prototype.toString.call(Se)==="[object Array]"){var Ce=0;for(Pe=[],Ce=0;Ce<Se.length;Ce+=1)Object.prototype.toString.call(Se[Ce])==="[object Array]"?Pe.push([r.doBidiReorder(Se[Ce][0]),Se[Ce][1],Se[Ce][2]]):Pe.push([r.doBidiReorder(Se[Ce])]);xe.text=Pe}else xe.text=r.doBidiReorder(Se);r.setOptions({isInputVisual:!0})}])})(E),E.API.TTFFont=(function(){function t(e){var r;if(this.rawData=e,r=this.contents=new ne(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Le(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new ie(this.contents),this.head=new se(this),this.name=new pe(this),this.cmap=new ue(this),this.toUnicode={},this.hhea=new he(this),this.maxp=new ge(this),this.hmtx=new me(this),this.post=new fe(this),this.os2=new le(this),this.loca=new Ne(this),this.glyf=new be(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,xe,Se,Ee;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var Pe,Ce,Re,Be;for(Be=[],Pe=0,Ce=(Re=this.bbox).length;Pe<Ce;Pe++)e=Re[Pe],Be.push(Math.round(e*this.scaleFactor));return Be}).call(this),this.stemV=0,this.post.exists?(xe=255&(Se=this.post.italic_angle),(32768&(r=Se>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+xe)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(Ee=this.familyClass)===1||Ee===2||Ee===3||Ee===4||Ee===5||Ee===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,xe){var Se,Ee,Pe,Ce;for(Pe=0,Ee=0,Ce=(e=""+e).length;0<=Ce?Ee<Ce:Ee>Ce;Ee=0<=Ce?++Ee:--Ee)Se=e.charCodeAt(Ee),Pe+=this.widthOfGlyph(this.characterToGlyph(Se))+xe*(1e3/r)||0;return Pe*(r/1e3)},t.prototype.lineHeight=function(e,r){var xe;return r==null&&(r=!1),xe=r?this.lineGap:0,(this.ascender+xe-this.decender)/1e3*e},t})();var re$1,ne=(function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,xe;for(xe=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)xe[r]=String.fromCharCode(this.readByte());return xe.join("")},t.prototype.writeString=function(e){var r,xe,Se;for(Se=[],r=0,xe=e.length;0<=xe?r<xe:r>xe;r=0<=xe?++r:--r)Se.push(this.writeByte(e.charCodeAt(r)));return Se},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,xe,Se,Ee,Pe,Ce,Re;return e=this.readByte(),r=this.readByte(),xe=this.readByte(),Se=this.readByte(),Ee=this.readByte(),Pe=this.readByte(),Ce=this.readByte(),Re=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^xe)+4294967296*(255^Se)+16777216*(255^Ee)+65536*(255^Pe)+256*(255^Ce)+(255^Re)+1):72057594037927940*e+281474976710656*r+1099511627776*xe+4294967296*Se+16777216*Ee+65536*Pe+256*Ce+Re},t.prototype.writeLongLong=function(e){var r,xe;return r=Math.floor(e/4294967296),xe=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(xe>>24&255),this.writeByte(xe>>16&255),this.writeByte(xe>>8&255),this.writeByte(255&xe)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,xe;for(r=[],xe=0;0<=e?xe<e:xe>e;xe=0<=e?++xe:--xe)r.push(this.readByte());return r},t.prototype.write=function(e){var r,xe,Se,Ee;for(Ee=[],xe=0,Se=e.length;xe<Se;xe++)r=e[xe],Ee.push(this.writeByte(r));return Ee},t})(),ie=(function(){var t;function e(r){var xe,Se,Ee;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},Se=0,Ee=this.tableCount;0<=Ee?Se<Ee:Se>Ee;Se=0<=Ee?++Se:--Se)xe={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[xe.tag]=xe}return e.prototype.encode=function(r){var xe,Se,Ee,Pe,Ce,Re,Be,Me,Ve,Fe,Ie,qe,Ye;for(Ye in Ie=Object.keys(r).length,Re=Math.log(2),Ve=16*Math.floor(Math.log(Ie)/Re),Pe=Math.floor(Ve/Re),Me=16*Ie-Ve,(Se=new ne).writeInt(this.scalarType),Se.writeShort(Ie),Se.writeShort(Ve),Se.writeShort(Pe),Se.writeShort(Me),Ee=16*Ie,Be=Se.pos+Ee,Ce=null,qe=[],r)for(Fe=r[Ye],Se.writeString(Ye),Se.writeInt(t(Fe)),Se.writeInt(Be),Se.writeInt(Fe.length),qe=qe.concat(Fe),Ye==="head"&&(Ce=Be),Be+=Fe.length;Be%4;)qe.push(0),Be++;return Se.write(qe),xe=2981146554-t(Se.data),Se.pos=Ce+8,Se.writeUInt32(xe),Se.data},t=function(r){var xe,Se,Ee,Pe;for(r=ve.call(r);r.length%4;)r.push(0);for(Ee=new ne(r),Se=0,xe=0,Pe=r.length;xe<Pe;xe=xe+=4)Se+=Ee.readUInt32();return 4294967295&Se},e})(),ae={}.hasOwnProperty,oe=function(t,e){for(var r in e)ae.call(e,r)&&(t[r]=e[r]);function xe(){this.constructor=t}return xe.prototype=e.prototype,t.prototype=new xe,t.__super__=e.prototype,t};re$1=(function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var se=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re$1),e.prototype.tag="head",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},e.prototype.encode=function(r){var xe;return(xe=new ne).writeInt(this.version),xe.writeInt(this.revision),xe.writeInt(this.checkSumAdjustment),xe.writeInt(this.magicNumber),xe.writeShort(this.flags),xe.writeShort(this.unitsPerEm),xe.writeLongLong(this.created),xe.writeLongLong(this.modified),xe.writeShort(this.xMin),xe.writeShort(this.yMin),xe.writeShort(this.xMax),xe.writeShort(this.yMax),xe.writeShort(this.macStyle),xe.writeShort(this.lowestRecPPEM),xe.writeShort(this.fontDirectionHint),xe.writeShort(r),xe.writeShort(this.glyphDataFormat),xe.data},e})(),ce=(function(){function t(e,r){var xe,Se,Ee,Pe,Ce,Re,Be,Me,Ve,Fe,Ie,qe,Ye,Xe,je,Qe,sn;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),Ve=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(Re=0;Re<256;++Re)this.codeMap[Re]=e.readByte();break;case 4:for(Ie=e.readUInt16(),Fe=Ie/2,e.pos+=6,Ee=(function(){var cn,nn;for(nn=[],Re=cn=0;0<=Fe?cn<Fe:cn>Fe;Re=0<=Fe?++cn:--cn)nn.push(e.readUInt16());return nn})(),e.pos+=2,Ye=(function(){var cn,nn;for(nn=[],Re=cn=0;0<=Fe?cn<Fe:cn>Fe;Re=0<=Fe?++cn:--cn)nn.push(e.readUInt16());return nn})(),Be=(function(){var cn,nn;for(nn=[],Re=cn=0;0<=Fe?cn<Fe:cn>Fe;Re=0<=Fe?++cn:--cn)nn.push(e.readUInt16());return nn})(),Me=(function(){var cn,nn;for(nn=[],Re=cn=0;0<=Fe?cn<Fe:cn>Fe;Re=0<=Fe?++cn:--cn)nn.push(e.readUInt16());return nn})(),Se=(this.length-e.pos+this.offset)/2,Ce=(function(){var cn,nn;for(nn=[],Re=cn=0;0<=Se?cn<Se:cn>Se;Re=0<=Se?++cn:--cn)nn.push(e.readUInt16());return nn})(),Re=je=0,sn=Ee.length;je<sn;Re=++je)for(Xe=Ee[Re],xe=Qe=qe=Ye[Re];qe<=Xe?Qe<=Xe:Qe>=Xe;xe=qe<=Xe?++Qe:--Qe)Me[Re]===0?Pe=xe+Be[Re]:(Pe=Ce[Me[Re]/2+(xe-qe)-(Fe-Re)]||0)!==0&&(Pe+=Be[Re]),this.codeMap[xe]=65535&Pe}e.pos=Ve}return t.encode=function(e,r){var xe,Se,Ee,Pe,Ce,Re,Be,Me,Ve,Fe,Ie,qe,Ye,Xe,je,Qe,sn,cn,nn,an,Ze,tn,We,An,Je,St,hn,_n,yn,mn,Sn,Pn,pn,on,xn,Ge,Oe,$e,rn,fn,gn,vn,wn,On,jn,Wn;switch(_n=new ne,Pe=Object.keys(e).sort((function(ti,si){return ti-si})),r){case"macroman":for(Ye=0,Xe=(function(){var ti=[];for(qe=0;qe<256;++qe)ti.push(0);return ti})(),Qe={0:0},Ee={},yn=0,pn=Pe.length;yn<pn;yn++)Qe[wn=e[Se=Pe[yn]]]==null&&(Qe[wn]=++Ye),Ee[Se]={old:e[Se],new:Qe[e[Se]]},Xe[Se]=Qe[e[Se]];return _n.writeUInt16(1),_n.writeUInt16(0),_n.writeUInt32(12),_n.writeUInt16(0),_n.writeUInt16(262),_n.writeUInt16(0),_n.write(Xe),{charMap:Ee,subtable:_n.data,maxGlyphID:Ye+1};case"unicode":for(St=[],Ve=[],sn=0,Qe={},xe={},je=Be=null,mn=0,on=Pe.length;mn<on;mn++)Qe[nn=e[Se=Pe[mn]]]==null&&(Qe[nn]=++sn),xe[Se]={old:nn,new:Qe[nn]},Ce=Qe[nn]-Se,je!=null&&Ce===Be||(je&&Ve.push(je),St.push(Se),Be=Ce),je=Se;for(je&&Ve.push(je),Ve.push(65535),St.push(65535),An=2*(We=St.length),tn=2*Math.pow(Math.log(We)/Math.LN2,2),Fe=Math.log(tn/2)/Math.LN2,Ze=2*We-tn,Re=[],an=[],Ie=[],qe=Sn=0,xn=St.length;Sn<xn;qe=++Sn){if(Je=St[qe],Me=Ve[qe],Je===65535){Re.push(0),an.push(0);break}if(Je-(hn=xe[Je].new)>=32768)for(Re.push(0),an.push(2*(Ie.length+We-qe)),Se=Pn=Je;Je<=Me?Pn<=Me:Pn>=Me;Se=Je<=Me?++Pn:--Pn)Ie.push(xe[Se].new);else Re.push(hn-Je),an.push(0)}for(_n.writeUInt16(3),_n.writeUInt16(1),_n.writeUInt32(12),_n.writeUInt16(4),_n.writeUInt16(16+8*We+2*Ie.length),_n.writeUInt16(0),_n.writeUInt16(An),_n.writeUInt16(tn),_n.writeUInt16(Fe),_n.writeUInt16(Ze),gn=0,Ge=Ve.length;gn<Ge;gn++)Se=Ve[gn],_n.writeUInt16(Se);for(_n.writeUInt16(0),vn=0,Oe=St.length;vn<Oe;vn++)Se=St[vn],_n.writeUInt16(Se);for(On=0,$e=Re.length;On<$e;On++)Ce=Re[On],_n.writeUInt16(Ce);for(jn=0,rn=an.length;jn<rn;jn++)cn=an[jn],_n.writeUInt16(cn);for(Wn=0,fn=Ie.length;Wn<fn;Wn++)Ye=Ie[Wn],_n.writeUInt16(Ye);return{charMap:xe,subtable:_n.data,maxGlyphID:sn+1}}},t})(),ue=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re$1),e.prototype.tag="cmap",e.prototype.parse=function(r){var xe,Se,Ee;for(r.pos=this.offset,this.version=r.readUInt16(),Ee=r.readUInt16(),this.tables=[],this.unicode=null,Se=0;0<=Ee?Se<Ee:Se>Ee;Se=0<=Ee?++Se:--Se)xe=new ce(r,this.offset),this.tables.push(xe),xe.isUnicode&&this.unicode==null&&(this.unicode=xe);return!0},e.encode=function(r,xe){var Se,Ee;return xe==null&&(xe="macroman"),Se=ce.encode(r,xe),(Ee=new ne).writeUInt16(0),Ee.writeUInt16(1),Se.table=Ee.data.concat(Se.subtable),Se},e})(),he=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re$1),e.prototype.tag="hhea",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},e})(),le=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re$1),e.prototype.tag="OS/2",e.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=(function(){var xe,Se;for(Se=[],xe=0;xe<10;++xe)Se.push(r.readByte());return Se})(),this.charRange=(function(){var xe,Se;for(Se=[],xe=0;xe<4;++xe)Se.push(r.readInt());return Se})(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=(function(){var xe,Se;for(Se=[],xe=0;xe<2;xe=++xe)Se.push(r.readInt());return Se})(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},e})(),fe=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re$1),e.prototype.tag="post",e.prototype.parse=function(r){var xe,Se,Ee;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var Pe;for(Se=r.readUInt16(),this.glyphNameIndex=[],Pe=0;0<=Se?Pe<Se:Pe>Se;Pe=0<=Se?++Pe:--Pe)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],Ee=[];r.pos<this.offset+this.length;)xe=r.readByte(),Ee.push(this.names.push(r.readString(xe)));return Ee;case 151552:return Se=r.readUInt16(),this.offsets=r.read(Se);case 196608:break;case 262144:return this.map=(function(){var Ce,Re,Be;for(Be=[],Pe=Ce=0,Re=this.file.maxp.numGlyphs;0<=Re?Ce<Re:Ce>Re;Pe=0<=Re?++Ce:--Ce)Be.push(r.readUInt32());return Be}).call(this)}},e})(),de=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},pe=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re$1),e.prototype.tag="name",e.prototype.parse=function(r){var xe,Se,Ee,Pe,Ce,Re,Be,Me,Ve,Fe,Ie;for(r.pos=this.offset,r.readShort(),xe=r.readShort(),Re=r.readShort(),Se=[],Pe=0;0<=xe?Pe<xe:Pe>xe;Pe=0<=xe?++Pe:--Pe)Se.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+Re+r.readShort()});for(Be={},Pe=Ve=0,Fe=Se.length;Ve<Fe;Pe=++Ve)Ee=Se[Pe],r.pos=Ee.offset,Me=r.readString(Ee.length),Ce=new de(Me,Ee),Be[Ie=Ee.nameID]==null&&(Be[Ie]=[]),Be[Ee.nameID].push(Ce);this.strings=Be,this.copyright=Be[0],this.fontFamily=Be[1],this.fontSubfamily=Be[2],this.uniqueSubfamily=Be[3],this.fontName=Be[4],this.version=Be[5];try{this.postscriptName=Be[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=Be[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=Be[7],this.manufacturer=Be[8],this.designer=Be[9],this.description=Be[10],this.vendorUrl=Be[11],this.designerUrl=Be[12],this.license=Be[13],this.licenseUrl=Be[14],this.preferredFamily=Be[15],this.preferredSubfamily=Be[17],this.compatibleFull=Be[18],this.sampleText=Be[19]},e})(),ge=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re$1),e.prototype.tag="maxp",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},e})(),me=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re$1),e.prototype.tag="hmtx",e.prototype.parse=function(r){var xe,Se,Ee,Pe,Ce,Re,Be;for(r.pos=this.offset,this.metrics=[],xe=0,Re=this.file.hhea.numberOfMetrics;0<=Re?xe<Re:xe>Re;xe=0<=Re?++xe:--xe)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(Ee=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var Me,Ve;for(Ve=[],xe=Me=0;0<=Ee?Me<Ee:Me>Ee;xe=0<=Ee?++Me:--Me)Ve.push(r.readInt16());return Ve})(),this.widths=(function(){var Me,Ve,Fe,Ie;for(Ie=[],Me=0,Ve=(Fe=this.metrics).length;Me<Ve;Me++)Pe=Fe[Me],Ie.push(Pe.advance);return Ie}).call(this),Se=this.widths[this.widths.length-1],Be=[],xe=Ce=0;0<=Ee?Ce<Ee:Ce>Ee;xe=0<=Ee?++Ce:--Ce)Be.push(this.widths.push(Se));return Be},e.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},e})(),ve=[].slice,be=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re$1),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(r){var xe,Se,Ee,Pe,Ce,Re,Be,Me,Ve,Fe;return r in this.cache?this.cache[r]:(Pe=this.file.loca,xe=this.file.contents,Se=Pe.indexOf(r),(Ee=Pe.lengthOf(r))===0?this.cache[r]=null:(xe.pos=this.offset+Se,Ce=(Re=new ne(xe.read(Ee))).readShort(),Me=Re.readShort(),Fe=Re.readShort(),Be=Re.readShort(),Ve=Re.readShort(),this.cache[r]=Ce===-1?new we(Re,Me,Fe,Be,Ve):new ye(Re,Ce,Me,Fe,Be,Ve),this.cache[r]))},e.prototype.encode=function(r,xe,Se){var Ee,Pe,Ce,Re,Be;for(Ce=[],Pe=[],Re=0,Be=xe.length;Re<Be;Re++)Ee=r[xe[Re]],Pe.push(Ce.length),Ee&&(Ce=Ce.concat(Ee.encode(Se)));return Pe.push(Ce.length),{table:Ce,offsets:Pe}},e})(),ye=(function(){function t(e,r,xe,Se,Ee,Pe){this.raw=e,this.numberOfContours=r,this.xMin=xe,this.yMin=Se,this.xMax=Ee,this.yMax=Pe,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),we=(function(){function t(e,r,xe,Se,Ee){var Pe,Ce;for(this.raw=e,this.xMin=r,this.yMin=xe,this.xMax=Se,this.yMax=Ee,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],Pe=this.raw;Ce=Pe.readShort(),this.glyphOffsets.push(Pe.pos),this.glyphIDs.push(Pe.readUInt16()),32&Ce;)Pe.pos+=1&Ce?4:2,128&Ce?Pe.pos+=8:64&Ce?Pe.pos+=4:8&Ce&&(Pe.pos+=2)}return t.prototype.encode=function(){var e,r,xe;for(r=new ne(ve.call(this.raw.data)),e=0,xe=this.glyphIDs.length;e<xe;++e)r.pos=this.glyphOffsets[e];return r.data},t})(),Ne=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re$1),e.prototype.tag="loca",e.prototype.parse=function(r){var xe,Se;return r.pos=this.offset,xe=this.file.head.indexToLocFormat,this.offsets=xe===0?(function(){var Ee,Pe;for(Pe=[],Se=0,Ee=this.length;Se<Ee;Se+=2)Pe.push(2*r.readUInt16());return Pe}).call(this):(function(){var Ee,Pe;for(Pe=[],Se=0,Ee=this.length;Se<Ee;Se+=4)Pe.push(r.readUInt32());return Pe}).call(this)},e.prototype.indexOf=function(r){return this.offsets[r]},e.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},e.prototype.encode=function(r,xe){for(var Se=new Uint32Array(this.offsets.length),Ee=0,Pe=0,Ce=0;Ce<Se.length;++Ce)if(Se[Ce]=Ee,Pe<xe.length&&xe[Pe]==Ce){++Pe,Se[Ce]=Ee;var Re=this.offsets[Ce],Be=this.offsets[Ce+1]-Re;Be>0&&(Ee+=Be)}for(var Me=new Array(4*Se.length),Ve=0;Ve<Se.length;++Ve)Me[4*Ve+3]=255&Se[Ve],Me[4*Ve+2]=(65280&Se[Ve])>>8,Me[4*Ve+1]=(16711680&Se[Ve])>>16,Me[4*Ve]=(4278190080&Se[Ve])>>24;return Me},e})(),Le=(function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,xe,Se,Ee;for(r in Se=this.font.cmap.tables[0].codeMap,e={},Ee=this.subset)xe=Ee[r],e[r]=Se[xe];return e},t.prototype.glyphsFor=function(e){var r,xe,Se,Ee,Pe,Ce,Re;for(Se={},Pe=0,Ce=e.length;Pe<Ce;Pe++)Se[Ee=e[Pe]]=this.font.glyf.glyphFor(Ee);for(Ee in r=[],Se)(xe=Se[Ee])!=null&&xe.compound&&r.push.apply(r,xe.glyphIDs);if(r.length>0)for(Ee in Re=this.glyphsFor(r))xe=Re[Ee],Se[Ee]=xe;return Se},t.prototype.encode=function(e,r){var xe,Se,Ee,Pe,Ce,Re,Be,Me,Ve,Fe,Ie,qe,Ye,Xe,je;for(Se in xe=ue.encode(this.generateCmap(),"unicode"),Pe=this.glyphsFor(e),Ie={0:0},je=xe.charMap)Ie[(Re=je[Se]).old]=Re.new;for(qe in Fe=xe.maxGlyphID,Pe)qe in Ie||(Ie[qe]=Fe++);return Me=(function(Qe){var sn,cn;for(sn in cn={},Qe)cn[Qe[sn]]=sn;return cn})(Ie),Ve=Object.keys(Me).sort((function(Qe,sn){return Qe-sn})),Ye=(function(){var Qe,sn,cn;for(cn=[],Qe=0,sn=Ve.length;Qe<sn;Qe++)Ce=Ve[Qe],cn.push(Me[Ce]);return cn})(),Ee=this.font.glyf.encode(Pe,Ye,Ie),Be=this.font.loca.encode(Ee.offsets,Ye),Xe={cmap:this.font.cmap.raw(),glyf:Ee.table,loca:Be,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(Xe["OS/2"]=this.font.os2.raw()),this.font.directory.encode(Xe)},t})();E.API.PDFObject=(function(){var t;function e(){}return t=function(r,xe){return(Array(xe+1).join("0")+r).slice(-xe)},e.convert=function(r){var xe,Se,Ee,Pe;if(Array.isArray(r))return"["+(function(){var Ce,Re,Be;for(Be=[],Ce=0,Re=r.length;Ce<Re;Ce++)xe=r[Ce],Be.push(e.convert(xe));return Be})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(Se in Ee=["<<"],r)Pe=r[Se],Ee.push("/"+Se+" "+e.convert(Pe));return Ee.push(">>"),Ee.join(`
`)}return""+r},e})();const MODE_COLORS$2={content:"#10b981",communicative:"#f59e0b",organisation:"#0ea5e9",language:"#f43f5e",general:"#8b5cf6",select:"#ffffff",stamper:"#be123c"},MODE_LABELS$2={content:"C",communicative:"CA",organisation:"O",language:"L",general:"G",select:"S",stamper:"ST"},useGradingSession=t=>{const[e,r]=reactExports.useState(null),[xe,Se]=reactExports.useState(null),[Ee,Pe]=reactExports.useState(""),[Ce,Re]=reactExports.useState(""),[Be,Me]=reactExports.useState("Form 1 (A2 Revise)"),[Ve,Fe]=reactExports.useState("1"),[Ie,qe]=reactExports.useState(""),[Ye,Xe]=reactExports.useState([]),[je,Qe]=reactExports.useState(0),[sn,cn]=reactExports.useState(0),[nn,an]=reactExports.useState("content"),[Ze,tn]=reactExports.useState({}),We=reactExports.useRef({typingTimeout:null,isTyping:!1,dragStartSnapshot:null}),[An,Je]=reactExports.useState(0),[St,hn]=reactExports.useState(!1),[_n,yn]=reactExports.useState({}),[mn,Sn]=reactExports.useState("idle"),[Pn,pn]=reactExports.useState(!1),[on,xn]=reactExports.useState(!1),[Ge,Oe]=reactExports.useState(!1),[$e,rn]=reactExports.useState(!1),fn=reactExports.useRef(null),gn=Ye[je],vn=gn?`${gn.id}-${sn}`:null,wn=reactExports.useMemo(()=>vn?Ze[vn]||{past:[],future:[]}:{past:[],future:[]},[Ze,vn]),On=reactExports.useCallback(()=>{if(!gn||!vn)return;const wi=gn.annotations.filter(Ai=>Ai.pageIndex===sn);tn(Ai=>{const Rn=Ai[vn]||{past:[]};return{...Ai,[vn]:{past:[...Rn.past,JSON.parse(JSON.stringify(wi))],future:[]}}})},[gn,vn,sn]),jn=reactExports.useCallback((wi,Ai=!0)=>{Ai&&On(),Xe(Rn=>Rn.map((Zn,Xn)=>Xn===je?{...Zn,annotations:[...Zn.annotations,wi]}:Zn))},[On,je]),Wn=reactExports.useMemo(()=>{if(Ye.length===0)return null;const wi=Ye.map(ii=>ii.scores.content+ii.scores.communicative+ii.scores.organisation+ii.scores.language),Ai=wi.reduce((ii,gi)=>ii+gi,0)/Ye.length,Rn=[...wi].sort((ii,gi)=>ii-gi),Zn=Rn.length%2===0?(Rn[Rn.length/2-1]+Rn[Rn.length/2])/2:Rn[Math.floor(Rn.length/2)],Xn=Ye.reduce((ii,gi)=>ii+gi.scores.content,0)/Ye.length,Si=Ye.reduce((ii,gi)=>ii+gi.scores.communicative,0)/Ye.length,Ci=Ye.reduce((ii,gi)=>ii+gi.scores.organisation,0)/Ye.length,Oi=Ye.reduce((ii,gi)=>ii+gi.scores.language,0)/Ye.length,Fn=Ye.reduce((ii,gi)=>ii+gi.timeSpent,0)/Ye.length,Nn=new Array(21).fill(0);wi.forEach(ii=>{const gi=Math.min(20,Math.max(0,Math.round(ii)));Nn[gi]++});const Gn={};Ye.forEach(ii=>ii.annotations.forEach(gi=>{gi.code&&(Gn[gi.code]=(Gn[gi.code]||0)+1)}));const ei=Object.entries(Gn).map(([ii,gi])=>{const Ti=ERROR_CODES.find(Wi=>Wi.code===ii);return{code:ii,count:gi,label:(Ti==null?void 0:Ti.label)||ii,mode:(Ti==null?void 0:Ti.mode)||"general"}}).sort((ii,gi)=>gi.count-ii.count).slice(0,5);return{avg:Ai.toFixed(1),median:Zn.toFixed(1),avgTimeSeconds:Fn,categories:[{key:"content",label:"Content",value:Xn.toFixed(1),color:MODE_COLORS$2.content},{key:"communicative",label:"Communicative",value:Si.toFixed(1),color:MODE_COLORS$2.communicative},{key:"organisation",label:"Organisation",value:Ci.toFixed(1),color:MODE_COLORS$2.organisation},{key:"language",label:"Language",value:Oi.toFixed(1),color:MODE_COLORS$2.language}],topErrors:ei,distribution:Nn}},[Ye]),ti=reactExports.useCallback(async()=>{const wi=e||Date.now().toString();e||r(wi);const Ai=xe||new Date().toISOString();xe||Se(Ai);const Rn={id:wi,name:Ee,graderName:Ce,level:Be,part:Ve,taskDescription:Ie,students:Ye.map((Zn,Xn)=>Xn===je?{...Zn,timeSpent:An}:Zn),createdAt:Ai,lastStudentIndex:je,lastImageIndex:sn};try{await storage.saveSession(Rn),Sn("saved"),setTimeout(()=>Sn("idle"),2e3)}catch(Zn){console.error("Save failed:",Zn),Sn("idle")}},[e,xe,Ee,Ce,Be,Ve,Ie,Ye,je,sn,An]),si=reactExports.useCallback(()=>{if(!e){const wi=Date.now().toString();r(wi),Se(new Date().toISOString())}},[e]),qn=wi=>{var Rn;r(wi.id),Se(wi.createdAt),Pe(wi.name),Re(wi.graderName||""),Me(wi.level),Fe(wi.part),qe(wi.taskDescription),Xe(wi.students),Qe(wi.lastStudentIndex??0),cn(wi.lastImageIndex??0);const Ai=wi.lastStudentIndex??0;Je(((Rn=wi.students[Ai])==null?void 0:Rn.timeSpent)||0)},En=()=>{if(!gn||!vn)return;const wi=Ze[vn];if(!wi||wi.past.length===0)return;const Ai=[...wi.past],Rn=Ai.pop(),Zn=gn.annotations.filter(Xn=>Xn.pageIndex===sn);tn(Xn=>({...Xn,[vn]:{past:Ai,future:[JSON.parse(JSON.stringify(Zn)),...wi.future]}})),Xe(Xn=>Xn.map(Si=>{if(Si.id!==gn.id)return Si;const Ci=Si.annotations.filter(Oi=>Oi.pageIndex!==sn);return{...Si,annotations:[...Ci,...Rn]}}))},Qn=()=>{if(!gn||!vn)return;const wi=Ze[vn];if(!wi||wi.future.length===0)return;const Ai=[...wi.future],Rn=Ai.shift(),Zn=gn.annotations.filter(Xn=>Xn.pageIndex===sn);tn(Xn=>({...Xn,[vn]:{past:[...wi.past,JSON.parse(JSON.stringify(Zn))],future:Ai}})),Xe(Xn=>Xn.map(Si=>{if(Si.id!==gn.id)return Si;const Ci=Si.annotations.filter(Oi=>Oi.pageIndex!==sn);return{...Si,annotations:[...Ci,...Rn]}}))},Cn=(wi,Ai)=>{We.current.isTyping||(On(),We.current.isTyping=!0),We.current.typingTimeout&&clearTimeout(We.current.typingTimeout),We.current.typingTimeout=setTimeout(()=>{We.current.isTyping=!1},1e3),Xe(Rn=>Rn.map((Zn,Xn)=>Xn!==je?Zn:{...Zn,annotations:Zn.annotations.map(Si=>Si.id===wi?{...Si,...Ai}:Si)}))},Mn=wi=>{On(),Xe(Ai=>Ai.map((Rn,Zn)=>Zn!==je?Rn:{...Rn,annotations:Rn.annotations.filter(Xn=>Xn.id!==wi)}))},Un=wi=>{wi.length!==0&&(On(),Xe(Ai=>Ai.map((Rn,Zn)=>Zn!==je?Rn:{...Rn,annotations:Rn.annotations.filter(Xn=>!wi.includes(Xn.id))})))},zn=(wi,Ai)=>{Xe(Rn=>Rn.map((Zn,Xn)=>Xn!==je?Zn:{...Zn,scores:{...Zn.scores,[wi]:Ai}}))},ni=(wi,Ai)=>{Xe(Rn=>Rn.map((Zn,Xn)=>Xn!==je?Zn:{...Zn,justifications:{...Zn.justifications,[wi]:Ai}}))},yi=wi=>{Xe(Ai=>Ai.map((Rn,Zn)=>Zn===je?{...Rn,name:wi}:Rn))},pi=reactExports.useCallback((wi,Ai)=>{const Rn=je+wi;if(Rn<0||Rn>=Ye.length)return;const Zn=[...Ye];Zn[je]={...Zn[je],timeSpent:An},Xe(Zn),Qe(Rn),Je(Zn[Rn].timeSpent),cn(Ai??0)},[je,Ye,An]),$n=()=>{je>=Ye.length-1||Xe(wi=>{const Ai=[...wi],Rn={...Ai[je]},Zn={...Ai[je+1]},Xn=Rn.images.length,Si=Zn.annotations.map(Ci=>({...Ci,pageIndex:Ci.pageIndex+Xn}));return Ai[je]={...Rn,images:[...Rn.images,...Zn.images],annotations:[...Rn.annotations,...Si]},Ai.splice(je+1,1),Ai})},Yn=()=>{if(je===0)return;Xe(Ai=>{const Rn=[...Ai],Zn={...Rn[je-1]},Xn={...Rn[je]},Si=Zn.images.length,Ci=Xn.annotations.map(Oi=>({...Oi,pageIndex:Oi.pageIndex+Si}));return Rn[je-1]={...Zn,images:[...Zn.images,...Xn.images],annotations:[...Xn.annotations,...Ci]},Rn.splice(je,1),Rn});const wi=Ye[je-1].images.length;Qe(je-1),cn(wi)},ai=()=>{sn!==0&&(Xe(wi=>{const Ai=[...wi],Rn={...Ai[je]},Zn=Rn.images.slice(0,sn),Xn=Rn.images.slice(sn),Si=Rn.annotations.filter(Fn=>Fn.pageIndex<sn),Ci=Rn.annotations.filter(Fn=>Fn.pageIndex>=sn).map(Fn=>({...Fn,pageIndex:Fn.pageIndex-sn})),Oi={...Rn,id:(Date.now()+Math.random()).toString(),name:`${Rn.name} (Part 2)`,images:Xn,annotations:Ci,scores:{content:0,communicative:0,organisation:0,language:0},justifications:{content:"",communicative:"",organisation:"",language:""},timeSpent:0};return Ai[je]={...Rn,images:Zn,annotations:Si},Ai.splice(je+1,0,Oi),Ai}),Qe(je+1),cn(0))},Di=reactExports.useCallback(()=>{gn&&(sn<gn.images.length-1?cn(wi=>wi+1):je<Ye.length-1&&pi(1,0))},[gn,sn,je,Ye.length,pi]),ki=reactExports.useCallback(()=>{if(gn){if(sn>0)cn(wi=>wi-1);else if(je>0){const wi=Ye[je-1];pi(-1,wi.images.length-1)}}},[gn,sn,je,Ye,pi]),Ji=reactExports.useCallback(wi=>{const Ai=["Name","Content","Communicative","Organisation","Language","Total","Time (s)"],Rn=wi.map(Oi=>{const Fn=Oi.scores.content+Oi.scores.communicative+Oi.scores.organisation+Oi.scores.language;return[Oi.name,Oi.scores.content,Oi.scores.communicative,Oi.scores.organisation,Oi.scores.language,Fn,Oi.timeSpent]}),Zn=[Ai,...Rn].map(Oi=>Oi.join(",")).join(`
`),Xn=new Blob([Zn],{type:"text/csv;charset=utf-8;"}),Si=URL.createObjectURL(Xn),Ci=document.createElement("a");Ci.setAttribute("href",Si),Ci.setAttribute("download",`${Ee.replace(/\s+/g,"_")}_Gradebook.csv`),document.body.appendChild(Ci),Ci.click(),document.body.removeChild(Ci)},[Ee]),Pi=reactExports.useCallback(async wi=>{const Ai=new E;wi.forEach((Rn,Zn)=>{Zn>0&&Ai.addPage(),Ai.setFontSize(18),Ai.text(`Feedback: ${Rn.name}`,20,20),Ai.setFontSize(12),Ai.text(`Level: ${Be} | Part: ${Ve}`,20,30),Ai.text(`Total Score: ${Rn.scores.content+Rn.scores.communicative+Rn.scores.organisation+Rn.scores.language}/20`,20,40);let Xn=50;["content","communicative","organisation","language"].forEach(Si=>{Ai.setFont("helvetica","bold"),Ai.text(`${Si.charAt(0).toUpperCase()+Si.slice(1)}: ${Rn.scores[Si]}/5`,20,Xn),Xn+=7,Ai.setFont("helvetica","normal");const Ci=Ai.splitTextToSize(Rn.justifications[Si]||"No justification provided.",170);Ai.text(Ci,25,Xn),Xn+=Ci.length*5+5})}),Ai.save(`${Ee.replace(/\s+/g,"_")}_Batch_Feedback.pdf`)},[Ee,Be,Ve]),na=async wi=>{var Rn;const Ai=(Rn=wi.target.files)==null?void 0:Rn[0];if(Ai){xn(!0);try{let Zn="";if(Ai.type==="application/pdf"){const Xn=await convertPdfToImages(Ai);Xn.length>0&&(Zn=Xn[0])}else Zn=await new Promise(Xn=>{const Si=new FileReader;Si.onload=Ci=>{var Oi;return Xn((Oi=Ci.target)==null?void 0:Oi.result)},Si.readAsDataURL(Ai)});if(Zn){const Xn=await transcribeTaskImage(Zn);qe(Xn)}}catch{alert("Failed.")}finally{xn(!1)}}},ea=async wi=>{const Ai=wi.target.files;if(!Ai||Ai.length===0)return;Oe(!0);const Rn=[],Zn=Ye.length+1;let Xn=0;try{for(let Si=0;Si<Ai.length;Si++){const Ci=Ai[Si];let Oi=[];Ci.type==="application/pdf"?Oi=await convertPdfToImages(Ci):Oi=[await new Promise(Nn=>{const Gn=new FileReader;Gn.onload=ei=>{var ii;return Nn((ii=ei.target)==null?void 0:ii.result)},Gn.readAsDataURL(Ci)})],Oi.length>0&&Oi.forEach(Fn=>{Rn.push({id:(Date.now()+Si+Math.random()+Xn).toString(),name:`Untitled ${Zn+Xn}`,images:[Fn],annotations:[],scores:{content:0,communicative:0,organisation:0,language:0},justifications:{content:"",communicative:"",organisation:"",language:""},timeSpent:0}),Xn++})}Xe(Si=>[...Si,...Rn])}catch(Si){console.error(Si)}finally{Oe(!1),wi.target&&(wi.target.value="")}},Ki=async(wi,Ai,Rn=!0)=>{const Zn=document.createElement("canvas"),Xn=Zn.getContext("2d");if(!Xn)throw new Error("Could not get context");const Si=new Image;Si.src=wi.images[Ai],await new Promise(Nn=>{Si.onload=Nn}),Zn.width=Si.width,Zn.height=Si.height;const Ci=Zn.width/800,Oi=(Nn,Gn,ei,ii,gi,Ti)=>{Nn.beginPath(),Nn.moveTo(Gn+Ti,ei),Nn.lineTo(Gn+ii-Ti,ei),Nn.quadraticCurveTo(Gn+ii,ei,Gn+ii,ei+Ti),Nn.lineTo(Gn+ii,ei+gi-Ti),Nn.quadraticCurveTo(Gn+ii,ei+gi,Gn+ii-Ti,ei+gi),Nn.lineTo(Gn+Ti,ei+gi),Nn.quadraticCurveTo(Gn,ei+gi,Gn,ei+gi-Ti),Nn.lineTo(Gn,ei+Ti),Nn.quadraticCurveTo(Gn,ei,Gn+Ti,ei),Nn.closePath(),Nn.fill()};if(Rn){const Nn=`${e}-${wi.id}-${Ai}`,Gn=St&&_n[Nn]?_n[Nn]:wi.images[Ai],ei=new Image;ei.src=Gn,await new Promise(ii=>{ei.onload=ii}),Xn.drawImage(ei,0,0)}else Xn.fillStyle="white",Xn.fillRect(0,0,Zn.width,Zn.height);return wi.annotations.filter(Nn=>Nn.pageIndex===Ai).forEach(Nn=>{var ei;const Gn=Nn.mode==="content"&&Nn.isElaboration?"#34d399":MODE_COLORS$2[Nn.mode];if(Nn.type==="dot"){const ii=(Nn.x||0)*Zn.width,gi=(Nn.y||0)*Zn.height,Ti=10*Ci;Xn.save(),Xn.shadowBlur=4*Ci,Xn.shadowColor="rgba(0,0,0,0.4)",Xn.shadowOffsetY=2*Ci,Xn.beginPath(),Xn.arc(ii,gi,Ti,0,Math.PI*2),Xn.fillStyle=Gn,Xn.fill(),Xn.restore(),Xn.strokeStyle="white",Xn.lineWidth=1.5*Ci,Xn.stroke(),Xn.fillStyle="white",Xn.font=`800 ${Ti*1.1}px sans-serif`,Xn.textAlign="center",Xn.textBaseline="middle";let Wi=((ei=Nn.number)==null?void 0:ei.toString())||"?";if(Nn.number){const ji=wi.annotations.filter(la=>la.mode===Nn.mode&&la.number===Nn.number&&la.type==="dot").sort((la,ia)=>parseInt(la.id)-parseInt(ia.id)).findIndex(la=>la.id===Nn.id);ji>0&&(Wi=`${Nn.number}${String.fromCharCode(96+ji)}`)}Xn.fillText(Wi,ii,gi)}else if(Nn.type==="rect"&&Nn.rects)Nn.rects.forEach((ii,gi)=>{const Ti=ii.x*Zn.width,Wi=ii.y*Zn.height,qi=ii.width*Zn.width,ji=ii.height*Zn.height;if(Xn.save(),Xn.globalCompositeOperation="multiply",Xn.fillStyle=Gn+"26",Xn.fillRect(Ti,Wi,qi,ji),Xn.restore(),gi===0){const la=Nn.code||MODE_LABELS$2[Nn.mode],ia=Nn.correction;Xn.font=`800 ${7*Ci}px 'JetBrains Mono', monospace`;const Zi=7*Ci,aa=2*Ci,ca=1.5*Ci,ma=la.length*Zi+aa*2,xa=7*Ci+ca*2,Oa=Ti-xa-1*Ci,Ba=Wi+ji/2-ma/2;if(Xn.fillStyle=Gn,Oi(Xn,Oa,Ba,xa,ma,2*Ci),Xn.fillStyle="white",Xn.textAlign="center",la.split("").forEach((tr,wr)=>{Xn.fillText(tr,Oa+xa/2,Ba+aa+wr*Zi+Zi/2)}),ia){Xn.font=`italic 800 ${9*Ci}px 'JetBrains Mono', monospace`,Xn.textAlign="left";const tr=Wi-.5*Ci;Xn.strokeStyle="white",Xn.lineWidth=2*Ci,Xn.lineJoin="round",Xn.strokeText(ia,Ti,tr),Xn.fillStyle=Gn,Xn.fillText(ia,Ti,tr)}}});else if(Nn.type==="stamp"&&Nn.stampData){const ii=(Nn.x||0)*Zn.width,gi=(Nn.y||0)*Zn.height,Ti=140*Ci,Wi=100*Ci;Xn.save(),Xn.shadowBlur=10*Ci,Xn.shadowColor="rgba(0,0,0,0.2)",Xn.fillStyle="white",Oi(Xn,ii,gi,Ti,Wi,8*Ci),Xn.strokeStyle=MODE_COLORS$2.stamper,Xn.lineWidth=2*Ci,Xn.stroke(),Xn.fillStyle=MODE_COLORS$2.stamper,Xn.font=`800 ${10*Ci}px 'JetBrains Mono', monospace`,Xn.textAlign="left";const qi=10*Ci,ji=14*Ci;Xn.fillText(`C:  ${Nn.stampData.scores.content}/5`,ii+qi,gi+qi+ji*1),Xn.fillText(`CA: ${Nn.stampData.scores.communicative}/5`,ii+qi,gi+qi+ji*2),Xn.fillText(`O:  ${Nn.stampData.scores.organisation}/5`,ii+qi,gi+qi+ji*3),Xn.fillText(`L:  ${Nn.stampData.scores.language}/5`,ii+qi,gi+qi+ji*4),Xn.font=`800 ${22*Ci}px 'JetBrains Mono', monospace`,Xn.textAlign="right",Xn.fillText(`${Nn.stampData.total}`,ii+Ti-qi,gi+gi+Wi/2-gi+10*Ci),Xn.font=`800 ${8*Ci}px 'JetBrains Mono', monospace`,Xn.fillText("/20",ii+Ti-qi,gi+gi+Wi/2-gi+20*Ci),Xn.font=`800 ${6*Ci}px 'JetBrains Mono', monospace`,Xn.textAlign="left",Xn.fillText(`By ${Nn.stampData.grader||"Unknown"}`,ii+qi,gi+Wi-qi*1.5),Xn.fillText(`${Nn.stampData.date}`,ii+qi,gi+Wi-qi*.8),Xn.restore()}}),Zn},oi=async()=>{if(gn){rn(!0);try{const wi=await Ki(gn,sn,!0),Ai=wi.toDataURL("image/jpeg",.85),Rn=new E({orientation:wi.width>wi.height?"l":"p",unit:"px",format:[wi.width,wi.height],compress:!0});Rn.addImage(Ai,"JPEG",0,0,wi.width,wi.height,void 0,"MEDIUM",0),Rn.save(`${gn.name.replace(/\s+/g,"_")}_Page_${sn+1}_Full.pdf`)}catch{alert("Failed to export page.")}finally{rn(!1)}}},Kn=async()=>{if(gn){rn(!0);try{const wi=await Ki(gn,sn,!1),Ai=wi.toDataURL("image/jpeg",.85),Rn=new E({orientation:wi.width>wi.height?"l":"p",unit:"px",format:[wi.width,wi.height],compress:!0});Rn.addImage(Ai,"JPEG",0,0,wi.width,wi.height,void 0,"MEDIUM",0),Rn.save(`${gn.name.replace(/\s+/g,"_")}_Page_${sn+1}_AnnotationsOnly.pdf`)}catch{alert("Failed to export annotations.")}finally{rn(!1)}}},di=async()=>{if(gn){rn(!0);try{const wi=new E({unit:"px",compress:!0});for(let Ai=0;Ai<gn.images.length;Ai++){const Rn=await Ki(gn,Ai,!0),Zn=Rn.toDataURL("image/jpeg",.8);Ai===0&&wi.deletePage(1),wi.addPage([Rn.width,Rn.height],Rn.width>Rn.height?"l":"p"),wi.addImage(Zn,"JPEG",0,0,Rn.width,Rn.height,void 0,"MEDIUM",0)}wi.save(`${gn.name.replace(/\s+/g,"_")}_All_Full.pdf`)}catch{alert("Failed to export all.")}finally{rn(!1)}}},Ui=async()=>{if(gn){rn(!0);try{const wi=new E({unit:"px",compress:!0});for(let Ai=0;Ai<gn.images.length;Ai++){const Rn=await Ki(gn,Ai,!1),Zn=Rn.toDataURL("image/jpeg",.8);Ai===0&&wi.deletePage(1),wi.addPage([Rn.width,Rn.height],Rn.width>Rn.height?"l":"p"),wi.addImage(Zn,"JPEG",0,0,Rn.width,Rn.height,void 0,"MEDIUM",0)}wi.save(`${gn.name.replace(/\s+/g,"_")}_All_AnnotationsOnly.pdf`)}catch{alert("Failed to export all annotations.")}finally{rn(!1)}}};return reactExports.useEffect(()=>{if(St&&Ye.length>0){const wi=Ye[je];if(!wi||!e)return;const Ai=`${e}-${wi.id}-${sn}`;!_n[Ai]&&!Pn&&(pn(!0),(async()=>{try{const Rn=await storage.getProcessedImage(Ai);if(Rn)yn(Zn=>({...Zn,[Ai]:Rn}));else{const Zn=wi.images[sn];if(Zn){const Xn=await processImageWithSauvola(Zn);await storage.saveProcessedImage(Ai,Xn),yn(Si=>({...Si,[Ai]:Xn}))}}}catch(Rn){console.error("Enhance logic error:",Rn)}finally{pn(!1)}})())}},[St,je,sn,Ye,_n,Pn,e]),{sessionId:e,setSessionId:r,createdAt:xe,setCreatedAt:Se,sessionName:Ee,setSessionName:Pe,graderName:Ce,setGraderName:Re,level:Be,setLevel:Me,part:Ve,setPart:Fe,taskDescription:Ie,setTaskDescription:qe,students:Ye,setStudents:Xe,currentStudentIndex:je,setCurrentStudentIndex:Qe,currentImageIndex:sn,setCurrentImageIndex:cn,currentStudent:gn,activeMode:nn,setActiveMode:an,saveToStorage:ti,ensureSessionId:si,resumeSession:qn,history:Ze,setHistory:tn,currentHistory:wn,recordHistory:On,performUndo:En,performRedo:Qn,updateAnnotation:Cn,deleteAnnotation:Mn,deleteAnnotations:Un,updateScore:zn,updateJustification:ni,saveStudentName:yi,changeStudent:pi,mergeNextStudent:$n,mergeWithPrevious:Yn,splitStudentAtPage:ai,handleUniversalNext:Di,handleUniversalPrev:ki,handleDownloadGradebook:Ji,handlePrintBatchFeedback:Pi,isProcessingImg:Pn,isTaskLoading:on,isTaskOpen:!1,setIsTaskOpen:()=>{},isScriptLoading:Ge,isExporting:$e,handleTaskUpload:na,handleScriptUpload:ea,handleExportCurrentPage:oi,handleExportCurrentAnnotations:Kn,handleExportAll:di,handleExportAllAnnotations:Ui,classStats:Wn,saveTimeoutRef:fn,historyRefs:We,setAutoSaveStatus:Sn,addAnnotation:jn,setCurrentStudentTime:Je,setEnhanceMode:hn,setProcessedCache:yn,autoSaveStatus:mn,currentStudentTime:An,enhanceMode:St,processedCache:_n}};var reactDomExports=requireReactDom();/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,xe)=>xe?xe.toUpperCase():r.toLowerCase()),toPascalCase=t=>{const e=toCamelCase(t);return e.charAt(0).toUpperCase()+e.slice(1)},mergeClasses=(...t)=>t.filter((e,r,xe)=>!!e&&e.trim()!==""&&xe.indexOf(e)===r).join(" ").trim(),hasA11yProp=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:xe,className:Se="",children:Ee,iconNode:Pe,...Ce},Re)=>reactExports.createElement("svg",{ref:Re,...defaultAttributes,width:e,height:e,stroke:t,strokeWidth:xe?Number(r)*24/Number(e):r,className:mergeClasses("lucide",Se),...!Ee&&!hasA11yProp(Ce)&&{"aria-hidden":"true"},...Ce},[...Pe.map(([Be,Me])=>reactExports.createElement(Be,Me)),...Array.isArray(Ee)?Ee:[Ee]]));/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(t,e)=>{const r=reactExports.forwardRef(({className:xe,...Se},Ee)=>reactExports.createElement(Icon,{ref:Ee,iconNode:e,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(t))}`,`lucide-${t}`,xe),...Se}));return r.displayName=toPascalCase(t),r};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$G=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],ArrowDown=createLucideIcon("arrow-down",__iconNode$G);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$F=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ArrowRight=createLucideIcon("arrow-right",__iconNode$F);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$E=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],ArrowUp=createLucideIcon("arrow-up",__iconNode$E);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$D=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ChevronRight=createLucideIcon("chevron-right",__iconNode$D);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$C=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ChevronLeft=createLucideIcon("chevron-left",__iconNode$C);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$B=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],CircleAlert=createLucideIcon("circle-alert",__iconNode$B);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$A=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],CircleCheckBig=createLucideIcon("circle-check-big",__iconNode$A);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$z=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],CircleUser=createLucideIcon("circle-user",__iconNode$z);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$y=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Clock=createLucideIcon("clock",__iconNode$y);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$x=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Copy=createLucideIcon("copy",__iconNode$x);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$w=[["path",{d:"m15 10 5 5-5 5",key:"qqa56n"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],CornerDownRight=createLucideIcon("corner-down-right",__iconNode$w);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$v=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Database=createLucideIcon("database",__iconNode$v);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$u=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Download=createLucideIcon("download",__iconNode$u);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$t=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],EllipsisVertical=createLucideIcon("ellipsis-vertical",__iconNode$t);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$s=[["path",{d:"M12.659 22H18a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v9.34",key:"o6klzx"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10.378 12.622a1 1 0 0 1 3 3.003L8.36 20.637a2 2 0 0 1-.854.506l-2.867.837a.5.5 0 0 1-.62-.62l.836-2.869a2 2 0 0 1 .506-.853z",key:"zhnas1"}]],FilePen=createLucideIcon("file-pen",__iconNode$s);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$r=[["path",{d:"M11 21a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-8a1 1 0 0 1 1-1",key:"likhh7"}],["path",{d:"M16 16a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1",key:"17ky3x"}],["path",{d:"M21 6a2 2 0 0 0-.586-1.414l-2-2A2 2 0 0 0 17 2h-3a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1z",key:"1hyeo0"}]],FileStack=createLucideIcon("file-stack",__iconNode$r);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$q=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],FileText=createLucideIcon("file-text",__iconNode$q);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$p=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],GraduationCap=createLucideIcon("graduation-cap",__iconNode$p);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$o=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Grid3x3=createLucideIcon("grid-3x3",__iconNode$o);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$n=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],GripVertical=createLucideIcon("grip-vertical",__iconNode$n);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$m=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],History=createLucideIcon("history",__iconNode$m);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$l=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Image$1=createLucideIcon("image",__iconNode$l);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$k=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Layers=createLucideIcon("layers",__iconNode$k);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$j=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],MessageSquare=createLucideIcon("message-square",__iconNode$j);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$i=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],MousePointer2=createLucideIcon("mouse-pointer-2",__iconNode$i);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$h=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],PenTool=createLucideIcon("pen-tool",__iconNode$h);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$g=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Plus=createLucideIcon("plus",__iconNode$g);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$f=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],Redo=createLucideIcon("redo",__iconNode$f);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$e=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],RefreshCcw=createLucideIcon("refresh-ccw",__iconNode$e);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$d=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Save=createLucideIcon("save",__iconNode$d);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$c=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],Scissors=createLucideIcon("scissors",__iconNode$c);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$b=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Search=createLucideIcon("search",__iconNode$b);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$a=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Sparkles=createLucideIcon("sparkles",__iconNode$a);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$9=[["path",{d:"M14 13V8.5C14 7 15 7 15 5a3 3 0 0 0-6 0c0 2 1 2 1 3.5V13",key:"i9gjdv"}],["path",{d:"M20 15.5a2.5 2.5 0 0 0-2.5-2.5h-11A2.5 2.5 0 0 0 4 15.5V17a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1z",key:"1vzg3v"}],["path",{d:"M5 22h14",key:"ehvnwv"}]],Stamp=createLucideIcon("stamp",__iconNode$9);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$8=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Tag=createLucideIcon("tag",__iconNode$8);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$7=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Trash2=createLucideIcon("trash-2",__iconNode$7);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$6=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],Undo=createLucideIcon("undo",__iconNode$6);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$5=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Upload=createLucideIcon("upload",__iconNode$5);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$4=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],User=createLucideIcon("user",__iconNode$4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$3=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],WandSparkles=createLucideIcon("wand-sparkles",__iconNode$3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$2=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X=createLucideIcon("x",__iconNode$2);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],ZoomIn=createLucideIcon("zoom-in",__iconNode$1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],ZoomOut=createLucideIcon("zoom-out",__iconNode),Button=({children:t,variant:e="primary",size:r="md",icon:xe,className:Se="",...Ee})=>{const Pe="inline-flex items-center justify-center font-medium rounded-lg transition-all focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed",Ce={primary:"bg-rose-600 text-white hover:bg-rose-500 border border-transparent shadow-sm hover:shadow-rose-900/20 active:bg-rose-700 active:scale-[0.98]",secondary:"bg-zinc-800 text-zinc-300 border border-zinc-700 hover:bg-zinc-700 hover:text-white hover:border-zinc-600 active:bg-zinc-700 active:scale-[0.98] shadow-sm",danger:"bg-red-500/10 text-red-400 border border-red-500/20 hover:bg-red-500/20 hover:border-red-500/30 active:bg-red-500/30",ghost:"text-zinc-400 hover:bg-zinc-800 hover:text-white active:bg-zinc-800/80"},Re={xs:"px-2.5 py-1 text-[10px]",sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-2.5 text-base",icon:"p-2"};return jsxRuntimeExports.jsxs("button",{className:`${Pe} ${Ce[e]} ${Re[r]} ${Se}`,...Ee,children:[xe&&jsxRuntimeExports.jsx("span",{className:t?"mr-2":"",children:xe}),t]})},Logo=({className:t="",size:e=24})=>jsxRuntimeExports.jsxs("svg",{width:e,height:e,viewBox:"0 0 704 688",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:t,xmlSpace:"preserve",children:[jsxRuntimeExports.jsx("path",{d:"M139.56 440.339c11.407-1.511 20.561-7.483 30.195-12.217 3.458-1.7 4.402-3.95 2.136-7.98-6.657-11.835-12.913-23.91-17.48-36.763-.625-1.763-1.862-2.588-3.822-2.53-16.308.479-29.882 6.663-41.966 17.777-11.062 10.175-20.997 21.203-30.35 32.865-5.88 7.33-10.455 15.3-12.915 24.449-1.47 5.471-4.988 8.68-10.86 9.274-5.64.57-8.893-2.628-11.864-6.683-6.587-8.99-6.194-12.587.795-20.831 7.077-8.349 13.244-17.47 20.35-25.792 12.512-14.648 24.907-29.688 41.601-39.764 11.364-6.858 23.772-11.888 37.708-10.708 3.31.28 4.986-1.584 4.646-4.932-.688-6.767-1.15-13.579-2.303-20.269-.776-4.505-.854-8.991-.575-13.426.355-5.655-2.2-8.1-7.36-9.293-11.069-2.558-21.83-6.16-31.254-12.661-5.85-4.037-11.821-8.068-16.602-13.447-2.698-3.035-4.064-6.789-1.995-10.534 2.186-3.955 5.893-4.208 10.356-3.883 6.611.481 9.58 5.668 13.675 9.135 8.922 7.555 19.42 11.326 30.282 14.607 3.328 1.005 4.903-.209 5.756-3.467 2.44-9.319 5.078-18.586 7.64-27.873.905-3.278.353-5.516-2.548-8.172-7.213-6.605-13.808-13.903-20.435-21.122-3.963-4.317-3.736-9.938.065-13.202 3.16-2.712 10.733-1.469 13.942 2.178 4.16 4.728 8.301 9.48 12.66 14.022 3.385 3.528 5.119 3.188 7.495-1.176 1.189-2.182 1.96-4.59 3.121-6.79 1.365-2.587 1.058-4.677-1.082-6.712-9.227-8.776-14.435-19.893-17.264-31.998-1.506-6.446-1.19-13.268 1.623-19.606 1.707-3.844 5.838-5.214 10.669-3.61 3.77 1.253 6.684 5.726 5.973 9.25-2.324 11.524 1.274 21.514 7.898 30.738 1.88 2.619 3.831 2.313 5.707.11 3.127-3.674 6.146-7.438 9.244-11.135 2.472-2.949 2.918-6.048 1.58-9.739-1.441-3.972-.315-7.503 3.069-10.214 3.124-2.502 6.363-3.458 10.08-1.185.959.585 2.439 1.371 3.218 1.026 4.721-2.096 8.827-5.14 12.572-8.731 5.109-4.9 5.327-5.606 1.673-13.485-2.167-4.67-4.545-9.241-6.845-13.849-2.08-4.168-.379-7.11 3.201-9.193 5.37-3.124 12.09-1.719 15.858 3.345 2.987 4.014 5.168 8.454 6.85 13.218 1.896 5.368 3.306 5.738 8.603 3.73 6.073-2.304 12.326-3.91 18.795-4.67 5.61-.659 7.057-2.155 6.616-7.726-.734-9.257-1.575-18.516-2.762-27.723-1.455-11.294 5.775-17.95 15.912-14.391 4.38 1.538 6.316 4.686 6.357 9.102.066 7.019 1.268 13.87 2.754 20.692.815 3.74 2.225 5.682 6.907 4.654 7.614-1.671 15.187-3.39 22.578-5.858 8.944-2.988 18.067-1.692 27.108-.993 5.662.438 6.335-.256 6.447-5.88.128-6.44-1.235-12.953.635-19.341 3.103-10.596 11.052-13.192 20.678-11.876 5.322.727 7.346 7.225 4.758 12.942-3.739 8.257-2.35 16.243-1.586 24.448.215 2.308 2.035 3.576 4.028 3.941 13.858 2.544 26.316 9.069 39.446 13.672 3.992 1.4 6.971.343 8.116-3.958 1.66-6.237 3.318-12.485 4.644-18.799 1.27-6.046 4.321-9.308 9.702-9.597 5.406-.29 10.287 3.426 11.808 8.626 2.217 7.577.123 14.795-1.571 22.042-.944 4.037-2.16 8.013-3.333 11.993-.744 2.525-.385 4.3 2.122 5.86 7.638 4.756 14.52 10.543 21.233 16.506 2.293 2.038 4.274 2.165 6.579.166 1.375-1.192 2.895-2.148 3.933-3.756 3.694-5.725 9.84-7.033 15.854-8.269 3.589-.738 10.506 3.118 11.746 6.242 1.886 4.752.512 8.642-3.215 12.08-3.784 3.492-7.227 7.35-10.9 10.966-2.484 2.446-2.946 4.871-.808 7.843 1.546 2.149 2.64 4.618 4.08 6.85 3.112 4.82 6.088 5.596 10.436 1.588 9.166-8.448 15.585-18.584 16.24-31.487.174-3.441 1.223-5.562 4.844-6.429 5.463-1.308 10.764-1.758 14.704 2.995 4.451 5.367 5.297 11.677 3.179 18.296-3.5 10.935-9.478 20.486-17.015 29.022-3.766 4.265-8.845 6.96-13.99 9.259-3.23 1.443-4.216 3.392-3.08 6.676 1.579 4.559 3.518 8.95 5.585 13.306 1.09 2.298 2.657 2.129 4.525 1.645 4.657-1.207 9.303-2.461 13.967-3.642 9.482-2.401 15.658-8.7 19.338-17.334 5.205-12.211 9.856-24.563 10.465-38.182.186-4.14 1.798-8.928 5.044-12.147 4.02-3.986 12.786-2.717 17.179 1.726 6 6.07 5.988 13.43 3.245 20.345-1.983 5.003-3.412 10.006-4.464 15.178-3.29 16.17-9.556 30.935-21.645 42.445-10.721 10.206-22.08 19.751-37.497 22.23-2.534.407-4.673 2.383-3.52 4.386 3.473 6.032 1.418 12.348 1.752 18.484.446 8.203.312 7.904 8.607 9.61 8.848 1.821 17.893 1.14 26.702 2.892 6.981 1.39 10.613 5.875 10.292 12.77-.15 3.206-7.412 7.433-12.815 7.773a123.208 123.208 0 0 1-32.117-2.182c-4.431-.891-5.677 1.135-6.46 4.596-1.536 6.795-2.911 13.634-4.689 20.366-1.056 3.999.216 5.728 4.108 6.757 9.29 2.455 18.482 5.283 27.72 7.939 4.392 1.263 7.242 4.762 10.172 7.765 1.797 1.842 1.762 5.285.26 7.968-2.004 3.577-4.95 5.808-9.23 5.707-7.42-.174-14.176-3.4-21.353-4.723-5.059-.932-10.044-2.276-15.114-3.131-4.95-.835-6.631 1.198-8.347 9.601 5.796 2.08 9.452 6.702 13.33 11.305 5.968 7.082 14.607 10.192 22.872 13.566 5.423 2.214 10.745 4.38 15.098 8.447 2.413 2.255 5.687 4.364 4.041 8.164-1.719 3.968-4.961 6.535-9.62 6.915-5.44.444-10.546-1.155-15.59-2.64-14.647-4.31-26.916-12.753-38.018-22.964-3.127-2.875-5.077-2.454-6.817 1.157-.286.595-.729 1.112-1.071 1.682-1.62 2.69-4.524 5.115-4.447 8.187.09 3.576 4.755 3.043 6.713 5.112 6.57 6.941 14.398 13.418 13.6 24.291-.35 4.778-1.944 9.45-7.41 11.375-4.5 1.585-7.693.503-10.023-3.729-3.062-5.56-6.704-10.64-11.993-14.44-2-1.436-3.87-2.717-5.438-.27-1.404 2.191-5.336 3.792-2.492 7.554 9.287 12.287 15.933 25.984 20.87 40.486 2.308 6.782.994 13.643-2.539 19.676-1.554 2.654-5.183 3.533-8.438 3.265-2.965-.244-4.15-2.24-5.238-5.096-4.656-12.231-9.355-24.447-16.593-35.535-4.13-6.326-6.48-6.852-11.393-1.28-1.635 1.854-1.91 3.473-.063 5.152 2.454 2.23 3.697 4.986 4.36 8.203.324 1.572 1.248 3.116 2.213 4.445 11.91 16.41 20.635 34.436 27.222 53.541 2.605 7.557 3.421 15.534 4.986 23.322.937 4.667 2.336 9.15 4.8 12.986 3.666 5.71 2.926 11.035-.309 16.137-3.102 4.892-8.93 6.201-15.5 4.344-5.35-1.513-10.566-6.721-10.096-12.198 1.081-12.608-3.484-24.186-5.702-36.141-2.135-11.501-7.13-22.099-14.766-31.22-7.189-8.587-12.182-18.537-17.36-28.342-1.462-2.766-2.455-2.68-5.315-1.852-10.366 3.001-9.55 11.934-10.292 19.417-.96 9.676-1.818 19.453-.482 29.265.728 5.339-3.23 10.868-7.986 12.455-3.971 1.324-8.514-1.137-11.765-6.384-5.13-8.28-4.1-17.519-4.097-26.589 0-1.319.375-2.635.413-3.957.169-5.874-.774-6.72-6.654-5.576-7.692 1.495-15.442 2.133-23.27 2.209-5.204.05-6.166 1.383-4.634 6.478 2.747 9.14 7.851 17.195 12.27 25.536 2.978 5.624 2.794 10.963-1.491 14.545-3.97 3.318-9.957 2.827-14.509-1.303-4.904-4.45-8.138-10.04-10.602-16.106-.728-1.792-1.213-3.715-3.972-4.928.7 8.503 1.416 16.362 1.98 24.233 1.34 18.73 2.689 37.464.78 56.242-.235 2.322-.196 4.598.29 6.935 1.617 7.763-2.4 14.818-9.714 17.415-6.454 2.293-15.205-1.042-18.524-7.189-1.508-2.793-1.688-6.29-.346-8.713 4.507-8.136 4.154-17.023 4.335-25.658.543-25.947-.238-51.868-5.923-77.343-1.223-5.478-3.138-10.887-5.435-16.014-2.22-4.954-7.842-4.53-12.118-5.663-3.114-.825-3.953 2.947-5.257 5.144-5.71 9.615-11.8 18.984-20.415 26.269-7.6 6.427-16.16 11.058-26.507 11.027-7.31-.022-13.037-6.005-12.777-13.223.078-2.167 1.36-3.815 3.128-4.845 1.85-1.078 3.843-2.258 5.9-2.577 12.465-1.93 19.704-10.352 25.334-20.479 5.872-10.561 6.829-9.128-4.416-14.417-8.256-3.883-16.502-7.794-24.646-11.904-2.512-1.267-4.152-.685-6.316.78-5.575 3.775-9.18 9.5-14.336 13.732-7.962 6.538-16.178 12.643-25.098 17.76-3.38 1.938-6.527 4.156-10.823 4.634-3.857.429-6.793-.436-9.79-2.377-3.606-2.336-6.022-5.449-5.433-9.905.539-4.08 3.62-6.364 7.223-7.489 15.977-4.99 26.258-16.841 35.978-29.426 1.887-2.443 1.522-4.565-.773-6.517-8.26-7.025-15.664-14.86-22.384-23.372-1.918-2.429-4.48-1.66-6.83-.477-9.689 4.875-19.876 8.38-30.256 11.467-8.053 2.395-16.402 2.287-24.578 3.576-3.928.619-7.919.852-11.837 1.522-6.15 1.05-13.035-3.325-14.336-9.37-.94-4.368.723-7.2 4.846-9.111 6.655-3.084 13.666-2.304 20.595-2.441 4.34-.086 8.65-.174 13.265-1.501m359.288-81.097c5.906 3.69 7.295 3.182 8.674-3.332 1.169-5.522 2.24-11.066 3.331-16.604 1.332-6.75.763-7.524-6.037-9.01-7.03-1.537-13.784-3.779-19.516-8.352-4.36-3.48-4.623-8.539-.697-12.484 4.995-5.018 13.717-5.577 19.565-1.312 2.423 1.766 4.953 3.275 7.98 3.965 2.796.638 4.192-.245 4.423-3.024.387-4.634 1.115-9.28 1.006-13.905-.255-10.821-2.106-21.461-4.95-31.892-1.058-3.881-1.533-8.22-5.564-10.993-1.536 1.11-2.99 2.17-4.455 3.214-9.216 6.559-19.16 9.84-30.496 6.67-3.407-.952-5.99-3.14-7.076-6.43-1.16-3.514.408-6.367 3.137-8.825 4.058-3.654 8.993-3.92 13.994-4.186 5.837-.31 10.926-2.538 15.498-6.08 1.767-1.368 2.612-3.076 1.608-5.236-3.438-7.397-6.197-15.53-11.958-21.187-4.802-4.717-9.692-8.612-13.495-14.71-4.3-6.894-12.536-11.166-19.564-15.918-2.26-1.527-4.486-1.383-5.79 1.41-2.959 6.342-6.424 12.349-11.073 17.632-1.672 1.9-1.096 3.961-.28 6.093 4.955 12.953 6.75 26.648 9.157 40.179 2.088 11.74 2.996 23.734 5.743 35.304 4.338 18.276 4.867 36.49 1.124 54.74-2.457 11.98-10.33 21.044-19.976 27.68-6.705 4.614-14.947 7.236-22.79 9.898-12.758 4.329-23.22 1.848-27.765-13.743-1.348-4.623-2.418-9.34-4.01-13.876-3.647-10.387-4.98-21.27-6.745-32.011-1.663-10.128-1.714-20.512-3.195-30.679-1.574-10.81-1.147-21.752-3.55-32.583-1.498-6.755-3.05-14.264.394-21.563 3.823-8.102 7.794-16.142 11.464-24.303 2.225-4.949 5.427-8.913 9.472-11.969 6.707-5.066 13.71-10.166 22.997-8.47 8.346 1.525 8.334 1.578 12.554-6.023 1.452-2.616 3.06-5.156 4.334-7.855.796-1.688 1.138-3.858-.954-4.866-9.904-4.77-20.165-8.561-31.063-10.346-2.707-.443-4.074 1.123-4.027 3.785.087 4.982.014 9.956.336 14.952.246 3.802 2.097 8.254-1.952 11.551-3.567 2.905-7.275 4.584-11.896 2.571-5.345-2.328-8.529-6.242-8.932-12.126-.444-6.465-.837-12.937-1.04-19.413-.093-2.954-1.202-4.684-4.138-5.3-6.7-1.408-13.385-1.663-20.202-.673-9.566 1.388-18.298 6.426-27.933 6.852-8.312.368-9.317 7.858-13.684 12.034-.41.392-.237 1.612-.048 2.378.813 3.294.308 6.637.494 9.95.708 12.632-3.125 25.09-1.443 37.76.172 1.294-.661 2.144-1.464 3.023-5.815 6.367-15.773 4.457-18.422-3.754-1.984-6.148-2.116-12.528-1.755-19.009.49-8.8.435-17.635.42-26.455-.006-3.111-1.974-5.294-5.095-4.892-7.78 1.003-15.428 2.884-21.996 7.37-2.375 1.623-3.502 5.142-6.358 6.174-9.041 3.268-15.568 9.95-22.542 16.023-5.144 4.48-5.39 6.937-2.578 13.062 3.088 6.727 6.338 13.425 8.036 20.683.899 3.84 1.922 7.406 6.06 9.05 1.113.442 1.653 1.5 1.973 2.718 2.157 8.212-1.297 13.05-9.807 13.644-7.385.515-15.11-5.119-14.207-11.42 1.2-8.369-4.06-14.453-6.076-21.639-.833-2.969-3.252-3.08-5.395-.856-1.023 1.064-1.897 2.298-2.699 3.545-10.15 15.773-17.19 32.985-23.18 50.653-1.703 5.02-2.962 10.204-4.16 15.374-.85 3.67-.926 6.852 4.495 7.191 6.761.424 13.492.702 20.228.044 5.087-.498 9.935.261 14.475 2.52 4.637 2.307 4.527 6.935 3.895 10.854-.606 3.757-3.781 7.002-7.78 6.502-11.249-1.408-22.524-.223-33.73-1.057-4.296-.32-4.866 1.487-4.915 4.732-.132 8.657.67 17.212 1.625 25.83.728 6.558 3.358 10.007 9.379 10.99 4.769.78 7.007 3.789 7.72 7.959.723 4.23-2.266 7.158-5.536 8.602-4.591 2.026-4.062 4.728-2.592 8.274 3.571 8.617 7.926 16.848 12.067 25.19 1.353 2.725 2.403 3.972 5.884 3.685 6.782-.559 15.175 5.643 9.594 14.717-1.25 2.03-1.394 3.948.022 6.034 6.059 8.925 13.896 16.015 22.647 22.176 16.54 11.645 34.944 19.777 53.194 28.201 1.558.72 2.95 1.106 4.745.51 8.192-2.719 12.88-1.078 17.981 6.164.838 1.19 1.948 1.868 3.211 2.216 6.714 1.845 13.433 3.678 20.19 5.353 3.15.78 5.208-.433 5.499-3.92.26-3.12.609-6.234.816-9.357.558-8.377 6.88-13.374 14.993-11.795 5.356 1.042 7.39 4.451 6.926 9.985-.457 5.433-.937 10.942.487 16.377.63 2.407 1.854 3.805 4.442 3.885 8.693.268 17.244-.633 25.612-3.052 10.136-2.93 19.316-7.962 28.44-13.08 15.025-8.43 28.873-18.315 39.939-31.788 9.098-11.077 16.915-23.048 24.725-35.003 6.98-10.683 13.898-21.452 18.862-33.322 1.221-2.918.797-4.515-2.005-5.998-3.665-1.94-7.276-4.06-10.641-6.476-6.625-4.759-5.975-11.623 1.12-15.58 3.85-2.146 7.599-2.015 12.24-.196M411.72 254.878c3.123 1.127 6.516.947 9.655 2.27 2.72 1.146 4.579-.505 4.973-3.226.278-1.921.05-3.95-.182-5.905-1.135-9.607-5.836-18.32-7.199-27.824-.786-5.482-3.378-9.647-7.054-13.327-3.876-3.88-6.372-3.776-10.062.195-2.483 2.67-4.646 5.94-8.093 7.2-6.761 2.471-8.919 8.12-10.38 14.13-2.85 11.728 2.31 22.447 4.847 33.466.616 2.675 2.973 2.135 4.356.874 5.249-4.781 11.805-6.287 19.139-7.853z"}),jsxRuntimeExports.jsx("path",{d:"M263.121 297.741c-1.01-6.499-2.025-12.47-.734-18.721 2.153-10.436 7.724-19.281 12.494-28.492 1.026-1.98 1.895-3.684 1.906-5.947.04-8.323 3.187-11.206 11.76-11.944 9.48-.817 17.778 2.471 26.42 5.75 8.32 3.156 11.256 9.05 12.362 16.817.77 5.406.8 10.969 2.08 16.238 1.912 7.87 3.266 15.909 6.387 23.481 2.564 6.222 2.55 13.036 3.154 19.558.831 8.96 2.558 17.676 4.825 26.291 3.739 14.212 1.32 27.715-4.905 40.469-4.93 10.1-21.29 20.083-35.876 17.82-11.024-1.712-19.724-7.895-25.44-16.626-3.99-6.095-4.983-14.273-6.79-21.65-3.244-13.231-3.795-26.907-6.137-40.283-1.305-7.454-.252-14.937-1.506-22.76m39.873-42.124c-5.856-5.626-7.426-5.645-12.766-.063-1.399 1.462-3.044 2.511-4.784 3.53-6.892 4.036-11.005 10.751-9.16 16.008 2.157 6.146 3.69 12.4 4.673 18.784.688 4.474 2.666 5.436 6.417 3.177 6.63-3.992 13.506-4.06 20.586-1.413 1.544.577 3.159 1.418 4.636-.092 1.647-1.684 1.395-3.713.548-5.58-2.067-4.555-3.56-9.265-4.43-14.187-1.182-6.68-2.78-13.253-5.72-20.164zM413.97 418.932c4.053-2.938 7.774-5.72 11.606-8.338 5.203-3.557 8.438-8.77 12.25-13.591 4.791-6.06 10.028-11.846 18.898-12.109 6.447-.19 14.121 7.141 12.774 13.459-1.16 5.444-3.566 10.126-7.81 14.504-6.3 6.497-13.076 12.306-20.353 17.42-16.237 11.41-33.346 20.5-53.919 22.24-18.232 1.543-34.885-1.833-50.608-10.779-2.772-1.577-5.302-3.43-6.193-6.8-2.822-10.671.92-14.973 11.179-16.152 4.947-.57 9.787.887 13.34 4.42 7.24 7.195 16.158 7.143 25.353 6.92 12.225-.295 22.971-4.78 33.483-11.194zM271.283 428.33c4.562 2.85 9.828 5.214 7.635 11.525-1.45 4.173-4.152 8.172-8.102 10.43-8.029 4.593-16.62 7.352-26.12 6.003-4.407-.626-9.528-4.817-9.485-8.056.057-4.389 4.94-10.02 9.615-9.988 4.948.034 7.962-1.305 10.454-5.99 3.024-5.683 8.988-6.72 16.003-3.924z"}),jsxRuntimeExports.jsx("path",{d:"M363.632 391.262c5.367-2.661 9.778-1.068 13.643 2.247 3.395 2.913 3.86 7.936 1.469 11.285-2.486 3.481-10.318 5.333-14.004 3.31-8.486-4.656-8.783-8.09-1.108-16.842zM215.094 363.67c8.144-1.818 13.423 2.577 12.702 10.128-.319 3.348-7.187 6.573-11.369 5.307a27.827 27.827 0 0 1-3.24-1.208c-6.282-2.795-6.88-7.969-1.4-12.246.906-.707 1.955-1.23 3.307-1.98z"})]}),Tooltip=({content:t,children:e})=>{const[r,xe]=reactExports.useState(!1),[Se,Ee]=reactExports.useState({top:0,left:0}),Pe=Ce=>{const Re=Ce.currentTarget.getBoundingClientRect();Ee({top:Re.bottom+6,left:Re.left+Re.width/2}),xe(!0)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"relative flex items-center",onMouseEnter:Pe,onMouseLeave:()=>xe(!1),children:e}),r&&reactDomExports.createPortal(jsxRuntimeExports.jsx("div",{className:"fixed z-[10000] px-2 py-1 text-[10px] font-bold text-zinc-100 bg-zinc-800 border border-zinc-700 rounded shadow-xl whitespace-nowrap pointer-events-none transform -translate-x-1/2",style:{top:Se.top,left:Se.left},children:t}),document.body)]})};function timeAgo(t){const e=new Date(t),xe=Math.floor((new Date().getTime()-e.getTime())/1e3);let Se=xe/31536e3;return Se>1?Math.floor(Se)+"y ago":(Se=xe/2592e3,Se>1?Math.floor(Se)+"mo ago":(Se=xe/86400,Se>1?Math.floor(Se)+"d ago":(Se=xe/3600,Se>1?Math.floor(Se)+"h ago":(Se=xe/60,Se>1?Math.floor(Se)+"m ago":"just now"))))}const DeleteConfirmationModal=({onCancel:t,onConfirm:e})=>reactDomExports.createPortal(jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm animate-fade-in",children:jsxRuntimeExports.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 p-6 rounded-2xl shadow-2xl max-w-sm w-full mx-4 animate-scale-in",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500/10 flex items-center justify-center mb-4 border border-red-500/20",children:jsxRuntimeExports.jsx(Trash2,{size:24,className:"text-red-500"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Delete Session?"}),jsxRuntimeExports.jsx("p",{className:"text-zinc-400 text-sm mb-6 leading-relaxed",children:"This action cannot be undone. All student scripts and annotations will be permanently removed."}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3",children:[jsxRuntimeExports.jsx(Button,{variant:"ghost",onClick:t,children:"Cancel"}),jsxRuntimeExports.jsx(Button,{variant:"danger",onClick:e,children:"Delete Permanently"})]})]})}),document.body),StorageManagerModal=({onClose:t,onClearCache:e})=>{const[r,xe]=reactExports.useState(null),[Se,Ee]=reactExports.useState(!0),Pe=async()=>{Ee(!0);const Be=await storage.getStorageStats();xe(Be),Ee(!1)};reactExports.useEffect(()=>{Pe()},[]);const Ce=Be=>{if(Be===0)return"0 Bytes";const Me=1024,Ve=["Bytes","KB","MB","GB"],Fe=Math.floor(Math.log(Be)/Math.log(Me));return parseFloat((Be/Math.pow(Me,Fe)).toFixed(2))+" "+Ve[Fe]},Re=async()=>{confirm("Clear all processed image cache? This will not delete original scripts.")&&(await e(),Pe())};return reactDomExports.createPortal(jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 backdrop-blur-md animate-fade-in",children:jsxRuntimeExports.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 p-8 rounded-3xl shadow-2xl max-w-md w-full mx-4 animate-scale-in",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-xl bg-zinc-800 flex items-center justify-center border border-zinc-700",children:jsxRuntimeExports.jsx(Database,{size:20,className:"text-rose-500"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold text-white leading-none",children:"Storage"}),jsxRuntimeExports.jsx("p",{className:"text-zinc-500 text-[10px] font-bold uppercase tracking-widest mt-1",children:"Local Disk Usage"})]})]}),jsxRuntimeExports.jsx("button",{onClick:t,className:"p-2 hover:bg-zinc-800 rounded-full text-zinc-500 transition-colors",children:jsxRuntimeExports.jsx(X,{size:20})})]}),Se?jsxRuntimeExports.jsx("div",{className:"py-12 flex flex-col items-center justify-center space-y-4",children:jsxRuntimeExports.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-rose-500 border-t-transparent rounded-full"})}):r&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-zinc-950/50 p-4 rounded-2xl border border-zinc-800",children:[jsxRuntimeExports.jsx("p",{className:"text-[10px] font-black text-zinc-600 uppercase mb-1",children:"Sessions"}),jsxRuntimeExports.jsx("p",{className:"text-xl font-bold text-white",children:r.sessionCount})]}),jsxRuntimeExports.jsxs("div",{className:"bg-zinc-950/50 p-4 rounded-2xl border border-zinc-800",children:[jsxRuntimeExports.jsx("p",{className:"text-[10px] font-black text-zinc-600 uppercase mb-1",children:"Cache"}),jsxRuntimeExports.jsx("p",{className:"text-xl font-bold text-rose-500",children:Ce(r.cacheSize)})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-widest",children:"Total"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-bold text-white",children:Ce(r.totalSize)})]}),jsxRuntimeExports.jsx("div",{className:"h-1.5 w-full bg-zinc-800 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-rose-600 rounded-full",style:{width:`${Math.min(100,r.totalSize/(100*1024*1024)*100)}%`}})})]}),jsxRuntimeExports.jsxs("div",{className:"pt-4 border-t border-zinc-800 flex flex-col gap-3",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",className:"w-full",onClick:Re,icon:jsxRuntimeExports.jsx(RefreshCcw,{size:16}),children:"Clear Cache"}),jsxRuntimeExports.jsx(Button,{variant:"ghost",className:"w-full text-zinc-500",onClick:t,children:"Close"})]})]})]})}),document.body)},SetupScreen=({greeting:t,onNewSession:e,sessionName:r,onSessionNameChange:xe,graderName:Se,onGraderNameChange:Ee,level:Pe,onLevelChange:Ce,part:Re,onPartChange:Be,savedSessions:Me,onResumeSession:Ve,onDeleteSession:Fe,sessionToDelete:Ie,onCancelDeleteSession:qe,onConfirmDeleteSession:Ye,onDuplicateSession:Xe,onExportSession:je,onImportSession:Qe,devModeUnlocked:sn,onLogoClick:cn,showStorageManager:nn,onShowStorageManager:an,onClearCache:Ze})=>{const tn=reactExports.useRef(null),[We,An]=reactExports.useState(""),St=Pe.includes("Form 1")||Pe.includes("Form 2")||Pe.includes("Form 3")?["1","2"]:["1","2","3"];reactExports.useEffect(()=>{St.includes(Re)||Be("1")},[Pe,Re,St,Be]);const hn=[{id:"Form 1 (A2 Revise)",label:"Form 1",sub:"A2 Revise"},{id:"Form 2 (A2 High)",label:"Form 2",sub:"A2 High"},{id:"Form 3 (B1 Low)",label:"Form 3",sub:"B1 Low"},{id:"Form 4 (B1 Mid)",label:"Form 4",sub:"B1 Mid"},{id:"Form 5 (B1 High)",label:"Form 5",sub:"B1 High"}],_n=Me.filter(yn=>yn.name.toLowerCase().includes(We.toLowerCase())||yn.level.toLowerCase().includes(We.toLowerCase()));return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-zinc-950 text-zinc-200 selection:bg-rose-500/30 font-sans flex flex-col relative overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-0 overflow-hidden pointer-events-none",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-1/2 left-1/4 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] text-rose-600 animate-pulse-glow",children:jsxRuntimeExports.jsx(Logo,{size:"100%",className:"opacity-10"})}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-noise z-10"})]}),jsxRuntimeExports.jsxs("header",{className:"px-6 py-5 flex items-center justify-between border-b border-zinc-900/50 bg-zinc-950/80 backdrop-blur-md sticky top-0 z-50",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 cursor-pointer group",onClick:cn,children:[jsxRuntimeExports.jsx(Logo,{size:28,className:"text-rose-600 transition-transform group-hover:scale-110"}),jsxRuntimeExports.jsx("h1",{className:"font-bold text-lg tracking-tight text-white hidden sm:block",children:"Rambutan"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>an(!0),icon:jsxRuntimeExports.jsx(Database,{size:14}),children:"Storage"}),jsxRuntimeExports.jsx(Button,{variant:"secondary",size:"sm",onClick:()=>{var yn;return(yn=tn.current)==null?void 0:yn.click()},icon:jsxRuntimeExports.jsx(Upload,{size:14}),children:"Import"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 max-w-[1600px] w-full mx-auto p-4 md:p-8 grid grid-cols-1 lg:grid-cols-12 gap-8 lg:gap-12 relative z-10",children:[jsxRuntimeExports.jsxs("div",{className:"lg:col-span-7 flex flex-col space-y-8 animate-fade-in-up",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsxs("h2",{className:"text-3xl md:text-4xl font-black text-white tracking-tight",children:[t,"."]}),jsxRuntimeExports.jsx("p",{className:"text-zinc-500 font-medium",children:"Ready to grade some essays?"})]}),jsxRuntimeExports.jsx("div",{className:"bg-zinc-900/40 border border-zinc-800/50 rounded-3xl p-1 md:p-2 backdrop-blur-sm",children:jsxRuntimeExports.jsxs("div",{className:"bg-zinc-950/80 border border-zinc-800/50 rounded-2xl p-6 md:p-8 space-y-8 shadow-2xl backdrop-blur-xl",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("label",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-widest ml-1 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Tag,{size:12})," Session Name"]}),jsxRuntimeExports.jsx("input",{type:"text",className:"w-full bg-transparent border-b-2 border-zinc-800 px-0 py-2 text-xl md:text-2xl font-bold text-white focus:outline-none focus:border-rose-500 placeholder-zinc-800 transition-colors",placeholder:"e.g. 5 Alpha Mid-Term",value:r,onChange:yn=>xe(yn.target.value),autoFocus:!0})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("label",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-widest ml-1 flex items-center gap-2",children:[jsxRuntimeExports.jsx(CircleUser,{size:12})," Grader Name"]}),jsxRuntimeExports.jsx("input",{type:"text",className:"w-full bg-transparent border-b-2 border-zinc-800 px-0 py-2 text-xl md:text-2xl font-bold text-white focus:outline-none focus:border-emerald-500 placeholder-zinc-800 transition-colors",placeholder:"Your Name",value:Se,onChange:yn=>Ee(yn.target.value)})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("label",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-widest ml-1 flex items-center gap-2",children:[jsxRuntimeExports.jsx(GraduationCap,{size:12})," Level"]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-2",children:hn.map(yn=>jsxRuntimeExports.jsxs("button",{onClick:()=>Ce(yn.id),className:`relative px-3 py-2.5 rounded-xl border text-left transition-all ${Pe===yn.id?"bg-zinc-800/80 border-zinc-600 ring-1 ring-zinc-500 shadow-lg backdrop-blur-sm":"bg-zinc-900/40 border-zinc-800 text-zinc-500 hover:bg-zinc-800/60 hover:border-zinc-700"}`,children:[jsxRuntimeExports.jsx("div",{className:`text-sm font-bold ${Pe===yn.id?"text-white":"text-zinc-400"}`,children:yn.label}),jsxRuntimeExports.jsx("div",{className:"text-[10px] font-medium opacity-60 uppercase",children:yn.sub}),Pe===yn.id&&jsxRuntimeExports.jsx("div",{className:"absolute top-2 right-2 w-1.5 h-1.5 rounded-full bg-rose-500 shadow-[0_0_8px_rgba(244,63,94,0.6)]"})]},yn.id))})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("label",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-widest ml-1 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Layers,{size:12})," Part"]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 gap-2",children:["1","2","3"].map(yn=>{const mn=!St.includes(yn),Sn=Re===yn;return jsxRuntimeExports.jsxs("button",{disabled:mn,onClick:()=>Be(yn),className:`flex items-center px-4 py-3 rounded-xl border transition-all ${mn?"opacity-30 cursor-not-allowed bg-zinc-900 border-zinc-800":Sn?"bg-zinc-800/80 border-zinc-600 ring-1 ring-zinc-500 shadow-lg backdrop-blur-sm":"bg-zinc-900/40 border-zinc-800 hover:bg-zinc-800/60 hover:border-zinc-700"}`,children:[jsxRuntimeExports.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center font-black text-lg mr-4 border ${Sn?"bg-zinc-200 text-zinc-900 border-white shadow-sm":"bg-zinc-800 text-zinc-500 border-zinc-700"}`,children:yn}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsxs("div",{className:`text-xs font-bold uppercase tracking-wide ${Sn?"text-white":"text-zinc-400"}`,children:["Part ",yn]}),jsxRuntimeExports.jsx("div",{className:"text-[10px] text-zinc-600",children:yn==="1"?"Short Communicative Message":yn==="2"?"Guided Writing":"Extended Writing"})]})]},yn)})})]})]}),jsxRuntimeExports.jsx("div",{className:"pt-4",children:jsxRuntimeExports.jsx(Button,{className:"w-full py-4 text-base rounded-xl font-bold shadow-xl shadow-rose-900/20 active:scale-[0.99] transition-transform",onClick:()=>r?e():alert("Please enter a session name."),icon:jsxRuntimeExports.jsx(ArrowRight,{size:20}),children:"Start Grading"})})]})})]}),jsxRuntimeExports.jsx("div",{className:"lg:col-span-5 flex flex-col h-full min-h-[500px] animate-fade-in-up",style:{animationDelay:"100ms"},children:jsxRuntimeExports.jsxs("div",{className:"bg-zinc-900/30 border border-zinc-800/50 rounded-3xl p-6 flex flex-col h-full backdrop-blur-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsxs("h2",{className:"text-sm font-bold text-zinc-400 uppercase tracking-widest flex items-center gap-2",children:[jsxRuntimeExports.jsx(History,{size:14})," History"]}),jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsx(Search,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-600 group-focus-within:text-zinc-400"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search...",value:We,onChange:yn=>An(yn.target.value),className:"bg-zinc-950 border border-zinc-800 rounded-full py-1.5 pl-9 pr-4 text-xs font-medium text-white placeholder-zinc-700 focus:outline-none focus:border-zinc-600 w-32 focus:w-48 transition-all"})]})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto pr-2 custom-scrollbar space-y-3",children:_n.length>0?_n.map(yn=>{const mn=yn.students.length>0?Math.round(yn.students.filter(Sn=>Object.values(Sn.scores).some(Pn=>Pn>0)).length/yn.students.length*100):0;return jsxRuntimeExports.jsxs("div",{onClick:()=>Ve(yn),className:"group relative bg-zinc-900/50 border border-zinc-800 hover:border-zinc-700 rounded-2xl p-4 pb-5 cursor-pointer transition-all hover:shadow-lg hover:bg-zinc-800/80 overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-bold text-zinc-200 group-hover:text-white truncate max-w-[200px]",children:yn.name}),jsxRuntimeExports.jsxs("p",{className:"text-[10px] text-zinc-500 mt-1 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Clock,{size:10})," ",timeAgo(yn.createdAt)]})]}),jsxRuntimeExports.jsx("div",{className:`px-2 py-1 rounded-md text-[10px] font-black uppercase tracking-tight shadow-sm border ${mn===100?"bg-emerald-500/10 text-emerald-500 border-emerald-500/20":"bg-zinc-800 text-zinc-400 border-zinc-700"}`,children:mn===100?"Completed":`${mn}%`})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx("span",{className:"text-[10px] font-bold bg-zinc-950 px-2 py-1 rounded border border-zinc-800 text-zinc-400",children:yn.level.split("(")[0].trim()}),jsxRuntimeExports.jsxs("span",{className:"text-[10px] font-bold bg-zinc-950 px-2 py-1 rounded border border-zinc-800 text-zinc-400",children:["Part ",yn.part]}),jsxRuntimeExports.jsxs("span",{className:"text-[10px] font-bold text-zinc-600 px-1",children:[yn.students.length," students"]})]}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-4 right-3 flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity bg-zinc-800/90 rounded-lg p-1 border border-zinc-700 shadow-xl backdrop-blur-sm z-10",children:[jsxRuntimeExports.jsx(Tooltip,{content:"Duplicate",children:jsxRuntimeExports.jsx("button",{onClick:Sn=>Xe(yn,Sn),className:"p-1.5 text-zinc-400 hover:text-white hover:bg-zinc-700 rounded-md",children:jsxRuntimeExports.jsx(Copy,{size:12})})}),jsxRuntimeExports.jsx(Tooltip,{content:"Export",children:jsxRuntimeExports.jsx("button",{onClick:Sn=>je(yn,Sn),className:"p-1.5 text-zinc-400 hover:text-white hover:bg-zinc-700 rounded-md",children:jsxRuntimeExports.jsx(Download,{size:12})})}),jsxRuntimeExports.jsx("div",{className:"w-px h-3 bg-zinc-700 mx-1"}),jsxRuntimeExports.jsx(Tooltip,{content:"Delete",children:jsxRuntimeExports.jsx("button",{onClick:Sn=>Fe(yn.id,Sn),className:"p-1.5 text-zinc-400 hover:text-rose-500 hover:bg-rose-500/10 rounded-md",children:jsxRuntimeExports.jsx(Trash2,{size:12})})})]}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-zinc-800/30 overflow-hidden group-hover:h-1.5 transition-all",children:jsxRuntimeExports.jsx("div",{className:`h-full transition-all duration-500 ease-out ${mn===100?"bg-emerald-500":"bg-rose-600 opacity-60 group-hover:opacity-100"}`,style:{width:`${mn}%`}})})]},yn.id)}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-zinc-600 border-2 border-dashed border-zinc-800 rounded-2xl",children:[jsxRuntimeExports.jsx(History,{size:24,className:"mb-2 opacity-50"}),jsxRuntimeExports.jsx("span",{className:"text-xs font-medium",children:"No sessions found"})]})})]})})]}),jsxRuntimeExports.jsx("input",{type:"file",ref:tn,onChange:Qe,className:"hidden",accept:".rambutan"}),Ie&&jsxRuntimeExports.jsx(DeleteConfirmationModal,{onCancel:qe,onConfirm:Ye}),nn&&jsxRuntimeExports.jsx(StorageManagerModal,{onClose:()=>an(!1),onClearCache:Ze}),sn&&jsxRuntimeExports.jsx("div",{className:"fixed bottom-4 left-4 z-50 animate-fade-in",children:jsxRuntimeExports.jsx("div",{className:"bg-rose-600 text-white text-[9px] font-black uppercase tracking-widest px-2 py-0.5 rounded shadow-lg border border-white/20",children:"DEV"})})]})},TaskScreen=({sessionName:t,taskDescription:e,onTaskDescriptionChange:r,students:xe,isTaskLoading:Se,isScriptLoading:Ee,onTaskUpload:Pe,onScriptUpload:Ce,onStartGrading:Re,onBack:Be})=>jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center p-6 relative overflow-hidden font-sans",children:jsxRuntimeExports.jsxs("div",{className:"bg-zinc-900/80 backdrop-blur-2xl border border-white/10 max-w-5xl w-full rounded-[2rem] shadow-2xl p-8 md:p-12 space-y-8 relative z-10 animate-fade-in-up",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center border-b border-white/5 pb-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-black text-white tracking-tight mb-1",children:"Upload Materials"}),jsxRuntimeExports.jsx("p",{className:"text-zinc-400 text-sm font-medium",children:"Prepare your session."})]}),jsxRuntimeExports.jsx(Button,{variant:"ghost",onClick:Be,icon:jsxRuntimeExports.jsx(ChevronLeft,{size:16}),children:"Back"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 h-full",children:[jsxRuntimeExports.jsxs("div",{className:"lg:col-span-5 space-y-4 flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:`relative group flex-1 transition-all duration-300 ${Se?"opacity-80":""}`,children:[jsxRuntimeExports.jsx("input",{type:"file",onChange:Pe,className:"hidden",id:"task",accept:"image/*,.pdf"}),jsxRuntimeExports.jsxs("label",{htmlFor:"task",className:"cursor-pointer flex flex-col items-center justify-center h-full min-h-[160px] border-2 border-dashed border-zinc-700 bg-zinc-950/30 hover:bg-zinc-800/50 hover:border-rose-500/50 rounded-2xl p-6 text-center transition-all group-hover:shadow-lg active:scale-[0.98]",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-full bg-rose-500/10 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-300 border border-rose-500/20",children:Se?jsxRuntimeExports.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-rose-500 border-t-transparent rounded-full"}):jsxRuntimeExports.jsx(Plus,{size:20,className:"text-rose-500"})}),jsxRuntimeExports.jsx("span",{className:"text-zinc-200 font-bold text-sm mb-1",children:"Task Question"})]})]}),jsxRuntimeExports.jsxs("div",{className:`relative group flex-1 transition-all duration-300 ${Ee?"opacity-80":""}`,children:[jsxRuntimeExports.jsx("input",{type:"file",multiple:!0,onChange:Ce,className:"hidden",id:"scripts",accept:"image/*,.pdf"}),jsxRuntimeExports.jsxs("label",{htmlFor:"scripts",className:"cursor-pointer flex flex-col items-center justify-center h-full min-h-[160px] border-2 border-dashed border-zinc-700 bg-zinc-950/30 hover:bg-zinc-800/50 hover:border-blue-500/50 rounded-2xl p-6 text-center transition-all group-hover:shadow-lg active:scale-[0.98]",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/10 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-300 border border-rose-500/20",children:Ee?jsxRuntimeExports.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-rose-500 border-t-transparent rounded-full"}):jsxRuntimeExports.jsx(FileText,{size:20,className:"text-blue-500"})}),jsxRuntimeExports.jsx("span",{className:"text-zinc-200 font-bold text-sm mb-1",children:xe.length>0?`${xe.length} Scripts Loaded`:"Upload Scripts"})]})]})]}),jsxRuntimeExports.jsx("div",{className:"lg:col-span-7 flex flex-col h-full min-h-[300px]",children:jsxRuntimeExports.jsxs("div",{className:"relative flex-1 group",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-3 right-3 pointer-events-none text-zinc-600 group-focus-within:text-zinc-400",children:jsxRuntimeExports.jsx(PenTool,{size:14})}),jsxRuntimeExports.jsx("textarea",{className:"w-full h-full rounded-2xl bg-zinc-950/50 border border-zinc-700 p-6 font-mono text-sm text-zinc-300 focus:ring-2 focus:ring-rose-500/20 focus:border-rose-500/50 outline-none transition-all resize-none placeholder-zinc-700 leading-relaxed custom-scrollbar",value:e,onChange:Me=>r(Me.target.value),placeholder:"Task instructions..."})]})})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center pt-6 border-t border-white/5",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center text-xs text-zinc-500",children:xe.length>0?jsxRuntimeExports.jsxs("span",{className:"flex items-center text-emerald-400 bg-emerald-900/20 px-3 py-1 rounded-full border border-emerald-500/20",children:[jsxRuntimeExports.jsx(CircleCheckBig,{size:12,className:"mr-1.5"}),"Ready to grade"]}):jsxRuntimeExports.jsxs("span",{className:"flex items-center",children:[jsxRuntimeExports.jsx(CircleAlert,{size:12,className:"mr-1.5"}),"Upload scripts to continue"]})}),jsxRuntimeExports.jsx(Button,{onClick:Re,disabled:xe.length===0,size:"lg",className:"w-full sm:w-auto shadow-xl",icon:jsxRuntimeExports.jsx(Sparkles,{size:16}),children:"Start Grading"})]})]})}),MODE_COLORS$1={content:"#10b981",communicative:"#f59e0b",organisation:"#0ea5e9",language:"#f43f5e",general:"#8b5cf6",select:"#ffffff",stamper:"#be123c"},MODE_LABELS$1={content:"C",communicative:"CA",organisation:"O",language:"L",general:"G",select:"S",stamper:"ST"},ELABORATION_COLOR="#34d399",AnnotationEditor=({ann:t,availableCodes:e,onUpdate:r,onDelete:xe,onClose:Se,isNew:Ee,zoom:Pe,canvasRef:Ce,scrollContainerRef:Re})=>{var Ie;const Be=reactExports.useRef(null),Me=MODE_COLORS$1[t.mode],Ve=t.type==="rect"&&e.length>0&&!t.code;reactExports.useLayoutEffect(()=>{const qe=()=>{var _n,yn,mn,Sn,Pn,pn;if(!Be.current||!Ce.current)return;const Xe=Ce.current.getBoundingClientRect(),je=t.type==="rect"?((yn=(_n=t.rects)==null?void 0:_n[0])==null?void 0:yn.x)||0:t.x||0,Qe=t.type==="rect"?((Sn=(mn=t.rects)==null?void 0:mn[0])==null?void 0:Sn.y)||0:t.y||0,sn=t.type==="rect"&&((pn=(Pn=t.rects)==null?void 0:Pn[0])==null?void 0:pn.height)||0,cn=Xe.left+je*Xe.width,nn=Xe.top+Qe*Xe.height,an=sn*Xe.height,Ze=Be.current.getBoundingClientRect(),tn=window.innerHeight-(nn+an),We=Ze.height+20,An=tn<We,Je=cn,St=t.type==="rect"?12:24,hn=An?nn-10-Ze.height:nn+an+St;Be.current.style.left=`${Je}px`,Be.current.style.top=`${hn}px`};qe();const Ye=Re.current;return window.addEventListener("resize",qe),Ye&&Ye.addEventListener("scroll",qe),()=>{window.removeEventListener("resize",qe),Ye&&Ye.addEventListener("scroll",qe)}},[t,Pe,e.length,t.code,Ce,Re]),reactExports.useEffect(()=>{Ve&&Be.current&&Be.current.focus()},[Ve]);const Fe=qe=>{qe.key==="Escape"&&(qe.preventDefault(),qe.stopPropagation(),Ee?xe():Se()),qe.key==="Enter"&&!qe.shiftKey&&(qe.preventDefault(),qe.stopPropagation(),Se())};return reactDomExports.createPortal(jsxRuntimeExports.jsx("div",{ref:Be,tabIndex:-1,className:"fixed z-[9999] pointer-events-auto outline-none",style:{left:0,top:0},onMouseDown:qe=>qe.stopPropagation(),onKeyDown:Fe,children:jsxRuntimeExports.jsx("div",{className:"bg-zinc-900/95 backdrop-blur-2xl border border-white/10 rounded-2xl shadow-2xl p-2 flex flex-col gap-2 ring-1 ring-black/50 w-[240px]",children:Ve?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-1 mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-[9px] font-black text-zinc-500 uppercase tracking-wider",children:"Select Code"}),jsxRuntimeExports.jsx("span",{className:"text-[8px] font-bold text-zinc-600",children:"ESC to cancel"})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-4 gap-1 max-h-[220px] overflow-y-auto custom-scrollbar pr-1",children:e.map(qe=>jsxRuntimeExports.jsxs("button",{onClick:()=>r({code:qe.code}),title:qe.label,className:"flex flex-col items-center justify-center h-12 rounded-lg bg-zinc-800/40 hover:bg-zinc-800 border border-transparent hover:border-zinc-700 transition-none group/btn relative overflow-hidden",children:[jsxRuntimeExports.jsx("span",{className:"text-[10px] leading-none",style:{color:Me,fontFamily:"'JetBrains Mono', monospace",fontWeight:800},children:qe.code}),jsxRuntimeExports.jsx("span",{className:"text-[7px] font-bold text-zinc-600 group-hover/btn:text-zinc-500 truncate w-full px-1 text-center mt-1 uppercase tracking-tighter",children:qe.label})]},qe.code))}),jsxRuntimeExports.jsx("div",{className:"mt-2 pt-2 border-t border-white/5 text-center",children:jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Ee?xe():Se(),className:"text-[9px] font-bold text-zinc-600 hover:text-white transition-colors",children:"CANCEL"})})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[t.type==="rect"&&e.length>0&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-white/5",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded-md border shadow-sm",style:{color:Me,backgroundColor:`${Me}15`,borderColor:`${Me}30`,fontFamily:"'JetBrains Mono', monospace",fontWeight:800},children:t.code}),jsxRuntimeExports.jsx("span",{className:"text-[10px] font-bold text-zinc-400 truncate max-w-[100px]",children:(Ie=e.find(qe=>qe.code===t.code))==null?void 0:Ie.label})]}),jsxRuntimeExports.jsx("button",{onClick:()=>r({code:void 0}),className:"text-[8px] font-black text-zinc-600 hover:text-white px-1.5 py-0.5 hover:bg-zinc-800 rounded uppercase",children:"Change"})]}),t.type==="rect"&&e.length>0&&jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsx("div",{className:"absolute left-2.5 top-1/2 -translate-y-1/2 pointer-events-none text-zinc-600 group-focus-within:text-emerald-500 transition-colors",children:jsxRuntimeExports.jsx(CornerDownRight,{size:10})}),jsxRuntimeExports.jsx("input",{className:"w-full text-[11px] pl-7 pr-2 py-1.5 rounded-xl bg-black/40 border border-transparent focus:border-emerald-500/50 text-emerald-100 focus:ring-1 focus:ring-emerald-500/50 outline-none placeholder-zinc-800 font-medium",style:{fontFamily:"'JetBrains Mono', monospace",fontWeight:800},placeholder:"Correction...",value:t.correction||"",onChange:qe=>r({correction:qe.target.value}),autoFocus:!0})]}),t.type==="stamp"&&jsxRuntimeExports.jsxs("div",{className:"px-1 py-1 text-[9px] font-black text-rose-500 uppercase tracking-widest flex items-center gap-1.5 border-b border-rose-500/20 mb-1",children:[jsxRuntimeExports.jsx(Stamp,{size:10})," Mark Stamp"]}),jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsx("textarea",{className:"w-full text-[11px] p-2.5 rounded-xl bg-black/40 border border-transparent focus:border-zinc-700 text-zinc-200 focus:ring-1 focus:ring-zinc-700 outline-none min-h-[60px] placeholder-zinc-800 resize-none leading-relaxed custom-scrollbar",placeholder:"Add a comment...",value:t.text||"",onChange:qe=>r({text:qe.target.value})})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center pt-1",children:[jsxRuntimeExports.jsxs("button",{type:"button",onClick:qe=>{qe.stopPropagation(),xe()},className:"text-[9px] font-bold text-rose-500/70 hover:text-rose-400 hover:bg-rose-500/10 px-2 py-1 rounded-lg flex items-center transition-none",children:[jsxRuntimeExports.jsx(Trash2,{size:10,className:"mr-1.5"}),"DELETE"]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:qe=>{qe.stopPropagation(),Se()},className:"text-[9px] font-black tracking-wide text-zinc-950 bg-white hover:bg-zinc-200 px-3 py-1 rounded-lg shadow-lg transition-none uppercase",children:"Done"})]})]})})}),document.body)},AnnotationCanvas=({currentStudent:t,currentImageIndex:e,displayImageSrc:r,zoom:xe,interactionMode:Se,dragSnapshot:Ee,creationDragCurrent:Pe,editingAnnotationId:Ce,newAnnotationId:Re,selectedIds:Be,selectionBox:Me,canvasRef:Ve,scrollContainerRef:Fe,handleMouseDown:Ie,handleMouseMove:qe,handleMouseUp:Ye,updateAnnotation:Xe,deleteAnnotation:je,setEditingAnnotationId:Qe,setNewAnnotationId:sn,enhanceMode:cn,processedCache:nn,activeMode:an,sessionId:Ze,graderName:tn})=>jsxRuntimeExports.jsxs("div",{ref:Fe,className:"flex-1 bg-zinc-900 overflow-auto relative cursor-crosshair select-none flex flex-col items-center justify-start p-8 pb-32",onMouseDown:We=>Ie(We),onMouseMove:qe,onMouseUp:Ye,onContextMenu:We=>We.preventDefault(),children:[jsxRuntimeExports.jsx("div",{className:"relative shadow-[0_0_100px_-20px_rgba(0,0,0,0.7)] origin-top transition-transform duration-75",style:{transform:`scale(${xe})`,width:"800px"},children:jsxRuntimeExports.jsxs("div",{ref:Ve,className:"relative w-full overflow-hidden bg-white",children:[r?jsxRuntimeExports.jsx("img",{src:r,className:"w-full h-auto block select-none pointer-events-none",draggable:!1}):jsxRuntimeExports.jsx("div",{className:"w-full h-[1000px] flex items-center justify-center bg-zinc-100 text-zinc-400 font-medium",children:"Loading Page..."}),t==null?void 0:t.annotations.filter(We=>We.pageIndex===e).map(We=>{var _n;const An=Ce===We.id,Je=Be.includes(We.id),St=Se==="moving"&&(Ee==null?void 0:Ee.annotationId)===We.id,hn=We.mode==="content"&&We.isElaboration?ELABORATION_COLOR:MODE_COLORS$1[We.mode];if(We.type==="dot"){let yn=((_n=We.number)==null?void 0:_n.toString())||"?";if(We.number){const Sn=t.annotations.filter(Pn=>Pn.mode===We.mode&&Pn.number===We.number&&Pn.type==="dot").sort((Pn,pn)=>parseInt(Pn.id)-parseInt(pn.id)).findIndex(Pn=>Pn.id===We.id);Sn>0&&(yn=`${We.number}${String.fromCharCode(96+Sn)}`)}return jsxRuntimeExports.jsx("div",{onMouseDown:mn=>Ie(mn,We.id),className:`absolute transform -translate-x-1/2 -translate-y-1/2 z-30 transition-all ${St?"transition-none duration-0":""} ${An?"z-50 scale-125":Je?"z-40 scale-110":"hover:scale-110"}`,style:{left:`${We.x*100}%`,top:`${We.y*100}%`},children:jsxRuntimeExports.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center text-[9px] leading-none shadow-lg ring-1 ring-white/50 cursor-pointer border-2 border-white transition-all font-bold ${An?"shadow-[0_0_15px_rgba(255,255,255,0.4)]":Je?"ring-rose-500 ring-4":""}`,style:{backgroundColor:hn,color:"white",fontFamily:"sans-serif"},children:yn})},We.id)}else{if(We.type==="rect"&&We.rects)return jsxRuntimeExports.jsx(React.Fragment,{children:We.rects.map((yn,mn)=>jsxRuntimeExports.jsxs("div",{onMouseDown:Sn=>Ie(Sn,We.id,mn),className:`absolute group transition-all mix-blend-multiply ${St?"transition-none duration-0":""} ${An?"z-20 ring-2":Je?"z-40 ring-4 ring-rose-500 shadow-xl":"z-10 hover:ring-1 opacity-80 hover:opacity-100"}`,style:{left:`${yn.x*100}%`,top:`${yn.y*100}%`,width:`${yn.width*100}%`,height:`${yn.height*100}%`,backgroundColor:`${hn}25`,"--tw-ring-color":Je?"#f43f5e":hn,boxShadow:An?`0 0 10px ${hn}40`:"none"},children:[An&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{onMouseDown:Sn=>{Sn.stopPropagation(),Ie(Sn,We.id,mn,"nw")},className:"absolute -top-1.5 -left-1.5 w-3 h-3 bg-white border-2 rounded-full cursor-nw-resize z-50 shadow-sm",style:{borderColor:hn}}),jsxRuntimeExports.jsx("div",{onMouseDown:Sn=>{Sn.stopPropagation(),Ie(Sn,We.id,mn,"se")},className:"absolute -bottom-1.5 -right-1.5 w-3 h-3 bg-white border-2 rounded-full cursor-se-resize z-50 shadow-sm",style:{borderColor:hn}})]}),mn===0&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-full h-full flex items-center pr-0.5 pointer-events-none z-50 mix-blend-normal",children:jsxRuntimeExports.jsx("div",{className:"px-0.5 py-1 rounded-sm text-[7px] text-white uppercase shadow-sm flex flex-col items-center justify-center",style:{backgroundColor:hn,fontFamily:"'JetBrains Mono', monospace",fontWeight:800},children:(We.code||MODE_LABELS$1[We.mode]).split("").map((Sn,Pn)=>jsxRuntimeExports.jsx("span",{className:"leading-none",children:Sn},Pn))})}),We.correction&&jsxRuntimeExports.jsx("div",{className:"absolute bottom-full left-0 mb-0 pointer-events-none z-50 mix-blend-normal",children:jsxRuntimeExports.jsx("span",{className:"text-[9px] px-1 italic leading-none whitespace-nowrap",style:{textShadow:"1px 1px 0 #fff, -1px -1px 0 #fff, 1px -1px 0 #fff, -1px 1px 0 #fff, 0 1px 0 #fff, 0 -1px 0 #fff, 1px 0 0 #fff, -1px 0 0 #fff",color:hn,fontFamily:"'JetBrains Mono', monospace",fontWeight:800},children:We.correction})})]})]},`${We.id}-${mn}`))},We.id);if(We.type==="stamp"&&We.stampData)return jsxRuntimeExports.jsx("div",{onMouseDown:yn=>Ie(yn,We.id),className:`absolute z-30 transition-all cursor-move group ${St?"transition-none duration-0":""} ${An?"ring-2 ring-rose-500 scale-105 z-40 shadow-2xl":Je?"ring-4 ring-rose-500 shadow-xl z-40":"hover:scale-105"}`,style:{left:`${We.x*100}%`,top:`${We.y*100}%`},children:jsxRuntimeExports.jsxs("div",{className:"bg-white border-2 border-rose-700/80 rounded-lg shadow-xl p-2.5 min-w-[120px] select-none flex flex-col gap-1.5",style:{transform:"rotate(-2deg)"},children:[jsxRuntimeExports.jsxs("div",{className:"space-y-0.5 font-mono text-[9px] font-black text-rose-700 uppercase leading-none",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between gap-4",children:[jsxRuntimeExports.jsx("span",{children:"C:"})," ",jsxRuntimeExports.jsxs("span",{children:[We.stampData.scores.content,"/5"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between gap-4",children:[jsxRuntimeExports.jsx("span",{children:"CA:"})," ",jsxRuntimeExports.jsxs("span",{children:[We.stampData.scores.communicative,"/5"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between gap-4",children:[jsxRuntimeExports.jsx("span",{children:"O:"})," ",jsxRuntimeExports.jsxs("span",{children:[We.stampData.scores.organisation,"/5"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between gap-4",children:[jsxRuntimeExports.jsx("span",{children:"L:"})," ",jsxRuntimeExports.jsxs("span",{children:[We.stampData.scores.language,"/5"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"border-t-2 border-rose-700/30 pt-1 flex items-baseline justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-[20px] font-black text-rose-700 leading-none",children:We.stampData.total}),jsxRuntimeExports.jsx("span",{className:"text-[9px] font-black text-rose-700/60 tracking-tighter",children:"/20"})]}),jsxRuntimeExports.jsxs("div",{className:"text-[6px] font-bold text-rose-700/50 uppercase leading-none mt-1 space-y-0.5",children:[jsxRuntimeExports.jsxs("div",{children:["Graded by ",We.stampData.grader]}),jsxRuntimeExports.jsx("div",{children:We.stampData.date})]}),An&&jsxRuntimeExports.jsx("div",{className:"absolute -top-2 -right-2 bg-rose-500 text-white rounded-full p-1 shadow-lg group-hover:scale-110 transition-transform",children:jsxRuntimeExports.jsx(Stamp,{size:10})})]})},We.id)}return null}),Se==="creating"&&Pe&&Ee&&jsxRuntimeExports.jsx("div",{className:"absolute border-2 border-dashed bg-white/10 pointer-events-none z-50 mix-blend-difference",style:{borderColor:"white",left:`${Math.min(Ee.startPoint.x,Pe.x)*100}%`,top:`${Math.min(Ee.startPoint.y,Pe.y)*100}%`,width:`${Math.abs(Pe.x-Ee.startPoint.x)*100}%`,height:`${Math.abs(Pe.y-Ee.startPoint.y)*100}%`}}),Se==="selecting"&&Me&&jsxRuntimeExports.jsx("div",{className:"absolute border-2 border-rose-500 bg-rose-500/10 pointer-events-none z-50",style:{left:`${Me.x*100}%`,top:`${Me.y*100}%`,width:`${Me.width*100}%`,height:`${Me.height*100}%`}})]})}),Ce&&(()=>{const We=t==null?void 0:t.annotations.find(An=>An.id===Ce);return!We||We.pageIndex!==e||We.type==="stamp"?null:jsxRuntimeExports.jsx(AnnotationEditor,{ann:We,availableCodes:ERROR_CODES.filter(An=>An.mode===We.mode),onUpdate:An=>Xe(We.id,An),onDelete:()=>je(We.id),onClose:()=>{Qe(null),sn(null)},isNew:Ce===Re,zoom:xe,canvasRef:Ve,scrollContainerRef:Fe},We.id)})()]}),clamp=(t,e,r)=>Math.max(e,Math.min(r,t)),useAnnotationCanvas=({students:t,currentStudentIndex:e,currentImageIndex:r,setStudents:xe,activeMode:Se,recordHistory:Ee,historyRefs:Pe,step:Ce,sessionId:Re,setHistory:Be,addAnnotation:Me,graderName:Ve})=>{const[Fe,Ie]=reactExports.useState(1),[qe,Ye]=reactExports.useState("none"),[Xe,je]=reactExports.useState(null),[Qe,sn]=reactExports.useState(null),[cn,nn]=reactExports.useState(null),[an,Ze]=reactExports.useState(null),[tn,We]=reactExports.useState([]),[An,Je]=reactExports.useState(null),St=reactExports.useRef(null),hn=reactExports.useRef(null),_n=t[e],yn=reactExports.useCallback(pn=>{if(!St.current)return{x:0,y:0};const on=St.current.getBoundingClientRect();return{x:clamp((pn.clientX-on.left)/on.width,0,1),y:clamp((pn.clientY-on.top)/on.height,0,1)}},[]),mn=reactExports.useCallback((pn,on,xn,Ge)=>{var $e,rn,fn,gn;if(pn.button===1){pn.preventDefault(),pn.stopPropagation(),Ye("panning"),je({startPoint:{x:0,y:0},clientStart:{x:pn.clientX,y:pn.clientY},initialScroll:{left:(($e=hn.current)==null?void 0:$e.scrollLeft)||0,top:((rn=hn.current)==null?void 0:rn.scrollTop)||0}});return}pn.button===0&&on&&pn.stopPropagation();const Oe=yn(pn);if(qe==="none"&&_n){const vn=_n.annotations.filter(wn=>wn.pageIndex===r);Pe.current.dragStartSnapshot={annotations:JSON.parse(JSON.stringify(vn))}}if(Se==="stamper"&&pn.button===0&&!on){const vn=_n?_n.scores.content+_n.scores.communicative+_n.scores.organisation+_n.scores.language:0,wn={id:(Date.now()+Math.random()).toString(),mode:"stamper",pageIndex:r,type:"stamp",x:Oe.x,y:Oe.y,stampData:{scores:{..._n.scores},total:vn,grader:Ve||"Teacher",date:new Date().toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}};Me(wn),Ye("none");return}if(Se==="select"&&pn.button===0){if(on){const vn=tn.includes(on),wn=vn?tn:[on];vn||We(wn),Ye("moving-multi");const On={};t[e].annotations.forEach(jn=>{wn.includes(jn.id)&&(jn.type==="dot"?On[jn.id]={x:jn.x,y:jn.y}:jn.type==="rect"?On[jn.id]=JSON.parse(JSON.stringify(jn.rects)):jn.type==="stamp"&&(On[jn.id]={x:jn.x,y:jn.y}))}),je({startPoint:Oe,initialMultiPositions:On})}else Ye("selecting"),je({startPoint:Oe}),We([]);return}if(pn.button===0&&Ge&&on&&xn!==void 0){const vn=t[e].annotations.find(On=>On.id===on),wn=(fn=vn==null?void 0:vn.rects)==null?void 0:fn[xn];wn&&(Ye("resizing"),je({startPoint:Oe,initialRect:{...wn},annotationId:on,rectIndex:xn,handle:Ge}));return}if(pn.button===0&&on){const vn=t[e].annotations.find(jn=>jn.id===on);if(!vn)return;if(pn.shiftKey&&vn.type==="rect"){Ye("creating"),nn(on),je({startPoint:Oe});return}nn(on),Ye("moving");let wn,On;vn.type==="rect"&&xn!==void 0?wn=(gn=vn.rects)==null?void 0:gn[xn]:(vn.type==="dot"||vn.type==="stamp")&&(On={x:vn.x,y:vn.y}),(wn||On)&&je({startPoint:Oe,initialRect:wn?{...wn}:void 0,initialDot:On?{...On}:void 0,annotationId:on,rectIndex:xn});return}if(pn.button===0&&!on){let vn=!pn.shiftKey;if(pn.shiftKey&&cn){const wn=t[e].annotations.find(On=>On.id===cn);wn&&wn.type==="rect"&&wn.pageIndex===r||(vn=!0)}vn&&(nn(null),Ze(null)),Ye("creating"),je({startPoint:Oe})}pn.button===2&&(pn.preventDefault(),pn.shiftKey||(nn(null),Ze(null)),Ye("none"),je({startPoint:Oe}))},[Ce,yn,qe,_n,r,Pe,t,e,cn,Se,tn,Ve,Me]),Sn=reactExports.useCallback(pn=>{if(qe==="panning"&&(Xe!=null&&Xe.clientStart)&&Xe.initialScroll&&hn.current){const On=pn.clientX-Xe.clientStart.x,jn=pn.clientY-Xe.clientStart.y;hn.current.scrollLeft=Xe.initialScroll.left-On,hn.current.scrollTop=Xe.initialScroll.top-jn;return}if(!Xe)return;const on=yn(pn),{startPoint:xn,initialRect:Ge,initialDot:Oe,annotationId:$e,rectIndex:rn,handle:fn,initialMultiPositions:gn}=Xe,vn=on.x-xn.x,wn=on.y-xn.y;if(qe==="selecting"){const On=Math.min(xn.x,on.x),jn=Math.min(xn.y,on.y),Wn=Math.abs(on.x-xn.x),ti=Math.abs(on.y-xn.y);if(Je({x:On,y:jn,width:Wn,height:ti}),_n){const si=_n.annotations.filter(qn=>{var En;return qn.pageIndex!==r?!1:qn.type==="dot"||qn.type==="stamp"?qn.x>=On&&qn.x<=On+Wn&&qn.y>=jn&&qn.y<=jn+ti:qn.type==="rect"?(En=qn.rects)==null?void 0:En.some(Qn=>{const Cn=Qn.x,Mn=Qn.y,Un=Qn.width,zn=Qn.height;return!(Cn>On+Wn||Cn+Un<On||Mn>jn+ti||Mn+zn<jn)}):!1}).map(qn=>qn.id);We(si)}return}if(qe==="moving-multi"&&gn){xe(On=>On.map((jn,Wn)=>{if(Wn!==e)return jn;const ti=jn.annotations.map(si=>{const qn=gn[si.id];if(!qn)return si;if(si.type==="dot"||si.type==="stamp"){const En=qn;return{...si,x:clamp(En.x+vn,0,1),y:clamp(En.y+wn,0,1)}}else if(si.type==="rect"){const Qn=qn.map(Cn=>({...Cn,x:clamp(Cn.x+vn,0,1-Cn.width),y:clamp(Cn.y+wn,0,1-Cn.height)}));return{...si,rects:Qn}}return si});return{...jn,annotations:ti}}));return}qe==="moving"&&$e&&xe(On=>On.map((jn,Wn)=>{if(Wn!==e)return jn;const ti=jn.annotations.map(si=>{if(si.id!==$e)return si;if((si.type==="dot"||si.type==="stamp")&&Oe)return{...si,x:clamp(Oe.x+vn,0,1),y:clamp(Oe.y+wn,0,1)};if(si.type==="rect"&&Ge&&rn!==void 0&&si.rects){const qn=[...si.rects],En=clamp(Ge.x+vn,0,1-Ge.width),Qn=clamp(Ge.y+wn,0,1-Ge.height);return qn[rn]={...qn[rn],x:En,y:Qn},{...si,rects:qn}}return si});return{...jn,annotations:ti}})),qe==="resizing"&&Ge&&$e&&rn!==void 0&&fn&&xe(On=>On.map((jn,Wn)=>{if(Wn!==e)return jn;const ti=jn.annotations.map(si=>{if(si.id!==$e||!si.rects)return si;const qn=[...si.rects];let En={...Ge};return fn==="se"?(En.width=Math.max(.01,Ge.width+vn),En.height=Math.max(.01,Ge.height+wn)):fn==="sw"?(En.x=Ge.x+vn,En.width=Math.max(.01,Ge.width-vn),En.height=Math.max(.01,Ge.height+wn)):fn==="ne"?(En.y=Ge.y+wn,En.width=Math.max(.01,Ge.width+vn),En.height=Math.max(.01,Ge.height-wn)):fn==="nw"&&(En.x=Ge.x+vn,En.y=Ge.y+wn,En.width=Math.max(.01,Ge.width-vn),En.height=Math.max(.01,Ge.height-wn)),qn[rn]=En,{...si,rects:qn}});return{...jn,annotations:ti}})),qe==="creating"&&sn(on)},[qe,Xe,yn,e,xe,r,_n]),Pn=reactExports.useCallback(pn=>{if(qe==="panning"){Ye("none"),je(null);return}if(!Xe)return;const on=yn(pn),{startPoint:xn}=Xe;if((qe==="moving"||qe==="resizing"||qe==="moving-multi")&&Pe.current.dragStartSnapshot&&Re){const Ge=Pe.current.dragStartSnapshot.annotations,Oe=`${_n==null?void 0:_n.id}-${r}`;Be($e=>{const rn=$e[Oe]||{past:[]};return{...$e,[Oe]:{past:[...rn.past,Ge],future:[]}}})}if(qe==="selecting"&&Je(null),pn.button===0&&qe==="creating"){const Ge=Math.abs(on.x-xn.x),Oe=Math.abs(on.y-xn.y),$e=Ge>.01||Oe>.01,rn=$e?Ge:.06,fn=$e?Oe:.02,gn=$e?Math.min(xn.x,on.x):xn.x-.03,vn=$e?Math.min(xn.y,on.y):xn.y-.01,wn=clamp(gn,0,1-rn),On=clamp(vn,0,1-fn),jn={x:wn,y:On,width:rn,height:fn};if(pn.shiftKey&&cn)xe(Wn=>Wn.map((ti,si)=>{if(si!==e)return ti;const qn=ti.annotations.map(En=>En.id===cn&&En.type==="rect"&&En.pageIndex===r?{...En,rects:[...En.rects||[],jn]}:En);return{...ti,annotations:qn}})),Ee();else{const Wn=(Date.now()+Math.random()).toString();Me({id:Wn,mode:Se,pageIndex:r,type:"rect",rects:[jn],text:""}),nn(Wn),Ze(Wn)}}if(pn.button===2&&qe==="none"&&Math.hypot(on.x-xn.x,on.y-xn.y)<.01){const $e=t[e].annotations.filter(wn=>wn.mode===Se&&wn.type==="dot").map(wn=>wn.number||0),rn=$e.length>0?Math.max(...$e):0,fn=pn.ctrlKey||pn.metaKey?rn||1:rn+1,gn=pn.ctrlKey||pn.metaKey||pn.shiftKey,vn=(Date.now()+Math.random()).toString();Me({id:vn,mode:Se,pageIndex:r,type:"dot",x:on.x,y:on.y,number:fn,isElaboration:gn})}Ye("none"),je(null),sn(null),Pe.current.dragStartSnapshot=null},[qe,Xe,yn,_n,r,Pe,Re,Be,cn,xe,e,Ee,Se,Me,t]);return{zoom:Fe,setZoom:Ie,interactionMode:qe,setInteractionMode:Ye,dragSnapshot:Xe,setDragSnapshot:je,creationDragCurrent:Qe,setCreationDragCurrent:sn,editingAnnotationId:cn,setEditingAnnotationId:nn,newAnnotationId:an,setNewAnnotationId:Ze,selectedIds:tn,setSelectedIds:We,selectionBox:An,setSelectionBox:Je,canvasRef:St,scrollContainerRef:hn,getRelativePoint:yn,handleMouseDown:mn,handleMouseMove:Sn,handleMouseUp:Pn}};function ok$1(){}function unreachable(){}function stringify$1(t,e){const r={};return(t[t.length-1]===""?[...t,""]:t).join((r.padRight?" ":"")+","+(r.padLeft===!1?"":" ")).trim()}const nameRe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,nameReJsx=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,emptyOptions$2={};function name(t,e){return(emptyOptions$2.jsx?nameReJsx:nameRe).test(t)}const re=/[ \t\n\f\r]/g;function whitespace(t){return typeof t=="object"?t.type==="text"?empty$1(t.value):!1:empty$1(t)}function empty$1(t){return t.replace(re,"")===""}class Schema{constructor(e,r,xe){this.normal=r,this.property=e,xe&&(this.space=xe)}}Schema.prototype.normal={};Schema.prototype.property={};Schema.prototype.space=void 0;function merge(t,e){const r={},xe={};for(const Se of t)Object.assign(r,Se.property),Object.assign(xe,Se.normal);return new Schema(r,xe,e)}function normalize$1(t){return t.toLowerCase()}class Info{constructor(e,r){this.attribute=r,this.property=e}}Info.prototype.attribute="";Info.prototype.booleanish=!1;Info.prototype.boolean=!1;Info.prototype.commaOrSpaceSeparated=!1;Info.prototype.commaSeparated=!1;Info.prototype.defined=!1;Info.prototype.mustUseProperty=!1;Info.prototype.number=!1;Info.prototype.overloadedBoolean=!1;Info.prototype.property="";Info.prototype.spaceSeparated=!1;Info.prototype.space=void 0;let powers=0;const boolean=increment(),booleanish=increment(),overloadedBoolean=increment(),number=increment(),spaceSeparated=increment(),commaSeparated=increment(),commaOrSpaceSeparated=increment();function increment(){return 2**++powers}const types=Object.freeze(Object.defineProperty({__proto__:null,boolean,booleanish,commaOrSpaceSeparated,commaSeparated,number,overloadedBoolean,spaceSeparated},Symbol.toStringTag,{value:"Module"})),checks=Object.keys(types);class DefinedInfo extends Info{constructor(e,r,xe,Se){let Ee=-1;if(super(e,r),mark(this,"space",Se),typeof xe=="number")for(;++Ee<checks.length;){const Pe=checks[Ee];mark(this,checks[Ee],(xe&types[Pe])===types[Pe])}}}DefinedInfo.prototype.defined=!0;function mark(t,e,r){r&&(t[e]=r)}function create(t){const e={},r={};for(const[xe,Se]of Object.entries(t.properties)){const Ee=new DefinedInfo(xe,t.transform(t.attributes||{},xe),Se,t.space);t.mustUseProperty&&t.mustUseProperty.includes(xe)&&(Ee.mustUseProperty=!0),e[xe]=Ee,r[normalize$1(xe)]=xe,r[normalize$1(Ee.attribute)]=xe}return new Schema(e,r,t.space)}const aria=create({properties:{ariaActiveDescendant:null,ariaAtomic:booleanish,ariaAutoComplete:null,ariaBusy:booleanish,ariaChecked:booleanish,ariaColCount:number,ariaColIndex:number,ariaColSpan:number,ariaControls:spaceSeparated,ariaCurrent:null,ariaDescribedBy:spaceSeparated,ariaDetails:null,ariaDisabled:booleanish,ariaDropEffect:spaceSeparated,ariaErrorMessage:null,ariaExpanded:booleanish,ariaFlowTo:spaceSeparated,ariaGrabbed:booleanish,ariaHasPopup:null,ariaHidden:booleanish,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:spaceSeparated,ariaLevel:number,ariaLive:null,ariaModal:booleanish,ariaMultiLine:booleanish,ariaMultiSelectable:booleanish,ariaOrientation:null,ariaOwns:spaceSeparated,ariaPlaceholder:null,ariaPosInSet:number,ariaPressed:booleanish,ariaReadOnly:booleanish,ariaRelevant:null,ariaRequired:booleanish,ariaRoleDescription:spaceSeparated,ariaRowCount:number,ariaRowIndex:number,ariaRowSpan:number,ariaSelected:booleanish,ariaSetSize:number,ariaSort:null,ariaValueMax:number,ariaValueMin:number,ariaValueNow:number,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function caseSensitiveTransform(t,e){return e in t?t[e]:e}function caseInsensitiveTransform(t,e){return caseSensitiveTransform(t,e.toLowerCase())}const html$2=create({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:commaSeparated,acceptCharset:spaceSeparated,accessKey:spaceSeparated,action:null,allow:null,allowFullScreen:boolean,allowPaymentRequest:boolean,allowUserMedia:boolean,alt:null,as:null,async:boolean,autoCapitalize:null,autoComplete:spaceSeparated,autoFocus:boolean,autoPlay:boolean,blocking:spaceSeparated,capture:null,charSet:null,checked:boolean,cite:null,className:spaceSeparated,cols:number,colSpan:null,content:null,contentEditable:booleanish,controls:boolean,controlsList:spaceSeparated,coords:number|commaSeparated,crossOrigin:null,data:null,dateTime:null,decoding:null,default:boolean,defer:boolean,dir:null,dirName:null,disabled:boolean,download:overloadedBoolean,draggable:booleanish,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:boolean,formTarget:null,headers:spaceSeparated,height:number,hidden:overloadedBoolean,high:number,href:null,hrefLang:null,htmlFor:spaceSeparated,httpEquiv:spaceSeparated,id:null,imageSizes:null,imageSrcSet:null,inert:boolean,inputMode:null,integrity:null,is:null,isMap:boolean,itemId:null,itemProp:spaceSeparated,itemRef:spaceSeparated,itemScope:boolean,itemType:spaceSeparated,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:boolean,low:number,manifest:null,max:null,maxLength:number,media:null,method:null,min:null,minLength:number,multiple:boolean,muted:boolean,name:null,nonce:null,noModule:boolean,noValidate:boolean,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:boolean,optimum:number,pattern:null,ping:spaceSeparated,placeholder:null,playsInline:boolean,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:boolean,referrerPolicy:null,rel:spaceSeparated,required:boolean,reversed:boolean,rows:number,rowSpan:number,sandbox:spaceSeparated,scope:null,scoped:boolean,seamless:boolean,selected:boolean,shadowRootClonable:boolean,shadowRootDelegatesFocus:boolean,shadowRootMode:null,shape:null,size:number,sizes:null,slot:null,span:number,spellCheck:booleanish,src:null,srcDoc:null,srcLang:null,srcSet:null,start:number,step:null,style:null,tabIndex:number,target:null,title:null,translate:null,type:null,typeMustMatch:boolean,useMap:null,value:booleanish,width:number,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:spaceSeparated,axis:null,background:null,bgColor:null,border:number,borderColor:null,bottomMargin:number,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:boolean,declare:boolean,event:null,face:null,frame:null,frameBorder:null,hSpace:number,leftMargin:number,link:null,longDesc:null,lowSrc:null,marginHeight:number,marginWidth:number,noResize:boolean,noHref:boolean,noShade:boolean,noWrap:boolean,object:null,profile:null,prompt:null,rev:null,rightMargin:number,rules:null,scheme:null,scrolling:booleanish,standby:null,summary:null,text:null,topMargin:number,valueType:null,version:null,vAlign:null,vLink:null,vSpace:number,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:boolean,disableRemotePlayback:boolean,prefix:null,property:null,results:number,security:null,unselectable:null},space:"html",transform:caseInsensitiveTransform}),svg$1=create({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:commaOrSpaceSeparated,accentHeight:number,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:number,amplitude:number,arabicForm:null,ascent:number,attributeName:null,attributeType:null,azimuth:number,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:number,by:null,calcMode:null,capHeight:number,className:spaceSeparated,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:number,diffuseConstant:number,direction:null,display:null,dur:null,divisor:number,dominantBaseline:null,download:boolean,dx:null,dy:null,edgeMode:null,editable:null,elevation:number,enableBackground:null,end:null,event:null,exponent:number,externalResourcesRequired:null,fill:null,fillOpacity:number,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:commaSeparated,g2:commaSeparated,glyphName:commaSeparated,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:number,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:number,horizOriginX:number,horizOriginY:number,id:null,ideographic:number,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:number,k:number,k1:number,k2:number,k3:number,k4:number,kernelMatrix:commaOrSpaceSeparated,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:number,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:number,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:number,overlineThickness:number,paintOrder:null,panose1:null,path:null,pathLength:number,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:spaceSeparated,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:number,pointsAtY:number,pointsAtZ:number,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:commaOrSpaceSeparated,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:commaOrSpaceSeparated,rev:commaOrSpaceSeparated,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:commaOrSpaceSeparated,requiredFeatures:commaOrSpaceSeparated,requiredFonts:commaOrSpaceSeparated,requiredFormats:commaOrSpaceSeparated,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:number,specularExponent:number,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:number,strikethroughThickness:number,string:null,stroke:null,strokeDashArray:commaOrSpaceSeparated,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:number,strokeOpacity:number,strokeWidth:null,style:null,surfaceScale:number,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:commaOrSpaceSeparated,tabIndex:number,tableValues:null,target:null,targetX:number,targetY:number,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:commaOrSpaceSeparated,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:number,underlineThickness:number,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:number,values:null,vAlphabetic:number,vMathematical:number,vectorEffect:null,vHanging:number,vIdeographic:number,version:null,vertAdvY:number,vertOriginX:number,vertOriginY:number,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:number,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:caseSensitiveTransform}),xlink=create({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),xmlns=create({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:caseInsensitiveTransform}),xml=create({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),hastToReact={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},cap$1=/[A-Z]/g,dash=/-[a-z]/g,valid=/^data[-\w.:]+$/i;function find(t,e){const r=normalize$1(e);let xe=e,Se=Info;if(r in t.normal)return t.property[t.normal[r]];if(r.length>4&&r.slice(0,4)==="data"&&valid.test(e)){if(e.charAt(4)==="-"){const Ee=e.slice(5).replace(dash,camelcase);xe="data"+Ee.charAt(0).toUpperCase()+Ee.slice(1)}else{const Ee=e.slice(4);if(!dash.test(Ee)){let Pe=Ee.replace(cap$1,kebab);Pe.charAt(0)!=="-"&&(Pe="-"+Pe),e="data"+Pe}}Se=DefinedInfo}return new Se(xe,e)}function kebab(t){return"-"+t.toLowerCase()}function camelcase(t){return t.charAt(1).toUpperCase()}const html$1=merge([aria,html$2,xlink,xmlns,xml],"html"),svg=merge([aria,svg$1,xlink,xmlns,xml],"svg");function stringify(t){return t.join(" ").trim()}var cjs$2={},cjs$1,hasRequiredCjs$2;function requireCjs$2(){if(hasRequiredCjs$2)return cjs$1;hasRequiredCjs$2=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,r=/^\s*/,xe=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Se=/^:\s*/,Ee=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Pe=/^[;\s]*/,Ce=/^\s+|\s+$/g,Re=`
`,Be="/",Me="*",Ve="",Fe="comment",Ie="declaration";function qe(Xe,je){if(typeof Xe!="string")throw new TypeError("First argument must be a string");if(!Xe)return[];je=je||{};var Qe=1,sn=1;function cn(_n){var yn=_n.match(e);yn&&(Qe+=yn.length);var mn=_n.lastIndexOf(Re);sn=~mn?_n.length-mn:sn+_n.length}function nn(){var _n={line:Qe,column:sn};return function(yn){return yn.position=new an(_n),We(),yn}}function an(_n){this.start=_n,this.end={line:Qe,column:sn},this.source=je.source}an.prototype.content=Xe;function Ze(_n){var yn=new Error(je.source+":"+Qe+":"+sn+": "+_n);if(yn.reason=_n,yn.filename=je.source,yn.line=Qe,yn.column=sn,yn.source=Xe,!je.silent)throw yn}function tn(_n){var yn=_n.exec(Xe);if(yn){var mn=yn[0];return cn(mn),Xe=Xe.slice(mn.length),yn}}function We(){tn(r)}function An(_n){var yn;for(_n=_n||[];yn=Je();)yn!==!1&&_n.push(yn);return _n}function Je(){var _n=nn();if(!(Be!=Xe.charAt(0)||Me!=Xe.charAt(1))){for(var yn=2;Ve!=Xe.charAt(yn)&&(Me!=Xe.charAt(yn)||Be!=Xe.charAt(yn+1));)++yn;if(yn+=2,Ve===Xe.charAt(yn-1))return Ze("End of comment missing");var mn=Xe.slice(2,yn-2);return sn+=2,cn(mn),Xe=Xe.slice(yn),sn+=2,_n({type:Fe,comment:mn})}}function St(){var _n=nn(),yn=tn(xe);if(yn){if(Je(),!tn(Se))return Ze("property missing ':'");var mn=tn(Ee),Sn=_n({type:Ie,property:Ye(yn[0].replace(t,Ve)),value:mn?Ye(mn[0].replace(t,Ve)):Ve});return tn(Pe),Sn}}function hn(){var _n=[];An(_n);for(var yn;yn=St();)yn!==!1&&(_n.push(yn),An(_n));return _n}return We(),hn()}function Ye(Xe){return Xe?Xe.replace(Ce,Ve):Ve}return cjs$1=qe,cjs$1}var hasRequiredCjs$1;function requireCjs$1(){if(hasRequiredCjs$1)return cjs$2;hasRequiredCjs$1=1;var t=cjs$2&&cjs$2.__importDefault||function(xe){return xe&&xe.__esModule?xe:{default:xe}};Object.defineProperty(cjs$2,"__esModule",{value:!0}),cjs$2.default=r;const e=t(requireCjs$2());function r(xe,Se){let Ee=null;if(!xe||typeof xe!="string")return Ee;const Pe=(0,e.default)(xe),Ce=typeof Se=="function";return Pe.forEach(Re=>{if(Re.type!=="declaration")return;const{property:Be,value:Me}=Re;Ce?Se(Be,Me,Re):Me&&(Ee=Ee||{},Ee[Be]=Me)}),Ee}return cjs$2}var utilities={},hasRequiredUtilities;function requireUtilities(){if(hasRequiredUtilities)return utilities;hasRequiredUtilities=1,Object.defineProperty(utilities,"__esModule",{value:!0}),utilities.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,r=/^[^-]+$/,xe=/^-(webkit|moz|ms|o|khtml)-/,Se=/^-(ms)-/,Ee=function(Be){return!Be||r.test(Be)||t.test(Be)},Pe=function(Be,Me){return Me.toUpperCase()},Ce=function(Be,Me){return"".concat(Me,"-")},Re=function(Be,Me){return Me===void 0&&(Me={}),Ee(Be)?Be:(Be=Be.toLowerCase(),Me.reactCompat?Be=Be.replace(Se,Ce):Be=Be.replace(xe,Ce),Be.replace(e,Pe))};return utilities.camelCase=Re,utilities}var cjs,hasRequiredCjs;function requireCjs(){if(hasRequiredCjs)return cjs;hasRequiredCjs=1;var t=cjs&&cjs.__importDefault||function(Se){return Se&&Se.__esModule?Se:{default:Se}},e=t(requireCjs$1()),r=requireUtilities();function xe(Se,Ee){var Pe={};return!Se||typeof Se!="string"||(0,e.default)(Se,function(Ce,Re){Ce&&Re&&(Pe[(0,r.camelCase)(Ce,Ee)]=Re)}),Pe}return xe.default=xe,cjs=xe,cjs}var cjsExports=requireCjs();const styleToJs=getDefaultExportFromCjs(cjsExports),pointEnd=point$2("end"),pointStart=point$2("start");function point$2(t){return e;function e(r){const xe=r&&r.position&&r.position[t]||{};if(typeof xe.line=="number"&&xe.line>0&&typeof xe.column=="number"&&xe.column>0)return{line:xe.line,column:xe.column,offset:typeof xe.offset=="number"&&xe.offset>-1?xe.offset:void 0}}}function position$1(t){const e=pointStart(t),r=pointEnd(t);if(e&&r)return{start:e,end:r}}function stringifyPosition(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?position(t.position):"start"in t||"end"in t?position(t):"line"in t||"column"in t?point$1(t):""}function point$1(t){return index(t&&t.line)+":"+index(t&&t.column)}function position(t){return point$1(t&&t.start)+"-"+point$1(t&&t.end)}function index(t){return t&&typeof t=="number"?t:1}class VFileMessage extends Error{constructor(e,r,xe){super(),typeof r=="string"&&(xe=r,r=void 0);let Se="",Ee={},Pe=!1;if(r&&("line"in r&&"column"in r?Ee={place:r}:"start"in r&&"end"in r?Ee={place:r}:"type"in r?Ee={ancestors:[r],place:r.position}:Ee={...r}),typeof e=="string"?Se=e:!Ee.cause&&e&&(Pe=!0,Se=e.message,Ee.cause=e),!Ee.ruleId&&!Ee.source&&typeof xe=="string"){const Re=xe.indexOf(":");Re===-1?Ee.ruleId=xe:(Ee.source=xe.slice(0,Re),Ee.ruleId=xe.slice(Re+1))}if(!Ee.place&&Ee.ancestors&&Ee.ancestors){const Re=Ee.ancestors[Ee.ancestors.length-1];Re&&(Ee.place=Re.position)}const Ce=Ee.place&&"start"in Ee.place?Ee.place.start:Ee.place;this.ancestors=Ee.ancestors||void 0,this.cause=Ee.cause||void 0,this.column=Ce?Ce.column:void 0,this.fatal=void 0,this.file="",this.message=Se,this.line=Ce?Ce.line:void 0,this.name=stringifyPosition(Ee.place)||"1:1",this.place=Ee.place||void 0,this.reason=this.message,this.ruleId=Ee.ruleId||void 0,this.source=Ee.source||void 0,this.stack=Pe&&Ee.cause&&typeof Ee.cause.stack=="string"?Ee.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}VFileMessage.prototype.file="";VFileMessage.prototype.name="";VFileMessage.prototype.reason="";VFileMessage.prototype.message="";VFileMessage.prototype.stack="";VFileMessage.prototype.column=void 0;VFileMessage.prototype.line=void 0;VFileMessage.prototype.ancestors=void 0;VFileMessage.prototype.cause=void 0;VFileMessage.prototype.fatal=void 0;VFileMessage.prototype.place=void 0;VFileMessage.prototype.ruleId=void 0;VFileMessage.prototype.source=void 0;const own$3={}.hasOwnProperty,emptyMap=new Map,cap=/[A-Z]/g,tableElements=new Set(["table","tbody","thead","tfoot","tr"]),tableCellElement=new Set(["td","th"]),docs="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function toJsxRuntime(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const r=e.filePath||void 0;let xe;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");xe=developmentCreate(r,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");xe=productionCreate(r,e.jsx,e.jsxs)}const Se={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:xe,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:r,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?svg:html$1,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},Ee=one$1(Se,t,void 0);return Ee&&typeof Ee!="string"?Ee:Se.create(t,Se.Fragment,{children:Ee||void 0},void 0)}function one$1(t,e,r){if(e.type==="element")return element$1(t,e,r);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return mdxExpression(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return mdxJsxElement(t,e,r);if(e.type==="mdxjsEsm")return mdxEsm(t,e);if(e.type==="root")return root$1(t,e,r);if(e.type==="text")return text$3(t,e)}function element$1(t,e,r){const xe=t.schema;let Se=xe;e.tagName.toLowerCase()==="svg"&&xe.space==="html"&&(Se=svg,t.schema=Se),t.ancestors.push(e);const Ee=findComponentFromName(t,e.tagName,!1),Pe=createElementProps(t,e);let Ce=createChildren(t,e);return tableElements.has(e.tagName)&&(Ce=Ce.filter(function(Re){return typeof Re=="string"?!whitespace(Re):!0})),addNode(t,Pe,Ee,e),addChildren(Pe,Ce),t.ancestors.pop(),t.schema=xe,t.create(e,Ee,Pe,r)}function mdxExpression(t,e){if(e.data&&e.data.estree&&t.evaluater){const xe=e.data.estree.body[0];return xe.type,t.evaluater.evaluateExpression(xe.expression)}crashEstree(t,e.position)}function mdxEsm(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);crashEstree(t,e.position)}function mdxJsxElement(t,e,r){const xe=t.schema;let Se=xe;e.name==="svg"&&xe.space==="html"&&(Se=svg,t.schema=Se),t.ancestors.push(e);const Ee=e.name===null?t.Fragment:findComponentFromName(t,e.name,!0),Pe=createJsxElementProps(t,e),Ce=createChildren(t,e);return addNode(t,Pe,Ee,e),addChildren(Pe,Ce),t.ancestors.pop(),t.schema=xe,t.create(e,Ee,Pe,r)}function root$1(t,e,r){const xe={};return addChildren(xe,createChildren(t,e)),t.create(e,t.Fragment,xe,r)}function text$3(t,e){return e.value}function addNode(t,e,r,xe){typeof r!="string"&&r!==t.Fragment&&t.passNode&&(e.node=xe)}function addChildren(t,e){if(e.length>0){const r=e.length>1?e:e[0];r&&(t.children=r)}}function productionCreate(t,e,r){return xe;function xe(Se,Ee,Pe,Ce){const Be=Array.isArray(Pe.children)?r:e;return Ce?Be(Ee,Pe,Ce):Be(Ee,Pe)}}function developmentCreate(t,e){return r;function r(xe,Se,Ee,Pe){const Ce=Array.isArray(Ee.children),Re=pointStart(xe);return e(Se,Ee,Pe,Ce,{columnNumber:Re?Re.column-1:void 0,fileName:t,lineNumber:Re?Re.line:void 0},void 0)}}function createElementProps(t,e){const r={};let xe,Se;for(Se in e.properties)if(Se!=="children"&&own$3.call(e.properties,Se)){const Ee=createProperty(t,Se,e.properties[Se]);if(Ee){const[Pe,Ce]=Ee;t.tableCellAlignToStyle&&Pe==="align"&&typeof Ce=="string"&&tableCellElement.has(e.tagName)?xe=Ce:r[Pe]=Ce}}if(xe){const Ee=r.style||(r.style={});Ee[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=xe}return r}function createJsxElementProps(t,e){const r={};for(const xe of e.attributes)if(xe.type==="mdxJsxExpressionAttribute")if(xe.data&&xe.data.estree&&t.evaluater){const Ee=xe.data.estree.body[0];Ee.type;const Pe=Ee.expression;Pe.type;const Ce=Pe.properties[0];Ce.type,Object.assign(r,t.evaluater.evaluateExpression(Ce.argument))}else crashEstree(t,e.position);else{const Se=xe.name;let Ee;if(xe.value&&typeof xe.value=="object")if(xe.value.data&&xe.value.data.estree&&t.evaluater){const Ce=xe.value.data.estree.body[0];Ce.type,Ee=t.evaluater.evaluateExpression(Ce.expression)}else crashEstree(t,e.position);else Ee=xe.value===null?!0:xe.value;r[Se]=Ee}return r}function createChildren(t,e){const r=[];let xe=-1;const Se=t.passKeys?new Map:emptyMap;for(;++xe<e.children.length;){const Ee=e.children[xe];let Pe;if(t.passKeys){const Re=Ee.type==="element"?Ee.tagName:Ee.type==="mdxJsxFlowElement"||Ee.type==="mdxJsxTextElement"?Ee.name:void 0;if(Re){const Be=Se.get(Re)||0;Pe=Re+"-"+Be,Se.set(Re,Be+1)}}const Ce=one$1(t,Ee,Pe);Ce!==void 0&&r.push(Ce)}return r}function createProperty(t,e,r){const xe=find(t.schema,e);if(!(r==null||typeof r=="number"&&Number.isNaN(r))){if(Array.isArray(r)&&(r=xe.commaSeparated?stringify$1(r):stringify(r)),xe.property==="style"){let Se=typeof r=="object"?r:parseStyle(t,String(r));return t.stylePropertyNameCase==="css"&&(Se=transformStylesToCssCasing(Se)),["style",Se]}return[t.elementAttributeNameCase==="react"&&xe.space?hastToReact[xe.property]||xe.property:xe.attribute,r]}}function parseStyle(t,e){try{return styleToJs(e,{reactCompat:!0})}catch(r){if(t.ignoreInvalidStyle)return{};const xe=r,Se=new VFileMessage("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:xe,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw Se.file=t.filePath||void 0,Se.url=docs+"#cannot-parse-style-attribute",Se}}function findComponentFromName(t,e,r){let xe;if(!r)xe={type:"Literal",value:e};else if(e.includes(".")){const Se=e.split(".");let Ee=-1,Pe;for(;++Ee<Se.length;){const Ce=name(Se[Ee])?{type:"Identifier",name:Se[Ee]}:{type:"Literal",value:Se[Ee]};Pe=Pe?{type:"MemberExpression",object:Pe,property:Ce,computed:!!(Ee&&Ce.type==="Literal"),optional:!1}:Ce}xe=Pe}else xe=name(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(xe.type==="Literal"){const Se=xe.value;return own$3.call(t.components,Se)?t.components[Se]:Se}if(t.evaluater)return t.evaluater.evaluateExpression(xe);crashEstree(t)}function crashEstree(t,e){const r=new VFileMessage("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw r.file=t.filePath||void 0,r.url=docs+"#cannot-handle-mdx-estrees-without-createevaluater",r}function transformStylesToCssCasing(t){const e={};let r;for(r in t)own$3.call(t,r)&&(e[transformStyleToCssCasing(r)]=t[r]);return e}function transformStyleToCssCasing(t){let e=t.replace(cap,toDash);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function toDash(t){return"-"+t.toLowerCase()}const urlAttributes={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},emptyOptions$1={};function toString$1(t,e){const r=emptyOptions$1,xe=typeof r.includeImageAlt=="boolean"?r.includeImageAlt:!0,Se=typeof r.includeHtml=="boolean"?r.includeHtml:!0;return one(t,xe,Se)}function one(t,e,r){if(node(t)){if("value"in t)return t.type==="html"&&!r?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return all(t.children,e,r)}return Array.isArray(t)?all(t,e,r):""}function all(t,e,r){const xe=[];let Se=-1;for(;++Se<t.length;)xe[Se]=one(t[Se],e,r);return xe.join("")}function node(t){return!!(t&&typeof t=="object")}const element=document.createElement("i");function decodeNamedCharacterReference(t){const e="&"+t+";";element.innerHTML=e;const r=element.textContent;return r.charCodeAt(r.length-1)===59&&t!=="semi"||r===e?!1:r}function splice(t,e,r,xe){const Se=t.length;let Ee=0,Pe;if(e<0?e=-e>Se?0:Se+e:e=e>Se?Se:e,r=r>0?r:0,xe.length<1e4)Pe=Array.from(xe),Pe.unshift(e,r),t.splice(...Pe);else for(r&&t.splice(e,r);Ee<xe.length;)Pe=xe.slice(Ee,Ee+1e4),Pe.unshift(e,0),t.splice(...Pe),Ee+=1e4,e+=1e4}function push(t,e){return t.length>0?(splice(t,t.length,0,e),t):e}const hasOwnProperty={}.hasOwnProperty;function combineExtensions(t){const e={};let r=-1;for(;++r<t.length;)syntaxExtension(e,t[r]);return e}function syntaxExtension(t,e){let r;for(r in e){const Se=(hasOwnProperty.call(t,r)?t[r]:void 0)||(t[r]={}),Ee=e[r];let Pe;if(Ee)for(Pe in Ee){hasOwnProperty.call(Se,Pe)||(Se[Pe]=[]);const Ce=Ee[Pe];constructs(Se[Pe],Array.isArray(Ce)?Ce:Ce?[Ce]:[])}}}function constructs(t,e){let r=-1;const xe=[];for(;++r<e.length;)(e[r].add==="after"?t:xe).push(e[r]);splice(t,0,0,xe)}function decodeNumericCharacterReference(t,e){const r=Number.parseInt(t,e);return r<9||r===11||r>13&&r<32||r>126&&r<160||r>55295&&r<57344||r>64975&&r<65008||(r&65535)===65535||(r&65535)===65534||r>1114111?"":String.fromCodePoint(r)}function normalizeIdentifier(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const asciiAlpha=regexCheck(/[A-Za-z]/),asciiAlphanumeric=regexCheck(/[\dA-Za-z]/),asciiAtext=regexCheck(/[#-'*+\--9=?A-Z^-~]/);function asciiControl(t){return t!==null&&(t<32||t===127)}const asciiDigit=regexCheck(/\d/),asciiHexDigit=regexCheck(/[\dA-Fa-f]/),asciiPunctuation=regexCheck(/[!-/:-@[-`{-~]/);function markdownLineEnding(t){return t!==null&&t<-2}function markdownLineEndingOrSpace(t){return t!==null&&(t<0||t===32)}function markdownSpace(t){return t===-2||t===-1||t===32}const unicodePunctuation=regexCheck(new RegExp("\\p{P}|\\p{S}","u")),unicodeWhitespace=regexCheck(/\s/);function regexCheck(t){return e;function e(r){return r!==null&&r>-1&&t.test(String.fromCharCode(r))}}function normalizeUri(t){const e=[];let r=-1,xe=0,Se=0;for(;++r<t.length;){const Ee=t.charCodeAt(r);let Pe="";if(Ee===37&&asciiAlphanumeric(t.charCodeAt(r+1))&&asciiAlphanumeric(t.charCodeAt(r+2)))Se=2;else if(Ee<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(Ee))||(Pe=String.fromCharCode(Ee));else if(Ee>55295&&Ee<57344){const Ce=t.charCodeAt(r+1);Ee<56320&&Ce>56319&&Ce<57344?(Pe=String.fromCharCode(Ee,Ce),Se=1):Pe=""}else Pe=String.fromCharCode(Ee);Pe&&(e.push(t.slice(xe,r),encodeURIComponent(Pe)),xe=r+Se+1,Pe=""),Se&&(r+=Se,Se=0)}return e.join("")+t.slice(xe)}function factorySpace(t,e,r,xe){const Se=xe?xe-1:Number.POSITIVE_INFINITY;let Ee=0;return Pe;function Pe(Re){return markdownSpace(Re)?(t.enter(r),Ce(Re)):e(Re)}function Ce(Re){return markdownSpace(Re)&&Ee++<Se?(t.consume(Re),Ce):(t.exit(r),e(Re))}}const content$1={tokenize:initializeContent};function initializeContent(t){const e=t.attempt(this.parser.constructs.contentInitial,xe,Se);let r;return e;function xe(Ce){if(Ce===null){t.consume(Ce);return}return t.enter("lineEnding"),t.consume(Ce),t.exit("lineEnding"),factorySpace(t,e,"linePrefix")}function Se(Ce){return t.enter("paragraph"),Ee(Ce)}function Ee(Ce){const Re=t.enter("chunkText",{contentType:"text",previous:r});return r&&(r.next=Re),r=Re,Pe(Ce)}function Pe(Ce){if(Ce===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(Ce);return}return markdownLineEnding(Ce)?(t.consume(Ce),t.exit("chunkText"),Ee):(t.consume(Ce),Pe)}}const document$2={tokenize:initializeDocument},containerConstruct={tokenize:tokenizeContainer};function initializeDocument(t){const e=this,r=[];let xe=0,Se,Ee,Pe;return Ce;function Ce(sn){if(xe<r.length){const cn=r[xe];return e.containerState=cn[1],t.attempt(cn[0].continuation,Re,Be)(sn)}return Be(sn)}function Re(sn){if(xe++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,Se&&Qe();const cn=e.events.length;let nn=cn,an;for(;nn--;)if(e.events[nn][0]==="exit"&&e.events[nn][1].type==="chunkFlow"){an=e.events[nn][1].end;break}je(xe);let Ze=cn;for(;Ze<e.events.length;)e.events[Ze][1].end={...an},Ze++;return splice(e.events,nn+1,0,e.events.slice(cn)),e.events.length=Ze,Be(sn)}return Ce(sn)}function Be(sn){if(xe===r.length){if(!Se)return Fe(sn);if(Se.currentConstruct&&Se.currentConstruct.concrete)return qe(sn);e.interrupt=!!(Se.currentConstruct&&!Se._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(containerConstruct,Me,Ve)(sn)}function Me(sn){return Se&&Qe(),je(xe),Fe(sn)}function Ve(sn){return e.parser.lazy[e.now().line]=xe!==r.length,Pe=e.now().offset,qe(sn)}function Fe(sn){return e.containerState={},t.attempt(containerConstruct,Ie,qe)(sn)}function Ie(sn){return xe++,r.push([e.currentConstruct,e.containerState]),Fe(sn)}function qe(sn){if(sn===null){Se&&Qe(),je(0),t.consume(sn);return}return Se=Se||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:Se,contentType:"flow",previous:Ee}),Ye(sn)}function Ye(sn){if(sn===null){Xe(t.exit("chunkFlow"),!0),je(0),t.consume(sn);return}return markdownLineEnding(sn)?(t.consume(sn),Xe(t.exit("chunkFlow")),xe=0,e.interrupt=void 0,Ce):(t.consume(sn),Ye)}function Xe(sn,cn){const nn=e.sliceStream(sn);if(cn&&nn.push(null),sn.previous=Ee,Ee&&(Ee.next=sn),Ee=sn,Se.defineSkip(sn.start),Se.write(nn),e.parser.lazy[sn.start.line]){let an=Se.events.length;for(;an--;)if(Se.events[an][1].start.offset<Pe&&(!Se.events[an][1].end||Se.events[an][1].end.offset>Pe))return;const Ze=e.events.length;let tn=Ze,We,An;for(;tn--;)if(e.events[tn][0]==="exit"&&e.events[tn][1].type==="chunkFlow"){if(We){An=e.events[tn][1].end;break}We=!0}for(je(xe),an=Ze;an<e.events.length;)e.events[an][1].end={...An},an++;splice(e.events,tn+1,0,e.events.slice(Ze)),e.events.length=an}}function je(sn){let cn=r.length;for(;cn-- >sn;){const nn=r[cn];e.containerState=nn[1],nn[0].exit.call(e,t)}r.length=sn}function Qe(){Se.write([null]),Ee=void 0,Se=void 0,e.containerState._closeFlow=void 0}}function tokenizeContainer(t,e,r){return factorySpace(t,t.attempt(this.parser.constructs.document,e,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function classifyCharacter(t){if(t===null||markdownLineEndingOrSpace(t)||unicodeWhitespace(t))return 1;if(unicodePunctuation(t))return 2}function resolveAll(t,e,r){const xe=[];let Se=-1;for(;++Se<t.length;){const Ee=t[Se].resolveAll;Ee&&!xe.includes(Ee)&&(e=Ee(e,r),xe.push(Ee))}return e}const attention={name:"attention",resolveAll:resolveAllAttention,tokenize:tokenizeAttention};function resolveAllAttention(t,e){let r=-1,xe,Se,Ee,Pe,Ce,Re,Be,Me;for(;++r<t.length;)if(t[r][0]==="enter"&&t[r][1].type==="attentionSequence"&&t[r][1]._close){for(xe=r;xe--;)if(t[xe][0]==="exit"&&t[xe][1].type==="attentionSequence"&&t[xe][1]._open&&e.sliceSerialize(t[xe][1]).charCodeAt(0)===e.sliceSerialize(t[r][1]).charCodeAt(0)){if((t[xe][1]._close||t[r][1]._open)&&(t[r][1].end.offset-t[r][1].start.offset)%3&&!((t[xe][1].end.offset-t[xe][1].start.offset+t[r][1].end.offset-t[r][1].start.offset)%3))continue;Re=t[xe][1].end.offset-t[xe][1].start.offset>1&&t[r][1].end.offset-t[r][1].start.offset>1?2:1;const Ve={...t[xe][1].end},Fe={...t[r][1].start};movePoint(Ve,-Re),movePoint(Fe,Re),Pe={type:Re>1?"strongSequence":"emphasisSequence",start:Ve,end:{...t[xe][1].end}},Ce={type:Re>1?"strongSequence":"emphasisSequence",start:{...t[r][1].start},end:Fe},Ee={type:Re>1?"strongText":"emphasisText",start:{...t[xe][1].end},end:{...t[r][1].start}},Se={type:Re>1?"strong":"emphasis",start:{...Pe.start},end:{...Ce.end}},t[xe][1].end={...Pe.start},t[r][1].start={...Ce.end},Be=[],t[xe][1].end.offset-t[xe][1].start.offset&&(Be=push(Be,[["enter",t[xe][1],e],["exit",t[xe][1],e]])),Be=push(Be,[["enter",Se,e],["enter",Pe,e],["exit",Pe,e],["enter",Ee,e]]),Be=push(Be,resolveAll(e.parser.constructs.insideSpan.null,t.slice(xe+1,r),e)),Be=push(Be,[["exit",Ee,e],["enter",Ce,e],["exit",Ce,e],["exit",Se,e]]),t[r][1].end.offset-t[r][1].start.offset?(Me=2,Be=push(Be,[["enter",t[r][1],e],["exit",t[r][1],e]])):Me=0,splice(t,xe-1,r-xe+3,Be),r=xe+Be.length-Me-2;break}}for(r=-1;++r<t.length;)t[r][1].type==="attentionSequence"&&(t[r][1].type="data");return t}function tokenizeAttention(t,e){const r=this.parser.constructs.attentionMarkers.null,xe=this.previous,Se=classifyCharacter(xe);let Ee;return Pe;function Pe(Re){return Ee=Re,t.enter("attentionSequence"),Ce(Re)}function Ce(Re){if(Re===Ee)return t.consume(Re),Ce;const Be=t.exit("attentionSequence"),Me=classifyCharacter(Re),Ve=!Me||Me===2&&Se||r.includes(Re),Fe=!Se||Se===2&&Me||r.includes(xe);return Be._open=!!(Ee===42?Ve:Ve&&(Se||!Fe)),Be._close=!!(Ee===42?Fe:Fe&&(Me||!Ve)),e(Re)}}function movePoint(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const autolink={name:"autolink",tokenize:tokenizeAutolink};function tokenizeAutolink(t,e,r){let xe=0;return Se;function Se(Ie){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(Ie),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),Ee}function Ee(Ie){return asciiAlpha(Ie)?(t.consume(Ie),Pe):Ie===64?r(Ie):Be(Ie)}function Pe(Ie){return Ie===43||Ie===45||Ie===46||asciiAlphanumeric(Ie)?(xe=1,Ce(Ie)):Be(Ie)}function Ce(Ie){return Ie===58?(t.consume(Ie),xe=0,Re):(Ie===43||Ie===45||Ie===46||asciiAlphanumeric(Ie))&&xe++<32?(t.consume(Ie),Ce):(xe=0,Be(Ie))}function Re(Ie){return Ie===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(Ie),t.exit("autolinkMarker"),t.exit("autolink"),e):Ie===null||Ie===32||Ie===60||asciiControl(Ie)?r(Ie):(t.consume(Ie),Re)}function Be(Ie){return Ie===64?(t.consume(Ie),Me):asciiAtext(Ie)?(t.consume(Ie),Be):r(Ie)}function Me(Ie){return asciiAlphanumeric(Ie)?Ve(Ie):r(Ie)}function Ve(Ie){return Ie===46?(t.consume(Ie),xe=0,Me):Ie===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(Ie),t.exit("autolinkMarker"),t.exit("autolink"),e):Fe(Ie)}function Fe(Ie){if((Ie===45||asciiAlphanumeric(Ie))&&xe++<63){const qe=Ie===45?Fe:Ve;return t.consume(Ie),qe}return r(Ie)}}const blankLine={partial:!0,tokenize:tokenizeBlankLine};function tokenizeBlankLine(t,e,r){return xe;function xe(Ee){return markdownSpace(Ee)?factorySpace(t,Se,"linePrefix")(Ee):Se(Ee)}function Se(Ee){return Ee===null||markdownLineEnding(Ee)?e(Ee):r(Ee)}}const blockQuote={continuation:{tokenize:tokenizeBlockQuoteContinuation},exit,name:"blockQuote",tokenize:tokenizeBlockQuoteStart};function tokenizeBlockQuoteStart(t,e,r){const xe=this;return Se;function Se(Pe){if(Pe===62){const Ce=xe.containerState;return Ce.open||(t.enter("blockQuote",{_container:!0}),Ce.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(Pe),t.exit("blockQuoteMarker"),Ee}return r(Pe)}function Ee(Pe){return markdownSpace(Pe)?(t.enter("blockQuotePrefixWhitespace"),t.consume(Pe),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(Pe))}}function tokenizeBlockQuoteContinuation(t,e,r){const xe=this;return Se;function Se(Pe){return markdownSpace(Pe)?factorySpace(t,Ee,"linePrefix",xe.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Pe):Ee(Pe)}function Ee(Pe){return t.attempt(blockQuote,e,r)(Pe)}}function exit(t){t.exit("blockQuote")}const characterEscape={name:"characterEscape",tokenize:tokenizeCharacterEscape};function tokenizeCharacterEscape(t,e,r){return xe;function xe(Ee){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(Ee),t.exit("escapeMarker"),Se}function Se(Ee){return asciiPunctuation(Ee)?(t.enter("characterEscapeValue"),t.consume(Ee),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):r(Ee)}}const characterReference={name:"characterReference",tokenize:tokenizeCharacterReference};function tokenizeCharacterReference(t,e,r){const xe=this;let Se=0,Ee,Pe;return Ce;function Ce(Ve){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(Ve),t.exit("characterReferenceMarker"),Re}function Re(Ve){return Ve===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(Ve),t.exit("characterReferenceMarkerNumeric"),Be):(t.enter("characterReferenceValue"),Ee=31,Pe=asciiAlphanumeric,Me(Ve))}function Be(Ve){return Ve===88||Ve===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(Ve),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),Ee=6,Pe=asciiHexDigit,Me):(t.enter("characterReferenceValue"),Ee=7,Pe=asciiDigit,Me(Ve))}function Me(Ve){if(Ve===59&&Se){const Fe=t.exit("characterReferenceValue");return Pe===asciiAlphanumeric&&!decodeNamedCharacterReference(xe.sliceSerialize(Fe))?r(Ve):(t.enter("characterReferenceMarker"),t.consume(Ve),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return Pe(Ve)&&Se++<Ee?(t.consume(Ve),Me):r(Ve)}}const nonLazyContinuation={partial:!0,tokenize:tokenizeNonLazyContinuation},codeFenced={concrete:!0,name:"codeFenced",tokenize:tokenizeCodeFenced};function tokenizeCodeFenced(t,e,r){const xe=this,Se={partial:!0,tokenize:nn};let Ee=0,Pe=0,Ce;return Re;function Re(an){return Be(an)}function Be(an){const Ze=xe.events[xe.events.length-1];return Ee=Ze&&Ze[1].type==="linePrefix"?Ze[2].sliceSerialize(Ze[1],!0).length:0,Ce=an,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),Me(an)}function Me(an){return an===Ce?(Pe++,t.consume(an),Me):Pe<3?r(an):(t.exit("codeFencedFenceSequence"),markdownSpace(an)?factorySpace(t,Ve,"whitespace")(an):Ve(an))}function Ve(an){return an===null||markdownLineEnding(an)?(t.exit("codeFencedFence"),xe.interrupt?e(an):t.check(nonLazyContinuation,Ye,cn)(an)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),Fe(an))}function Fe(an){return an===null||markdownLineEnding(an)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Ve(an)):markdownSpace(an)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),factorySpace(t,Ie,"whitespace")(an)):an===96&&an===Ce?r(an):(t.consume(an),Fe)}function Ie(an){return an===null||markdownLineEnding(an)?Ve(an):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),qe(an))}function qe(an){return an===null||markdownLineEnding(an)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),Ve(an)):an===96&&an===Ce?r(an):(t.consume(an),qe)}function Ye(an){return t.attempt(Se,cn,Xe)(an)}function Xe(an){return t.enter("lineEnding"),t.consume(an),t.exit("lineEnding"),je}function je(an){return Ee>0&&markdownSpace(an)?factorySpace(t,Qe,"linePrefix",Ee+1)(an):Qe(an)}function Qe(an){return an===null||markdownLineEnding(an)?t.check(nonLazyContinuation,Ye,cn)(an):(t.enter("codeFlowValue"),sn(an))}function sn(an){return an===null||markdownLineEnding(an)?(t.exit("codeFlowValue"),Qe(an)):(t.consume(an),sn)}function cn(an){return t.exit("codeFenced"),e(an)}function nn(an,Ze,tn){let We=0;return An;function An(yn){return an.enter("lineEnding"),an.consume(yn),an.exit("lineEnding"),Je}function Je(yn){return an.enter("codeFencedFence"),markdownSpace(yn)?factorySpace(an,St,"linePrefix",xe.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(yn):St(yn)}function St(yn){return yn===Ce?(an.enter("codeFencedFenceSequence"),hn(yn)):tn(yn)}function hn(yn){return yn===Ce?(We++,an.consume(yn),hn):We>=Pe?(an.exit("codeFencedFenceSequence"),markdownSpace(yn)?factorySpace(an,_n,"whitespace")(yn):_n(yn)):tn(yn)}function _n(yn){return yn===null||markdownLineEnding(yn)?(an.exit("codeFencedFence"),Ze(yn)):tn(yn)}}}function tokenizeNonLazyContinuation(t,e,r){const xe=this;return Se;function Se(Pe){return Pe===null?r(Pe):(t.enter("lineEnding"),t.consume(Pe),t.exit("lineEnding"),Ee)}function Ee(Pe){return xe.parser.lazy[xe.now().line]?r(Pe):e(Pe)}}const codeIndented={name:"codeIndented",tokenize:tokenizeCodeIndented},furtherStart={partial:!0,tokenize:tokenizeFurtherStart};function tokenizeCodeIndented(t,e,r){const xe=this;return Se;function Se(Be){return t.enter("codeIndented"),factorySpace(t,Ee,"linePrefix",5)(Be)}function Ee(Be){const Me=xe.events[xe.events.length-1];return Me&&Me[1].type==="linePrefix"&&Me[2].sliceSerialize(Me[1],!0).length>=4?Pe(Be):r(Be)}function Pe(Be){return Be===null?Re(Be):markdownLineEnding(Be)?t.attempt(furtherStart,Pe,Re)(Be):(t.enter("codeFlowValue"),Ce(Be))}function Ce(Be){return Be===null||markdownLineEnding(Be)?(t.exit("codeFlowValue"),Pe(Be)):(t.consume(Be),Ce)}function Re(Be){return t.exit("codeIndented"),e(Be)}}function tokenizeFurtherStart(t,e,r){const xe=this;return Se;function Se(Pe){return xe.parser.lazy[xe.now().line]?r(Pe):markdownLineEnding(Pe)?(t.enter("lineEnding"),t.consume(Pe),t.exit("lineEnding"),Se):factorySpace(t,Ee,"linePrefix",5)(Pe)}function Ee(Pe){const Ce=xe.events[xe.events.length-1];return Ce&&Ce[1].type==="linePrefix"&&Ce[2].sliceSerialize(Ce[1],!0).length>=4?e(Pe):markdownLineEnding(Pe)?Se(Pe):r(Pe)}}const codeText={name:"codeText",previous,resolve:resolveCodeText,tokenize:tokenizeCodeText};function resolveCodeText(t){let e=t.length-4,r=3,xe,Se;if((t[r][1].type==="lineEnding"||t[r][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(xe=r;++xe<e;)if(t[xe][1].type==="codeTextData"){t[r][1].type="codeTextPadding",t[e][1].type="codeTextPadding",r+=2,e-=2;break}}for(xe=r-1,e++;++xe<=e;)Se===void 0?xe!==e&&t[xe][1].type!=="lineEnding"&&(Se=xe):(xe===e||t[xe][1].type==="lineEnding")&&(t[Se][1].type="codeTextData",xe!==Se+2&&(t[Se][1].end=t[xe-1][1].end,t.splice(Se+2,xe-Se-2),e-=xe-Se-2,xe=Se+2),Se=void 0);return t}function previous(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function tokenizeCodeText(t,e,r){let xe=0,Se,Ee;return Pe;function Pe(Ve){return t.enter("codeText"),t.enter("codeTextSequence"),Ce(Ve)}function Ce(Ve){return Ve===96?(t.consume(Ve),xe++,Ce):(t.exit("codeTextSequence"),Re(Ve))}function Re(Ve){return Ve===null?r(Ve):Ve===32?(t.enter("space"),t.consume(Ve),t.exit("space"),Re):Ve===96?(Ee=t.enter("codeTextSequence"),Se=0,Me(Ve)):markdownLineEnding(Ve)?(t.enter("lineEnding"),t.consume(Ve),t.exit("lineEnding"),Re):(t.enter("codeTextData"),Be(Ve))}function Be(Ve){return Ve===null||Ve===32||Ve===96||markdownLineEnding(Ve)?(t.exit("codeTextData"),Re(Ve)):(t.consume(Ve),Be)}function Me(Ve){return Ve===96?(t.consume(Ve),Se++,Me):Se===xe?(t.exit("codeTextSequence"),t.exit("codeText"),e(Ve)):(Ee.type="codeTextData",Be(Ve))}}class SpliceBuffer{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,r){const xe=r??Number.POSITIVE_INFINITY;return xe<this.left.length?this.left.slice(e,xe):e>this.left.length?this.right.slice(this.right.length-xe+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-xe+this.left.length).reverse())}splice(e,r,xe){const Se=r||0;this.setCursor(Math.trunc(e));const Ee=this.right.splice(this.right.length-Se,Number.POSITIVE_INFINITY);return xe&&chunkedPush(this.left,xe),Ee.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),chunkedPush(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),chunkedPush(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const r=this.left.splice(e,Number.POSITIVE_INFINITY);chunkedPush(this.right,r.reverse())}else{const r=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);chunkedPush(this.left,r.reverse())}}}function chunkedPush(t,e){let r=0;if(e.length<1e4)t.push(...e);else for(;r<e.length;)t.push(...e.slice(r,r+1e4)),r+=1e4}function subtokenize(t){const e={};let r=-1,xe,Se,Ee,Pe,Ce,Re,Be;const Me=new SpliceBuffer(t);for(;++r<Me.length;){for(;r in e;)r=e[r];if(xe=Me.get(r),r&&xe[1].type==="chunkFlow"&&Me.get(r-1)[1].type==="listItemPrefix"&&(Re=xe[1]._tokenizer.events,Ee=0,Ee<Re.length&&Re[Ee][1].type==="lineEndingBlank"&&(Ee+=2),Ee<Re.length&&Re[Ee][1].type==="content"))for(;++Ee<Re.length&&Re[Ee][1].type!=="content";)Re[Ee][1].type==="chunkText"&&(Re[Ee][1]._isInFirstContentOfListItem=!0,Ee++);if(xe[0]==="enter")xe[1].contentType&&(Object.assign(e,subcontent(Me,r)),r=e[r],Be=!0);else if(xe[1]._container){for(Ee=r,Se=void 0;Ee--;)if(Pe=Me.get(Ee),Pe[1].type==="lineEnding"||Pe[1].type==="lineEndingBlank")Pe[0]==="enter"&&(Se&&(Me.get(Se)[1].type="lineEndingBlank"),Pe[1].type="lineEnding",Se=Ee);else if(!(Pe[1].type==="linePrefix"||Pe[1].type==="listItemIndent"))break;Se&&(xe[1].end={...Me.get(Se)[1].start},Ce=Me.slice(Se,r),Ce.unshift(xe),Me.splice(Se,r-Se+1,Ce))}}return splice(t,0,Number.POSITIVE_INFINITY,Me.slice(0)),!Be}function subcontent(t,e){const r=t.get(e)[1],xe=t.get(e)[2];let Se=e-1;const Ee=[];let Pe=r._tokenizer;Pe||(Pe=xe.parser[r.contentType](r.start),r._contentTypeTextTrailing&&(Pe._contentTypeTextTrailing=!0));const Ce=Pe.events,Re=[],Be={};let Me,Ve,Fe=-1,Ie=r,qe=0,Ye=0;const Xe=[Ye];for(;Ie;){for(;t.get(++Se)[1]!==Ie;);Ee.push(Se),Ie._tokenizer||(Me=xe.sliceStream(Ie),Ie.next||Me.push(null),Ve&&Pe.defineSkip(Ie.start),Ie._isInFirstContentOfListItem&&(Pe._gfmTasklistFirstContentOfListItem=!0),Pe.write(Me),Ie._isInFirstContentOfListItem&&(Pe._gfmTasklistFirstContentOfListItem=void 0)),Ve=Ie,Ie=Ie.next}for(Ie=r;++Fe<Ce.length;)Ce[Fe][0]==="exit"&&Ce[Fe-1][0]==="enter"&&Ce[Fe][1].type===Ce[Fe-1][1].type&&Ce[Fe][1].start.line!==Ce[Fe][1].end.line&&(Ye=Fe+1,Xe.push(Ye),Ie._tokenizer=void 0,Ie.previous=void 0,Ie=Ie.next);for(Pe.events=[],Ie?(Ie._tokenizer=void 0,Ie.previous=void 0):Xe.pop(),Fe=Xe.length;Fe--;){const je=Ce.slice(Xe[Fe],Xe[Fe+1]),Qe=Ee.pop();Re.push([Qe,Qe+je.length-1]),t.splice(Qe,2,je)}for(Re.reverse(),Fe=-1;++Fe<Re.length;)Be[qe+Re[Fe][0]]=qe+Re[Fe][1],qe+=Re[Fe][1]-Re[Fe][0]-1;return Be}const content={resolve:resolveContent,tokenize:tokenizeContent},continuationConstruct={partial:!0,tokenize:tokenizeContinuation};function resolveContent(t){return subtokenize(t),t}function tokenizeContent(t,e){let r;return xe;function xe(Ce){return t.enter("content"),r=t.enter("chunkContent",{contentType:"content"}),Se(Ce)}function Se(Ce){return Ce===null?Ee(Ce):markdownLineEnding(Ce)?t.check(continuationConstruct,Pe,Ee)(Ce):(t.consume(Ce),Se)}function Ee(Ce){return t.exit("chunkContent"),t.exit("content"),e(Ce)}function Pe(Ce){return t.consume(Ce),t.exit("chunkContent"),r.next=t.enter("chunkContent",{contentType:"content",previous:r}),r=r.next,Se}}function tokenizeContinuation(t,e,r){const xe=this;return Se;function Se(Pe){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(Pe),t.exit("lineEnding"),factorySpace(t,Ee,"linePrefix")}function Ee(Pe){if(Pe===null||markdownLineEnding(Pe))return r(Pe);const Ce=xe.events[xe.events.length-1];return!xe.parser.constructs.disable.null.includes("codeIndented")&&Ce&&Ce[1].type==="linePrefix"&&Ce[2].sliceSerialize(Ce[1],!0).length>=4?e(Pe):t.interrupt(xe.parser.constructs.flow,r,e)(Pe)}}function factoryDestination(t,e,r,xe,Se,Ee,Pe,Ce,Re){const Be=Re||Number.POSITIVE_INFINITY;let Me=0;return Ve;function Ve(je){return je===60?(t.enter(xe),t.enter(Se),t.enter(Ee),t.consume(je),t.exit(Ee),Fe):je===null||je===32||je===41||asciiControl(je)?r(je):(t.enter(xe),t.enter(Pe),t.enter(Ce),t.enter("chunkString",{contentType:"string"}),Ye(je))}function Fe(je){return je===62?(t.enter(Ee),t.consume(je),t.exit(Ee),t.exit(Se),t.exit(xe),e):(t.enter(Ce),t.enter("chunkString",{contentType:"string"}),Ie(je))}function Ie(je){return je===62?(t.exit("chunkString"),t.exit(Ce),Fe(je)):je===null||je===60||markdownLineEnding(je)?r(je):(t.consume(je),je===92?qe:Ie)}function qe(je){return je===60||je===62||je===92?(t.consume(je),Ie):Ie(je)}function Ye(je){return!Me&&(je===null||je===41||markdownLineEndingOrSpace(je))?(t.exit("chunkString"),t.exit(Ce),t.exit(Pe),t.exit(xe),e(je)):Me<Be&&je===40?(t.consume(je),Me++,Ye):je===41?(t.consume(je),Me--,Ye):je===null||je===32||je===40||asciiControl(je)?r(je):(t.consume(je),je===92?Xe:Ye)}function Xe(je){return je===40||je===41||je===92?(t.consume(je),Ye):Ye(je)}}function factoryLabel(t,e,r,xe,Se,Ee){const Pe=this;let Ce=0,Re;return Be;function Be(Ie){return t.enter(xe),t.enter(Se),t.consume(Ie),t.exit(Se),t.enter(Ee),Me}function Me(Ie){return Ce>999||Ie===null||Ie===91||Ie===93&&!Re||Ie===94&&!Ce&&"_hiddenFootnoteSupport"in Pe.parser.constructs?r(Ie):Ie===93?(t.exit(Ee),t.enter(Se),t.consume(Ie),t.exit(Se),t.exit(xe),e):markdownLineEnding(Ie)?(t.enter("lineEnding"),t.consume(Ie),t.exit("lineEnding"),Me):(t.enter("chunkString",{contentType:"string"}),Ve(Ie))}function Ve(Ie){return Ie===null||Ie===91||Ie===93||markdownLineEnding(Ie)||Ce++>999?(t.exit("chunkString"),Me(Ie)):(t.consume(Ie),Re||(Re=!markdownSpace(Ie)),Ie===92?Fe:Ve)}function Fe(Ie){return Ie===91||Ie===92||Ie===93?(t.consume(Ie),Ce++,Ve):Ve(Ie)}}function factoryTitle(t,e,r,xe,Se,Ee){let Pe;return Ce;function Ce(Fe){return Fe===34||Fe===39||Fe===40?(t.enter(xe),t.enter(Se),t.consume(Fe),t.exit(Se),Pe=Fe===40?41:Fe,Re):r(Fe)}function Re(Fe){return Fe===Pe?(t.enter(Se),t.consume(Fe),t.exit(Se),t.exit(xe),e):(t.enter(Ee),Be(Fe))}function Be(Fe){return Fe===Pe?(t.exit(Ee),Re(Pe)):Fe===null?r(Fe):markdownLineEnding(Fe)?(t.enter("lineEnding"),t.consume(Fe),t.exit("lineEnding"),factorySpace(t,Be,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),Me(Fe))}function Me(Fe){return Fe===Pe||Fe===null||markdownLineEnding(Fe)?(t.exit("chunkString"),Be(Fe)):(t.consume(Fe),Fe===92?Ve:Me)}function Ve(Fe){return Fe===Pe||Fe===92?(t.consume(Fe),Me):Me(Fe)}}function factoryWhitespace(t,e){let r;return xe;function xe(Se){return markdownLineEnding(Se)?(t.enter("lineEnding"),t.consume(Se),t.exit("lineEnding"),r=!0,xe):markdownSpace(Se)?factorySpace(t,xe,r?"linePrefix":"lineSuffix")(Se):e(Se)}}const definition={name:"definition",tokenize:tokenizeDefinition},titleBefore={partial:!0,tokenize:tokenizeTitleBefore};function tokenizeDefinition(t,e,r){const xe=this;let Se;return Ee;function Ee(Ie){return t.enter("definition"),Pe(Ie)}function Pe(Ie){return factoryLabel.call(xe,t,Ce,r,"definitionLabel","definitionLabelMarker","definitionLabelString")(Ie)}function Ce(Ie){return Se=normalizeIdentifier(xe.sliceSerialize(xe.events[xe.events.length-1][1]).slice(1,-1)),Ie===58?(t.enter("definitionMarker"),t.consume(Ie),t.exit("definitionMarker"),Re):r(Ie)}function Re(Ie){return markdownLineEndingOrSpace(Ie)?factoryWhitespace(t,Be)(Ie):Be(Ie)}function Be(Ie){return factoryDestination(t,Me,r,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(Ie)}function Me(Ie){return t.attempt(titleBefore,Ve,Ve)(Ie)}function Ve(Ie){return markdownSpace(Ie)?factorySpace(t,Fe,"whitespace")(Ie):Fe(Ie)}function Fe(Ie){return Ie===null||markdownLineEnding(Ie)?(t.exit("definition"),xe.parser.defined.push(Se),e(Ie)):r(Ie)}}function tokenizeTitleBefore(t,e,r){return xe;function xe(Ce){return markdownLineEndingOrSpace(Ce)?factoryWhitespace(t,Se)(Ce):r(Ce)}function Se(Ce){return factoryTitle(t,Ee,r,"definitionTitle","definitionTitleMarker","definitionTitleString")(Ce)}function Ee(Ce){return markdownSpace(Ce)?factorySpace(t,Pe,"whitespace")(Ce):Pe(Ce)}function Pe(Ce){return Ce===null||markdownLineEnding(Ce)?e(Ce):r(Ce)}}const hardBreakEscape={name:"hardBreakEscape",tokenize:tokenizeHardBreakEscape};function tokenizeHardBreakEscape(t,e,r){return xe;function xe(Ee){return t.enter("hardBreakEscape"),t.consume(Ee),Se}function Se(Ee){return markdownLineEnding(Ee)?(t.exit("hardBreakEscape"),e(Ee)):r(Ee)}}const headingAtx={name:"headingAtx",resolve:resolveHeadingAtx,tokenize:tokenizeHeadingAtx};function resolveHeadingAtx(t,e){let r=t.length-2,xe=3,Se,Ee;return t[xe][1].type==="whitespace"&&(xe+=2),r-2>xe&&t[r][1].type==="whitespace"&&(r-=2),t[r][1].type==="atxHeadingSequence"&&(xe===r-1||r-4>xe&&t[r-2][1].type==="whitespace")&&(r-=xe+1===r?2:4),r>xe&&(Se={type:"atxHeadingText",start:t[xe][1].start,end:t[r][1].end},Ee={type:"chunkText",start:t[xe][1].start,end:t[r][1].end,contentType:"text"},splice(t,xe,r-xe+1,[["enter",Se,e],["enter",Ee,e],["exit",Ee,e],["exit",Se,e]])),t}function tokenizeHeadingAtx(t,e,r){let xe=0;return Se;function Se(Me){return t.enter("atxHeading"),Ee(Me)}function Ee(Me){return t.enter("atxHeadingSequence"),Pe(Me)}function Pe(Me){return Me===35&&xe++<6?(t.consume(Me),Pe):Me===null||markdownLineEndingOrSpace(Me)?(t.exit("atxHeadingSequence"),Ce(Me)):r(Me)}function Ce(Me){return Me===35?(t.enter("atxHeadingSequence"),Re(Me)):Me===null||markdownLineEnding(Me)?(t.exit("atxHeading"),e(Me)):markdownSpace(Me)?factorySpace(t,Ce,"whitespace")(Me):(t.enter("atxHeadingText"),Be(Me))}function Re(Me){return Me===35?(t.consume(Me),Re):(t.exit("atxHeadingSequence"),Ce(Me))}function Be(Me){return Me===null||Me===35||markdownLineEndingOrSpace(Me)?(t.exit("atxHeadingText"),Ce(Me)):(t.consume(Me),Be)}}const htmlBlockNames=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],htmlRawNames=["pre","script","style","textarea"],htmlFlow={concrete:!0,name:"htmlFlow",resolveTo:resolveToHtmlFlow,tokenize:tokenizeHtmlFlow},blankLineBefore={partial:!0,tokenize:tokenizeBlankLineBefore},nonLazyContinuationStart={partial:!0,tokenize:tokenizeNonLazyContinuationStart};function resolveToHtmlFlow(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function tokenizeHtmlFlow(t,e,r){const xe=this;let Se,Ee,Pe,Ce,Re;return Be;function Be(Oe){return Me(Oe)}function Me(Oe){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(Oe),Ve}function Ve(Oe){return Oe===33?(t.consume(Oe),Fe):Oe===47?(t.consume(Oe),Ee=!0,Ye):Oe===63?(t.consume(Oe),Se=3,xe.interrupt?e:on):asciiAlpha(Oe)?(t.consume(Oe),Pe=String.fromCharCode(Oe),Xe):r(Oe)}function Fe(Oe){return Oe===45?(t.consume(Oe),Se=2,Ie):Oe===91?(t.consume(Oe),Se=5,Ce=0,qe):asciiAlpha(Oe)?(t.consume(Oe),Se=4,xe.interrupt?e:on):r(Oe)}function Ie(Oe){return Oe===45?(t.consume(Oe),xe.interrupt?e:on):r(Oe)}function qe(Oe){const $e="CDATA[";return Oe===$e.charCodeAt(Ce++)?(t.consume(Oe),Ce===$e.length?xe.interrupt?e:St:qe):r(Oe)}function Ye(Oe){return asciiAlpha(Oe)?(t.consume(Oe),Pe=String.fromCharCode(Oe),Xe):r(Oe)}function Xe(Oe){if(Oe===null||Oe===47||Oe===62||markdownLineEndingOrSpace(Oe)){const $e=Oe===47,rn=Pe.toLowerCase();return!$e&&!Ee&&htmlRawNames.includes(rn)?(Se=1,xe.interrupt?e(Oe):St(Oe)):htmlBlockNames.includes(Pe.toLowerCase())?(Se=6,$e?(t.consume(Oe),je):xe.interrupt?e(Oe):St(Oe)):(Se=7,xe.interrupt&&!xe.parser.lazy[xe.now().line]?r(Oe):Ee?Qe(Oe):sn(Oe))}return Oe===45||asciiAlphanumeric(Oe)?(t.consume(Oe),Pe+=String.fromCharCode(Oe),Xe):r(Oe)}function je(Oe){return Oe===62?(t.consume(Oe),xe.interrupt?e:St):r(Oe)}function Qe(Oe){return markdownSpace(Oe)?(t.consume(Oe),Qe):An(Oe)}function sn(Oe){return Oe===47?(t.consume(Oe),An):Oe===58||Oe===95||asciiAlpha(Oe)?(t.consume(Oe),cn):markdownSpace(Oe)?(t.consume(Oe),sn):An(Oe)}function cn(Oe){return Oe===45||Oe===46||Oe===58||Oe===95||asciiAlphanumeric(Oe)?(t.consume(Oe),cn):nn(Oe)}function nn(Oe){return Oe===61?(t.consume(Oe),an):markdownSpace(Oe)?(t.consume(Oe),nn):sn(Oe)}function an(Oe){return Oe===null||Oe===60||Oe===61||Oe===62||Oe===96?r(Oe):Oe===34||Oe===39?(t.consume(Oe),Re=Oe,Ze):markdownSpace(Oe)?(t.consume(Oe),an):tn(Oe)}function Ze(Oe){return Oe===Re?(t.consume(Oe),Re=null,We):Oe===null||markdownLineEnding(Oe)?r(Oe):(t.consume(Oe),Ze)}function tn(Oe){return Oe===null||Oe===34||Oe===39||Oe===47||Oe===60||Oe===61||Oe===62||Oe===96||markdownLineEndingOrSpace(Oe)?nn(Oe):(t.consume(Oe),tn)}function We(Oe){return Oe===47||Oe===62||markdownSpace(Oe)?sn(Oe):r(Oe)}function An(Oe){return Oe===62?(t.consume(Oe),Je):r(Oe)}function Je(Oe){return Oe===null||markdownLineEnding(Oe)?St(Oe):markdownSpace(Oe)?(t.consume(Oe),Je):r(Oe)}function St(Oe){return Oe===45&&Se===2?(t.consume(Oe),mn):Oe===60&&Se===1?(t.consume(Oe),Sn):Oe===62&&Se===4?(t.consume(Oe),xn):Oe===63&&Se===3?(t.consume(Oe),on):Oe===93&&Se===5?(t.consume(Oe),pn):markdownLineEnding(Oe)&&(Se===6||Se===7)?(t.exit("htmlFlowData"),t.check(blankLineBefore,Ge,hn)(Oe)):Oe===null||markdownLineEnding(Oe)?(t.exit("htmlFlowData"),hn(Oe)):(t.consume(Oe),St)}function hn(Oe){return t.check(nonLazyContinuationStart,_n,Ge)(Oe)}function _n(Oe){return t.enter("lineEnding"),t.consume(Oe),t.exit("lineEnding"),yn}function yn(Oe){return Oe===null||markdownLineEnding(Oe)?hn(Oe):(t.enter("htmlFlowData"),St(Oe))}function mn(Oe){return Oe===45?(t.consume(Oe),on):St(Oe)}function Sn(Oe){return Oe===47?(t.consume(Oe),Pe="",Pn):St(Oe)}function Pn(Oe){if(Oe===62){const $e=Pe.toLowerCase();return htmlRawNames.includes($e)?(t.consume(Oe),xn):St(Oe)}return asciiAlpha(Oe)&&Pe.length<8?(t.consume(Oe),Pe+=String.fromCharCode(Oe),Pn):St(Oe)}function pn(Oe){return Oe===93?(t.consume(Oe),on):St(Oe)}function on(Oe){return Oe===62?(t.consume(Oe),xn):Oe===45&&Se===2?(t.consume(Oe),on):St(Oe)}function xn(Oe){return Oe===null||markdownLineEnding(Oe)?(t.exit("htmlFlowData"),Ge(Oe)):(t.consume(Oe),xn)}function Ge(Oe){return t.exit("htmlFlow"),e(Oe)}}function tokenizeNonLazyContinuationStart(t,e,r){const xe=this;return Se;function Se(Pe){return markdownLineEnding(Pe)?(t.enter("lineEnding"),t.consume(Pe),t.exit("lineEnding"),Ee):r(Pe)}function Ee(Pe){return xe.parser.lazy[xe.now().line]?r(Pe):e(Pe)}}function tokenizeBlankLineBefore(t,e,r){return xe;function xe(Se){return t.enter("lineEnding"),t.consume(Se),t.exit("lineEnding"),t.attempt(blankLine,e,r)}}const htmlText={name:"htmlText",tokenize:tokenizeHtmlText};function tokenizeHtmlText(t,e,r){const xe=this;let Se,Ee,Pe;return Ce;function Ce(on){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(on),Re}function Re(on){return on===33?(t.consume(on),Be):on===47?(t.consume(on),nn):on===63?(t.consume(on),sn):asciiAlpha(on)?(t.consume(on),tn):r(on)}function Be(on){return on===45?(t.consume(on),Me):on===91?(t.consume(on),Ee=0,qe):asciiAlpha(on)?(t.consume(on),Qe):r(on)}function Me(on){return on===45?(t.consume(on),Ie):r(on)}function Ve(on){return on===null?r(on):on===45?(t.consume(on),Fe):markdownLineEnding(on)?(Pe=Ve,Sn(on)):(t.consume(on),Ve)}function Fe(on){return on===45?(t.consume(on),Ie):Ve(on)}function Ie(on){return on===62?mn(on):on===45?Fe(on):Ve(on)}function qe(on){const xn="CDATA[";return on===xn.charCodeAt(Ee++)?(t.consume(on),Ee===xn.length?Ye:qe):r(on)}function Ye(on){return on===null?r(on):on===93?(t.consume(on),Xe):markdownLineEnding(on)?(Pe=Ye,Sn(on)):(t.consume(on),Ye)}function Xe(on){return on===93?(t.consume(on),je):Ye(on)}function je(on){return on===62?mn(on):on===93?(t.consume(on),je):Ye(on)}function Qe(on){return on===null||on===62?mn(on):markdownLineEnding(on)?(Pe=Qe,Sn(on)):(t.consume(on),Qe)}function sn(on){return on===null?r(on):on===63?(t.consume(on),cn):markdownLineEnding(on)?(Pe=sn,Sn(on)):(t.consume(on),sn)}function cn(on){return on===62?mn(on):sn(on)}function nn(on){return asciiAlpha(on)?(t.consume(on),an):r(on)}function an(on){return on===45||asciiAlphanumeric(on)?(t.consume(on),an):Ze(on)}function Ze(on){return markdownLineEnding(on)?(Pe=Ze,Sn(on)):markdownSpace(on)?(t.consume(on),Ze):mn(on)}function tn(on){return on===45||asciiAlphanumeric(on)?(t.consume(on),tn):on===47||on===62||markdownLineEndingOrSpace(on)?We(on):r(on)}function We(on){return on===47?(t.consume(on),mn):on===58||on===95||asciiAlpha(on)?(t.consume(on),An):markdownLineEnding(on)?(Pe=We,Sn(on)):markdownSpace(on)?(t.consume(on),We):mn(on)}function An(on){return on===45||on===46||on===58||on===95||asciiAlphanumeric(on)?(t.consume(on),An):Je(on)}function Je(on){return on===61?(t.consume(on),St):markdownLineEnding(on)?(Pe=Je,Sn(on)):markdownSpace(on)?(t.consume(on),Je):We(on)}function St(on){return on===null||on===60||on===61||on===62||on===96?r(on):on===34||on===39?(t.consume(on),Se=on,hn):markdownLineEnding(on)?(Pe=St,Sn(on)):markdownSpace(on)?(t.consume(on),St):(t.consume(on),_n)}function hn(on){return on===Se?(t.consume(on),Se=void 0,yn):on===null?r(on):markdownLineEnding(on)?(Pe=hn,Sn(on)):(t.consume(on),hn)}function _n(on){return on===null||on===34||on===39||on===60||on===61||on===96?r(on):on===47||on===62||markdownLineEndingOrSpace(on)?We(on):(t.consume(on),_n)}function yn(on){return on===47||on===62||markdownLineEndingOrSpace(on)?We(on):r(on)}function mn(on){return on===62?(t.consume(on),t.exit("htmlTextData"),t.exit("htmlText"),e):r(on)}function Sn(on){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(on),t.exit("lineEnding"),Pn}function Pn(on){return markdownSpace(on)?factorySpace(t,pn,"linePrefix",xe.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(on):pn(on)}function pn(on){return t.enter("htmlTextData"),Pe(on)}}const labelEnd={name:"labelEnd",resolveAll:resolveAllLabelEnd,resolveTo:resolveToLabelEnd,tokenize:tokenizeLabelEnd},resourceConstruct={tokenize:tokenizeResource},referenceFullConstruct={tokenize:tokenizeReferenceFull},referenceCollapsedConstruct={tokenize:tokenizeReferenceCollapsed};function resolveAllLabelEnd(t){let e=-1;const r=[];for(;++e<t.length;){const xe=t[e][1];if(r.push(t[e]),xe.type==="labelImage"||xe.type==="labelLink"||xe.type==="labelEnd"){const Se=xe.type==="labelImage"?4:2;xe.type="data",e+=Se}}return t.length!==r.length&&splice(t,0,t.length,r),t}function resolveToLabelEnd(t,e){let r=t.length,xe=0,Se,Ee,Pe,Ce;for(;r--;)if(Se=t[r][1],Ee){if(Se.type==="link"||Se.type==="labelLink"&&Se._inactive)break;t[r][0]==="enter"&&Se.type==="labelLink"&&(Se._inactive=!0)}else if(Pe){if(t[r][0]==="enter"&&(Se.type==="labelImage"||Se.type==="labelLink")&&!Se._balanced&&(Ee=r,Se.type!=="labelLink")){xe=2;break}}else Se.type==="labelEnd"&&(Pe=r);const Re={type:t[Ee][1].type==="labelLink"?"link":"image",start:{...t[Ee][1].start},end:{...t[t.length-1][1].end}},Be={type:"label",start:{...t[Ee][1].start},end:{...t[Pe][1].end}},Me={type:"labelText",start:{...t[Ee+xe+2][1].end},end:{...t[Pe-2][1].start}};return Ce=[["enter",Re,e],["enter",Be,e]],Ce=push(Ce,t.slice(Ee+1,Ee+xe+3)),Ce=push(Ce,[["enter",Me,e]]),Ce=push(Ce,resolveAll(e.parser.constructs.insideSpan.null,t.slice(Ee+xe+4,Pe-3),e)),Ce=push(Ce,[["exit",Me,e],t[Pe-2],t[Pe-1],["exit",Be,e]]),Ce=push(Ce,t.slice(Pe+1)),Ce=push(Ce,[["exit",Re,e]]),splice(t,Ee,t.length,Ce),t}function tokenizeLabelEnd(t,e,r){const xe=this;let Se=xe.events.length,Ee,Pe;for(;Se--;)if((xe.events[Se][1].type==="labelImage"||xe.events[Se][1].type==="labelLink")&&!xe.events[Se][1]._balanced){Ee=xe.events[Se][1];break}return Ce;function Ce(Fe){return Ee?Ee._inactive?Ve(Fe):(Pe=xe.parser.defined.includes(normalizeIdentifier(xe.sliceSerialize({start:Ee.end,end:xe.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(Fe),t.exit("labelMarker"),t.exit("labelEnd"),Re):r(Fe)}function Re(Fe){return Fe===40?t.attempt(resourceConstruct,Me,Pe?Me:Ve)(Fe):Fe===91?t.attempt(referenceFullConstruct,Me,Pe?Be:Ve)(Fe):Pe?Me(Fe):Ve(Fe)}function Be(Fe){return t.attempt(referenceCollapsedConstruct,Me,Ve)(Fe)}function Me(Fe){return e(Fe)}function Ve(Fe){return Ee._balanced=!0,r(Fe)}}function tokenizeResource(t,e,r){return xe;function xe(Ve){return t.enter("resource"),t.enter("resourceMarker"),t.consume(Ve),t.exit("resourceMarker"),Se}function Se(Ve){return markdownLineEndingOrSpace(Ve)?factoryWhitespace(t,Ee)(Ve):Ee(Ve)}function Ee(Ve){return Ve===41?Me(Ve):factoryDestination(t,Pe,Ce,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(Ve)}function Pe(Ve){return markdownLineEndingOrSpace(Ve)?factoryWhitespace(t,Re)(Ve):Me(Ve)}function Ce(Ve){return r(Ve)}function Re(Ve){return Ve===34||Ve===39||Ve===40?factoryTitle(t,Be,r,"resourceTitle","resourceTitleMarker","resourceTitleString")(Ve):Me(Ve)}function Be(Ve){return markdownLineEndingOrSpace(Ve)?factoryWhitespace(t,Me)(Ve):Me(Ve)}function Me(Ve){return Ve===41?(t.enter("resourceMarker"),t.consume(Ve),t.exit("resourceMarker"),t.exit("resource"),e):r(Ve)}}function tokenizeReferenceFull(t,e,r){const xe=this;return Se;function Se(Ce){return factoryLabel.call(xe,t,Ee,Pe,"reference","referenceMarker","referenceString")(Ce)}function Ee(Ce){return xe.parser.defined.includes(normalizeIdentifier(xe.sliceSerialize(xe.events[xe.events.length-1][1]).slice(1,-1)))?e(Ce):r(Ce)}function Pe(Ce){return r(Ce)}}function tokenizeReferenceCollapsed(t,e,r){return xe;function xe(Ee){return t.enter("reference"),t.enter("referenceMarker"),t.consume(Ee),t.exit("referenceMarker"),Se}function Se(Ee){return Ee===93?(t.enter("referenceMarker"),t.consume(Ee),t.exit("referenceMarker"),t.exit("reference"),e):r(Ee)}}const labelStartImage={name:"labelStartImage",resolveAll:labelEnd.resolveAll,tokenize:tokenizeLabelStartImage};function tokenizeLabelStartImage(t,e,r){const xe=this;return Se;function Se(Ce){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(Ce),t.exit("labelImageMarker"),Ee}function Ee(Ce){return Ce===91?(t.enter("labelMarker"),t.consume(Ce),t.exit("labelMarker"),t.exit("labelImage"),Pe):r(Ce)}function Pe(Ce){return Ce===94&&"_hiddenFootnoteSupport"in xe.parser.constructs?r(Ce):e(Ce)}}const labelStartLink={name:"labelStartLink",resolveAll:labelEnd.resolveAll,tokenize:tokenizeLabelStartLink};function tokenizeLabelStartLink(t,e,r){const xe=this;return Se;function Se(Pe){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(Pe),t.exit("labelMarker"),t.exit("labelLink"),Ee}function Ee(Pe){return Pe===94&&"_hiddenFootnoteSupport"in xe.parser.constructs?r(Pe):e(Pe)}}const lineEnding={name:"lineEnding",tokenize:tokenizeLineEnding};function tokenizeLineEnding(t,e){return r;function r(xe){return t.enter("lineEnding"),t.consume(xe),t.exit("lineEnding"),factorySpace(t,e,"linePrefix")}}const thematicBreak$1={name:"thematicBreak",tokenize:tokenizeThematicBreak};function tokenizeThematicBreak(t,e,r){let xe=0,Se;return Ee;function Ee(Be){return t.enter("thematicBreak"),Pe(Be)}function Pe(Be){return Se=Be,Ce(Be)}function Ce(Be){return Be===Se?(t.enter("thematicBreakSequence"),Re(Be)):xe>=3&&(Be===null||markdownLineEnding(Be))?(t.exit("thematicBreak"),e(Be)):r(Be)}function Re(Be){return Be===Se?(t.consume(Be),xe++,Re):(t.exit("thematicBreakSequence"),markdownSpace(Be)?factorySpace(t,Ce,"whitespace")(Be):Ce(Be))}}const list$1={continuation:{tokenize:tokenizeListContinuation},exit:tokenizeListEnd,name:"list",tokenize:tokenizeListStart},listItemPrefixWhitespaceConstruct={partial:!0,tokenize:tokenizeListItemPrefixWhitespace},indentConstruct={partial:!0,tokenize:tokenizeIndent};function tokenizeListStart(t,e,r){const xe=this,Se=xe.events[xe.events.length-1];let Ee=Se&&Se[1].type==="linePrefix"?Se[2].sliceSerialize(Se[1],!0).length:0,Pe=0;return Ce;function Ce(Ie){const qe=xe.containerState.type||(Ie===42||Ie===43||Ie===45?"listUnordered":"listOrdered");if(qe==="listUnordered"?!xe.containerState.marker||Ie===xe.containerState.marker:asciiDigit(Ie)){if(xe.containerState.type||(xe.containerState.type=qe,t.enter(qe,{_container:!0})),qe==="listUnordered")return t.enter("listItemPrefix"),Ie===42||Ie===45?t.check(thematicBreak$1,r,Be)(Ie):Be(Ie);if(!xe.interrupt||Ie===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),Re(Ie)}return r(Ie)}function Re(Ie){return asciiDigit(Ie)&&++Pe<10?(t.consume(Ie),Re):(!xe.interrupt||Pe<2)&&(xe.containerState.marker?Ie===xe.containerState.marker:Ie===41||Ie===46)?(t.exit("listItemValue"),Be(Ie)):r(Ie)}function Be(Ie){return t.enter("listItemMarker"),t.consume(Ie),t.exit("listItemMarker"),xe.containerState.marker=xe.containerState.marker||Ie,t.check(blankLine,xe.interrupt?r:Me,t.attempt(listItemPrefixWhitespaceConstruct,Fe,Ve))}function Me(Ie){return xe.containerState.initialBlankLine=!0,Ee++,Fe(Ie)}function Ve(Ie){return markdownSpace(Ie)?(t.enter("listItemPrefixWhitespace"),t.consume(Ie),t.exit("listItemPrefixWhitespace"),Fe):r(Ie)}function Fe(Ie){return xe.containerState.size=Ee+xe.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(Ie)}}function tokenizeListContinuation(t,e,r){const xe=this;return xe.containerState._closeFlow=void 0,t.check(blankLine,Se,Ee);function Se(Ce){return xe.containerState.furtherBlankLines=xe.containerState.furtherBlankLines||xe.containerState.initialBlankLine,factorySpace(t,e,"listItemIndent",xe.containerState.size+1)(Ce)}function Ee(Ce){return xe.containerState.furtherBlankLines||!markdownSpace(Ce)?(xe.containerState.furtherBlankLines=void 0,xe.containerState.initialBlankLine=void 0,Pe(Ce)):(xe.containerState.furtherBlankLines=void 0,xe.containerState.initialBlankLine=void 0,t.attempt(indentConstruct,e,Pe)(Ce))}function Pe(Ce){return xe.containerState._closeFlow=!0,xe.interrupt=void 0,factorySpace(t,t.attempt(list$1,e,r),"linePrefix",xe.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Ce)}}function tokenizeIndent(t,e,r){const xe=this;return factorySpace(t,Se,"listItemIndent",xe.containerState.size+1);function Se(Ee){const Pe=xe.events[xe.events.length-1];return Pe&&Pe[1].type==="listItemIndent"&&Pe[2].sliceSerialize(Pe[1],!0).length===xe.containerState.size?e(Ee):r(Ee)}}function tokenizeListEnd(t){t.exit(this.containerState.type)}function tokenizeListItemPrefixWhitespace(t,e,r){const xe=this;return factorySpace(t,Se,"listItemPrefixWhitespace",xe.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function Se(Ee){const Pe=xe.events[xe.events.length-1];return!markdownSpace(Ee)&&Pe&&Pe[1].type==="listItemPrefixWhitespace"?e(Ee):r(Ee)}}const setextUnderline={name:"setextUnderline",resolveTo:resolveToSetextUnderline,tokenize:tokenizeSetextUnderline};function resolveToSetextUnderline(t,e){let r=t.length,xe,Se,Ee;for(;r--;)if(t[r][0]==="enter"){if(t[r][1].type==="content"){xe=r;break}t[r][1].type==="paragraph"&&(Se=r)}else t[r][1].type==="content"&&t.splice(r,1),!Ee&&t[r][1].type==="definition"&&(Ee=r);const Pe={type:"setextHeading",start:{...t[xe][1].start},end:{...t[t.length-1][1].end}};return t[Se][1].type="setextHeadingText",Ee?(t.splice(Se,0,["enter",Pe,e]),t.splice(Ee+1,0,["exit",t[xe][1],e]),t[xe][1].end={...t[Ee][1].end}):t[xe][1]=Pe,t.push(["exit",Pe,e]),t}function tokenizeSetextUnderline(t,e,r){const xe=this;let Se;return Ee;function Ee(Be){let Me=xe.events.length,Ve;for(;Me--;)if(xe.events[Me][1].type!=="lineEnding"&&xe.events[Me][1].type!=="linePrefix"&&xe.events[Me][1].type!=="content"){Ve=xe.events[Me][1].type==="paragraph";break}return!xe.parser.lazy[xe.now().line]&&(xe.interrupt||Ve)?(t.enter("setextHeadingLine"),Se=Be,Pe(Be)):r(Be)}function Pe(Be){return t.enter("setextHeadingLineSequence"),Ce(Be)}function Ce(Be){return Be===Se?(t.consume(Be),Ce):(t.exit("setextHeadingLineSequence"),markdownSpace(Be)?factorySpace(t,Re,"lineSuffix")(Be):Re(Be))}function Re(Be){return Be===null||markdownLineEnding(Be)?(t.exit("setextHeadingLine"),e(Be)):r(Be)}}const flow$1={tokenize:initializeFlow};function initializeFlow(t){const e=this,r=t.attempt(blankLine,xe,t.attempt(this.parser.constructs.flowInitial,Se,factorySpace(t,t.attempt(this.parser.constructs.flow,Se,t.attempt(content,Se)),"linePrefix")));return r;function xe(Ee){if(Ee===null){t.consume(Ee);return}return t.enter("lineEndingBlank"),t.consume(Ee),t.exit("lineEndingBlank"),e.currentConstruct=void 0,r}function Se(Ee){if(Ee===null){t.consume(Ee);return}return t.enter("lineEnding"),t.consume(Ee),t.exit("lineEnding"),e.currentConstruct=void 0,r}}const resolver={resolveAll:createResolver()},string$1=initializeFactory("string"),text$2=initializeFactory("text");function initializeFactory(t){return{resolveAll:createResolver(t==="text"?resolveAllLineSuffixes:void 0),tokenize:e};function e(r){const xe=this,Se=this.parser.constructs[t],Ee=r.attempt(Se,Pe,Ce);return Pe;function Pe(Me){return Be(Me)?Ee(Me):Ce(Me)}function Ce(Me){if(Me===null){r.consume(Me);return}return r.enter("data"),r.consume(Me),Re}function Re(Me){return Be(Me)?(r.exit("data"),Ee(Me)):(r.consume(Me),Re)}function Be(Me){if(Me===null)return!0;const Ve=Se[Me];let Fe=-1;if(Ve)for(;++Fe<Ve.length;){const Ie=Ve[Fe];if(!Ie.previous||Ie.previous.call(xe,xe.previous))return!0}return!1}}}function createResolver(t){return e;function e(r,xe){let Se=-1,Ee;for(;++Se<=r.length;)Ee===void 0?r[Se]&&r[Se][1].type==="data"&&(Ee=Se,Se++):(!r[Se]||r[Se][1].type!=="data")&&(Se!==Ee+2&&(r[Ee][1].end=r[Se-1][1].end,r.splice(Ee+2,Se-Ee-2),Se=Ee+2),Ee=void 0);return t?t(r,xe):r}}function resolveAllLineSuffixes(t,e){let r=0;for(;++r<=t.length;)if((r===t.length||t[r][1].type==="lineEnding")&&t[r-1][1].type==="data"){const xe=t[r-1][1],Se=e.sliceStream(xe);let Ee=Se.length,Pe=-1,Ce=0,Re;for(;Ee--;){const Be=Se[Ee];if(typeof Be=="string"){for(Pe=Be.length;Be.charCodeAt(Pe-1)===32;)Ce++,Pe--;if(Pe)break;Pe=-1}else if(Be===-2)Re=!0,Ce++;else if(Be!==-1){Ee++;break}}if(e._contentTypeTextTrailing&&r===t.length&&(Ce=0),Ce){const Be={type:r===t.length||Re||Ce<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:Ee?Pe:xe.start._bufferIndex+Pe,_index:xe.start._index+Ee,line:xe.end.line,column:xe.end.column-Ce,offset:xe.end.offset-Ce},end:{...xe.end}};xe.end={...Be.start},xe.start.offset===xe.end.offset?Object.assign(xe,Be):(t.splice(r,0,["enter",Be,e],["exit",Be,e]),r+=2)}r++}return t}const document$1={42:list$1,43:list$1,45:list$1,48:list$1,49:list$1,50:list$1,51:list$1,52:list$1,53:list$1,54:list$1,55:list$1,56:list$1,57:list$1,62:blockQuote},contentInitial={91:definition},flowInitial={[-2]:codeIndented,[-1]:codeIndented,32:codeIndented},flow={35:headingAtx,42:thematicBreak$1,45:[setextUnderline,thematicBreak$1],60:htmlFlow,61:setextUnderline,95:thematicBreak$1,96:codeFenced,126:codeFenced},string={38:characterReference,92:characterEscape},text$1={[-5]:lineEnding,[-4]:lineEnding,[-3]:lineEnding,33:labelStartImage,38:characterReference,42:attention,60:[autolink,htmlText],91:labelStartLink,92:[hardBreakEscape,characterEscape],93:labelEnd,95:attention,96:codeText},insideSpan={null:[attention,resolver]},attentionMarkers={null:[42,95]},disable={null:[]},defaultConstructs=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers,contentInitial,disable,document:document$1,flow,flowInitial,insideSpan,string,text:text$1},Symbol.toStringTag,{value:"Module"}));function createTokenizer(t,e,r){let xe={_bufferIndex:-1,_index:0,line:r&&r.line||1,column:r&&r.column||1,offset:r&&r.offset||0};const Se={},Ee=[];let Pe=[],Ce=[];const Re={attempt:Ze(nn),check:Ze(an),consume:Qe,enter:sn,exit:cn,interrupt:Ze(an,{interrupt:!0})},Be={code:null,containerState:{},defineSkip:Ye,events:[],now:qe,parser:t,previous:null,sliceSerialize:Fe,sliceStream:Ie,write:Ve};let Me=e.tokenize.call(Be,Re);return e.resolveAll&&Ee.push(e),Be;function Ve(Je){return Pe=push(Pe,Je),Xe(),Pe[Pe.length-1]!==null?[]:(tn(e,0),Be.events=resolveAll(Ee,Be.events,Be),Be.events)}function Fe(Je,St){return serializeChunks(Ie(Je),St)}function Ie(Je){return sliceChunks(Pe,Je)}function qe(){const{_bufferIndex:Je,_index:St,line:hn,column:_n,offset:yn}=xe;return{_bufferIndex:Je,_index:St,line:hn,column:_n,offset:yn}}function Ye(Je){Se[Je.line]=Je.column,An()}function Xe(){let Je;for(;xe._index<Pe.length;){const St=Pe[xe._index];if(typeof St=="string")for(Je=xe._index,xe._bufferIndex<0&&(xe._bufferIndex=0);xe._index===Je&&xe._bufferIndex<St.length;)je(St.charCodeAt(xe._bufferIndex));else je(St)}}function je(Je){Me=Me(Je)}function Qe(Je){markdownLineEnding(Je)?(xe.line++,xe.column=1,xe.offset+=Je===-3?2:1,An()):Je!==-1&&(xe.column++,xe.offset++),xe._bufferIndex<0?xe._index++:(xe._bufferIndex++,xe._bufferIndex===Pe[xe._index].length&&(xe._bufferIndex=-1,xe._index++)),Be.previous=Je}function sn(Je,St){const hn=St||{};return hn.type=Je,hn.start=qe(),Be.events.push(["enter",hn,Be]),Ce.push(hn),hn}function cn(Je){const St=Ce.pop();return St.end=qe(),Be.events.push(["exit",St,Be]),St}function nn(Je,St){tn(Je,St.from)}function an(Je,St){St.restore()}function Ze(Je,St){return hn;function hn(_n,yn,mn){let Sn,Pn,pn,on;return Array.isArray(_n)?Ge(_n):"tokenize"in _n?Ge([_n]):xn(_n);function xn(fn){return gn;function gn(vn){const wn=vn!==null&&fn[vn],On=vn!==null&&fn.null,jn=[...Array.isArray(wn)?wn:wn?[wn]:[],...Array.isArray(On)?On:On?[On]:[]];return Ge(jn)(vn)}}function Ge(fn){return Sn=fn,Pn=0,fn.length===0?mn:Oe(fn[Pn])}function Oe(fn){return gn;function gn(vn){return on=We(),pn=fn,fn.partial||(Be.currentConstruct=fn),fn.name&&Be.parser.constructs.disable.null.includes(fn.name)?rn():fn.tokenize.call(St?Object.assign(Object.create(Be),St):Be,Re,$e,rn)(vn)}}function $e(fn){return Je(pn,on),yn}function rn(fn){return on.restore(),++Pn<Sn.length?Oe(Sn[Pn]):mn}}}function tn(Je,St){Je.resolveAll&&!Ee.includes(Je)&&Ee.push(Je),Je.resolve&&splice(Be.events,St,Be.events.length-St,Je.resolve(Be.events.slice(St),Be)),Je.resolveTo&&(Be.events=Je.resolveTo(Be.events,Be))}function We(){const Je=qe(),St=Be.previous,hn=Be.currentConstruct,_n=Be.events.length,yn=Array.from(Ce);return{from:_n,restore:mn};function mn(){xe=Je,Be.previous=St,Be.currentConstruct=hn,Be.events.length=_n,Ce=yn,An()}}function An(){xe.line in Se&&xe.column<2&&(xe.column=Se[xe.line],xe.offset+=Se[xe.line]-1)}}function sliceChunks(t,e){const r=e.start._index,xe=e.start._bufferIndex,Se=e.end._index,Ee=e.end._bufferIndex;let Pe;if(r===Se)Pe=[t[r].slice(xe,Ee)];else{if(Pe=t.slice(r,Se),xe>-1){const Ce=Pe[0];typeof Ce=="string"?Pe[0]=Ce.slice(xe):Pe.shift()}Ee>0&&Pe.push(t[Se].slice(0,Ee))}return Pe}function serializeChunks(t,e){let r=-1;const xe=[];let Se;for(;++r<t.length;){const Ee=t[r];let Pe;if(typeof Ee=="string")Pe=Ee;else switch(Ee){case-5:{Pe="\r";break}case-4:{Pe=`
`;break}case-3:{Pe=`\r
`;break}case-2:{Pe=e?" ":"	";break}case-1:{if(!e&&Se)continue;Pe=" ";break}default:Pe=String.fromCharCode(Ee)}Se=Ee===-2,xe.push(Pe)}return xe.join("")}function parse(t){const xe={constructs:combineExtensions([defaultConstructs,...(t||{}).extensions||[]]),content:Se(content$1),defined:[],document:Se(document$2),flow:Se(flow$1),lazy:{},string:Se(string$1),text:Se(text$2)};return xe;function Se(Ee){return Pe;function Pe(Ce){return createTokenizer(xe,Ee,Ce)}}}function postprocess(t){for(;!subtokenize(t););return t}const search=/[\0\t\n\r]/g;function preprocess(){let t=1,e="",r=!0,xe;return Se;function Se(Ee,Pe,Ce){const Re=[];let Be,Me,Ve,Fe,Ie;for(Ee=e+(typeof Ee=="string"?Ee.toString():new TextDecoder(Pe||void 0).decode(Ee)),Ve=0,e="",r&&(Ee.charCodeAt(0)===65279&&Ve++,r=void 0);Ve<Ee.length;){if(search.lastIndex=Ve,Be=search.exec(Ee),Fe=Be&&Be.index!==void 0?Be.index:Ee.length,Ie=Ee.charCodeAt(Fe),!Be){e=Ee.slice(Ve);break}if(Ie===10&&Ve===Fe&&xe)Re.push(-3),xe=void 0;else switch(xe&&(Re.push(-5),xe=void 0),Ve<Fe&&(Re.push(Ee.slice(Ve,Fe)),t+=Fe-Ve),Ie){case 0:{Re.push(65533),t++;break}case 9:{for(Me=Math.ceil(t/4)*4,Re.push(-2);t++<Me;)Re.push(-1);break}case 10:{Re.push(-4),t=1;break}default:xe=!0,t=1}Ve=Fe+1}return Ce&&(xe&&Re.push(-5),e&&Re.push(e),Re.push(null)),Re}}const characterEscapeOrReference=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function decodeString(t){return t.replace(characterEscapeOrReference,decode)}function decode(t,e,r){if(e)return e;if(r.charCodeAt(0)===35){const Se=r.charCodeAt(1),Ee=Se===120||Se===88;return decodeNumericCharacterReference(r.slice(Ee?2:1),Ee?16:10)}return decodeNamedCharacterReference(r)||t}const own$2={}.hasOwnProperty;function fromMarkdown(t,e,r){return typeof e!="string"&&(r=e,e=void 0),compiler(r)(postprocess(parse(r).document().write(preprocess()(t,e,!0))))}function compiler(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:Ee(Mn),autolinkProtocol:We,autolinkEmail:We,atxHeading:Ee(qn),blockQuote:Ee(On),characterEscape:We,characterReference:We,codeFenced:Ee(jn),codeFencedFenceInfo:Pe,codeFencedFenceMeta:Pe,codeIndented:Ee(jn,Pe),codeText:Ee(Wn,Pe),codeTextData:We,data:We,codeFlowValue:We,definition:Ee(ti),definitionDestinationString:Pe,definitionLabelString:Pe,definitionTitleString:Pe,emphasis:Ee(si),hardBreakEscape:Ee(En),hardBreakTrailing:Ee(En),htmlFlow:Ee(Qn,Pe),htmlFlowData:We,htmlText:Ee(Qn,Pe),htmlTextData:We,image:Ee(Cn),label:Pe,link:Ee(Mn),listItem:Ee(zn),listItemValue:Fe,listOrdered:Ee(Un,Ve),listUnordered:Ee(Un),paragraph:Ee(ni),reference:Oe,referenceString:Pe,resourceDestinationString:Pe,resourceTitleString:Pe,setextHeading:Ee(qn),strong:Ee(yi),thematicBreak:Ee($n)},exit:{atxHeading:Re(),atxHeadingSequence:nn,autolink:Re(),autolinkEmail:wn,autolinkProtocol:vn,blockQuote:Re(),characterEscapeValue:An,characterReferenceMarkerHexadecimal:rn,characterReferenceMarkerNumeric:rn,characterReferenceValue:fn,characterReference:gn,codeFenced:Re(Xe),codeFencedFence:Ye,codeFencedFenceInfo:Ie,codeFencedFenceMeta:qe,codeFlowValue:An,codeIndented:Re(je),codeText:Re(yn),codeTextData:An,data:An,definition:Re(),definitionDestinationString:cn,definitionLabelString:Qe,definitionTitleString:sn,emphasis:Re(),hardBreakEscape:Re(St),hardBreakTrailing:Re(St),htmlFlow:Re(hn),htmlFlowData:An,htmlText:Re(_n),htmlTextData:An,image:Re(Sn),label:pn,labelText:Pn,lineEnding:Je,link:Re(mn),listItem:Re(),listOrdered:Re(),listUnordered:Re(),paragraph:Re(),referenceString:$e,resourceDestinationString:on,resourceTitleString:xn,resource:Ge,setextHeading:Re(tn),setextHeadingLineSequence:Ze,setextHeadingText:an,strong:Re(),thematicBreak:Re()}};configure(e,(t||{}).mdastExtensions||[]);const r={};return xe;function xe(Yn){let ai={type:"root",children:[]};const Di={stack:[ai],tokenStack:[],config:e,enter:Ce,exit:Be,buffer:Pe,resume:Me,data:r},ki=[];let Ji=-1;for(;++Ji<Yn.length;)if(Yn[Ji][1].type==="listOrdered"||Yn[Ji][1].type==="listUnordered")if(Yn[Ji][0]==="enter")ki.push(Ji);else{const Pi=ki.pop();Ji=Se(Yn,Pi,Ji)}for(Ji=-1;++Ji<Yn.length;){const Pi=e[Yn[Ji][0]];own$2.call(Pi,Yn[Ji][1].type)&&Pi[Yn[Ji][1].type].call(Object.assign({sliceSerialize:Yn[Ji][2].sliceSerialize},Di),Yn[Ji][1])}if(Di.tokenStack.length>0){const Pi=Di.tokenStack[Di.tokenStack.length-1];(Pi[1]||defaultOnError).call(Di,void 0,Pi[0])}for(ai.position={start:point(Yn.length>0?Yn[0][1].start:{line:1,column:1,offset:0}),end:point(Yn.length>0?Yn[Yn.length-2][1].end:{line:1,column:1,offset:0})},Ji=-1;++Ji<e.transforms.length;)ai=e.transforms[Ji](ai)||ai;return ai}function Se(Yn,ai,Di){let ki=ai-1,Ji=-1,Pi=!1,na,ea,Ki,oi;for(;++ki<=Di;){const Kn=Yn[ki];switch(Kn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Kn[0]==="enter"?Ji++:Ji--,oi=void 0;break}case"lineEndingBlank":{Kn[0]==="enter"&&(na&&!oi&&!Ji&&!Ki&&(Ki=ki),oi=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:oi=void 0}if(!Ji&&Kn[0]==="enter"&&Kn[1].type==="listItemPrefix"||Ji===-1&&Kn[0]==="exit"&&(Kn[1].type==="listUnordered"||Kn[1].type==="listOrdered")){if(na){let di=ki;for(ea=void 0;di--;){const Ui=Yn[di];if(Ui[1].type==="lineEnding"||Ui[1].type==="lineEndingBlank"){if(Ui[0]==="exit")continue;ea&&(Yn[ea][1].type="lineEndingBlank",Pi=!0),Ui[1].type="lineEnding",ea=di}else if(!(Ui[1].type==="linePrefix"||Ui[1].type==="blockQuotePrefix"||Ui[1].type==="blockQuotePrefixWhitespace"||Ui[1].type==="blockQuoteMarker"||Ui[1].type==="listItemIndent"))break}Ki&&(!ea||Ki<ea)&&(na._spread=!0),na.end=Object.assign({},ea?Yn[ea][1].start:Kn[1].end),Yn.splice(ea||ki,0,["exit",na,Kn[2]]),ki++,Di++}if(Kn[1].type==="listItemPrefix"){const di={type:"listItem",_spread:!1,start:Object.assign({},Kn[1].start),end:void 0};na=di,Yn.splice(ki,0,["enter",di,Kn[2]]),ki++,Di++,Ki=void 0,oi=!0}}}return Yn[ai][1]._spread=Pi,Di}function Ee(Yn,ai){return Di;function Di(ki){Ce.call(this,Yn(ki),ki),ai&&ai.call(this,ki)}}function Pe(){this.stack.push({type:"fragment",children:[]})}function Ce(Yn,ai,Di){this.stack[this.stack.length-1].children.push(Yn),this.stack.push(Yn),this.tokenStack.push([ai,Di||void 0]),Yn.position={start:point(ai.start),end:void 0}}function Re(Yn){return ai;function ai(Di){Yn&&Yn.call(this,Di),Be.call(this,Di)}}function Be(Yn,ai){const Di=this.stack.pop(),ki=this.tokenStack.pop();if(ki)ki[0].type!==Yn.type&&(ai?ai.call(this,Yn,ki[0]):(ki[1]||defaultOnError).call(this,Yn,ki[0]));else throw new Error("Cannot close `"+Yn.type+"` ("+stringifyPosition({start:Yn.start,end:Yn.end})+"): its not open");Di.position.end=point(Yn.end)}function Me(){return toString$1(this.stack.pop())}function Ve(){this.data.expectingFirstListItemValue=!0}function Fe(Yn){if(this.data.expectingFirstListItemValue){const ai=this.stack[this.stack.length-2];ai.start=Number.parseInt(this.sliceSerialize(Yn),10),this.data.expectingFirstListItemValue=void 0}}function Ie(){const Yn=this.resume(),ai=this.stack[this.stack.length-1];ai.lang=Yn}function qe(){const Yn=this.resume(),ai=this.stack[this.stack.length-1];ai.meta=Yn}function Ye(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function Xe(){const Yn=this.resume(),ai=this.stack[this.stack.length-1];ai.value=Yn.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function je(){const Yn=this.resume(),ai=this.stack[this.stack.length-1];ai.value=Yn.replace(/(\r?\n|\r)$/g,"")}function Qe(Yn){const ai=this.resume(),Di=this.stack[this.stack.length-1];Di.label=ai,Di.identifier=normalizeIdentifier(this.sliceSerialize(Yn)).toLowerCase()}function sn(){const Yn=this.resume(),ai=this.stack[this.stack.length-1];ai.title=Yn}function cn(){const Yn=this.resume(),ai=this.stack[this.stack.length-1];ai.url=Yn}function nn(Yn){const ai=this.stack[this.stack.length-1];if(!ai.depth){const Di=this.sliceSerialize(Yn).length;ai.depth=Di}}function an(){this.data.setextHeadingSlurpLineEnding=!0}function Ze(Yn){const ai=this.stack[this.stack.length-1];ai.depth=this.sliceSerialize(Yn).codePointAt(0)===61?1:2}function tn(){this.data.setextHeadingSlurpLineEnding=void 0}function We(Yn){const Di=this.stack[this.stack.length-1].children;let ki=Di[Di.length-1];(!ki||ki.type!=="text")&&(ki=pi(),ki.position={start:point(Yn.start),end:void 0},Di.push(ki)),this.stack.push(ki)}function An(Yn){const ai=this.stack.pop();ai.value+=this.sliceSerialize(Yn),ai.position.end=point(Yn.end)}function Je(Yn){const ai=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Di=ai.children[ai.children.length-1];Di.position.end=point(Yn.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(ai.type)&&(We.call(this,Yn),An.call(this,Yn))}function St(){this.data.atHardBreak=!0}function hn(){const Yn=this.resume(),ai=this.stack[this.stack.length-1];ai.value=Yn}function _n(){const Yn=this.resume(),ai=this.stack[this.stack.length-1];ai.value=Yn}function yn(){const Yn=this.resume(),ai=this.stack[this.stack.length-1];ai.value=Yn}function mn(){const Yn=this.stack[this.stack.length-1];if(this.data.inReference){const ai=this.data.referenceType||"shortcut";Yn.type+="Reference",Yn.referenceType=ai,delete Yn.url,delete Yn.title}else delete Yn.identifier,delete Yn.label;this.data.referenceType=void 0}function Sn(){const Yn=this.stack[this.stack.length-1];if(this.data.inReference){const ai=this.data.referenceType||"shortcut";Yn.type+="Reference",Yn.referenceType=ai,delete Yn.url,delete Yn.title}else delete Yn.identifier,delete Yn.label;this.data.referenceType=void 0}function Pn(Yn){const ai=this.sliceSerialize(Yn),Di=this.stack[this.stack.length-2];Di.label=decodeString(ai),Di.identifier=normalizeIdentifier(ai).toLowerCase()}function pn(){const Yn=this.stack[this.stack.length-1],ai=this.resume(),Di=this.stack[this.stack.length-1];if(this.data.inReference=!0,Di.type==="link"){const ki=Yn.children;Di.children=ki}else Di.alt=ai}function on(){const Yn=this.resume(),ai=this.stack[this.stack.length-1];ai.url=Yn}function xn(){const Yn=this.resume(),ai=this.stack[this.stack.length-1];ai.title=Yn}function Ge(){this.data.inReference=void 0}function Oe(){this.data.referenceType="collapsed"}function $e(Yn){const ai=this.resume(),Di=this.stack[this.stack.length-1];Di.label=ai,Di.identifier=normalizeIdentifier(this.sliceSerialize(Yn)).toLowerCase(),this.data.referenceType="full"}function rn(Yn){this.data.characterReferenceType=Yn.type}function fn(Yn){const ai=this.sliceSerialize(Yn),Di=this.data.characterReferenceType;let ki;Di?(ki=decodeNumericCharacterReference(ai,Di==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ki=decodeNamedCharacterReference(ai);const Ji=this.stack[this.stack.length-1];Ji.value+=ki}function gn(Yn){const ai=this.stack.pop();ai.position.end=point(Yn.end)}function vn(Yn){An.call(this,Yn);const ai=this.stack[this.stack.length-1];ai.url=this.sliceSerialize(Yn)}function wn(Yn){An.call(this,Yn);const ai=this.stack[this.stack.length-1];ai.url="mailto:"+this.sliceSerialize(Yn)}function On(){return{type:"blockquote",children:[]}}function jn(){return{type:"code",lang:null,meta:null,value:""}}function Wn(){return{type:"inlineCode",value:""}}function ti(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function si(){return{type:"emphasis",children:[]}}function qn(){return{type:"heading",depth:0,children:[]}}function En(){return{type:"break"}}function Qn(){return{type:"html",value:""}}function Cn(){return{type:"image",title:null,url:"",alt:null}}function Mn(){return{type:"link",title:null,url:"",children:[]}}function Un(Yn){return{type:"list",ordered:Yn.type==="listOrdered",start:null,spread:Yn._spread,children:[]}}function zn(Yn){return{type:"listItem",spread:Yn._spread,checked:null,children:[]}}function ni(){return{type:"paragraph",children:[]}}function yi(){return{type:"strong",children:[]}}function pi(){return{type:"text",value:""}}function $n(){return{type:"thematicBreak"}}}function point(t){return{line:t.line,column:t.column,offset:t.offset}}function configure(t,e){let r=-1;for(;++r<e.length;){const xe=e[r];Array.isArray(xe)?configure(t,xe):extension(t,xe)}}function extension(t,e){let r;for(r in e)if(own$2.call(e,r))switch(r){case"canContainEols":{const xe=e[r];xe&&t[r].push(...xe);break}case"transforms":{const xe=e[r];xe&&t[r].push(...xe);break}case"enter":case"exit":{const xe=e[r];xe&&Object.assign(t[r],xe);break}}}function defaultOnError(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+stringifyPosition({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+stringifyPosition({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+stringifyPosition({start:e.start,end:e.end})+") is still open")}function remarkParse(t){const e=this;e.parser=r;function r(xe){return fromMarkdown(xe,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function blockquote(t,e){const r={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,r),t.applyData(e,r)}function hardBreak(t,e){const r={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,r),[t.applyData(e,r),{type:"text",value:`
`}]}function code(t,e){const r=e.value?e.value+`
`:"",xe={},Se=e.lang?e.lang.split(/\s+/):[];Se.length>0&&(xe.className=["language-"+Se[0]]);let Ee={type:"element",tagName:"code",properties:xe,children:[{type:"text",value:r}]};return e.meta&&(Ee.data={meta:e.meta}),t.patch(e,Ee),Ee=t.applyData(e,Ee),Ee={type:"element",tagName:"pre",properties:{},children:[Ee]},t.patch(e,Ee),Ee}function strikethrough(t,e){const r={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function emphasis(t,e){const r={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function footnoteReference(t,e){const r=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",xe=String(e.identifier).toUpperCase(),Se=normalizeUri(xe.toLowerCase()),Ee=t.footnoteOrder.indexOf(xe);let Pe,Ce=t.footnoteCounts.get(xe);Ce===void 0?(Ce=0,t.footnoteOrder.push(xe),Pe=t.footnoteOrder.length):Pe=Ee+1,Ce+=1,t.footnoteCounts.set(xe,Ce);const Re={type:"element",tagName:"a",properties:{href:"#"+r+"fn-"+Se,id:r+"fnref-"+Se+(Ce>1?"-"+Ce:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(Pe)}]};t.patch(e,Re);const Be={type:"element",tagName:"sup",properties:{},children:[Re]};return t.patch(e,Be),t.applyData(e,Be)}function heading(t,e){const r={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function html(t,e){if(t.options.allowDangerousHtml){const r={type:"raw",value:e.value};return t.patch(e,r),t.applyData(e,r)}}function revert(t,e){const r=e.referenceType;let xe="]";if(r==="collapsed"?xe+="[]":r==="full"&&(xe+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+xe}];const Se=t.all(e),Ee=Se[0];Ee&&Ee.type==="text"?Ee.value="["+Ee.value:Se.unshift({type:"text",value:"["});const Pe=Se[Se.length-1];return Pe&&Pe.type==="text"?Pe.value+=xe:Se.push({type:"text",value:xe}),Se}function imageReference(t,e){const r=String(e.identifier).toUpperCase(),xe=t.definitionById.get(r);if(!xe)return revert(t,e);const Se={src:normalizeUri(xe.url||""),alt:e.alt};xe.title!==null&&xe.title!==void 0&&(Se.title=xe.title);const Ee={type:"element",tagName:"img",properties:Se,children:[]};return t.patch(e,Ee),t.applyData(e,Ee)}function image(t,e){const r={src:normalizeUri(e.url)};e.alt!==null&&e.alt!==void 0&&(r.alt=e.alt),e.title!==null&&e.title!==void 0&&(r.title=e.title);const xe={type:"element",tagName:"img",properties:r,children:[]};return t.patch(e,xe),t.applyData(e,xe)}function inlineCode(t,e){const r={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,r);const xe={type:"element",tagName:"code",properties:{},children:[r]};return t.patch(e,xe),t.applyData(e,xe)}function linkReference(t,e){const r=String(e.identifier).toUpperCase(),xe=t.definitionById.get(r);if(!xe)return revert(t,e);const Se={href:normalizeUri(xe.url||"")};xe.title!==null&&xe.title!==void 0&&(Se.title=xe.title);const Ee={type:"element",tagName:"a",properties:Se,children:t.all(e)};return t.patch(e,Ee),t.applyData(e,Ee)}function link(t,e){const r={href:normalizeUri(e.url)};e.title!==null&&e.title!==void 0&&(r.title=e.title);const xe={type:"element",tagName:"a",properties:r,children:t.all(e)};return t.patch(e,xe),t.applyData(e,xe)}function listItem(t,e,r){const xe=t.all(e),Se=r?listLoose(r):listItemLoose(e),Ee={},Pe=[];if(typeof e.checked=="boolean"){const Me=xe[0];let Ve;Me&&Me.type==="element"&&Me.tagName==="p"?Ve=Me:(Ve={type:"element",tagName:"p",properties:{},children:[]},xe.unshift(Ve)),Ve.children.length>0&&Ve.children.unshift({type:"text",value:" "}),Ve.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),Ee.className=["task-list-item"]}let Ce=-1;for(;++Ce<xe.length;){const Me=xe[Ce];(Se||Ce!==0||Me.type!=="element"||Me.tagName!=="p")&&Pe.push({type:"text",value:`
`}),Me.type==="element"&&Me.tagName==="p"&&!Se?Pe.push(...Me.children):Pe.push(Me)}const Re=xe[xe.length-1];Re&&(Se||Re.type!=="element"||Re.tagName!=="p")&&Pe.push({type:"text",value:`
`});const Be={type:"element",tagName:"li",properties:Ee,children:Pe};return t.patch(e,Be),t.applyData(e,Be)}function listLoose(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const r=t.children;let xe=-1;for(;!e&&++xe<r.length;)e=listItemLoose(r[xe])}return e}function listItemLoose(t){const e=t.spread;return e??t.children.length>1}function list(t,e){const r={},xe=t.all(e);let Se=-1;for(typeof e.start=="number"&&e.start!==1&&(r.start=e.start);++Se<xe.length;){const Pe=xe[Se];if(Pe.type==="element"&&Pe.tagName==="li"&&Pe.properties&&Array.isArray(Pe.properties.className)&&Pe.properties.className.includes("task-list-item")){r.className=["contains-task-list"];break}}const Ee={type:"element",tagName:e.ordered?"ol":"ul",properties:r,children:t.wrap(xe,!0)};return t.patch(e,Ee),t.applyData(e,Ee)}function paragraph(t,e){const r={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function root(t,e){const r={type:"root",children:t.wrap(t.all(e))};return t.patch(e,r),t.applyData(e,r)}function strong(t,e){const r={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function table(t,e){const r=t.all(e),xe=r.shift(),Se=[];if(xe){const Pe={type:"element",tagName:"thead",properties:{},children:t.wrap([xe],!0)};t.patch(e.children[0],Pe),Se.push(Pe)}if(r.length>0){const Pe={type:"element",tagName:"tbody",properties:{},children:t.wrap(r,!0)},Ce=pointStart(e.children[1]),Re=pointEnd(e.children[e.children.length-1]);Ce&&Re&&(Pe.position={start:Ce,end:Re}),Se.push(Pe)}const Ee={type:"element",tagName:"table",properties:{},children:t.wrap(Se,!0)};return t.patch(e,Ee),t.applyData(e,Ee)}function tableRow(t,e,r){const xe=r?r.children:void 0,Ee=(xe?xe.indexOf(e):1)===0?"th":"td",Pe=r&&r.type==="table"?r.align:void 0,Ce=Pe?Pe.length:e.children.length;let Re=-1;const Be=[];for(;++Re<Ce;){const Ve=e.children[Re],Fe={},Ie=Pe?Pe[Re]:void 0;Ie&&(Fe.align=Ie);let qe={type:"element",tagName:Ee,properties:Fe,children:[]};Ve&&(qe.children=t.all(Ve),t.patch(Ve,qe),qe=t.applyData(Ve,qe)),Be.push(qe)}const Me={type:"element",tagName:"tr",properties:{},children:t.wrap(Be,!0)};return t.patch(e,Me),t.applyData(e,Me)}function tableCell(t,e){const r={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}const tab=9,space=32;function trimLines(t){const e=String(t),r=/\r?\n|\r/g;let xe=r.exec(e),Se=0;const Ee=[];for(;xe;)Ee.push(trimLine(e.slice(Se,xe.index),Se>0,!0),xe[0]),Se=xe.index+xe[0].length,xe=r.exec(e);return Ee.push(trimLine(e.slice(Se),Se>0,!1)),Ee.join("")}function trimLine(t,e,r){let xe=0,Se=t.length;if(e){let Ee=t.codePointAt(xe);for(;Ee===tab||Ee===space;)xe++,Ee=t.codePointAt(xe)}if(r){let Ee=t.codePointAt(Se-1);for(;Ee===tab||Ee===space;)Se--,Ee=t.codePointAt(Se-1)}return Se>xe?t.slice(xe,Se):""}function text(t,e){const r={type:"text",value:trimLines(String(e.value))};return t.patch(e,r),t.applyData(e,r)}function thematicBreak(t,e){const r={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,r),t.applyData(e,r)}const handlers={blockquote,break:hardBreak,code,delete:strikethrough,emphasis,footnoteReference,heading,html,imageReference,image,inlineCode,linkReference,link,listItem,list,paragraph,root,strong,table,tableCell,tableRow,text,thematicBreak,toml:ignore,yaml:ignore,definition:ignore,footnoteDefinition:ignore};function ignore(){}const VOID=-1,PRIMITIVE=0,ARRAY=1,OBJECT=2,DATE=3,REGEXP=4,MAP=5,SET=6,ERROR=7,BIGINT=8,env=typeof self=="object"?self:globalThis,deserializer=(t,e)=>{const r=(Se,Ee)=>(t.set(Ee,Se),Se),xe=Se=>{if(t.has(Se))return t.get(Se);const[Ee,Pe]=e[Se];switch(Ee){case PRIMITIVE:case VOID:return r(Pe,Se);case ARRAY:{const Ce=r([],Se);for(const Re of Pe)Ce.push(xe(Re));return Ce}case OBJECT:{const Ce=r({},Se);for(const[Re,Be]of Pe)Ce[xe(Re)]=xe(Be);return Ce}case DATE:return r(new Date(Pe),Se);case REGEXP:{const{source:Ce,flags:Re}=Pe;return r(new RegExp(Ce,Re),Se)}case MAP:{const Ce=r(new Map,Se);for(const[Re,Be]of Pe)Ce.set(xe(Re),xe(Be));return Ce}case SET:{const Ce=r(new Set,Se);for(const Re of Pe)Ce.add(xe(Re));return Ce}case ERROR:{const{name:Ce,message:Re}=Pe;return r(new env[Ce](Re),Se)}case BIGINT:return r(BigInt(Pe),Se);case"BigInt":return r(Object(BigInt(Pe)),Se);case"ArrayBuffer":return r(new Uint8Array(Pe).buffer,Pe);case"DataView":{const{buffer:Ce}=new Uint8Array(Pe);return r(new DataView(Ce),Pe)}}return r(new env[Ee](Pe),Se)};return xe},deserialize=t=>deserializer(new Map,t)(0),EMPTY="",{toString}={},{keys}=Object,typeOf=t=>{const e=typeof t;if(e!=="object"||!t)return[PRIMITIVE,e];const r=toString.call(t).slice(8,-1);switch(r){case"Array":return[ARRAY,EMPTY];case"Object":return[OBJECT,EMPTY];case"Date":return[DATE,EMPTY];case"RegExp":return[REGEXP,EMPTY];case"Map":return[MAP,EMPTY];case"Set":return[SET,EMPTY];case"DataView":return[ARRAY,r]}return r.includes("Array")?[ARRAY,r]:r.includes("Error")?[ERROR,r]:[OBJECT,r]},shouldSkip=([t,e])=>t===PRIMITIVE&&(e==="function"||e==="symbol"),serializer=(t,e,r,xe)=>{const Se=(Pe,Ce)=>{const Re=xe.push(Pe)-1;return r.set(Ce,Re),Re},Ee=Pe=>{if(r.has(Pe))return r.get(Pe);let[Ce,Re]=typeOf(Pe);switch(Ce){case PRIMITIVE:{let Me=Pe;switch(Re){case"bigint":Ce=BIGINT,Me=Pe.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+Re);Me=null;break;case"undefined":return Se([VOID],Pe)}return Se([Ce,Me],Pe)}case ARRAY:{if(Re){let Fe=Pe;return Re==="DataView"?Fe=new Uint8Array(Pe.buffer):Re==="ArrayBuffer"&&(Fe=new Uint8Array(Pe)),Se([Re,[...Fe]],Pe)}const Me=[],Ve=Se([Ce,Me],Pe);for(const Fe of Pe)Me.push(Ee(Fe));return Ve}case OBJECT:{if(Re)switch(Re){case"BigInt":return Se([Re,Pe.toString()],Pe);case"Boolean":case"Number":case"String":return Se([Re,Pe.valueOf()],Pe)}if(e&&"toJSON"in Pe)return Ee(Pe.toJSON());const Me=[],Ve=Se([Ce,Me],Pe);for(const Fe of keys(Pe))(t||!shouldSkip(typeOf(Pe[Fe])))&&Me.push([Ee(Fe),Ee(Pe[Fe])]);return Ve}case DATE:return Se([Ce,Pe.toISOString()],Pe);case REGEXP:{const{source:Me,flags:Ve}=Pe;return Se([Ce,{source:Me,flags:Ve}],Pe)}case MAP:{const Me=[],Ve=Se([Ce,Me],Pe);for(const[Fe,Ie]of Pe)(t||!(shouldSkip(typeOf(Fe))||shouldSkip(typeOf(Ie))))&&Me.push([Ee(Fe),Ee(Ie)]);return Ve}case SET:{const Me=[],Ve=Se([Ce,Me],Pe);for(const Fe of Pe)(t||!shouldSkip(typeOf(Fe)))&&Me.push(Ee(Fe));return Ve}}const{message:Be}=Pe;return Se([Ce,{name:Re,message:Be}],Pe)};return Ee},serialize=(t,{json:e,lossy:r}={})=>{const xe=[];return serializer(!(e||r),!!e,new Map,xe)(t),xe},structuredClone$1=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?deserialize(serialize(t,e)):structuredClone(t):(t,e)=>deserialize(serialize(t,e));function defaultFootnoteBackContent(t,e){const r=[{type:"text",value:""}];return e>1&&r.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),r}function defaultFootnoteBackLabel(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function footer(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=t.options.footnoteBackContent||defaultFootnoteBackContent,xe=t.options.footnoteBackLabel||defaultFootnoteBackLabel,Se=t.options.footnoteLabel||"Footnotes",Ee=t.options.footnoteLabelTagName||"h2",Pe=t.options.footnoteLabelProperties||{className:["sr-only"]},Ce=[];let Re=-1;for(;++Re<t.footnoteOrder.length;){const Be=t.footnoteById.get(t.footnoteOrder[Re]);if(!Be)continue;const Me=t.all(Be),Ve=String(Be.identifier).toUpperCase(),Fe=normalizeUri(Ve.toLowerCase());let Ie=0;const qe=[],Ye=t.footnoteCounts.get(Ve);for(;Ye!==void 0&&++Ie<=Ye;){qe.length>0&&qe.push({type:"text",value:" "});let Qe=typeof r=="string"?r:r(Re,Ie);typeof Qe=="string"&&(Qe={type:"text",value:Qe}),qe.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+Fe+(Ie>1?"-"+Ie:""),dataFootnoteBackref:"",ariaLabel:typeof xe=="string"?xe:xe(Re,Ie),className:["data-footnote-backref"]},children:Array.isArray(Qe)?Qe:[Qe]})}const Xe=Me[Me.length-1];if(Xe&&Xe.type==="element"&&Xe.tagName==="p"){const Qe=Xe.children[Xe.children.length-1];Qe&&Qe.type==="text"?Qe.value+=" ":Xe.children.push({type:"text",value:" "}),Xe.children.push(...qe)}else Me.push(...qe);const je={type:"element",tagName:"li",properties:{id:e+"fn-"+Fe},children:t.wrap(Me,!0)};t.patch(Be,je),Ce.push(je)}if(Ce.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:Ee,properties:{...structuredClone$1(Pe),id:"footnote-label"},children:[{type:"text",value:Se}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(Ce,!0)},{type:"text",value:`
`}]}}const convert=(function(t){if(t==null)return ok;if(typeof t=="function")return castFactory(t);if(typeof t=="object")return Array.isArray(t)?anyFactory(t):propertiesFactory(t);if(typeof t=="string")return typeFactory(t);throw new Error("Expected function, string, or object as test")});function anyFactory(t){const e=[];let r=-1;for(;++r<t.length;)e[r]=convert(t[r]);return castFactory(xe);function xe(...Se){let Ee=-1;for(;++Ee<e.length;)if(e[Ee].apply(this,Se))return!0;return!1}}function propertiesFactory(t){const e=t;return castFactory(r);function r(xe){const Se=xe;let Ee;for(Ee in t)if(Se[Ee]!==e[Ee])return!1;return!0}}function typeFactory(t){return castFactory(e);function e(r){return r&&r.type===t}}function castFactory(t){return e;function e(r,xe,Se){return!!(looksLikeANode(r)&&t.call(this,r,typeof xe=="number"?xe:void 0,Se||void 0))}}function ok(){return!0}function looksLikeANode(t){return t!==null&&typeof t=="object"&&"type"in t}function color(t){return t}const empty=[],CONTINUE=!0,EXIT=!1,SKIP="skip";function visitParents(t,e,r,xe){let Se;typeof e=="function"&&typeof r!="function"?(xe=r,r=e):Se=e;const Ee=convert(Se),Pe=xe?-1:1;Ce(t,void 0,[])();function Ce(Re,Be,Me){const Ve=Re&&typeof Re=="object"?Re:{};if(typeof Ve.type=="string"){const Ie=typeof Ve.tagName=="string"?Ve.tagName:typeof Ve.name=="string"?Ve.name:void 0;Object.defineProperty(Fe,"name",{value:"node ("+(Re.type+(Ie?"<"+Ie+">":""))+")"})}return Fe;function Fe(){let Ie=empty,qe,Ye,Xe;if((!e||Ee(Re,Be,Me[Me.length-1]||void 0))&&(Ie=toResult(r(Re,Me)),Ie[0]===EXIT))return Ie;if("children"in Re&&Re.children){const je=Re;if(je.children&&Ie[0]!==SKIP)for(Ye=(xe?je.children.length:-1)+Pe,Xe=Me.concat(je);Ye>-1&&Ye<je.children.length;){const Qe=je.children[Ye];if(qe=Ce(Qe,Ye,Xe)(),qe[0]===EXIT)return qe;Ye=typeof qe[1]=="number"?qe[1]:Ye+Pe}}return Ie}}}function toResult(t){return Array.isArray(t)?t:typeof t=="number"?[CONTINUE,t]:t==null?empty:[t]}function visit(t,e,r,xe){let Se,Ee,Pe;typeof e=="function"&&typeof r!="function"?(Ee=void 0,Pe=e,Se=r):(Ee=e,Pe=r,Se=xe),visitParents(t,Ee,Ce,Se);function Ce(Re,Be){const Me=Be[Be.length-1],Ve=Me?Me.children.indexOf(Re):void 0;return Pe(Re,Ve,Me)}}const own$1={}.hasOwnProperty,emptyOptions={};function createState(t,e){const r=e||emptyOptions,xe=new Map,Se=new Map,Ee=new Map,Pe={...handlers,...r.handlers},Ce={all:Be,applyData,definitionById:xe,footnoteById:Se,footnoteCounts:Ee,footnoteOrder:[],handlers:Pe,one:Re,options:r,patch,wrap:wrap$1};return visit(t,function(Me){if(Me.type==="definition"||Me.type==="footnoteDefinition"){const Ve=Me.type==="definition"?xe:Se,Fe=String(Me.identifier).toUpperCase();Ve.has(Fe)||Ve.set(Fe,Me)}}),Ce;function Re(Me,Ve){const Fe=Me.type,Ie=Ce.handlers[Fe];if(own$1.call(Ce.handlers,Fe)&&Ie)return Ie(Ce,Me,Ve);if(Ce.options.passThrough&&Ce.options.passThrough.includes(Fe)){if("children"in Me){const{children:Ye,...Xe}=Me,je=structuredClone$1(Xe);return je.children=Ce.all(Me),je}return structuredClone$1(Me)}return(Ce.options.unknownHandler||defaultUnknownHandler)(Ce,Me,Ve)}function Be(Me){const Ve=[];if("children"in Me){const Fe=Me.children;let Ie=-1;for(;++Ie<Fe.length;){const qe=Ce.one(Fe[Ie],Me);if(qe){if(Ie&&Fe[Ie-1].type==="break"&&(!Array.isArray(qe)&&qe.type==="text"&&(qe.value=trimMarkdownSpaceStart(qe.value)),!Array.isArray(qe)&&qe.type==="element")){const Ye=qe.children[0];Ye&&Ye.type==="text"&&(Ye.value=trimMarkdownSpaceStart(Ye.value))}Array.isArray(qe)?Ve.push(...qe):Ve.push(qe)}}}return Ve}}function patch(t,e){t.position&&(e.position=position$1(t))}function applyData(t,e){let r=e;if(t&&t.data){const xe=t.data.hName,Se=t.data.hChildren,Ee=t.data.hProperties;if(typeof xe=="string")if(r.type==="element")r.tagName=xe;else{const Pe="children"in r?r.children:[r];r={type:"element",tagName:xe,properties:{},children:Pe}}r.type==="element"&&Ee&&Object.assign(r.properties,structuredClone$1(Ee)),"children"in r&&r.children&&Se!==null&&Se!==void 0&&(r.children=Se)}return r}function defaultUnknownHandler(t,e){const r=e.data||{},xe="value"in e&&!(own$1.call(r,"hProperties")||own$1.call(r,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,xe),t.applyData(e,xe)}function wrap$1(t,e){const r=[];let xe=-1;for(e&&r.push({type:"text",value:`
`});++xe<t.length;)xe&&r.push({type:"text",value:`
`}),r.push(t[xe]);return e&&t.length>0&&r.push({type:"text",value:`
`}),r}function trimMarkdownSpaceStart(t){let e=0,r=t.charCodeAt(e);for(;r===9||r===32;)e++,r=t.charCodeAt(e);return t.slice(e)}function toHast(t,e){const r=createState(t,e),xe=r.one(t,void 0),Se=footer(r),Ee=Array.isArray(xe)?{type:"root",children:xe}:xe||{type:"root",children:[]};return Se&&Ee.children.push({type:"text",value:`
`},Se),Ee}function remarkRehype(t,e){return t&&"run"in t?async function(r,xe){const Se=toHast(r,{file:xe,...e});await t.run(Se,xe)}:function(r,xe){return toHast(r,{file:xe,...t||e})}}function bail(t){if(t)throw t}var extend$1,hasRequiredExtend;function requireExtend(){if(hasRequiredExtend)return extend$1;hasRequiredExtend=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,r=Object.defineProperty,xe=Object.getOwnPropertyDescriptor,Se=function(Be){return typeof Array.isArray=="function"?Array.isArray(Be):e.call(Be)==="[object Array]"},Ee=function(Be){if(!Be||e.call(Be)!=="[object Object]")return!1;var Me=t.call(Be,"constructor"),Ve=Be.constructor&&Be.constructor.prototype&&t.call(Be.constructor.prototype,"isPrototypeOf");if(Be.constructor&&!Me&&!Ve)return!1;var Fe;for(Fe in Be);return typeof Fe>"u"||t.call(Be,Fe)},Pe=function(Be,Me){r&&Me.name==="__proto__"?r(Be,Me.name,{enumerable:!0,configurable:!0,value:Me.newValue,writable:!0}):Be[Me.name]=Me.newValue},Ce=function(Be,Me){if(Me==="__proto__")if(t.call(Be,Me)){if(xe)return xe(Be,Me).value}else return;return Be[Me]};return extend$1=function Re(){var Be,Me,Ve,Fe,Ie,qe,Ye=arguments[0],Xe=1,je=arguments.length,Qe=!1;for(typeof Ye=="boolean"&&(Qe=Ye,Ye=arguments[1]||{},Xe=2),(Ye==null||typeof Ye!="object"&&typeof Ye!="function")&&(Ye={});Xe<je;++Xe)if(Be=arguments[Xe],Be!=null)for(Me in Be)Ve=Ce(Ye,Me),Fe=Ce(Be,Me),Ye!==Fe&&(Qe&&Fe&&(Ee(Fe)||(Ie=Se(Fe)))?(Ie?(Ie=!1,qe=Ve&&Se(Ve)?Ve:[]):qe=Ve&&Ee(Ve)?Ve:{},Pe(Ye,{name:Me,newValue:Re(Qe,qe,Fe)})):typeof Fe<"u"&&Pe(Ye,{name:Me,newValue:Fe}));return Ye},extend$1}var extendExports=requireExtend();const extend=getDefaultExportFromCjs(extendExports);function isPlainObject(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function trough(){const t=[],e={run:r,use:xe};return e;function r(...Se){let Ee=-1;const Pe=Se.pop();if(typeof Pe!="function")throw new TypeError("Expected function as last argument, not "+Pe);Ce(null,...Se);function Ce(Re,...Be){const Me=t[++Ee];let Ve=-1;if(Re){Pe(Re);return}for(;++Ve<Se.length;)(Be[Ve]===null||Be[Ve]===void 0)&&(Be[Ve]=Se[Ve]);Se=Be,Me?wrap(Me,Ce)(...Be):Pe(null,...Be)}}function xe(Se){if(typeof Se!="function")throw new TypeError("Expected `middelware` to be a function, not "+Se);return t.push(Se),e}}function wrap(t,e){let r;return xe;function xe(...Pe){const Ce=t.length>Pe.length;let Re;Ce&&Pe.push(Se);try{Re=t.apply(this,Pe)}catch(Be){const Me=Be;if(Ce&&r)throw Me;return Se(Me)}Ce||(Re&&Re.then&&typeof Re.then=="function"?Re.then(Ee,Se):Re instanceof Error?Se(Re):Ee(Re))}function Se(Pe,...Ce){r||(r=!0,e(Pe,...Ce))}function Ee(Pe){Se(null,Pe)}}const minpath={basename,dirname,extname,join,sep:"/"};function basename(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');assertPath$1(t);let r=0,xe=-1,Se=t.length,Ee;if(e===void 0||e.length===0||e.length>t.length){for(;Se--;)if(t.codePointAt(Se)===47){if(Ee){r=Se+1;break}}else xe<0&&(Ee=!0,xe=Se+1);return xe<0?"":t.slice(r,xe)}if(e===t)return"";let Pe=-1,Ce=e.length-1;for(;Se--;)if(t.codePointAt(Se)===47){if(Ee){r=Se+1;break}}else Pe<0&&(Ee=!0,Pe=Se+1),Ce>-1&&(t.codePointAt(Se)===e.codePointAt(Ce--)?Ce<0&&(xe=Se):(Ce=-1,xe=Pe));return r===xe?xe=Pe:xe<0&&(xe=t.length),t.slice(r,xe)}function dirname(t){if(assertPath$1(t),t.length===0)return".";let e=-1,r=t.length,xe;for(;--r;)if(t.codePointAt(r)===47){if(xe){e=r;break}}else xe||(xe=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function extname(t){assertPath$1(t);let e=t.length,r=-1,xe=0,Se=-1,Ee=0,Pe;for(;e--;){const Ce=t.codePointAt(e);if(Ce===47){if(Pe){xe=e+1;break}continue}r<0&&(Pe=!0,r=e+1),Ce===46?Se<0?Se=e:Ee!==1&&(Ee=1):Se>-1&&(Ee=-1)}return Se<0||r<0||Ee===0||Ee===1&&Se===r-1&&Se===xe+1?"":t.slice(Se,r)}function join(...t){let e=-1,r;for(;++e<t.length;)assertPath$1(t[e]),t[e]&&(r=r===void 0?t[e]:r+"/"+t[e]);return r===void 0?".":normalize(r)}function normalize(t){assertPath$1(t);const e=t.codePointAt(0)===47;let r=normalizeString(t,!e);return r.length===0&&!e&&(r="."),r.length>0&&t.codePointAt(t.length-1)===47&&(r+="/"),e?"/"+r:r}function normalizeString(t,e){let r="",xe=0,Se=-1,Ee=0,Pe=-1,Ce,Re;for(;++Pe<=t.length;){if(Pe<t.length)Ce=t.codePointAt(Pe);else{if(Ce===47)break;Ce=47}if(Ce===47){if(!(Se===Pe-1||Ee===1))if(Se!==Pe-1&&Ee===2){if(r.length<2||xe!==2||r.codePointAt(r.length-1)!==46||r.codePointAt(r.length-2)!==46){if(r.length>2){if(Re=r.lastIndexOf("/"),Re!==r.length-1){Re<0?(r="",xe=0):(r=r.slice(0,Re),xe=r.length-1-r.lastIndexOf("/")),Se=Pe,Ee=0;continue}}else if(r.length>0){r="",xe=0,Se=Pe,Ee=0;continue}}e&&(r=r.length>0?r+"/..":"..",xe=2)}else r.length>0?r+="/"+t.slice(Se+1,Pe):r=t.slice(Se+1,Pe),xe=Pe-Se-1;Se=Pe,Ee=0}else Ce===46&&Ee>-1?Ee++:Ee=-1}return r}function assertPath$1(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const minproc={cwd};function cwd(){return"/"}function isUrl(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function urlToPath(t){if(typeof t=="string")t=new URL(t);else if(!isUrl(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return getPathFromURLPosix(t)}function getPathFromURLPosix(t){if(t.hostname!==""){const xe=new TypeError('File URL host must be "localhost" or empty on darwin');throw xe.code="ERR_INVALID_FILE_URL_HOST",xe}const e=t.pathname;let r=-1;for(;++r<e.length;)if(e.codePointAt(r)===37&&e.codePointAt(r+1)===50){const xe=e.codePointAt(r+2);if(xe===70||xe===102){const Se=new TypeError("File URL path must not include encoded / characters");throw Se.code="ERR_INVALID_FILE_URL_PATH",Se}}return decodeURIComponent(e)}const order=["history","path","basename","stem","extname","dirname"];class VFile{constructor(e){let r;e?isUrl(e)?r={path:e}:typeof e=="string"||isUint8Array$1(e)?r={value:e}:r=e:r={},this.cwd="cwd"in r?"":minproc.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let xe=-1;for(;++xe<order.length;){const Ee=order[xe];Ee in r&&r[Ee]!==void 0&&r[Ee]!==null&&(this[Ee]=Ee==="history"?[...r[Ee]]:r[Ee])}let Se;for(Se in r)order.includes(Se)||(this[Se]=r[Se])}get basename(){return typeof this.path=="string"?minpath.basename(this.path):void 0}set basename(e){assertNonEmpty(e,"basename"),assertPart(e,"basename"),this.path=minpath.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?minpath.dirname(this.path):void 0}set dirname(e){assertPath(this.basename,"dirname"),this.path=minpath.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?minpath.extname(this.path):void 0}set extname(e){if(assertPart(e,"extname"),assertPath(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=minpath.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){isUrl(e)&&(e=urlToPath(e)),assertNonEmpty(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?minpath.basename(this.path,this.extname):void 0}set stem(e){assertNonEmpty(e,"stem"),assertPart(e,"stem"),this.path=minpath.join(this.dirname||"",e+(this.extname||""))}fail(e,r,xe){const Se=this.message(e,r,xe);throw Se.fatal=!0,Se}info(e,r,xe){const Se=this.message(e,r,xe);return Se.fatal=void 0,Se}message(e,r,xe){const Se=new VFileMessage(e,r,xe);return this.path&&(Se.name=this.path+":"+Se.name,Se.file=this.path),Se.fatal=!1,this.messages.push(Se),Se}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function assertPart(t,e){if(t&&t.includes(minpath.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+minpath.sep+"`")}function assertNonEmpty(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function assertPath(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function isUint8Array$1(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const CallableInstance=(function(t){const xe=this.constructor.prototype,Se=xe[t],Ee=function(){return Se.apply(Ee,arguments)};return Object.setPrototypeOf(Ee,xe),Ee}),own={}.hasOwnProperty;class Processor extends CallableInstance{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=trough()}copy(){const e=new Processor;let r=-1;for(;++r<this.attachers.length;){const xe=this.attachers[r];e.use(...xe)}return e.data(extend(!0,{},this.namespace)),e}data(e,r){return typeof e=="string"?arguments.length===2?(assertUnfrozen("data",this.frozen),this.namespace[e]=r,this):own.call(this.namespace,e)&&this.namespace[e]||void 0:e?(assertUnfrozen("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[r,...xe]=this.attachers[this.freezeIndex];if(xe[0]===!1)continue;xe[0]===!0&&(xe[0]=void 0);const Se=r.call(e,...xe);typeof Se=="function"&&this.transformers.use(Se)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const r=vfile(e),xe=this.parser||this.Parser;return assertParser("parse",xe),xe(String(r),r)}process(e,r){const xe=this;return this.freeze(),assertParser("process",this.parser||this.Parser),assertCompiler("process",this.compiler||this.Compiler),r?Se(void 0,r):new Promise(Se);function Se(Ee,Pe){const Ce=vfile(e),Re=xe.parse(Ce);xe.run(Re,Ce,function(Me,Ve,Fe){if(Me||!Ve||!Fe)return Be(Me);const Ie=Ve,qe=xe.stringify(Ie,Fe);looksLikeAValue(qe)?Fe.value=qe:Fe.result=qe,Be(Me,Fe)});function Be(Me,Ve){Me||!Ve?Pe(Me):Ee?Ee(Ve):r(void 0,Ve)}}}processSync(e){let r=!1,xe;return this.freeze(),assertParser("processSync",this.parser||this.Parser),assertCompiler("processSync",this.compiler||this.Compiler),this.process(e,Se),assertDone("processSync","process",r),xe;function Se(Ee,Pe){r=!0,bail(Ee),xe=Pe}}run(e,r,xe){assertNode(e),this.freeze();const Se=this.transformers;return!xe&&typeof r=="function"&&(xe=r,r=void 0),xe?Ee(void 0,xe):new Promise(Ee);function Ee(Pe,Ce){const Re=vfile(r);Se.run(e,Re,Be);function Be(Me,Ve,Fe){const Ie=Ve||e;Me?Ce(Me):Pe?Pe(Ie):xe(void 0,Ie,Fe)}}}runSync(e,r){let xe=!1,Se;return this.run(e,r,Ee),assertDone("runSync","run",xe),Se;function Ee(Pe,Ce){bail(Pe),Se=Ce,xe=!0}}stringify(e,r){this.freeze();const xe=vfile(r),Se=this.compiler||this.Compiler;return assertCompiler("stringify",Se),assertNode(e),Se(e,xe)}use(e,...r){const xe=this.attachers,Se=this.namespace;if(assertUnfrozen("use",this.frozen),e!=null)if(typeof e=="function")Re(e,r);else if(typeof e=="object")Array.isArray(e)?Ce(e):Pe(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function Ee(Be){if(typeof Be=="function")Re(Be,[]);else if(typeof Be=="object")if(Array.isArray(Be)){const[Me,...Ve]=Be;Re(Me,Ve)}else Pe(Be);else throw new TypeError("Expected usable value, not `"+Be+"`")}function Pe(Be){if(!("plugins"in Be)&&!("settings"in Be))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");Ce(Be.plugins),Be.settings&&(Se.settings=extend(!0,Se.settings,Be.settings))}function Ce(Be){let Me=-1;if(Be!=null)if(Array.isArray(Be))for(;++Me<Be.length;){const Ve=Be[Me];Ee(Ve)}else throw new TypeError("Expected a list of plugins, not `"+Be+"`")}function Re(Be,Me){let Ve=-1,Fe=-1;for(;++Ve<xe.length;)if(xe[Ve][0]===Be){Fe=Ve;break}if(Fe===-1)xe.push([Be,...Me]);else if(Me.length>0){let[Ie,...qe]=Me;const Ye=xe[Fe][1];isPlainObject(Ye)&&isPlainObject(Ie)&&(Ie=extend(!0,Ye,Ie)),xe[Fe]=[Be,Ie,...qe]}}}}const unified=new Processor().freeze();function assertParser(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function assertCompiler(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function assertUnfrozen(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function assertNode(t){if(!isPlainObject(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function assertDone(t,e,r){if(!r)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function vfile(t){return looksLikeAVFile(t)?t:new VFile(t)}function looksLikeAVFile(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function looksLikeAValue(t){return typeof t=="string"||isUint8Array(t)}function isUint8Array(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const changelog="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",emptyPlugins=[],emptyRemarkRehypeOptions={allowDangerousHtml:!0},safeProtocol=/^(https?|ircs?|mailto|xmpp)$/i,deprecations=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Markdown(t){const e=createProcessor(t),r=createFile(t);return post(e.runSync(e.parse(r),r),t)}function createProcessor(t){const e=t.rehypePlugins||emptyPlugins,r=t.remarkPlugins||emptyPlugins,xe=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...emptyRemarkRehypeOptions}:emptyRemarkRehypeOptions;return unified().use(remarkParse).use(r).use(remarkRehype,xe).use(e)}function createFile(t){const e=t.children||"",r=new VFile;return typeof e=="string"&&(r.value=e),r}function post(t,e){const r=e.allowedElements,xe=e.allowElement,Se=e.components,Ee=e.disallowedElements,Pe=e.skipHtml,Ce=e.unwrapDisallowed,Re=e.urlTransform||defaultUrlTransform;for(const Me of deprecations)Object.hasOwn(e,Me.from)&&(""+Me.from+(Me.to?"use `"+Me.to+"` instead":"remove it")+changelog+Me.id,void 0);return e.className&&(t={type:"element",tagName:"div",properties:{className:e.className},children:t.type==="root"?t.children:[t]}),visit(t,Be),toJsxRuntime(t,{Fragment:jsxRuntimeExports.Fragment,components:Se,ignoreInvalidStyle:!0,jsx:jsxRuntimeExports.jsx,jsxs:jsxRuntimeExports.jsxs,passKeys:!0,passNode:!0});function Be(Me,Ve,Fe){if(Me.type==="raw"&&Fe&&typeof Ve=="number")return Pe?Fe.children.splice(Ve,1):Fe.children[Ve]={type:"text",value:Me.value},Ve;if(Me.type==="element"){let Ie;for(Ie in urlAttributes)if(Object.hasOwn(urlAttributes,Ie)&&Object.hasOwn(Me.properties,Ie)){const qe=Me.properties[Ie],Ye=urlAttributes[Ie];(Ye===null||Ye.includes(Me.tagName))&&(Me.properties[Ie]=Re(String(qe||""),Ie,Me))}}if(Me.type==="element"){let Ie=r?!r.includes(Me.tagName):Ee?Ee.includes(Me.tagName):!1;if(!Ie&&xe&&typeof Ve=="number"&&(Ie=!xe(Me,Ve,Fe)),Ie&&Fe&&typeof Ve=="number")return Ce&&Me.children?Fe.children.splice(Ve,1,...Me.children):Fe.children.splice(Ve,1),Ve}}}function defaultUrlTransform(t){const e=t.indexOf(":"),r=t.indexOf("?"),xe=t.indexOf("#"),Se=t.indexOf("/");return e===-1||Se!==-1&&e>Se||r!==-1&&e>r||xe!==-1&&e>xe||safeProtocol.test(t.slice(0,e))?t:""}const MODE_COLORS={content:"#10b981",communicative:"#f59e0b",organisation:"#0ea5e9",language:"#f43f5e",general:"#8b5cf6",select:"#ffffff",stamper:"#be123c"},MODE_LABELS={content:"C",communicative:"CA",organisation:"O",language:"L",general:"G",select:"S",stamper:"ST"},GradingScreen=({sessionId:t,sessionName:e,graderName:r,level:xe,part:Se,taskDescription:Ee,students:Pe,currentStudentIndex:Ce,currentImageIndex:Re,currentStudent:Be,activeMode:Me,setActiveMode:Ve,autoSaveStatus:Fe,showStudentMenu:Ie,setShowStudentMenu:qe,tempName:Ye,setTempName:Xe,enhanceMode:je,setEnhanceMode:Qe,processedCache:sn,isProcessingImg:cn,isTaskOpen:nn,setIsTaskOpen:an,showExportMenu:Ze,setShowExportMenu:tn,isExporting:We,currentStudentTime:An,changeStudent:Je,handleUniversalNext:St,handleUniversalPrev:hn,handleManualSave:_n,confirmExit:yn,finishSession:mn,saveStudentName:Sn,mergeNextStudent:Pn,mergeWithPrevious:pn,splitStudentAtPage:on,updateAnnotation:xn,deleteAnnotation:Ge,deleteAnnotations:Oe,updateScore:$e,updateJustification:rn,performUndo:fn,performRedo:gn,currentHistory:vn,handleExportCurrentPage:wn,handleExportCurrentAnnotations:On,handleExportAll:jn,handleExportAllAnnotations:Wn,handleDownloadGradebook:ti,handlePrintBatchFeedback:si,setStudents:qn,recordHistory:En,historyRefs:Qn,setHistory:Cn,addAnnotation:Mn,handleLogoClick:Un})=>{const zn=useAnnotationCanvas({students:Pe,currentStudentIndex:Ce,currentImageIndex:Re,setStudents:qn,activeMode:Me,recordHistory:En,historyRefs:Qn,step:"grading",sessionId:t,setHistory:Cn,addAnnotation:Mn,graderName:r}),[ni,yi]=reactExports.useState(!1),[pi,$n]=reactExports.useState(""),Yn=reactExports.useRef(null);reactExports.useEffect(()=>{const Ki=oi=>{const Kn=oi.target;Kn.tagName==="INPUT"||Kn.tagName==="TEXTAREA"||Kn.isContentEditable||(oi.key==="F1"&&(oi.preventDefault(),Ve(Me==="content"?"general":"content")),oi.key==="F2"&&(oi.preventDefault(),Ve(Me==="communicative"?"general":"communicative")),oi.key==="F3"&&(oi.preventDefault(),Ve(Me==="organisation"?"general":"organisation")),oi.key==="F4"&&(oi.preventDefault(),Ve(Me==="language"?"general":"language")),(oi.ctrlKey||oi.metaKey)&&oi.key.toLowerCase()==="m"&&(oi.preventDefault(),Ve(Me==="select"?"general":"select")),oi.key.toLowerCase()==="s"&&!oi.ctrlKey&&!oi.metaKey&&(oi.preventDefault(),Ve(Me==="stamper"?"general":"stamper")),oi.key==="Escape"&&(Me==="select"||Me==="stamper")&&(oi.preventDefault(),Ve("general"),zn.setSelectedIds([])),(oi.ctrlKey||oi.metaKey)&&oi.key.toLowerCase()==="z"&&(oi.preventDefault(),oi.shiftKey?gn():fn()),(oi.ctrlKey||oi.metaKey)&&oi.key.toLowerCase()==="y"&&(oi.preventDefault(),gn()),oi.key==="Delete"&&(Me==="select"&&zn.selectedIds.length>0?(oi.preventDefault(),Oe(zn.selectedIds),zn.setSelectedIds([])):zn.editingAnnotationId&&(oi.preventDefault(),Ge(zn.editingAnnotationId))))};return window.addEventListener("keydown",Ki),()=>window.removeEventListener("keydown",Ki)},[zn.editingAnnotationId,zn.selectedIds,Me,Ge,Oe,fn,gn,Ve]),reactExports.useEffect(()=>{ni&&Yn.current&&(Yn.current.focus(),Yn.current.select())},[ni]);const ai=()=>{$n((Ce+1).toString()),yi(!0)},Di=Ki=>{Ki==null||Ki.preventDefault();const oi=parseInt(pi,10);if(!isNaN(oi)&&oi>=1&&oi<=Pe.length){const di=oi-1-Ce;Je(di,0)}yi(!1)},ki=Be?Be.scores.content+Be.scores.communicative+Be.scores.organisation+Be.scores.language:0,Ji=je&&sn[`${t}-${Be==null?void 0:Be.id}-${Re}`]?sn[`${t}-${Be==null?void 0:Be.id}-${Re}`]:Be==null?void 0:Be.images[Re],Pi=Me!=="select"&&Me!=="general"&&Me!=="stamper"?RUBRICS[Se][Me]:[],na=MODE_COLORS[Me],ea=Me!=="general"&&Me!=="select"&&Me!=="stamper";return jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-screen bg-zinc-950 overflow-hidden text-zinc-200 font-sans selection:bg-rose-500/30",children:[jsxRuntimeExports.jsxs("header",{className:"h-16 bg-zinc-950/80 backdrop-blur-md border-b border-white/5 flex items-center justify-between px-6 select-none shrink-0 z-40 relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 cursor-pointer group opacity-90 hover:opacity-100 transition-opacity",onClick:Un,children:[jsxRuntimeExports.jsx(Logo,{size:24,className:"text-rose-600 group-hover:scale-110 transition-transform"}),jsxRuntimeExports.jsx("span",{className:"font-bold text-sm tracking-tight text-white hidden md:block",children:"Rambutan"})]}),jsxRuntimeExports.jsx("div",{className:"h-6 w-px bg-zinc-800 hidden md:block"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col -space-y-0.5 max-w-[150px] sm:max-w-[200px] md:max-w-[300px]",children:[jsxRuntimeExports.jsx("span",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-widest truncate",children:e}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1.5 overflow-hidden",children:[jsxRuntimeExports.jsx("span",{className:"text-[11px] font-bold text-zinc-400 whitespace-nowrap",children:xe.split("(")[0].trim()}),jsxRuntimeExports.jsx("div",{className:"w-1 h-1 rounded-full bg-zinc-700 shrink-0"}),jsxRuntimeExports.jsxs("span",{className:"text-[11px] font-bold text-zinc-400 whitespace-nowrap",children:["Part ",Se]})]})]}),jsxRuntimeExports.jsx("div",{className:"h-6 w-px bg-zinc-800 hidden lg:block"}),jsxRuntimeExports.jsxs("div",{className:"relative group/name",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:"text",value:Ye,onChange:Ki=>Xe(Ki.target.value),onFocus:Ki=>{Ki.target.select()},onBlur:()=>{Ye.trim()?Sn(Ye):Xe((Be==null?void 0:Be.name)||"")},onKeyDown:Ki=>{Ki.stopPropagation(),Ki.key==="Enter"&&Ki.currentTarget.blur()},className:"bg-transparent border border-transparent hover:border-zinc-800 focus:border-zinc-700 rounded-lg px-2 py-1 text-sm font-bold text-zinc-100 w-[150px] sm:w-[200px] truncate focus:outline-none focus:bg-zinc-900 transition-all placeholder-zinc-700",spellCheck:!1,placeholder:"Student Name"}),jsxRuntimeExports.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none opacity-0 group-hover/name:opacity-100 transition-opacity",children:jsxRuntimeExports.jsx(GripVertical,{size:12,className:"text-zinc-600"})})]}),jsxRuntimeExports.jsx("button",{onClick:()=>qe(!Ie),className:`p-1.5 rounded-lg transition-all ${Ie?"bg-zinc-800 text-white":"text-zinc-500 hover:text-white hover:bg-zinc-800"}`,children:jsxRuntimeExports.jsx(EllipsisVertical,{size:16})})]}),Ie&&jsxRuntimeExports.jsxs("div",{className:"absolute top-full left-0 mt-2 w-64 bg-zinc-900/95 backdrop-blur-xl border border-white/10 rounded-xl shadow-2xl z-50 animate-fade-in-up flex flex-col overflow-hidden p-1",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>{pn(),qe(!1)},disabled:Ce===0,className:"w-full text-left px-3 py-2.5 text-xs font-medium text-zinc-300 hover:text-white hover:bg-white/5 rounded-lg flex items-center transition-colors disabled:opacity-30",children:[jsxRuntimeExports.jsx(ArrowUp,{size:14,className:"mr-3 text-emerald-500"})," Merge with Previous"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{Pn(),qe(!1)},disabled:Ce>=Pe.length-1,className:"w-full text-left px-3 py-2.5 text-xs font-medium text-zinc-300 hover:text-white hover:bg-white/5 rounded-lg flex items-center transition-colors disabled:opacity-30",children:[jsxRuntimeExports.jsx(ArrowDown,{size:14,className:"mr-3 text-rose-500"})," Merge with Next"]}),jsxRuntimeExports.jsx("div",{className:"h-px bg-white/5 my-1.5 mx-2"}),jsxRuntimeExports.jsxs("button",{onClick:()=>{on(),qe(!1)},disabled:Re===0,className:"w-full text-left px-3 py-2.5 text-xs font-medium text-zinc-300 hover:text-white hover:bg-white/5 rounded-lg flex items-center transition-colors disabled:opacity-30",children:[jsxRuntimeExports.jsx(Scissors,{size:14,className:"mr-3 text-blue-500"})," Split at Page ",Re+1]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 md:gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 hidden sm:flex",children:[jsxRuntimeExports.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${Fe==="saving"?"bg-amber-500 animate-pulse":Fe==="saved"?"bg-emerald-500":"bg-zinc-700"}`}),jsxRuntimeExports.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-zinc-500 w-16 text-right",children:Fe==="saving"?"Syncing...":Fe==="saved"?"Synced":"Ready"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center bg-zinc-900/50 rounded-lg p-1 border border-white/5",children:[jsxRuntimeExports.jsx(Tooltip,{content:"Manual Save",children:jsxRuntimeExports.jsx("button",{onClick:_n,className:"p-2 rounded-md text-zinc-400 hover:text-white hover:bg-zinc-800 transition-colors",children:jsxRuntimeExports.jsx(Save,{size:16})})}),jsxRuntimeExports.jsx("div",{className:"w-px h-4 bg-zinc-800 mx-1"}),jsxRuntimeExports.jsx(Tooltip,{content:"Export",children:jsxRuntimeExports.jsx("button",{onClick:()=>tn(!Ze),className:`p-2 rounded-md transition-colors ${Ze?"bg-zinc-800 text-white":"text-zinc-400 hover:text-white hover:bg-zinc-800"}`,children:jsxRuntimeExports.jsx(Download,{size:16})})}),jsxRuntimeExports.jsx("div",{className:"w-px h-4 bg-zinc-800 mx-1"}),jsxRuntimeExports.jsx(Tooltip,{content:"Exit",children:jsxRuntimeExports.jsx("button",{onClick:yn,className:"p-2 rounded-md text-zinc-400 hover:text-white hover:bg-zinc-800 transition-colors",children:jsxRuntimeExports.jsx(X,{size:16})})})]}),jsxRuntimeExports.jsxs("button",{onClick:mn,className:"hidden md:flex items-center bg-zinc-100 hover:bg-white text-zinc-950 px-5 h-10 rounded-lg text-xs font-black tracking-wide shadow-lg shadow-white/5 transition-all hover:scale-105 active:scale-95",children:[jsxRuntimeExports.jsx(CircleCheckBig,{size:14,className:"mr-2"})," FINISH"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"h-14 bg-zinc-950 border-b border-white/5 flex items-center px-6 z-30 shrink-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex bg-zinc-900/50 rounded-lg p-0.5 border border-white/5",children:[jsxRuntimeExports.jsx(Tooltip,{content:"Undo (Ctrl+Z)",children:jsxRuntimeExports.jsx("button",{onClick:fn,disabled:vn.past.length===0,className:"w-8 h-8 flex items-center justify-center rounded-md text-zinc-400 hover:text-white hover:bg-zinc-800 disabled:opacity-20 transition-colors",children:jsxRuntimeExports.jsx(Undo,{size:14})})}),jsxRuntimeExports.jsx("div",{className:"w-px h-4 bg-zinc-800 my-auto mx-0.5"}),jsxRuntimeExports.jsx(Tooltip,{content:"Redo (Ctrl+Shift+Z)",children:jsxRuntimeExports.jsx("button",{onClick:gn,disabled:vn.future.length===0,className:"w-8 h-8 flex items-center justify-center rounded-md text-zinc-400 hover:text-white hover:bg-zinc-800 disabled:opacity-20 transition-colors",children:jsxRuntimeExports.jsx(Redo,{size:14})})})]}),jsxRuntimeExports.jsx(Tooltip,{content:"Magic Enhance",children:jsxRuntimeExports.jsxs("button",{onClick:()=>Qe(!je),className:`flex items-center gap-2 px-3 h-9 rounded-lg border transition-all ${je?"bg-purple-500/10 border-purple-500/30 text-purple-400":"bg-zinc-900/50 border-white/5 text-zinc-400 hover:text-white hover:bg-zinc-800"}`,children:[jsxRuntimeExports.jsx(WandSparkles,{size:14,className:cn?"animate-spin":""}),jsxRuntimeExports.jsx("span",{className:"text-xs font-bold hidden xl:block",children:"Enhance"})]})})]}),jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsxs("div",{className:"flex bg-zinc-900/50 p-1 rounded-xl border border-white/5",children:[jsxRuntimeExports.jsx(Tooltip,{content:"Selection Tool (Ctrl+M)",children:jsxRuntimeExports.jsx("button",{onClick:()=>{const Ki=Me==="select"?"general":"select";Ve(Ki),Ki!=="select"&&zn.setSelectedIds([])},className:`relative w-12 h-9 rounded-lg flex items-center justify-center transition-all duration-150 ${Me==="select"?"bg-zinc-800 shadow-md ring-1 ring-white/10":"hover:bg-zinc-800/50 opacity-60"}`,children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx(MousePointer2,{size:14,className:Me==="select"?"text-white":"text-zinc-500"}),jsxRuntimeExports.jsx("span",{className:"text-[7px] font-black text-zinc-600 uppercase mt-0.5",children:"M"})]})})}),jsxRuntimeExports.jsx("div",{className:"w-px h-6 bg-zinc-800 my-auto mx-1"}),["content","communicative","organisation","language"].map((Ki,oi)=>{const Kn=Me===Ki,di=MODE_COLORS[Ki];return jsxRuntimeExports.jsxs("button",{onClick:()=>Ve(Kn?"general":Ki),className:`relative px-4 h-9 rounded-lg flex items-center justify-center transition-all duration-150 ${Kn?"bg-zinc-800 shadow-md ring-1 ring-white/10":"hover:bg-zinc-800/50 opacity-60"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx("span",{className:`text-[11px] font-black transition-colors ${Kn?"text-white":"text-zinc-500"}`,style:{color:Kn?di:void 0},children:MODE_LABELS[Ki]}),jsxRuntimeExports.jsxs("span",{className:"text-[7px] font-black text-zinc-600 uppercase mt-0.5",children:["F",oi+1]})]}),Kn&&jsxRuntimeExports.jsx("div",{className:"w-1 h-1 rounded-full absolute -bottom-0.5",style:{backgroundColor:di}})]},Ki)}),jsxRuntimeExports.jsx("div",{className:"w-px h-6 bg-zinc-800 my-auto mx-1"}),jsxRuntimeExports.jsx(Tooltip,{content:"Stamper (S)",children:jsxRuntimeExports.jsx("button",{onClick:()=>Ve(Me==="stamper"?"general":"stamper"),className:`relative w-12 h-9 rounded-lg flex items-center justify-center transition-all duration-150 ${Me==="stamper"?"bg-rose-900/30 ring-1 ring-rose-500/50":"hover:bg-zinc-800/50 opacity-60"}`,children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx(Stamp,{size:14,className:Me==="stamper"?"text-rose-500":"text-zinc-500"}),jsxRuntimeExports.jsx("span",{className:"text-[7px] font-black text-zinc-600 uppercase mt-0.5",children:"S"})]})})})]})}),jsxRuntimeExports.jsx("div",{className:"flex-1 flex items-center justify-end"})]}),jsxRuntimeExports.jsxs("main",{className:"flex-1 flex overflow-hidden relative",children:[jsxRuntimeExports.jsxs("div",{className:`${nn?"w-[320px]":"w-0"} bg-zinc-950 border-r border-white/5 flex flex-col z-20 transition-all duration-300 relative shrink-0`,children:[jsxRuntimeExports.jsx("button",{onClick:()=>an(!nn),className:"absolute -right-5 top-6 w-5 h-10 bg-zinc-900 border-y border-r border-zinc-700 rounded-r-lg flex items-center justify-center text-zinc-500 hover:text-white z-50 shadow-lg cursor-pointer hover:w-6 transition-all",children:nn?jsxRuntimeExports.jsx(ChevronLeft,{size:14}):jsxRuntimeExports.jsx(ChevronRight,{size:14})}),jsxRuntimeExports.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden ${nn?"opacity-100":"opacity-0"} transition-opacity duration-200 delay-100`,children:[jsxRuntimeExports.jsxs("div",{className:"px-4 py-5 border-b border-white/5 bg-zinc-900/50 shrink-0",children:[jsxRuntimeExports.jsxs("span",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-widest flex items-center gap-2",children:[jsxRuntimeExports.jsx(Grid3x3,{size:12})," Task Instructions"]}),jsxRuntimeExports.jsx("div",{className:"flex items-baseline gap-1 mt-1",children:jsxRuntimeExports.jsx("span",{className:"text-xl font-black text-zinc-400",children:"Assignment"})})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar bg-zinc-950",children:jsxRuntimeExports.jsx("div",{className:"prose prose-sm prose-invert prose-zinc max-w-none text-zinc-400",children:Ee?jsxRuntimeExports.jsx(Markdown,{children:Ee}):jsxRuntimeExports.jsx("span",{className:"text-xs text-zinc-600 italic flex items-center justify-center h-32 border border-dashed border-zinc-800 rounded-xl",children:"No task description provided."})})})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 relative flex flex-col min-w-0",children:[jsxRuntimeExports.jsx(AnnotationCanvas,{currentStudent:Be,currentImageIndex:Re,displayImageSrc:Ji,zoom:zn.zoom,interactionMode:zn.interactionMode,dragSnapshot:zn.dragSnapshot,creationDragCurrent:zn.creationDragCurrent,editingAnnotationId:zn.editingAnnotationId,newAnnotationId:zn.newAnnotationId,selectedIds:zn.selectedIds,selectionBox:zn.selectionBox,canvasRef:zn.canvasRef,scrollContainerRef:zn.scrollContainerRef,getRelativePoint:zn.getRelativePoint,handleMouseDown:zn.handleMouseDown,handleMouseMove:zn.handleMouseMove,handleMouseUp:zn.handleMouseUp,updateAnnotation:xn,deleteAnnotation:Ge,setEditingAnnotationId:zn.setEditingAnnotationId,setNewAnnotationId:zn.setNewAnnotationId,enhanceMode:je,processedCache:sn,activeMode:Me,sessionId:t,graderName:r}),jsxRuntimeExports.jsx("footer",{className:"absolute bottom-6 left-0 right-0 z-[60] pointer-events-none flex justify-center",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 pointer-events-auto bg-zinc-950/90 backdrop-blur-xl border border-white/10 rounded-2xl p-2 shadow-2xl ring-1 ring-black/50",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 px-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>Je(-1),disabled:Ce===0,className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-zinc-800 text-zinc-400 hover:text-white disabled:opacity-20 transition-all active:scale-95",children:[jsxRuntimeExports.jsx(User,{size:16,className:"mr-1"}),jsxRuntimeExports.jsx(ChevronLeft,{size:12})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center w-24",children:[jsxRuntimeExports.jsx("span",{className:"text-[9px] font-bold text-zinc-600 uppercase",children:"Student"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[ni?jsxRuntimeExports.jsx("form",{onSubmit:Di,children:jsxRuntimeExports.jsx("input",{ref:Yn,type:"text",className:"w-8 bg-zinc-800 border border-zinc-700 rounded text-xs font-black text-center text-white outline-none focus:ring-1 focus:ring-rose-500",value:pi,onChange:Ki=>$n(Ki.target.value),onBlur:()=>Di()})}):jsxRuntimeExports.jsx("span",{onClick:ai,className:"text-xs font-black text-zinc-200 cursor-pointer hover:text-white hover:underline underline-offset-2",children:Ce+1}),jsxRuntimeExports.jsxs("span",{className:"text-xs font-black text-zinc-200",children:[jsxRuntimeExports.jsx("span",{className:"text-zinc-600 font-medium mx-0.5",children:"of"})," ",Pe.length]})]})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>Je(1),disabled:Ce===Pe.length-1,className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-zinc-800 text-zinc-400 hover:text-white disabled:opacity-20 transition-all active:scale-95",children:[jsxRuntimeExports.jsx(ChevronRight,{size:12}),jsxRuntimeExports.jsx(User,{size:16,className:"ml-1"})]})]}),jsxRuntimeExports.jsx("div",{className:"w-px h-8 bg-zinc-800"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 px-2",children:[jsxRuntimeExports.jsx("button",{onClick:hn,className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-zinc-800 text-zinc-400 hover:text-white disabled:opacity-20 transition-all active:scale-95",children:jsxRuntimeExports.jsx(ArrowUp,{size:16})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center w-16",children:[jsxRuntimeExports.jsx("span",{className:"text-[9px] font-bold text-zinc-600 uppercase",children:"Page"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-black text-zinc-200",children:Re+1}),jsxRuntimeExports.jsxs("span",{className:"text-xs font-black text-zinc-200",children:[jsxRuntimeExports.jsx("span",{className:"text-zinc-600 font-medium mx-0.5",children:"of"})," ",(Be==null?void 0:Be.images.length)||0]})]})]}),jsxRuntimeExports.jsx("button",{onClick:St,className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-zinc-800 text-zinc-400 hover:text-white disabled:opacity-20 transition-all active:scale-95",children:jsxRuntimeExports.jsx(ArrowDown,{size:16})})]}),jsxRuntimeExports.jsx("div",{className:"w-px h-8 bg-zinc-800"}),jsxRuntimeExports.jsxs("div",{className:"px-4 flex items-center gap-2.5",children:[jsxRuntimeExports.jsx(Clock,{size:16,className:"text-zinc-600 shrink-0"}),jsxRuntimeExports.jsxs("span",{className:"font-mono text-sm font-bold text-zinc-300 tabular-nums leading-none translate-y-[0.5px]",children:[Math.floor(An/60),":",(An%60).toString().padStart(2,"0")]})]}),jsxRuntimeExports.jsx("div",{className:"w-px h-8 bg-zinc-800"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 px-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>zn.setZoom(Ki=>Math.max(.5,Ki-.1)),className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-zinc-800 text-zinc-400 hover:text-white transition-all active:scale-95",children:jsxRuntimeExports.jsx(ZoomOut,{size:16})}),jsxRuntimeExports.jsxs("span",{className:"text-xs font-bold text-zinc-400 w-10 text-center",children:[Math.round(zn.zoom*100),"%"]}),jsxRuntimeExports.jsx("button",{onClick:()=>zn.setZoom(Ki=>Math.min(2,Ki+.1)),className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-zinc-800 text-zinc-400 hover:text-white transition-all active:scale-95",children:jsxRuntimeExports.jsx(ZoomIn,{size:16})})]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"w-[320px] bg-zinc-950 border-l border-white/5 flex flex-col z-20 shadow-2xl shrink-0",children:[jsxRuntimeExports.jsx("div",{className:"px-4 py-5 border-b border-white/5 bg-zinc-900/50",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("span",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-widest",children:"Grand Total"}),jsxRuntimeExports.jsxs("div",{className:"flex items-baseline gap-1 mt-1",children:[jsxRuntimeExports.jsx("span",{className:`text-4xl font-black tabular-nums transition-colors duration-300 ${ki>=10?"text-emerald-400":"text-rose-400"}`,children:ki}),jsxRuntimeExports.jsx("span",{className:"text-xs font-bold text-zinc-600",children:"/20"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-end text-right",children:[jsxRuntimeExports.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",style:{color:na},children:MODE_LABELS[Me]}),jsxRuntimeExports.jsxs("div",{className:"text-xl font-black text-white mt-1",children:[ea?Be==null?void 0:Be.scores[Me]:"-",jsxRuntimeExports.jsx("span",{className:"text-xs font-bold text-zinc-600 ml-0.5",children:"/5"})]})]})]})}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto p-2.5 custom-scrollbar space-y-1.5",children:Pi.length>0?Pi.map(Ki=>{const oi=ea&&(Be==null?void 0:Be.scores[Me])===Ki.score;return jsxRuntimeExports.jsxs("div",{onClick:()=>ea&&$e(Me,Ki.score),className:`relative p-2.5 rounded-lg border transition-all duration-150 cursor-pointer group
                        ${oi?"bg-zinc-900 border-transparent ring-1 ring-inset shadow-md":"bg-transparent border-white/5 hover:bg-zinc-900/40 hover:border-white/10"}
                    `,style:{"--tw-ring-color":na},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2 relative z-10",children:[jsxRuntimeExports.jsx("div",{className:`w-4 h-4 rounded-md flex items-center justify-center text-[9px] font-black shrink-0 transition-colors ${oi?"text-white shadow-sm":"bg-zinc-900 text-zinc-600 group-hover:bg-zinc-800"}`,style:{backgroundColor:oi?na:void 0},children:Ki.score}),jsxRuntimeExports.jsx("div",{className:`text-[11px] leading-[1.3] font-medium transition-colors ${oi?"text-zinc-200":"text-zinc-500 group-hover:text-zinc-400"}`,children:jsxRuntimeExports.jsx("div",{className:"prose-rubric",children:jsxRuntimeExports.jsx(Markdown,{children:Ki.desc})})})]}),oi&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-transparent to-white/[0.01] rounded-lg pointer-events-none"})]},Ki.score)}):jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center justify-center h-24 text-zinc-600 italic text-center px-4",children:Me==="select"?jsxRuntimeExports.jsx("div",{className:"text-[10px]",children:"Batch editing selected items"}):Me==="stamper"?jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-2",children:[jsxRuntimeExports.jsx(Stamp,{size:24,className:"text-rose-500 opacity-40"}),jsxRuntimeExports.jsx("span",{className:"text-[11px] font-black text-zinc-500 uppercase tracking-widest",children:"Stamper Mode"}),jsxRuntimeExports.jsx("p",{className:"text-[10px] text-zinc-600 px-4",children:"Click anywhere on the script to stamp the current mark breakdown."})]}),jsxRuntimeExports.jsxs("div",{className:"bg-zinc-900/50 p-3 rounded-xl border border-zinc-800 text-left",children:[jsxRuntimeExports.jsx("div",{className:"text-[9px] font-black text-zinc-500 uppercase mb-2 border-b border-zinc-800 pb-1",children:"Current Stamp"}),jsxRuntimeExports.jsxs("div",{className:"space-y-1 font-mono text-[10px] text-zinc-400",children:[jsxRuntimeExports.jsxs("div",{children:["C:  ",Be==null?void 0:Be.scores.content,"/5"]}),jsxRuntimeExports.jsxs("div",{children:["CA: ",Be==null?void 0:Be.scores.communicative,"/5"]}),jsxRuntimeExports.jsxs("div",{children:["O:  ",Be==null?void 0:Be.scores.organisation,"/5"]}),jsxRuntimeExports.jsxs("div",{children:["L:  ",Be==null?void 0:Be.scores.language,"/5"]}),jsxRuntimeExports.jsxs("div",{className:"pt-1 text-zinc-200 font-bold border-t border-zinc-800 mt-1",children:["Total: ",ki,"/20"]})]})]})]}):jsxRuntimeExports.jsx("div",{className:"text-[10px]",children:"Select a category to grade"})})}),jsxRuntimeExports.jsxs("div",{className:"p-3 border-t border-white/5 bg-zinc-900/30",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5",children:[jsxRuntimeExports.jsx(MessageSquare,{size:10,className:"text-zinc-500"}),jsxRuntimeExports.jsx("span",{className:"text-[9px] font-black text-zinc-500 uppercase tracking-widest",children:"Feedback"})]}),jsxRuntimeExports.jsx("textarea",{className:"w-full h-24 bg-zinc-950/50 border border-white/5 rounded-lg p-2 text-[11px] text-zinc-300 resize-none focus:ring-1 focus:bg-zinc-950 transition-all placeholder-zinc-800 leading-normal custom-scrollbar disabled:opacity-20 disabled:cursor-not-allowed",style:{"--tw-ring-color":`${na}40`},placeholder:ea?`Comments for ${MODE_LABELS[Me]}`:"Select category...",value:ea&&(Be==null?void 0:Be.justifications[Me])||"",disabled:!ea,onChange:Ki=>ea&&rn(Me,Ki.target.value)})]})]})]}),Ze&&jsxRuntimeExports.jsxs("div",{className:"fixed z-[100] top-16 right-6 bg-zinc-900/95 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl p-1.5 w-72 flex flex-col animate-scale-in origin-top-right ring-1 ring-black/50",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>{wn(),tn(!1)},className:"w-full text-left px-4 py-3 text-xs font-bold text-zinc-300 hover:text-white hover:bg-white/10 rounded-xl flex items-center gap-3 transition-colors",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-500/10 flex items-center justify-center text-emerald-500 border border-emerald-500/20",children:jsxRuntimeExports.jsx(Image$1,{size:16})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("span",{children:"Export Page + Annotations"}),jsxRuntimeExports.jsx("span",{className:"text-[9px] font-medium text-zinc-600",children:"Current page with script and grading"})]})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{On(),tn(!1)},className:"w-full text-left px-4 py-3 text-xs font-bold text-zinc-300 hover:text-white hover:bg-white/10 rounded-xl flex items-center gap-3 transition-colors",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-lg bg-amber-500/10 flex items-center justify-center text-amber-500 border border-amber-500/20",children:jsxRuntimeExports.jsx(FilePen,{size:16})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("span",{children:"Export Annotations Only"}),jsxRuntimeExports.jsx("span",{className:"text-[9px] font-medium text-zinc-600",children:"Grading only on clean background"})]})]}),jsxRuntimeExports.jsx("div",{className:"h-px bg-white/5 my-1.5 mx-2"}),jsxRuntimeExports.jsxs("button",{onClick:()=>{jn(),tn(!1)},className:"w-full text-left px-4 py-3 text-xs font-bold text-zinc-300 hover:text-white hover:bg-white/10 rounded-xl flex items-center gap-3 transition-colors",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-lg bg-pink-500/10 flex items-center justify-center text-pink-500 border border-pink-500/20",children:jsxRuntimeExports.jsx(Layers,{size:16})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("span",{children:"Export All"}),jsxRuntimeExports.jsx("span",{className:"text-[9px] font-medium text-zinc-600",children:"Full script with all grading baked in"})]})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{Wn(),tn(!1)},className:"w-full text-left px-4 py-3 text-xs font-bold text-zinc-300 hover:text-white hover:bg-white/10 rounded-xl flex items-center gap-3 transition-colors",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-lg bg-rose-500/10 flex items-center justify-center text-rose-500 border border-rose-500/20",children:jsxRuntimeExports.jsx(FileStack,{size:16})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("span",{children:"Export All Annotations"}),jsxRuntimeExports.jsx("span",{className:"text-[9px] font-medium text-zinc-600",children:"Comprehensive report of grading only"})]})]})]})]})},ReportScreen=({sessionName:t,students:e,level:r,part:xe,classStats:Se,reportSearch:Ee,onReportSearchChange:Pe,onDownloadGradebook:Ce,onPrintBatchFeedback:Re,onBackToGrading:Be,onFinishSession:Me})=>jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-zinc-950 text-zinc-200 p-8 font-sans",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto space-y-8 animate-fade-in-up",children:[jsxRuntimeExports.jsxs("header",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-black text-white tracking-tight mb-2",children:"Session Report"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 text-sm font-bold text-zinc-500",children:[jsxRuntimeExports.jsx("span",{className:"bg-zinc-900 px-3 py-1 rounded-full border border-zinc-800 text-zinc-400",children:t}),jsxRuntimeExports.jsxs("span",{className:"text-zinc-600",children:[r,"  Part ",xe]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:Be,icon:jsxRuntimeExports.jsx(ChevronLeft,{size:16}),children:"Back"}),jsxRuntimeExports.jsx(Button,{variant:"primary",onClick:Me,icon:jsxRuntimeExports.jsx(CircleCheckBig,{size:16}),children:"Finish"})]})]}),Se&&jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Se.categories.map(Ve=>jsxRuntimeExports.jsxs("div",{className:"bg-zinc-900/50 border border-zinc-800 p-5 rounded-2xl relative overflow-hidden group",children:[jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsx("p",{className:"text-[10px] font-black uppercase text-zinc-500 mb-1",children:Ve.label}),jsxRuntimeExports.jsx("p",{className:"text-3xl font-black text-white",children:Ve.value})]}),jsxRuntimeExports.jsx("div",{className:"mt-3 h-1 w-full bg-zinc-800 rounded-full",children:jsxRuntimeExports.jsx("div",{className:"h-full rounded-full",style:{width:`${parseFloat(Ve.value)/5*100}%`,backgroundColor:Ve.color}})})]},Ve.key))}),jsxRuntimeExports.jsxs("div",{className:"bg-zinc-900/50 border border-zinc-800 rounded-3xl overflow-hidden shadow-xl",children:[jsxRuntimeExports.jsxs("div",{className:"p-6 border-b border-zinc-800 flex items-center justify-between",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-black text-white",children:"Class Performance"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-500"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search...",value:Ee,onChange:Ve=>Pe(Ve.target.value),className:"bg-zinc-950 border border-zinc-800 text-zinc-300 text-xs font-bold rounded-xl pl-9 pr-4 py-2.5 outline-none w-48"})]}),jsxRuntimeExports.jsx(Button,{variant:"secondary",size:"sm",onClick:()=>Ce(e),icon:jsxRuntimeExports.jsx(Download,{size:14}),children:"CSV"}),jsxRuntimeExports.jsx(Button,{variant:"secondary",size:"sm",onClick:()=>Re(e),icon:jsxRuntimeExports.jsx(FileText,{size:14}),children:"PDF"})]})]}),jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full text-left border-collapse",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:"border-b border-zinc-800 bg-zinc-900/50 text-[10px] font-black text-zinc-500 uppercase tracking-widest",children:[jsxRuntimeExports.jsx("th",{className:"px-6 py-4",children:"Student"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-4 text-center",children:"Score"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-4 text-center",children:"Content"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-4 text-center",children:"Comm."}),jsxRuntimeExports.jsx("th",{className:"px-6 py-4 text-center",children:"Org."}),jsxRuntimeExports.jsx("th",{className:"px-6 py-4 text-center",children:"Lang."}),jsxRuntimeExports.jsx("th",{className:"px-6 py-4 text-right",children:"Time"})]})}),jsxRuntimeExports.jsx("tbody",{className:"divide-y divide-zinc-800/50",children:e.filter(Ve=>Ve.name.toLowerCase().includes(Ee.toLowerCase())).map(Ve=>{const Fe=Number(Ve.scores.content)+Number(Ve.scores.communicative)+Number(Ve.scores.organisation)+Number(Ve.scores.language);return jsxRuntimeExports.jsxs("tr",{className:"group hover:bg-zinc-800/30 transition-colors",children:[jsxRuntimeExports.jsx("td",{className:"px-6 py-4",children:jsxRuntimeExports.jsx("span",{className:"font-bold text-sm text-zinc-300",children:Ve.name})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 text-center",children:jsxRuntimeExports.jsx("span",{className:`inline-flex items-center justify-center h-7 px-3 rounded-lg text-xs font-black border ${Fe>=10?"bg-emerald-500/10 text-emerald-500 border-emerald-500/20":"bg-rose-500/10 text-rose-500 border-rose-500/20"}`,children:Fe})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 text-center font-mono text-xs text-zinc-400",children:Ve.scores.content}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 text-center font-mono text-xs text-zinc-400",children:Ve.scores.communicative}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 text-center font-mono text-xs text-zinc-400",children:Ve.scores.organisation}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 text-center font-mono text-xs text-zinc-400",children:Ve.scores.language}),jsxRuntimeExports.jsxs("td",{className:"px-6 py-4 text-right font-mono text-xs text-zinc-500",children:[Math.floor(Ve.timeSpent/60),"m ",Ve.timeSpent%60,"s"]})]},Ve.id)})})]})})]})]})});function App(){const[t,e]=reactExports.useState("setup"),[r,xe]=reactExports.useState([]),[Se,Ee]=reactExports.useState(!1),[Pe,Ce]=reactExports.useState(""),[Re,Be]=reactExports.useState(null),[Me,Ve]=reactExports.useState(!1),[Fe,Ie]=reactExports.useState(!0),[qe,Ye]=reactExports.useState(0),Xe=reactExports.useRef(null),[je,Qe]=reactExports.useState(!1),[sn,cn]=reactExports.useState(!1),[nn,an]=reactExports.useState(""),[Ze,tn]=reactExports.useState("Welcome back"),We=useGradingSession();reactExports.useEffect(()=>{const Pn=new Date().getHours();Pn<12?tn("Good morning"):Pn<18?tn("Good afternoon"):tn("Good evening")},[]),reactExports.useEffect(()=>{t==="setup"&&storage.getAllSessions().then(xe)},[t]);const An=()=>{Ye(Pn=>Pn+1),Xe.current&&clearTimeout(Xe.current),Xe.current=setTimeout(()=>Ye(0),500)};reactExports.useEffect(()=>{qe===3&&(Qe(Pn=>!Pn),Ye(0))},[qe]),reactExports.useEffect(()=>{if(t==="grading"||t==="report"||t==="task"&&We.students.length>0)return We.saveTimeoutRef.current&&clearTimeout(We.saveTimeoutRef.current),We.setAutoSaveStatus("saving"),We.saveTimeoutRef.current=setTimeout(We.saveToStorage,2e3),()=>clearTimeout(We.saveTimeoutRef.current)},[We.saveToStorage,t,We.students.length]);const Je=Pn=>{We.resumeSession(Pn),e("grading")},St=async(Pn,pn)=>{pn.stopPropagation(),Be(Pn)},hn=async()=>{Re&&(await storage.deleteSession(Re),xe(Pn=>Pn.filter(pn=>pn.id!==Re)),Be(null))},_n=async(Pn,pn)=>{pn.stopPropagation();const on=Date.now().toString(),xn={...Pn,id:on,name:`${Pn.name} (Copy)`,createdAt:new Date().toISOString()};await storage.saveSession(xn),xe(Ge=>[xn,...Ge])},yn=(Pn,pn)=>{pn.stopPropagation();try{const on=JSON.stringify(Pn),xn=new Blob([on],{type:"application/json"}),Ge=URL.createObjectURL(xn),Oe=document.createElement("a");Oe.href=Ge,Oe.download=`${Pn.name.replace(/\s+/g,"_")}_Backup.rambutan`,document.body.appendChild(Oe),Oe.click(),document.body.removeChild(Oe),URL.revokeObjectURL(Ge)}catch{alert("Failed to export session.")}},mn=Pn=>{var xn;const pn=(xn=Pn.target.files)==null?void 0:xn[0];if(!pn)return;const on=new FileReader;on.onload=async Ge=>{var Oe;try{const $e=(Oe=Ge.target)==null?void 0:Oe.result,rn=JSON.parse($e);await storage.saveSession(rn),xe(fn=>{const gn=fn.filter(vn=>vn.id!==rn.id);return[rn,...gn]}),alert(`Successfully imported "${rn.name}"`)}catch{alert("Failed to import session.")}},on.readAsText(pn),Pn.target.value=""};reactExports.useEffect(()=>{We.currentStudent&&an(We.currentStudent.name)},[We.currentStudentIndex,We.students]),reactExports.useEffect(()=>{let Pn;return t==="grading"&&(Pn=setInterval(()=>{We.setCurrentStudentTime(pn=>pn+1)},1e3)),()=>clearInterval(Pn)},[t,We.setCurrentStudentTime]),reactExports.useEffect(()=>{const Pn=pn=>{if(t!=="grading")return;const on=pn.target;on.tagName==="INPUT"||on.tagName==="TEXTAREA"||on.isContentEditable||(pn.key==="ArrowRight"&&(pn.preventDefault(),We.handleUniversalNext()),pn.key==="ArrowLeft"&&(pn.preventDefault(),We.handleUniversalPrev()))};return window.addEventListener("keydown",Pn),()=>window.removeEventListener("keydown",Pn)},[t,We]);const Sn=async()=>{We.sessionId&&await We.saveToStorage(),e("setup"),We.setStudents([]),We.setSessionName(""),We.setGraderName(""),We.setTaskDescription(""),We.setHistory({}),We.setCurrentStudentIndex(0),We.setCurrentImageIndex(0),We.setSessionId(null),We.setCreatedAt(null)};return t==="setup"?jsxRuntimeExports.jsx(SetupScreen,{greeting:Ze,onNewSession:()=>e("task"),sessionName:We.sessionName,onSessionNameChange:We.setSessionName,graderName:We.graderName,onGraderNameChange:We.setGraderName,level:We.level,onLevelChange:We.setLevel,part:We.part,onPartChange:We.setPart,savedSessions:r,onResumeSession:Je,onDeleteSession:St,sessionToDelete:Re,onCancelDeleteSession:()=>Be(null),onConfirmDeleteSession:hn,onDuplicateSession:_n,onExportSession:yn,onImportSession:mn,devModeUnlocked:je,onLogoClick:An,showStorageManager:Se,onShowStorageManager:Ee,onClearCache:async()=>{await storage.clearAllProcessedImages(),We.setProcessedCache({})}}):t==="task"?jsxRuntimeExports.jsx(TaskScreen,{sessionName:We.sessionName,taskDescription:We.taskDescription,onTaskDescriptionChange:We.setTaskDescription,students:We.students,isTaskLoading:We.isTaskLoading,isScriptLoading:We.isScriptLoading,onTaskUpload:We.handleTaskUpload,onScriptUpload:We.handleScriptUpload,onStartGrading:()=>{We.students.length>0&&(We.ensureSessionId(),e("grading"))},onBack:()=>e("setup")}):t==="grading"?jsxRuntimeExports.jsx(GradingScreen,{sessionId:We.sessionId,sessionName:We.sessionName,graderName:We.graderName,level:We.level,part:We.part,taskDescription:We.taskDescription,students:We.students,currentStudentIndex:We.currentStudentIndex,currentImageIndex:We.currentImageIndex,currentStudent:We.currentStudent,activeMode:We.activeMode,setActiveMode:We.setActiveMode,autoSaveStatus:We.autoSaveStatus,showStudentMenu:Me,setShowStudentMenu:Ve,tempName:nn,setTempName:an,enhanceMode:We.enhanceMode,setEnhanceMode:We.setEnhanceMode,processedCache:We.processedCache,isProcessingImg:We.isProcessingImg,isTaskOpen:Fe,setIsTaskOpen:Ie,showExportMenu:sn,setShowExportMenu:cn,isExporting:We.isExporting,currentStudentTime:We.currentStudentTime,changeStudent:We.changeStudent,handleUniversalNext:We.handleUniversalNext,handleUniversalPrev:We.handleUniversalPrev,handleManualSave:We.saveToStorage,confirmExit:Sn,finishSession:()=>e("report"),saveStudentName:We.saveStudentName,mergeNextStudent:We.mergeNextStudent,mergeWithPrevious:We.mergeWithPrevious,splitStudentAtPage:We.splitStudentAtPage,updateAnnotation:We.updateAnnotation,deleteAnnotation:We.deleteAnnotation,deleteAnnotations:We.deleteAnnotations,updateScore:We.updateScore,updateJustification:We.updateJustification,performUndo:We.performUndo,performRedo:We.performRedo,currentHistory:We.currentHistory,handleExportCurrentPage:We.handleExportCurrentPage,handleExportAll:We.handleExportAll,handleExportCurrentAnnotations:We.handleExportCurrentAnnotations,handleExportAllAnnotations:We.handleExportAllAnnotations,handleDownloadGradebook:Pn=>We.handleDownloadGradebook(Pn),handlePrintBatchFeedback:Pn=>We.handlePrintBatchFeedback(Pn),setStudents:We.setStudents,recordHistory:We.recordHistory,historyRefs:We.historyRefs,setHistory:We.setHistory,addAnnotation:We.addAnnotation,handleLogoClick:An}):t==="report"?jsxRuntimeExports.jsx(ReportScreen,{sessionName:We.sessionName,students:We.students,level:We.level,part:We.part,classStats:We.classStats,reportSearch:Pe,onReportSearchChange:Ce,onDownloadGradebook:We.handleDownloadGradebook,onPrintBatchFeedback:We.handlePrintBatchFeedback,onBackToGrading:()=>e("grading"),onFinishSession:()=>{e("setup"),We.setStudents([])}}):null}const rootElement=document.getElementById("root");rootElement&&clientExports.createRoot(rootElement).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));export{_typeof as _,commonjsGlobal as c,getDefaultExportFromCjs as g};
